<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>人生は短くて使える時間も限られてる。</title>
    <link>https://ziwon.github.io/</link>
    <description>Recent content on 人生は短くて使える時間も限られてる。</description>
    <generator>Hugo - gohugo.io</generator>
    <language>en</language>
    <contact>yngpil.yoon@gmail.com</contact>
    <copyright><a href="https://github.com/ziwon">Youngpil Yoon</a></copyright>
    
        <atom:link href="https://ziwon.github.io/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>[번역] 고성능 Go Workshop</title>
      <link>https://ziwon.github.io/post/high-performance-go-workshop/</link>
      <pubDate>Tue, 03 Sep 2019 20:07:00 +0900</pubDate>
      <author>Aron Yoon</author>
      <guid>https://ziwon.github.io/post/high-performance-go-workshop/</guid>
      <description></description>
      
      <content>

&lt;blockquote&gt;
&lt;p&gt;원글은 &lt;a href=&#34;https://dave.cheney.net/high-performance-go-workshop/dotgo-paris.html&#34; target=&#34;_blank&#34;&gt;High Performance Go Workshop&lt;/a&gt;입니다. 학습 차원에서 허락없이 번역하였습니다. 저작권 등의 문제가 있을 경우, 이메일로 연락주시길 바랍니다.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&#34;개요&#34;&gt;개요&lt;/h2&gt;

&lt;p&gt;이 워크샵의 목표는 Go 애플리케이션에서 성능 문제를 진단하고 해결하는 데 필요한 도구를 제공하는 것입니다.&lt;/p&gt;

&lt;p&gt;하루 동안 작은 것부터 작업할 것입니다. 벤치마크를 작성하는 방법을 배우고, 작은 코드 조각을 프로파일링하는 등 그런 다음 한걸음 나와 엑스큐션 트레이서, 가비지 콜렉터, 실행 중인 애플리케이션 트레이싱에 대해 얘기하고자 합니다. 남는 시간에 질문을 하며 자신의 코드로 실험해 볼 수 있을 것입니다.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;이 프리젠테이션의 최신 버전은 다음 사이트에서 제공됩니다.
&lt;a href=&#34;http://bit.ly/dotgo2019&#34; target=&#34;_blank&#34;&gt;http://bit.ly/dotgo2019&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&#34;일정&#34;&gt;일정&lt;/h2&gt;

&lt;p&gt;다음은 오늘의 개략적인 일정입니다.&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;시작&lt;/th&gt;
&lt;th&gt;설명&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;09:00&lt;/td&gt;
&lt;td&gt;환영 인사 그리고 소개&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;09:30&lt;/td&gt;
&lt;td&gt;벤치마킹&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;10:45&lt;/td&gt;
&lt;td&gt;휴식 (15분)&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;11:00&lt;/td&gt;
&lt;td&gt;성능 측정 그리고 프로파일링&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;12:00&lt;/td&gt;
&lt;td&gt;점심 (90분)&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;13:30&lt;/td&gt;
&lt;td&gt;컴파일러 최적화&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;14:30&lt;/td&gt;
&lt;td&gt;엑스큐션 트레이서&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;15:30&lt;/td&gt;
&lt;td&gt;휴식 (15분)&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;15:45&lt;/td&gt;
&lt;td&gt;메모리 그리고 가비지 콜렉터&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;16:15&lt;/td&gt;
&lt;td&gt;팁과 트릭&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;16:30&lt;/td&gt;
&lt;td&gt;연습&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;16:45&lt;/td&gt;
&lt;td&gt;최종 질문 및 결론&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;17:00&lt;/td&gt;
&lt;td&gt;맺음말&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&#34;환영인사&#34;&gt;환영인사&lt;/h2&gt;

&lt;p&gt;안녕하세요, 환영합니다 🎉&lt;/p&gt;

&lt;p&gt;이 워크샵은 Go 애플리케이션에서 성능 문제를 진단하고 해결하는 데 필요한 도구를 제공하려는 것이 목적입니다.&lt;/p&gt;

&lt;p&gt;하루 동안 작은 것부터 작업할 것입니다. 벤치마크를 작성하는 방법을 배우고, 작은 코드 조각을 프로파일링하는 등 그런 다음 한걸음 나와 엑스큐션 트레이서, 가비지 콜렉터, 실행 중인 애플리케이션 트레이싱에 대해 얘기하고자 합니다. 남는 시간에 질문을 하며 자신의 코드로 실험해 볼 수 있을 것입니다.&lt;/p&gt;

&lt;h3 id=&#34;강사&#34;&gt;강사&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;Dave Cheney dave@cheney.net&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;라이센스-및-내용물&#34;&gt;라이센스 및 내용물&lt;/h2&gt;

&lt;p&gt;이 워크숍은 &lt;a href=&#34;https://twitter.com/davecheney&#34; target=&#34;_blank&#34;&gt;데이브 체니(Dave Cheney)&lt;/a&gt;와 &lt;a href=&#34;https://twitter.com/francesc&#34; target=&#34;_blank&#34;&gt;프란체스코 캄포이(Francesc Campoy)&lt;/a&gt;의 합작품입니다.&lt;/p&gt;

&lt;p&gt;이 프레젠테이션은 &lt;a href=&#34;https://creativecommons.org/licenses/by-sa/4.0/&#34; target=&#34;_blank&#34;&gt;Creative Commons At Attion-ShareAlike 4.0 International&lt;/a&gt; 라이센스에 따라 라이센스가 부여됩니다.&lt;/p&gt;

&lt;h2 id=&#34;전제-조건&#34;&gt;전제 조건&lt;/h2&gt;

&lt;p&gt;오늘 다운로드해야 할 몇 가지 소프트웨어들이 있습니다.&lt;/p&gt;

&lt;h3 id=&#34;워크샵-저장소&#34;&gt;워크샵 저장소&lt;/h3&gt;

&lt;p&gt;&lt;a href=&#34;https://github.com/davecheney/high-performance-go-workshop&#34; target=&#34;_blank&#34;&gt;https://github.com/davecheney/high-performance-go-workshop&lt;/a&gt;에서 이 문서에 대한 소스와 및 코드 샘플을 다운로드하세요.&lt;/p&gt;

&lt;h3 id=&#34;노트북-전원-공급-장치-등&#34;&gt;노트북, 전원 공급 장치 등&lt;/h3&gt;

&lt;p&gt;워크샵 자료는 Go 1.12를 대상으로 합니다.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://golang.org/dl/&#34; target=&#34;_blank&#34;&gt;Go 1.12 다운로드&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Go 1.13으로 이미 업그레이드했다면 좋습니다. Go 마이너 릴리즈마다 항상 최적화 선택에 따라 약간의 변경 사항이 있는데, 진행하면서 언급하겠습니다.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&#34;graphviz&#34;&gt;Graphviz&lt;/h3&gt;

&lt;p&gt;pprof 섹션에서 그래피즈 도구 모음과 함께 제공되는 &lt;code&gt;dot&lt;/code&gt; 프로그램이 필요합니다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Linux: &lt;code&gt;[sudo] apt-get install graphviz&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;OSX:

&lt;ul&gt;
&lt;li&gt;MacPorts: &lt;code&gt;sudo port install graphviz&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Homebrew: &lt;code&gt;brew install graphviz&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://graphviz.gitlab.io/download/#Windows&#34; target=&#34;_blank&#34;&gt;Windows&lt;/a&gt; (테스트 안됨)&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;구글-크롬&#34;&gt;구글 크롬&lt;/h3&gt;

&lt;p&gt;엑스큐선 트레이서 (execution tracer) 섹션에서 구글 크롬이 필요합니다. Safari, Edge, Firefox 또는 IE 4.01에서는 작동하지 않습니다. 배터리에게 미안하다고 말해주세요. (역자주, 미국식 농담??)&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://www.google.com/chrome/&#34; target=&#34;_blank&#34;&gt;구글 크롬 다운로드&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&#34;프로파일링과-최적화를-위한-자신의-코드&#34;&gt;프로파일링과 최적화를 위한 자신의 코드&lt;/h3&gt;

&lt;p&gt;오늘 남는 시간에는 배운 도구로 실험을 해보는 공개 세션이 될 것입니다.&lt;/p&gt;

&lt;h3 id=&#34;한-가지-더&#34;&gt;한 가지 더&lt;/h3&gt;

&lt;p&gt;이건 강의가 아니라 대화입니다. 질문을 할 수 있는 많은 휴식 시간이 있을 겁니다.&lt;/p&gt;

&lt;p&gt;만약 여러분이 무언가를 이해하지 못하거나, 여러분이 듣고 있는 것이 정확하지 않다고 생각된다면, 질문하세요.&lt;/p&gt;

&lt;h2 id=&#34;1-마이크로-프로세서의-과거-현재-그리고-미래&#34;&gt;1. 마이크로 프로세서의 과거, 현재, 그리고 미래&lt;/h2&gt;

&lt;p&gt;고성능 코드를 작성하는 것에 대한 워크샵입니다. 다른 워크샵에서는 디커플된 설계와 유지보수성에 대해 이야기하지만, 오늘은 성능에 대해 이야기하려고 합니다.&lt;/p&gt;

&lt;p&gt;저는 오늘 컴퓨터의 진화의 역사에 대해 어떻게 생각하는지 그리고 왜 고성능 소프트웨어를 작성하는 것이 중요하다고 생각하는지에 대한 짧은 강의로 시작하고 싶습니다.&lt;/p&gt;

&lt;p&gt;실제로 소프트웨어는 하드웨어에서 실행되므로 고성능 코드 작성에 대해 이야기하려면 먼저 코드를 실행하는 하드웨어에 대해 이야기해야 합니다.&lt;/p&gt;

&lt;h3 id=&#34;1-1-기계적-공감&#34;&gt;1.1 기계적 공감&lt;/h3&gt;

&lt;p&gt;&lt;img src=&#34;https://dave.cheney.net/high-performance-go-workshop/images/image-20180818145606919.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;요즘 대중적으로 사용되는 용어가 있는데, 마틴 톰슨(Martin Thompson)이나 빌 케네디(Bill Kennedy) 같은 사람들이 &amp;ldquo;기계적 공감&amp;rdquo;에 대해 이야기하는 것을 들을 수 있습니다.&lt;/p&gt;

&lt;p&gt;&amp;ldquo;기계적 공감&amp;rdquo;이라는 이름은 세계 3대 포뮬라1 챔피언인 위대한 경주 자동차 드라이버인 재키 스튜어트(Jackie Stewart)로부터 유래했습니다. 그는 최고의 운전자는 기계가 어떻게 작동하는지 충분히 이해하고 있어서 기계와 조화를 이룰 수 있다고 믿었습니다.&lt;/p&gt;

&lt;p&gt;훌륭한 경주용 자동차 드라이버가 되기 위해서는 훌륭한 정비사가 될 필요는 없지만, 자동차 작동 방식에 대한 호기심 이상의 이해가 필요합니다.&lt;/p&gt;

&lt;p&gt;소프트웨어 엔지니어들도 마찬가지라고 생각합니다. 저는 이 자리에 계신 여러분 중 누구도 전문적인 CPU 디자이너가 되지는 않을 것이라고 생각합니다. 하지만 그렇다고 해서 CPU 디자이너들이 직면하고 있는 문제들을 무시할 수는 없습니다.&lt;/p&gt;

&lt;h3 id=&#34;1-2-10의-6승&#34;&gt;1.2 10의 6승&lt;/h3&gt;

&lt;p&gt;다음과 같은 일반적인 인터넷 밈이 있습니다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://dave.cheney.net/high-performance-go-workshop/images/jalopnik.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;물론 말도 안 되는 소리이지만, 이는 컴퓨터 업계에서 얼마나 많은 변화가 일어났는지를 잘 보여주고 있습니다.&lt;/p&gt;

&lt;p&gt;이 자리에 모인 소프트웨어 저자들은 모두 무어의 법칙의 혜택을 받아왔기 때문에, 40년 동안 18개월마다 칩에서 사용할 수 있는 트랜지스터의 수가 두 배로 증가했습니다. 평생동안 툴이 10의 6승 만큼 개선된 산업 분야는 없습니다.&lt;/p&gt;

&lt;p&gt;하지만 이 모든 것이 변하고 있습니다.&lt;/p&gt;

&lt;h3 id=&#34;1-3-컴퓨터는-여전히-더-빨라지고-있나요&#34;&gt;1.3 컴퓨터는 여전히 더 빨라지고 있나요?&lt;/h3&gt;

&lt;p&gt;그래서 근본적인 질문은, 위의 그림에서와 같은 통계와 마주치게 됩니다. 컴퓨터가 여전히 더 빨라지고 있는지 물어봐야 할까요?&lt;/p&gt;

&lt;p&gt;컴퓨터가 여전히 빨라지고 있다면, 코드 성능에 신경 쓸 필요가 없습니다. 조금만 기다리면 하드웨어 제조업체가 성능 문제를 해결할테니깐요.&lt;/p&gt;

&lt;h4 id=&#34;1-3-1-데이터를-살펴봅시다&#34;&gt;1.3.1 데이터를 살펴봅시다.&lt;/h4&gt;

&lt;p&gt;다음은 컴퓨터 아키텍처, 존 해네시(John L. Hennessy)의 정량적 접근(A Quantitative Approach, David A. Patterson)과 같은 교과서에서 볼 수 있는 고전적인 데이터입니다. 이 그래프는 5판에서 가져왔습니다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://community.cadence.com/cfs-file/__key/communityserver-blogs-components-weblogfiles/00-00-00-01-06/2313.processorperf.jpg&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;5판에서 헤네시(Hennessey)와 패터슨(Patterson)은 세 가지 컴퓨팅 성능 시대가 있다고 주장합니다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;첫 번째는 1970년대와 80년대 초였으며, 형성기였습니다. 오늘날 우리가 알고 있는 마이크로프로세서는 실제로 존재하지 않았습니다. 컴퓨터는 개별 트랜지스터나 소형 집적회로에서 제작되었습니다. 재료 과학의 비용, 크기, 그리고 이해의 한계가 제한 요인이었습니다.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;80년대 중반부터 2004년까지 추세선은 명확합니다. 컴퓨터 정수 성능이 매년 평균 52% 향상되었습니다. 컴퓨터 전력은 2년마다 두 배씩 증가했기 때문에 사람들은 트랜지스터 다이의 수를 두 배로 늘려가며 무어의 법칙과 컴퓨터 성능을 혼용하였습니다.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;그리고 나서 우리는 컴퓨터 성능의 세 번째 시대에 도달했습니다. 느려집니다. 총 변화율은 연간 22%입니다.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;이전 그래프는 2012년까지만 올라갔지만, 다행히도 2012년 &lt;a href=&#34;http://preshing.com/20120208/a-look-back-at-single-threaded-cpu-performance/&#34; target=&#34;_blank&#34;&gt;제프 프레싱(Jeff Preshing)&lt;/a&gt;은 &lt;a href=&#34;https://github.com/preshing/analyze-spec-benchmarks&#34; target=&#34;_blank&#34;&gt;Spec 웹 사이트를 스크래치하고 자신만의 그래프를 만드는 도구&lt;/a&gt;를 작성했습니다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://dave.cheney.net/high-performance-go-workshop/images/int_graph.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;이것은 1995년부터 2017년까지 Spec 데이터를 사용한 것과 동일한 그래프입니다.&lt;/p&gt;

&lt;p&gt;2012년 데이터에서 살펴본 단계 변화보다는 단일 코어 성능이 한계에 근접하고 있다고 말씀드리고 싶습니다. 부동 소수점보다 숫자가 더 좋지만, 이 자리에 있는 비즈니스 애플리케이션 라인의 업무를 수행하는 저희에게 있어, 그다지 관련이 없을 것입니다.&lt;/p&gt;

&lt;h4 id=&#34;1-3-2-네-컴퓨터는-여전히-더-빨라지고-있어요-천천히&#34;&gt;1.3.2 네, 컴퓨터는 여전히 더 빨라지고 있어요, 천천히&lt;/h4&gt;

&lt;blockquote&gt;
&lt;p&gt;무어의 법칙 끝에서 가장 먼저 기억해야 할 것은 고든 무어(Gordon Moore)가 내게 얘기한 것입니다. 그는 &amp;ldquo;모든 지수가 끝나고 있다&amp;rdquo;고 말했습니다. — 존 헤네시&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;이것은 헤네시(Hennessy)가 Google Next 18에서 그의 Turing Award 강연에서 인용한 것입니다. 그의 주장은 네, CPU 성능은 여전히 향상되고 있습니다. 그러나 단일 쓰레드 정수(Integer) 성능은 여진히 연간 약 2~3% 개선되고 있습니다. 이런 속도라면 정수의 성능을 두 배로 끌어올리기 위해 20년 간의 복합 성장(Compound Growth)을 해야할 것입니다. 이를 2년마다 성능이 2배씩 증가한 90년대의 잘 나가던(Go-Go) 시대와 비교해야 합니다.&lt;/p&gt;

&lt;p&gt;왜 이런 일이 일어나는 걸까요?&lt;/p&gt;

&lt;h3 id=&#34;1-4-클럭-속도&#34;&gt;1.4 클럭 속도&lt;/h3&gt;

&lt;p&gt;&lt;img src=&#34;https://dave.cheney.net/high-performance-go-workshop/images/stuttering.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;2015년도의 그래프가 이를 잘 보여줍니다. 상단 라인은 트랜지스터 다이의 수를 나타냅니다. 이것은 1970년대 이후로 거의 선형적인 추세선상에서 지속되어 왔습니다. 로그/린 그래프이기 때문에 이 선형 계열은 지수 성장을 나타냅니다.&lt;/p&gt;

&lt;p&gt;하지만, 중간 라인을 보면, 10년 동안 클럭 속도가 증가하지 않았으며 2004년경에 CPU 속도가 정체된 것을 알 수 있습니다.&lt;/p&gt;

&lt;p&gt;하단 그래프는 열 방출 전력(thermal dissipation power)을 보여 줍니다. 즉, 열로 변환되는 전력은 동일한 패턴을 따릅니다. 클럭 속도와 CPU 열 방출은 서로 관련이 있습니다.&lt;/p&gt;

&lt;h3 id=&#34;1-5-열&#34;&gt;1.5 열&lt;/h3&gt;

&lt;p&gt;CPU가 열을 발생시키는 이유는 무엇일까요? 고체 상태 장치(Solid State Device)이고 움직이는 구성 요소가 없으므로 마찰과 같은 효과는 (직접적으로) 관련이 없습니다.&lt;/p&gt;

&lt;p&gt;이 다이어그램은 &lt;a href=&#34;http://www.ti.com/lit/an/scaa035b/scaa035b.pdf&#34; target=&#34;_blank&#34;&gt;TI에서 제작한 훌륭한 데이터 시트&lt;/a&gt;에서 가져온 것입니다. 이 모델에서 N타입 장치의 스위치는 양극 전압으로 끌어 당겨집니다. P타입 디바이스는 양극 전압에서 쫓겨납니다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://dave.cheney.net/high-performance-go-workshop/images/cmos-inverter.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;이 방, 여러분의 책상, 그리고 여러분의 주머니에 있는 모든 트랜지스터에 사용되는 CMOS 기기의 전력 소비량은 세 가지 요인의 조합입니다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;정적 전력(static power). 트랜지스터가 정적인 경우 즉, 상태를 변경하지 않으면 트랜지스터를 통해 접지로 누설되는 소량의 전류가 있습니다. 트랜지스터가 작을수록 누수가 많아집니다. 온도가 높아지면 누수가 증가합니다. 수 십억 개의 트랜지스터가 있으면 1분이라도 누수가 발생합니다!&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;동적 전력(dynamic power). 트랜지스터가 한 상태에서 다른 상태로 전이될 때, 트랜지스터는 게이트에 연결된 다양한 커패시턴스를 충전하거나 방전해야 합니다. 트랜지스터당 동적 전력은 제곱한 전압 곱하기 커패시턴스와 변화 빈도입니다. 전압을 낮추면 트랜지스터가 소비하는 전력이 감소하지만 전압이 낮으면 트랜지스터가 느리게 전환됩니다.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;크라우바 또는 단락 전류(crowbar, or short circuit current) 우리는 트랜지스터를 원자 상태에서 하나의 상태 또는 다른 상태를 차지하는 디지털 장치로 생각합니다. 실제로 트랜지스터는 아날로그 장치입니다. 스위치로서 트랜지스터는 대부분 오프(off) 상태에서 시작하여 온(on) 상태로 전이 또는 전환됩니다. 이러한 전이 또는 전환 시간은 매우 빠릅니다. 현대 프로세서에서는 피코 초의 단위이지만, Vcc에서 접지로의 저항 경로가 있을 때 여전히 어느 정도의 시간이 걸립니다. 트랜지스터의 전환 속도가 빠를수록 더 많은 열이 방출됩니다.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;1-6-dennard-스케일링의-종말&#34;&gt;1.6 Dennard 스케일링의 종말&lt;/h3&gt;

&lt;p&gt;다음에 무슨 일이 일어났는지 이해하려면 1974년에 로버트 H. 데너드(Robert H. Dennard)가 공동 저술한 논문을 살펴봐야 합니다. 데너드의 스케일링 법칙에 따르면 트랜지스터가 작아질수록 전력 밀도는 일정하게 유지됩니다. 트랜지스터가 작아질수록 전압도 낮아지고, 게이트 커패시턴스도 낮아지며, 스위치 속도도 빨라져 동적 전력량을 줄일 수 있습니다.&lt;/p&gt;

&lt;p&gt;그래서 어떻게 되었을까요?&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://semiengineering.com/wp-content/uploads/2014/04/Screen-Shot-2014-04-14-at-8.49.48-AM.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;결과는 별로 좋지 않습니다. 트랜지스터의 게이트 길이가 몇 개의 실리콘 원자의 너비에 접근함에 따라 트랜지스터 크기, 전압 및 중요한 누수 사이의 관계가 끊어졌습니다.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://pdfs.semanticscholar.org/6a82/1a3329a60def23235c75b152055c36d40437.pdf&#34; target=&#34;_blank&#34;&gt;1999년 Micro-32 컨퍼런스&lt;/a&gt;에서 클럭 속도를 높이고 트랜지스터 크기를 줄이는 추세를 따랐다면, 프로세서 시대의 트랜지스터 접합부가 원자로 코어 온도에 근접할 것이라고 가정했습니다. 분명히 바보 같은 짓이었죠. 펜티엄 4는 단일 코어, 고주파, 소비자 CPU &lt;a href=&#34;https://arstechnica.com/uncategorized/2004/10/4311-2/&#34; target=&#34;_blank&#34;&gt;라인의 종지부를 찍었습니다&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;다시 그래프로 돌아와서, 클럭 속도가 멈춘 이유는 CPU의 속도가 CPU를 냉각시키는 능력을 초과했기 때문입니다. 2006년까지 트랜지스터 크기의 감소로 전력 효율은 더 이상 개선되지 않았습니다.&lt;/p&gt;

&lt;p&gt;이제 CPU 피처 크기 감소는 주로 전력 소비를 줄이는 데 목적이 있다는 것을 알게 되었습니다. 전력 소비량을 줄인다고 해서 단순히 지구를 살리는 재활용과 같은 &amp;ldquo;친환경&amp;rdquo;을 의미하는 것이 아닙니다. 주된 목표는 전력 소비를 유지하고, 그러한 열 손실로, &lt;a href=&#34;https://en.wikipedia.org/wiki/Electromigration#Practical_implications_of_electromigration&#34; target=&#34;_blank&#34;&gt;CPU를 손상시키는 수준을 낮추는&lt;/a&gt; 것입니다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://dave.cheney.net/high-performance-go-workshop/images/stuttering.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;하지만, 그래프의 한 부분에서 보듯이, 트랜지스터 다이 수는 계속 증가하고 있습니다. 주어진 동일한 영역에 더 많은 트랜지스터를 집적하는 CPU 피처 크기의 행진은 긍정적인 효과와 부정적인 효과 모두를 지닙니다.&lt;/p&gt;

&lt;p&gt;또한, 다음 인서트에서도 볼 수 있듯이 트랜지스터당 비용은 5년 전까지 계속 하락했습니다. 그 이후 트랜지스터당 비용이 다시 상승하기 시작했습니다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://whatsthebigdata.files.wordpress.com/2016/08/moores-law.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;더 작은 트랜지스터를 만드는 데, 더 많은 비용이 들 뿐만 아니라 더 어려워지고 있습니다. 2016년의 이 보고서는 칩 제조사들이 2013년 격게 될 일의 예측했었습니다. 2년 후 그들의 모든 예측이 빗나갔습니다. 이 보고서의 최신 버전은 없지만, 이러한 추세를 되돌릴 수 있을 것 같은 징후는 보이지 않습니다.&lt;/p&gt;

&lt;p&gt;인텔, TSMC, AMD, 그리고 삼성은 새로운 공장을 짓고 새로운 프로세스 툴링을 구매해야 하기 때문에 수 십억 달러의 비용이 듭니다. 그래서 다이당 트랜지스터 수가 계속 상승하며, 단가가 상승하기 시작했습니다.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;나노미터 단위로 측정했던 게이트 길이(gate length)라는 용어도 모호해졌습니다. 다양한 제조사들은 트랜지스터 크기를 다양한 방법으로 측정하여, 납품없이 경쟁사보다 적은 수의 트랜지스터를 시연할 수 있습니다. 이는 CPU 제조사의 비일반회계(Non-GAAP) 수익 보고 모델입니다.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&#34;1-7-더-많은-코어&#34;&gt;1.7 더 많은 코어&lt;/h3&gt;

&lt;p&gt;&lt;img src=&#34;https://i.redd.it/y5cdp7nhs2uy.jpg&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;열 및 주파수 한계에 도달하면 단일 코어 속도를 2배 빠르게 실행할 수 없습니다. 그러나 다른 코어를 추가하면 소프트웨어에서 지원할 수 있는 경우 처리 용량을 두 배로 제공할 수 있습니다.&lt;/p&gt;

&lt;p&gt;실제로 CPU의 코어 수는 열 방출에 의해 좌우됩니다. 데나드 스케일링의 종말은 CPU 클럭 속도가 얼마나 뜨거운 지에 따라 1~4Ghz 사이의 임의의 숫자라는 것을 의미합니다. 벤치마킹에 대해 이야기할 때 이것을 잠깐 보게 될 것입니다.&lt;/p&gt;

&lt;h3 id=&#34;1-8-암달의-법칙&#34;&gt;1.8 암달의 법칙&lt;/h3&gt;

&lt;p&gt;CPU는 점점 더 빨라지지는 않지만, 하이퍼 스레딩과 다중 코어로 점점 더 확장되고 있습니다. 모바일 부품에 듀얼 코어, 데스크톱 부품에 쿼드 코어, 서버 부품에 수십 개의 코어. 이것이 컴퓨터 성능의 미래일까요? 불행히도 그렇지 않습니다.&lt;/p&gt;

&lt;p&gt;IBM/360의 설계자인 진 암달(Gene Amdahl)의 이름을 딴 암달의 법칙은 리소스가 개선된 시스템에서 기대할 수 있는 고정 워크로드에서 작업 실행의 대기 시간을 이론적으로 가속화하는 공식입니다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://upload.wikimedia.org/wikipedia/commons/e/ea/AmdahlsLaw.svg&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;암달의 법칙에 따르면 프로그램의 최대 속도는 프로그램의 순차적인 부분에 의해 제한됩니다. 실행의 95%를 병렬로 실행할 수 있는 프로그램을 작성하는 경우, 수천 개의 프로세서를 사용하더라도 프로그램 실행의 최대 속도는 20배로 제한됩니다.&lt;/p&gt;

&lt;p&gt;우리가 매일 작업하는 프로그램에 대해 생각해봅시다. 얼마나 많이 병렬로 실행할 수 있을까요?&lt;/p&gt;

&lt;h3 id=&#34;1-9-동적-최적화&#34;&gt;1.9 동적 최적화&lt;/h3&gt;

&lt;p&gt;클럭 속도가 지연되고, 추가 코어를 투척해도 소득이 없는 문제점이 있을 때, 속도 향상은 어디서 오는 것일까요? 속도는 칩 자체의 아키텍처를 개선한 결과입니다. 이들은 &lt;a href=&#34;https://en.wikipedia.org/wiki/List_of_Intel_CPU_microarchitectures#Pentium_4_/_Core_Lines&#34; target=&#34;_blank&#34;&gt;Nehalem&lt;/a&gt;, &lt;a href=&#34;https://en.wikipedia.org/wiki/List_of_Intel_CPU_microarchitectures#Pentium_4_/_Core_Lines&#34; target=&#34;_blank&#34;&gt;Sandy Bridge&lt;/a&gt;, 및 &lt;a href=&#34;https://en.wikipedia.org/wiki/List_of_Intel_CPU_microarchitectures#Pentium_4_/_Core_Lines&#34; target=&#34;_blank&#34;&gt;Skylake&lt;/a&gt;와 같은 이름의 5~7년 짜리의 큰 프로젝트입니다.&lt;/p&gt;

&lt;p&gt;지난 20년 동안의 성능 향샹은 아키텍처 개선에서 비롯되었습니다.&lt;/p&gt;

&lt;h4 id=&#34;1-9-1-비순차적-명령어-처리-out-of-order-execution&#34;&gt;1.9.1 비순차적 명령어 처리 (Out of order execution)&lt;/h4&gt;

&lt;p&gt;슈퍼 스칼라라고 하는 비순차적 실행은 CPU가 실행 중인 코드에서 소위 명령어 수준 병렬 처리를 추출하는 방법입니다. 최신 CPU는 하드웨어 수준에서 SSA를 효과적으로 수행하여 작업 간의 데이터 종속성을 식별하고 가능한 경우 독립적인 명령을 병렬로 실행합니다.&lt;/p&gt;

&lt;p&gt;그러나 모든 코드에 내재된 병렬 처리량에는 제한이 있습니다. 엄청나게 힘도 듭니다. 대부분의 최신 CPU는 파이프라인의 각 단계에서 각 실행 장치를 다른 모든 장치에 연결하는데 n제곱의 비용이 발생하기 때문에 코어당 6개의 실행 장치로 정착했습니다.&lt;/p&gt;

&lt;h4 id=&#34;1-9-2-추측-실행-speculative-execution&#34;&gt;1.9.2 추측 실행 (Speculative execution)&lt;/h4&gt;

&lt;p&gt;가장 작은 마이크로 컨트롤러들을 모으면, 모든 CPU는 fetch/decode/execute/commit 명령 사이클의 일부와 겹치는 명령 파이프라인(instruction pipeline)을 활용합니다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://upload.wikimedia.org/wikipedia/commons/thumb/2/21/Fivestagespipeline.png/800px-Fivestagespipeline.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;명령어 파이프라인의 문제는 분기 명령어이며 평균 5-8 명령어마다 발생합니다. CPU가 분기에 도달하면 분기를 넘어 추가적인 명령을 실행할 수 없으며 프로그램 카운터도 분기할 위치를 알 때까지 파이프 라인 채우기를 시작할 수 없습니다. 추측 실행은 CPU가 분기 명령이 여전히 처리되고 있는 중에도 어느 경로로 분기해야 할지 &amp;ldquo;추측&amp;rdquo;할 수 있게 합니다!&lt;/p&gt;

&lt;p&gt;CPU가 분기를 올바르게 예측하면 명령 파이프라인을 가득 채울 수 있습니다. CPU가 올바른 분기를 예측하지 못하고 오류로 인식하면 아키텍처 상태에 대한 변경 사항을 롤백해야 합니다. 우리 모두가 Spectre 스타일의 취약점을 배우고 있기 때문에, 때때로 이 롤백은 기대만큼 원활하지 않은 경우가 있습니다.&lt;/p&gt;

&lt;p&gt;분기 예측률이 낮을 때, 추측 실행이 매우 어려울 수 있습니다. 분기가 잘못 예측된 경우, CPU 역추적은 잘못 예측한 지점까지 역추적해야 할 뿐만 아니라 잘못된 분기에서 소비된 에너지가 낭비됩니다.&lt;/p&gt;

&lt;p&gt;엄청난 수의 트랜지스터와 전력을 희생하며 이러한 모든 최적화로 단일 쓰레드 성능이 개선되었습니다.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;클리프 클릭(Cliff Click)은 비순차적 및 추론적 실행은 캐시 미스를 조기에 시작하여 관찰된 캐시 대기 시간을 줄이는데 가장 유용하다고 논증하는 &lt;a href=&#34;https://www.youtube.com/watch?v=OFgxAFdxYAQ&#34; target=&#34;_blank&#34;&gt;훌륭한 프리젠테이션&lt;/a&gt;을 제공합니다.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&#34;1-10-현대-cpu는-벌크-동작에-대해-최적화되었습니다&#34;&gt;1.10 현대 CPU는 벌크 동작에 대해 최적화되었습니다.&lt;/h3&gt;

&lt;blockquote&gt;
&lt;p&gt;현대의 프로세서는 니트로 연료가 함유된 재미있는 자동차와 비슷하며 단거리 경주에서 뛰어납니다. 불행히도 현대의 프로그래밍 언어는 Monte Carlo와 비슷하지만 트위스트와 턴으로 가득합니다. — 데이비드 언가(David Ungar)&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;이는 영향력 있는 컴퓨터 과학자이자 SELF 프로그래밍 언어의 개발자인 데이비드 언가의 인용문으로 온라인에서 찾은 아주 오래된 프리젠테이션에서 언급되었습니다.&lt;/p&gt;

&lt;p&gt;따라서 최신 CPU는 대량 전송 및 대량 작업에 최적화되어 있습니다. 모든 레벨에서 작업 설정 비용은 대량 작업을 권장합니다. 예를 들어, 다음과 같습니다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;메모리는 바이트당 로드되지 않고 여러 캐시 라인마다 로드되므로 정렬이 이전 컴퓨터에서만큼 문제가 되지않는 이유입니다.&lt;/li&gt;
&lt;li&gt;MMX 및 SSE와 같은 벡터 명령을 사용하면 프로그램이 해당 형식으로 표현될 수 있는 동시에 다중 데이터 항목에 대해 단일 명령을 실행할 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;1-11-현대-프로세서는-메모리-용량이-아닌-메모리-지연-시간으로-제한됩니다&#34;&gt;1.11 현대 프로세서는 메모리 용량이 아닌 메모리 지연 시간으로 제한됩니다.&lt;/h3&gt;

&lt;p&gt;CPU라는 토지 상황이 그다지 나쁘지 않았다면, 메모리라는 집 쪽에서 들려오는 뉴스는 크게 나아지지 않습니다.&lt;/p&gt;

&lt;p&gt;서버에 연결된 물리적 메모리가 기하학적으로 증가했습니다. 1980년대에 저의 첫 컴퓨터는 킬로바이트의 메모리를 가지고 있었습니다. 고등학교를 다닐 때 저는 386에 1.8메가바이트의 램을 가지고 모든 에세이를 썼습니다. 이제 수십 기가바이트 또는 수백 기가바이트의 램을 가진 서버를 찾는 것이 일반적이며, 클라우드 공급업체들은 테라바이트의 램을 도입하고 있습니다.&lt;/p&gt;

&lt;p&gt;그러나 프로세서 속도와 메모리 액세스 시간 사이의 간극은 계속 증가하고 있습니다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://www.extremetech.com/wp-content/uploads/2018/01/mem_gap.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;하지만, 메모리 대기 중에 손실된 프로세서 싸이클의 경우, 메모리가 CPU 속도의 증가에 보조를 맞추지 못했기 때문에 물리적 메모리는 그 어느때보다 여전히 멀리 떨어져 있습니다.&lt;/p&gt;

&lt;p&gt;따라서 대부분의 최신 프로세서는 커패시티가 아닌 메모리 레이턴시로 제한됩니다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://pbs.twimg.com/media/BmBr2mwCIAAhJo1.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;h3 id=&#34;1-12-캐시가-주변의-모든-것을-지배합니다&#34;&gt;1.12 캐시가 주변의 모든 것을 지배합니다.&lt;/h3&gt;

&lt;p&gt;&lt;img src=&#34;https://www.extremetech.com/wp-content/uploads/2014/08/latency.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;수십 년 동안 프로세서/메모리 캡에 대한 솔루션은 캐시를 추가하는 것이 었습니다. 캐시는 CPU에 더 가까이, 이제는 직접 통합된 작은 고속 메모리입니다.&lt;/p&gt;

&lt;p&gt;그러나;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;L1은 수십 년 동안 코어 당 32kb로 고정되었습니다.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;L2는 가장 큰 인텔 부품에서 최대 512kb까지 천천히 상승했습니다.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;L3는 지금 4-32mb 범위로 측정되지만, 액세스 시간은 가변적입니다.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&#34;https://i3.wp.com/computing.llnl.gov/tutorials/linux_clusters/images/E5v4blockdiagram.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;캐시는 &lt;a href=&#34;http://www.itrs.net/Links/2000UpdateFinal/Design2000final.pdf&#34; target=&#34;_blank&#34;&gt;CPU 다이에서 물리적으로 크기 때문에&lt;/a&gt; 크기가 제한되어 많은 전력을 소비합니다. 캐시 미스률을 절반으로 줄이려면 캐시 크기를 4배로 늘려야합니다.&lt;/p&gt;

&lt;h3 id=&#34;1-13-공짜-점심은-끝났다&#34;&gt;1.13 공짜 점심은 끝났다.&lt;/h3&gt;

&lt;p&gt;2005년 C++위원회 리더인 허브 서터(Herb Sutter)는 &lt;a href=&#34;http://www.gotw.ca/publications/concurrency-ddj.htm&#34; target=&#34;_blank&#34;&gt;공짜 점심은 끝났다&lt;/a&gt;라는 제목의 기사를 썼습니다. 그의 글에서 서터는 제가 다룰 모든 점에 대해 논의했으며 미래 프로그래머는 더 이상 느린 프로그램 또는 느린 프로그래밍 언어를 수정하기 위해 더 빠른 하드웨어에 의존할 수 없을 것이라고 주장했습니다.&lt;/p&gt;

&lt;p&gt;10년이 지난 지금, 허브 서터가 옳았다는 것에는 의심의 여지가 없습니다. 메모리가 느리고 캐시가 너무 작고, CPU 클럭 속도가 거꾸로 가고 있으며 단일 쓰레드 CPU의 단순한 세계는 오래 전에 사라졌습니다.&lt;/p&gt;

&lt;p&gt;무어의 법칙은 여전히 유효하지만, 이 자리에 있는 우리 모두에게 공짜 점심은 끝이 났습니다.&lt;/p&gt;

&lt;h3 id=&#34;1-14-결론&#34;&gt;1.14 결론&lt;/h3&gt;

&lt;blockquote&gt;
&lt;p&gt;제가 인용하려는 숫자들은 2010년까지 될 것입니다. 30GHz, 100억 개의 트랜지스터, 초당 1테라 인스트럭션이 그 숫자들이죠. — &lt;a href=&#34;https://www.cnet.com/news/intel-cto-chip-heat-becoming-critical-issue/&#34; target=&#34;_blank&#34;&gt;팻 겔싱어(Pat Gelsinger), 인텔의 전설적인 CTO, 2002년 4월&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;재료 과학의 획기적인 발전없이는 CPU 성능의 연간 증가율 52%의 시대로 돌아올 가능성이 거의 없다는 것이 분명합니다. 일반적인 합의는 재료 과학 자체가 아니라 트랜지스터 사용 방법에 결함이 있다는 것입니다. 실리콘으로 표현된 순차적 명령흐름의 논리적 모델은 값비싼 최종 게임으로 귀결됩니다.&lt;/p&gt;

&lt;p&gt;온라인에 많은 프리젠테이션이 이 점을 반복하고 있습니다. 미래에는 컴퓨터가 오늘날처럼 프로그래밍되지 않을 것입니다. 일부는 수백 개의 매우 멍청하고 일관성이 없는 프로세서를 갖춘 그래픽 카드처럼 보일 것이라고 주장합니다. 다른 사람들은 VLIW(Very Long Instruction Word) 컴퓨터가 우세할 것이라고 주장합니다. 현재 순차 프로그래밍 언어는 이러한 종류의 프로세서와 호환되지 않을 것이라는 데 모두 동의합니다.&lt;/p&gt;

&lt;p&gt;제 생각에는 이러한 예측이 정확하다는 것입니다. 이 시점에서 우리를 구해 온 하드웨어 제조업체에 대한 전망은 어둡습니다. 그러나 오늘날 우리가 쓰는 하드웨어에 작성하는 프로그램을 최적화할 수 있는 광범위한 방법이 있습니다. 릭 허드슨(Rick Hudson)은 GopherCon 2015에서 오늘날의 하드웨어와 무관하지 않게 동작하는 소프트웨어의 &amp;ldquo;유연한 순환&amp;rdquo;에 다시 참여하는 것에 대해 말했습니다.&lt;/p&gt;

&lt;p&gt;앞서 보여드린 그래프를 보면, 2015년부터 2018년까지 정수의 성능은 기껏해야 5~8% 향상되고 메모리 대기 시간은 이보다 적은 것으로 나타났는데, Go팀은 가비지 콜렉션 일시 중지 시간을 2자리 수의 크기로 줄였습니다. Go 1.11 프로그램은 Go 1.6을 사용하는 동일한 하드웨어의 동일한 프로그램보다 GC 대기 시간이 훨씬 뛰어납니다. 이 중 어느 것도 하드웨어에서 비롯된 것이 아닙니다.&lt;/p&gt;

&lt;p&gt;따라서, 오늘날의 오늘날 하드웨어에서 최상의 성능을 얻으려면 다음과 같은 프로그래밍 언어가 필요합니다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;해석된 프로그래밍 언어가 CPU 분기 예측 변수 및 추론 실행과 제대로 상호 작용하지 않기 때문에 해석되지 않고 컴파일됩니다.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;효율적인 코드를 작성할 수 있는 언어가 필요하며, 모든 숫자가 이상적인 부동 소수인 척 하기보다는 비트와 바이트, 정수의 길이에 대해 효과적으로 얘기할 수 있어야 합니다.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;프로그래머가 메모리에 대해 효과적으로 이야기하고 구조체와 자바 객체를 생각할 수 있는 언어가 필요합니다. 왜냐하면 포인터 추적이 CPU 캐시에 압력을 가하고 캐시 미스가 수백 번의 사이클을 태우기 때문입니다.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;애플리케이션 성능에 따라 여러 코어로 확장되는 프로그래밍 언어는 캐시를 얼마나 효율적으로 사용하고 여러 코어에서 작업을 얼마나 효율적으로 병렬화할 수 있는지에 따라 결정됩니다.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;분명히 우리는 Go에 대해 이야기하러 여기에 왔습니다. 그리고 저는 Go가 방금 설명한 많은 특징들을 물려받았다고 믿습니다.&lt;/p&gt;

&lt;h4 id=&#34;1-14-1-우리와-무슨-상관이-있나요&#34;&gt;1.14.1 우리와 무슨 상관이 있나요?&lt;/h4&gt;

&lt;blockquote&gt;
&lt;p&gt;최적화는 세 가지 뿐입니다. 적게 하세요. 덜 자주하세요. 더 빨리 하세요.
가장 큰 이득은 첫 번째에서 비롯되지만, 우리는 모든 시간을 세 번째에서 소비합니다. — Michael Fromberger&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;이 강의의 요점은 프로그램이나 시스템의 성능에 대해 이야기 할 때 전적으로 소프트웨어에 있음을 설명하는 것입니다. 더 빠른 하드웨어가 하루를 구하기를 기다리는 것은 어리석은 일입니다.&lt;/p&gt;

&lt;p&gt;그러나 좋은 소식이 있습니다. 소프트웨어에서 할 수 있는 많은 개선 사항들이 있습니다. 그리고 그것이 오늘 이야기하고자 하는 것입니다.&lt;/p&gt;

&lt;h4 id=&#34;1-14-2-더-읽을-거리&#34;&gt;1.14.2 더 읽을 거리&lt;/h4&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.youtube.com/watch?v=zX4ZNfvw1cw&#34; target=&#34;_blank&#34;&gt;The Future of Microprocessors, Sophie Wilson&lt;/a&gt; JuliaCon 2018&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.youtube.com/watch?v=HnniEPtNs-4&#34; target=&#34;_blank&#34;&gt;50 Years of Computer Architecture: From Mainframe CPUs to DNN TPUs, David Patterson&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://web.stanford.edu/~hennessy/Future%20of%20Computing.pdf&#34; target=&#34;_blank&#34;&gt;The Future of Computing, John Hennessy&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.youtube.com/watch?v=Azt8Nc-mtKM&#34; target=&#34;_blank&#34;&gt;The future of computing: a conversation with John Hennessy&lt;/a&gt; (Google I/O &amp;lsquo;18)&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;2-벤치마킹&#34;&gt;2. 벤치마킹&lt;/h2&gt;

&lt;blockquote&gt;
&lt;p&gt;두 번 측정하고 한 번 잘라라 — 고대 속담&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;코드의 성능을 향상시키기 전에 먼저 현재 성능을 알아야 합니다.&lt;/p&gt;

&lt;p&gt;이 섹션에서는 Go 테스트 프레임워크를 사용하여 유용한 벤치마크를 구성하는 방법에 중점을 두고 위험요소을 피하기 위한 실용적인 팁을 제공합니다.&lt;/p&gt;

&lt;h3 id=&#34;2-1-벤치마킹-기본-규칙&#34;&gt;2.1 벤치마킹 기본 규칙&lt;/h3&gt;

&lt;p&gt;벤치마킹하기 전에 반복 가능한 결과를 얻으려면 안정적인 환경이 있어야 합니다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;컴퓨터는 유휴 상태이어야 합니다. 공용 하드웨어에서 프로파일링하지 말고 긴 벤치마크가 실행되기를 기다리는 동안 웹을 탐색하지 마세요.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;절전 및 열 스케일링에 주의하세요. 이들은 현대 노트북에서는 거의 피할 수 없습니다.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;가상머신 및 공유 클라우드 호스팅을 피하세요. 일관된 측정을 하기에는 노이즈가 꽤 있을 수 있습니다.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;여유가 있다면 전용 성능 테스트 하드웨어를 구입하세요. 랙을 세팅하고, 모든 전원 관리 및 열 스케일링을 비활성화한 다음, 시스템의 소프트웨어를 업데이트하지 마세요. 마지막 사항은 시스템 관리 관점에서는 좋지 않은 조언이지만 소프트웨어 업데이트로 커널 또는 라이브러리의 성능을 변경하는 경우, (Spectre 패치를 생각해 보시면), 이전의 모든 벤치마킹 결과가 무효화되어 버립니다.&lt;/p&gt;

&lt;p&gt;우리 모두를 위해, 사전 및 사후 샘플을 가지고 일관된 결과를 얻으려면 여러 번 실행하시길 바랍니다.&lt;/p&gt;

&lt;h3 id=&#34;2-2-벤치마킹에-테스트-패키지-사용&#34;&gt;2.2. 벤치마킹에 테스트 패키지 사용&lt;/h3&gt;

&lt;p&gt;테스트 패키지는 벤치마크 작성을 지원합니다. 다음과 같은 간단한 기능이 있다면,&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-golang&#34; data-lang=&#34;golang&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Fib&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;switch&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;default&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Fib&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Fib&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;테스트 패키지를 사용하여 다음 형태로 함수의 벤치마크를 작성할 수 있습니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-golang&#34; data-lang=&#34;golang&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;BenchmarkFib20&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;testing&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;B&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;N&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;Fib&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;20&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// run the Fib function b.N times
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;벤치마크 함수는 &lt;code&gt;_test.go&lt;/code&gt; 파일에 테스트 함수와 나란히 있습니다.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;벤치마크는 테스트와 유사하지만 유일한 차이점은 &lt;code&gt;*testing.T&lt;/code&gt; 대신 &lt;code&gt;* testing.B&lt;/code&gt;를 사용한다는 것입니다. 이 두 가지 유형 모두 &lt;code&gt;Errorf()&lt;/code&gt;, &lt;code&gt;Fatalf()&lt;/code&gt; 및 &lt;code&gt;FailNow()&lt;/code&gt;와 같은 대중들이 좋아하는 &lt;code&gt;testing.TB&lt;/code&gt; 인터페이스를 구현합니다.&lt;/p&gt;

&lt;h4 id=&#34;2-2-1-패키지의-벤치마크-실행&#34;&gt;2.2.1 패키지의 벤치마크 실행&lt;/h4&gt;

&lt;p&gt;벤치마크에서 테스트 패키지를 사용할 때, &lt;code&gt;go test&lt;/code&gt; 하위 명령을 통해 실행됩니다. 그러나 기본적으로 &lt;code&gt;go test&lt;/code&gt;만 호출하면 벤치마크는 제외됩니다.&lt;/p&gt;

&lt;p&gt;패키지에서 벤치마크를 명시적으로 실행하려면 &lt;code&gt;-bench&lt;/code&gt; 플래그를 사용하세요. &lt;code&gt;-bench&lt;/code&gt;는 실행하려는 벤치마크 이름과 일치하는 정규식을 사용하므로 패키지에서 모든 벤치마크를 호출하는 가장 일반적인 방법은 &lt;code&gt;-bench=.&lt;/code&gt;입니다. 다음은 예제입니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;% go &lt;span class=&#34;nb&#34;&gt;test&lt;/span&gt; -bench&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;. ./examples/fib/
goos: darwin
goarch: amd64
BenchmarkFib20-8           &lt;span class=&#34;m&#34;&gt;30000&lt;/span&gt;             &lt;span class=&#34;m&#34;&gt;40865&lt;/span&gt; ns/op
PASS
ok      _/Users/dfc/devel/high-performance-go-workshop/examples/fib     &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.671s&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;go test&lt;/code&gt;는 벤치마크와 일치하기 전에 패키지의 모든 테스트를 실행합니다. 따라서, 패키지에 많은 테스트가 있거나 실행하는 데 시간이 오래 걸리면 &lt;code&gt;go test&lt;/code&gt;의 &lt;code&gt;-run&lt;/code&gt; 플래그에 아무것도 일치하지 않는 정규식을 줘서 테스트에서 제외시킬 수 있습니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;go &lt;span class=&#34;nb&#34;&gt;test&lt;/span&gt; -run&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;^$	&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/blockquote&gt;

&lt;h4 id=&#34;2-2-2-벤치마크-동작-방식&#34;&gt;2.2.2 벤치마크 동작 방식&lt;/h4&gt;

&lt;p&gt;각 벤치마크 함수는 &lt;code&gt;b.N&lt;/code&gt;에 다른 값으로 호출됩니다. 이는 벤치마크가 실행해야 하는 반복 횟수입니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;b.N&lt;/code&gt;은 1에서 시작합니다. 벤치마크 함수가 1초 미만으로 완료되는 경우(기본값), 그 다음 &lt;code&gt;b.N&lt;/code&gt;이 증가되고 벤치마크 함수가 다시 실행됩니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;b.N&lt;/code&gt;은 대략적으로 1, 2, 3, 5, 10, 20, 30, 50, 100 등의 순서로 증가합니다. 벤치마크 프레임워크는 꾀를 쓰려고 합니다. 작은 &lt;code&gt;b.N&lt;/code&gt; 값이 비교적 빠르게 완료되는 경우에는 반복 횟수가 더 빠르게 증가하죠.&lt;/p&gt;

&lt;p&gt;위의 예를 살펴보면 &lt;code&gt;BenchmarkFib20-8&lt;/code&gt;은 약 30,000회의 루프 반복이 1초 이상 걸린다는 것을 발견했습니다. 여기에서 벤치마크 프레임워크는 작업당 평균 시간이 40865ns임을 계산했습니다.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;-8&lt;/code&gt; 접미사는 이 테스트를 실행하는 데 사용된 &lt;code&gt;GOMAXPROCS&lt;/code&gt; 값과 관련이 있습니다. 이 숫자는 &lt;code&gt;GOMAXPROCS&lt;/code&gt;와 마찬가지로, 시작시 Go 프로세스에서 보이는 CPU 수로 기본 설정됩니다. 벤치마크를 실행할 값 목록을 가져오는 &lt;code&gt;-cpu&lt;/code&gt; 플래그를 사용하여 이 값을 변경할 수 있습니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;    % go &lt;span class=&#34;nb&#34;&gt;test&lt;/span&gt; -bench&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;. -cpu&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;,2,4 ./examples/fib/
    goos: darwin
    goarch: amd64
    BenchmarkFib20             &lt;span class=&#34;m&#34;&gt;30000&lt;/span&gt;             &lt;span class=&#34;m&#34;&gt;39115&lt;/span&gt; ns/op
    BenchmarkFib20-2           &lt;span class=&#34;m&#34;&gt;30000&lt;/span&gt;             &lt;span class=&#34;m&#34;&gt;39468&lt;/span&gt; ns/op
    BenchmarkFib20-4           &lt;span class=&#34;m&#34;&gt;50000&lt;/span&gt;             &lt;span class=&#34;m&#34;&gt;40728&lt;/span&gt; ns/op
    PASS
    ok      _/Users/dfc/devel/high-performance-go-workshop/examples/fib     &lt;span class=&#34;m&#34;&gt;5&lt;/span&gt;.531s&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;여기에서는 1, 2, 4개의 코어로 벤치마크를 실행하고 있습니다. 이 경우 이 벤치마크는 완전히 순차적이므로 플래그가 결과에 거의 영향을 미치지 않습니다.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h4 id=&#34;2-2-3-벤치마크-정확도-개선&#34;&gt;2.2.3 벤치마크 정확도 개선&lt;/h4&gt;

&lt;p&gt;&lt;code&gt;fib&lt;/code&gt; 함수는 약간 억지스런 예제입니다. TechPower 웹서버 벤치마크를 작성하지 않는 한, 피보나치 시퀀스에서 20번째 숫자를 얼마나 빨리 계산할 수 있는지에 대한 비즈니스가 결정되지는 않을 것입니다. 그러나 이 벤치마크는 올바른 벤치마크의 신뢰할만한 예제를 보여줍니다.&lt;/p&gt;

&lt;p&gt;특히, 벤치마크를 수만 번 반복하여 실행하면 작업당 좋은 평균값을 얻을 수 있습니다. 벤치마크가 100회 또는 10회 반복으로 실행되는 경우, 해당 실행의 평균은 표준편차가 높을 수 있습니다. 벤치마크가 수백만 또는 수십억 번 반복되는 경우 평균은 매우 정확할 수 있지만, 코드 레이아웃 및 정렬에 차이가 있을 수 있습니다.&lt;/p&gt;

&lt;p&gt;반복 횟수를 늘리려면, &lt;code&gt;-benchtime&lt;/code&gt; 플래그로 벤치마크 시간을 늘릴 수 있습니다. 예를 들면,&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;% go &lt;span class=&#34;nb&#34;&gt;test&lt;/span&gt; -bench&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;. -benchtime&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;10s ./examples/fib/
goos: darwin
goarch: amd64
BenchmarkFib20-8          &lt;span class=&#34;m&#34;&gt;300000&lt;/span&gt;             &lt;span class=&#34;m&#34;&gt;39318&lt;/span&gt; ns/op
PASS
ok      _/Users/dfc/devel/high-performance-go-workshop/examples/fib     &lt;span class=&#34;m&#34;&gt;20&lt;/span&gt;.066s&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;반환되는 데 10초 이상 걸리는 &lt;code&gt;b.N&lt;/code&gt; 값에 도달할 때까지 동일한 벤치마크를 실행합니다. 10배 더 길어질수록 총 반복 횟수는 10배 더 큽니다. 결과가 크게 달라지지 않았는데, 이는 우리가 예상한 것입니다.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;총 시간이 10이 아닌 20초인 이유는 무엇일까요?&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;마이크로 또는 나노초 범위에서 작업당 시간을 발생시키는 수백만 또는 수십억 회 반복 벤치마크가 있는 경우 열 스케일링, 메모리 로컬성, 백그라운드 처리, gc 활동 등으로 인해 벤치마크 수가 불안정할 수 있습니다.&lt;/p&gt;

&lt;p&gt;작업당 시간이 두 자리 또는 한 자리 수의 나노초 단위로 측정되는 경우, 명령어 순서 변경 및 코드 정렬의 상대적인 효과가 벤치마크 시간에 영향을 미칩니다.&lt;/p&gt;

&lt;p&gt;이를 해결하려면 &lt;code&gt;-count&lt;/code&gt; 플래그로 벤치마크를 여러 번 실행합니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;% go &lt;span class=&#34;nb&#34;&gt;test&lt;/span&gt; -bench&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;Fib1 -count&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;10&lt;/span&gt; ./examples/fib/
goos: darwin
goarch: amd64
BenchmarkFib1-8         &lt;span class=&#34;m&#34;&gt;2000000000&lt;/span&gt;               &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.99 ns/op
BenchmarkFib1-8         &lt;span class=&#34;m&#34;&gt;1000000000&lt;/span&gt;               &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.95 ns/op
BenchmarkFib1-8         &lt;span class=&#34;m&#34;&gt;2000000000&lt;/span&gt;               &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.99 ns/op
BenchmarkFib1-8         &lt;span class=&#34;m&#34;&gt;2000000000&lt;/span&gt;               &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.97 ns/op
BenchmarkFib1-8         &lt;span class=&#34;m&#34;&gt;2000000000&lt;/span&gt;               &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.99 ns/op
BenchmarkFib1-8         &lt;span class=&#34;m&#34;&gt;2000000000&lt;/span&gt;               &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.96 ns/op
BenchmarkFib1-8         &lt;span class=&#34;m&#34;&gt;2000000000&lt;/span&gt;               &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.99 ns/op
BenchmarkFib1-8         &lt;span class=&#34;m&#34;&gt;2000000000&lt;/span&gt;               &lt;span class=&#34;m&#34;&gt;2&lt;/span&gt;.01 ns/op
BenchmarkFib1-8         &lt;span class=&#34;m&#34;&gt;2000000000&lt;/span&gt;               &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.99 ns/op
BenchmarkFib1-8         &lt;span class=&#34;m&#34;&gt;1000000000&lt;/span&gt;               &lt;span class=&#34;m&#34;&gt;2&lt;/span&gt;.00 ns/op&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;Fib (1)&lt;/code&gt;의 벤치마크는 +/- 2% 차이로 약 2 나노초가 걸립니다.&lt;/p&gt;

&lt;p&gt;Go 1.12의 새로운 기능인 &lt;code&gt;-benchtime&lt;/code&gt; 플래그는 반복 횟수를 취합니다. 예를 들면, &lt;code&gt;-benchtime=20x&lt;/code&gt;은 코드를 정확하게 &lt;code&gt;benchtime&lt;/code&gt; 번 실행합니다.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;10x, 20x, 50x, 100x 및 300x의 &lt;code&gt;-benchtime&lt;/code&gt;으로 위의 &lt;code&gt;fib&lt;/code&gt; 벤치를 실행해보세요. 어떤가요?&lt;/p&gt;

&lt;p&gt;&lt;code&gt;go test&lt;/code&gt;가 적용하는 기본값을 특정 패키지에 맞게 조정해야 하는 경우, 벤치마크를 실행하려는 모든 사람이 동일한 설정으로 수행할 수 있도록 &lt;code&gt;Makefile&lt;/code&gt;에서 해당 설정을 코드화하는 것이 좋습니다.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&#34;2-3-benchstat과-벤치마크-비교&#34;&gt;2.3 benchstat과 벤치마크 비교&lt;/h3&gt;

&lt;p&gt;이전 섹션에서는 더 많은 데이터를 평균화하기 위해 벤치마크를 두 번 이상 실행할 것을 제안했습니다. 이는 챕터의 시작 부분에서 언급한 전원 관리, 백그라운드 프로세스 및 발열 관리의 영향으로 인한 모든 벤치마크에 유용합니다.&lt;/p&gt;

&lt;p&gt;러스 콕스(Russ Cox)가 &lt;a href=&#34;https://godoc.org/golang.org/x/perf/cmd/benchstat&#34; target=&#34;_blank&#34;&gt;benchstat&lt;/a&gt;라고 부르는 도구를 소개하겠습니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;% go get golang.org/x/perf/cmd/benchstat&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;benchstat&lt;/code&gt;는 일련의 벤치마크 실행을 수행하고 얼마나 안정적인지 알려줍니다. 다음은 배터리 전원에 대한 Fib(20)의 예제입니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;% go &lt;span class=&#34;nb&#34;&gt;test&lt;/span&gt; -bench&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;Fib20 -count&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;10&lt;/span&gt; ./examples/fib/ &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; tee old.txt
goos: darwin
goarch: amd64
BenchmarkFib20-8           &lt;span class=&#34;m&#34;&gt;50000&lt;/span&gt;             &lt;span class=&#34;m&#34;&gt;38479&lt;/span&gt; ns/op
BenchmarkFib20-8           &lt;span class=&#34;m&#34;&gt;50000&lt;/span&gt;             &lt;span class=&#34;m&#34;&gt;38303&lt;/span&gt; ns/op
BenchmarkFib20-8           &lt;span class=&#34;m&#34;&gt;50000&lt;/span&gt;             &lt;span class=&#34;m&#34;&gt;38130&lt;/span&gt; ns/op
BenchmarkFib20-8           &lt;span class=&#34;m&#34;&gt;50000&lt;/span&gt;             &lt;span class=&#34;m&#34;&gt;38636&lt;/span&gt; ns/op
BenchmarkFib20-8           &lt;span class=&#34;m&#34;&gt;50000&lt;/span&gt;             &lt;span class=&#34;m&#34;&gt;38784&lt;/span&gt; ns/op
BenchmarkFib20-8           &lt;span class=&#34;m&#34;&gt;50000&lt;/span&gt;             &lt;span class=&#34;m&#34;&gt;38310&lt;/span&gt; ns/op
BenchmarkFib20-8           &lt;span class=&#34;m&#34;&gt;50000&lt;/span&gt;             &lt;span class=&#34;m&#34;&gt;38156&lt;/span&gt; ns/op
BenchmarkFib20-8           &lt;span class=&#34;m&#34;&gt;50000&lt;/span&gt;             &lt;span class=&#34;m&#34;&gt;38291&lt;/span&gt; ns/op
BenchmarkFib20-8           &lt;span class=&#34;m&#34;&gt;50000&lt;/span&gt;             &lt;span class=&#34;m&#34;&gt;38075&lt;/span&gt; ns/op
BenchmarkFib20-8           &lt;span class=&#34;m&#34;&gt;50000&lt;/span&gt;             &lt;span class=&#34;m&#34;&gt;38705&lt;/span&gt; ns/op
PASS
ok      _/Users/dfc/devel/high-performance-go-workshop/examples/fib     &lt;span class=&#34;m&#34;&gt;23&lt;/span&gt;.125s
% benchstat old.txt
name     time/op
Fib20-8  &lt;span class=&#34;m&#34;&gt;38&lt;/span&gt;.4µs ± &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;%&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;benchstat&lt;/code&gt;에 따르면 평균은 샘플 전체에서 +/- 1% 오차로 38.8 마이크로 초입니다. 이는 배터리 전원에 아주 좋습니다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;첫 번째 실행이 운영 체제에서 전원을 절약하기 위해 CPU를 클럭 다운시켰기 때문에 가장 느립니다.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;다음 두 번의 실행이 가장 빠릅니다. 왜냐하면 운영 체제가 일시적인 작업 스파이크가 아니라고 판단함으로써, 다시 슬립 상태로 돌아갈 수 있기를 바라며 가능한 한 빨리 작업을 수행할 수 있도록 클럭 속도를 높였기 때문입니다.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;나머지 실행은 열 생산을 위한 운영 체제와 바이오스 트레이드 전력 소비량입니다.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;2-3-1-fib-개선&#34;&gt;2.3.1 Fib 개선&lt;/h3&gt;

&lt;p&gt;두 벤치마크 세트 간의 성능 델타를 결정하는 것은 지루하고 오류가 발생하기 쉽습니다. Benchstat가 이를 도와줄 수 있습니다.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;벤치마크 실행에서 출력을 저장하는 것이 유용하지만, 이를 생성한 바이너리를 저장할 수도 있습니다. 이를 통해 이전 반복 벤치마크를 다시 실행할 수 있습니다. 이렇게 하려면, &lt;code&gt;-c&lt;/code&gt; 플래그를 사용하여 테스트 바이너리를 저장합니다. 종종 이 이진데이터의 이름을 .test에서 .golden로 바꿉니다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;% go &lt;span class=&#34;nb&#34;&gt;test&lt;/span&gt; -c
% mv fib.test fib.golden&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이전 &lt;code&gt;Fib&lt;/code&gt; 함수는 피보나치 시리즈의 0번째와 1번째 숫자의 값을 하드코딩했습니다. 그 후 코드는 재귀적으로 호출됩니다. 이후에 재귀 비용에 대해 이야기할테지만, 현재로서는, 특히 알고리즘이 기하급수적인 시간을 사용하기 때문에 비용이 든다고 가정하겠습니다.&lt;/p&gt;

&lt;p&gt;이를 간단하게 해결할 수 있는 방법은 피보나치 시리즈에서 또다른 수를 하드코딩하여 각 재귀 호출의 깊이를 하나씩 줄이는 것입니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-golang&#34; data-lang=&#34;golang&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Fib&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;switch&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;default&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Fib&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Fib&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;새 버전을 비교하기 위해, 새로운 테스트 바이너리를 컴파일하고 둘 다 벤치마킹하고 &lt;code&gt;benchstat&lt;/code&gt;를 사용하여 출력을 비교합니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;% go &lt;span class=&#34;nb&#34;&gt;test&lt;/span&gt; -c
% ./fib.golden -test.bench&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;. -test.count&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;10&lt;/span&gt; &amp;gt; old.txt
% ./fib.test -test.bench&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;. -test.count&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;10&lt;/span&gt; &amp;gt; new.txt
% benchstat old.txt new.txt
name     old time/op  new time/op  delta
Fib20-8  &lt;span class=&#34;m&#34;&gt;44&lt;/span&gt;.3µs ± &lt;span class=&#34;m&#34;&gt;6&lt;/span&gt;%  &lt;span class=&#34;m&#34;&gt;25&lt;/span&gt;.6µs ± &lt;span class=&#34;m&#34;&gt;2&lt;/span&gt;%  -42.31%  &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;.000 &lt;span class=&#34;nv&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;+10&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;벤치마크를 비교할 때, 확인해야 할 세 가지가 있습니다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;이전 샘플과 새 샘플의 ±오차. 1-2% 변화가 양호하고, 3-5%는 괜찮으며, 5% 보다 크면 일부 샘플은 신뢰할 수 없는 것으로 간주됩니다. 한 쪽의 변화가 큰 벤치마크를 비교할 때, 개선이 이루지지 않는 것을 볼 수 있으므로 주의해야 합니다.&lt;/li&gt;
&lt;li&gt;p값. 0.05보다 낮은 p값은 양호하고 0.05보다 크면 벤치마크가 통계적으로 유의하지 않을 수 있음을 의미합니다.&lt;/li&gt;
&lt;li&gt;누락된 샘플. benchstat는 이전 및 새 샘플 중 유효하다고 생각되는 샘플의 개수를 보고합니다. 때로는 &lt;code&gt;-count = 10&lt;/code&gt;을 수행하더라도 9개만 보고될 수 있습니다. 10% 이하의 거부율(rejection rate)은 괜찮지만, 10%보다 높으면 설정이 불안정하고 너무 적은 수의 샘플을 비교하고 있는 것일 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;2-4-벤치마킹-시작-비용-피하기&#34;&gt;2.4 벤치마킹 시작 비용 피하기&lt;/h3&gt;

&lt;p&gt;때로는 벤치마크를 실행할마다 셋업 비용이 한번씩 발생할 수 있습니다. &lt;code&gt;b.ResetTimer()&lt;/code&gt;은 셋업에서 발생한 시간을 무시할 때 사용합니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-golang&#34; data-lang=&#34;golang&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;BenchmarkExpensive&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;testing&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;B&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;nx&#34;&gt;boringAndExpensiveSetup&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// (1)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ResetTimer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; 
        &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;N&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
                &lt;span class=&#34;c1&#34;&gt;// function under test
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;(1) - 벤치마크 타이머를 리셋합니다.&lt;/p&gt;

&lt;p&gt;루프가 반복될 때마다 값비싼 셋업 로직이 있는 경우, 벤치마크 타이머를 일시 중지하려면 &lt;code&gt;b.StopTimer()&lt;/code&gt; 및 &lt;code&gt;b.StartTimer()&lt;/code&gt;를 사용하세요.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-golang&#34; data-lang=&#34;golang&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;BenchmarkComplicated&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;testing&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;B&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;N&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
                &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;StopTimer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// (1)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;                &lt;span class=&#34;nx&#34;&gt;complicatedSetup&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
                &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;StartTimer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// (2)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;                &lt;span class=&#34;c1&#34;&gt;// function under test
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;(1) - 벤치마크 타이머를 중지합니다.&lt;br/&gt;
(2) - 타이머를 재개합니다.&lt;/p&gt;

&lt;h3 id=&#34;2-5-벤치마킹-할당&#34;&gt;2.5 벤치마킹 할당&lt;/h3&gt;

&lt;p&gt;할당 횟수와 크기는 벤치마크 시간과 밀접한 상관 관계가 있습니다. 테스트중인 코드에서 진행된 할당수를 기록하도록 &lt;code&gt;testing&lt;/code&gt; 프레임워크에 지시할 수 있습니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-golang&#34; data-lang=&#34;golang&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;BenchmarkRead&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;testing&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;B&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ReportAllocs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;N&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
                &lt;span class=&#34;c1&#34;&gt;// function under test
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;다음은 &lt;code&gt;bufio&lt;/code&gt; 패키지의 벤치마크를 사용한 예입니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;% go &lt;span class=&#34;nb&#34;&gt;test&lt;/span&gt; -run&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;^$ -bench&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;. bufio
goos: darwin
goarch: amd64
pkg: bufio
BenchmarkReaderCopyOptimal-8            &lt;span class=&#34;m&#34;&gt;20000000&lt;/span&gt;               &lt;span class=&#34;m&#34;&gt;103&lt;/span&gt; ns/op
BenchmarkReaderCopyUnoptimal-8          &lt;span class=&#34;m&#34;&gt;10000000&lt;/span&gt;               &lt;span class=&#34;m&#34;&gt;159&lt;/span&gt; ns/op
BenchmarkReaderCopyNoWriteTo-8            &lt;span class=&#34;m&#34;&gt;500000&lt;/span&gt;              &lt;span class=&#34;m&#34;&gt;3644&lt;/span&gt; ns/op
BenchmarkReaderWriteToOptimal-8          &lt;span class=&#34;m&#34;&gt;5000000&lt;/span&gt;               &lt;span class=&#34;m&#34;&gt;344&lt;/span&gt; ns/op
BenchmarkWriterCopyOptimal-8            &lt;span class=&#34;m&#34;&gt;20000000&lt;/span&gt;                &lt;span class=&#34;m&#34;&gt;98&lt;/span&gt;.6 ns/op
BenchmarkWriterCopyUnoptimal-8          &lt;span class=&#34;m&#34;&gt;10000000&lt;/span&gt;               &lt;span class=&#34;m&#34;&gt;131&lt;/span&gt; ns/op
BenchmarkWriterCopyNoReadFrom-8           &lt;span class=&#34;m&#34;&gt;300000&lt;/span&gt;              &lt;span class=&#34;m&#34;&gt;3955&lt;/span&gt; ns/op
BenchmarkReaderEmpty-8                   &lt;span class=&#34;m&#34;&gt;2000000&lt;/span&gt;               &lt;span class=&#34;m&#34;&gt;789&lt;/span&gt; ns/op            &lt;span class=&#34;m&#34;&gt;4224&lt;/span&gt; B/op          &lt;span class=&#34;m&#34;&gt;3&lt;/span&gt; allocs/op
BenchmarkWriterEmpty-8                   &lt;span class=&#34;m&#34;&gt;2000000&lt;/span&gt;               &lt;span class=&#34;m&#34;&gt;683&lt;/span&gt; ns/op            &lt;span class=&#34;m&#34;&gt;4096&lt;/span&gt; B/op          &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; allocs/op
BenchmarkWriterFlush-8                  &lt;span class=&#34;m&#34;&gt;100000000&lt;/span&gt;               &lt;span class=&#34;m&#34;&gt;17&lt;/span&gt;.0 ns/op             &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt; B/op          &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt; allocs/op&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;go test -benchmem&lt;/code&gt; 플래그를 사용해서 테스트 프레임워크가 모든 벤치마크 실행에 대한 할당 통계를 보고하도록 할 수도 있습니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;    % go &lt;span class=&#34;nb&#34;&gt;test&lt;/span&gt; -run&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;^$ -bench&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;. -benchmem bufio
    goos: darwin
    goarch: amd64
    pkg: bufio
    BenchmarkReaderCopyOptimal-8            &lt;span class=&#34;m&#34;&gt;20000000&lt;/span&gt;                &lt;span class=&#34;m&#34;&gt;93&lt;/span&gt;.5 ns/op            &lt;span class=&#34;m&#34;&gt;16&lt;/span&gt; B/op          &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; allocs/op
    BenchmarkReaderCopyUnoptimal-8          &lt;span class=&#34;m&#34;&gt;10000000&lt;/span&gt;               &lt;span class=&#34;m&#34;&gt;155&lt;/span&gt; ns/op              &lt;span class=&#34;m&#34;&gt;32&lt;/span&gt; B/op          &lt;span class=&#34;m&#34;&gt;2&lt;/span&gt; allocs/op
    BenchmarkReaderCopyNoWriteTo-8            &lt;span class=&#34;m&#34;&gt;500000&lt;/span&gt;              &lt;span class=&#34;m&#34;&gt;3238&lt;/span&gt; ns/op           &lt;span class=&#34;m&#34;&gt;32800&lt;/span&gt; B/op          &lt;span class=&#34;m&#34;&gt;3&lt;/span&gt; allocs/op
    BenchmarkReaderWriteToOptimal-8          &lt;span class=&#34;m&#34;&gt;5000000&lt;/span&gt;               &lt;span class=&#34;m&#34;&gt;335&lt;/span&gt; ns/op              &lt;span class=&#34;m&#34;&gt;16&lt;/span&gt; B/op          &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; allocs/op
    BenchmarkWriterCopyOptimal-8            &lt;span class=&#34;m&#34;&gt;20000000&lt;/span&gt;                &lt;span class=&#34;m&#34;&gt;96&lt;/span&gt;.7 ns/op            &lt;span class=&#34;m&#34;&gt;16&lt;/span&gt; B/op          &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; allocs/op
    BenchmarkWriterCopyUnoptimal-8          &lt;span class=&#34;m&#34;&gt;10000000&lt;/span&gt;               &lt;span class=&#34;m&#34;&gt;124&lt;/span&gt; ns/op              &lt;span class=&#34;m&#34;&gt;32&lt;/span&gt; B/op          &lt;span class=&#34;m&#34;&gt;2&lt;/span&gt; allocs/op
    BenchmarkWriterCopyNoReadFrom-8           &lt;span class=&#34;m&#34;&gt;500000&lt;/span&gt;              &lt;span class=&#34;m&#34;&gt;3219&lt;/span&gt; ns/op           &lt;span class=&#34;m&#34;&gt;32800&lt;/span&gt; B/op          &lt;span class=&#34;m&#34;&gt;3&lt;/span&gt; allocs/op
    BenchmarkReaderEmpty-8                   &lt;span class=&#34;m&#34;&gt;2000000&lt;/span&gt;               &lt;span class=&#34;m&#34;&gt;748&lt;/span&gt; ns/op            &lt;span class=&#34;m&#34;&gt;4224&lt;/span&gt; B/op          &lt;span class=&#34;m&#34;&gt;3&lt;/span&gt; allocs/op
    BenchmarkWriterEmpty-8                   &lt;span class=&#34;m&#34;&gt;2000000&lt;/span&gt;               &lt;span class=&#34;m&#34;&gt;662&lt;/span&gt; ns/op            &lt;span class=&#34;m&#34;&gt;4096&lt;/span&gt; B/op          &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; allocs/op
    BenchmarkWriterFlush-8                  &lt;span class=&#34;m&#34;&gt;100000000&lt;/span&gt;               &lt;span class=&#34;m&#34;&gt;16&lt;/span&gt;.9 ns/op             &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt; B/op          &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt; allocs/op
    PASS
    ok      bufio   &lt;span class=&#34;m&#34;&gt;20&lt;/span&gt;.366s&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/blockquote&gt;

&lt;h3 id=&#34;2-6-컴파일러-최적화-주의&#34;&gt;2.6 컴파일러 최적화 주의&lt;/h3&gt;

&lt;p&gt;이 예제는 &lt;a href=&#34;https://github.com/golang/go/issues/14813#issue-140603392&#34; target=&#34;_blank&#34;&gt;이슈 14813&lt;/a&gt;에서 가져온 것입니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-golang&#34; data-lang=&#34;golang&#34;&gt;&lt;span class=&#34;kd&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;m1&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x5555555555555555&lt;/span&gt;
&lt;span class=&#34;kd&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;m2&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x3333333333333333&lt;/span&gt;
&lt;span class=&#34;kd&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;m4&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x0f0f0f0f0f0f0f0f&lt;/span&gt;
&lt;span class=&#34;kd&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;h01&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x0101010101010101&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;popcnt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;x&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;uint64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;uint64&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;x&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;x&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;m1&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;x&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;x&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;m2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;x&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;m2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;x&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;x&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;x&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;m4&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;x&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;h01&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;56&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;BenchmarkPopcnt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;testing&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;B&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;N&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;popcnt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;uint64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이 함수가 얼마나 빨리 벤치마킹할 것이라고 생각하시나요? 알아봅시다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-golang&#34; data-lang=&#34;golang&#34;&gt;&lt;span class=&#34;o&#34;&gt;%&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;go&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;test&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;bench&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;=.&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;examples&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;popcnt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;
&lt;span class=&#34;nx&#34;&gt;goos&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;darwin&lt;/span&gt;
&lt;span class=&#34;nx&#34;&gt;goarch&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;amd64&lt;/span&gt;
&lt;span class=&#34;nx&#34;&gt;BenchmarkPopcnt&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;8&lt;/span&gt;       &lt;span class=&#34;mi&#34;&gt;2000000000&lt;/span&gt;               &lt;span class=&#34;mf&#34;&gt;0.30&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ns&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;op&lt;/span&gt;
&lt;span class=&#34;nx&#34;&gt;PASS&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;0.3 나노초입니다. 이는 기본적으로 한 클럭 사이클입니다. CPU에 클럭 틱당 몇 개의 인플라이트 (in flight) 명령어가 있다고 가정하더라도 이 숫자는 터무니없이 낮은 것으로 보입니다. 어떻게 된 걸까요?&lt;/p&gt;

&lt;p&gt;무슨 일이 일어났는지 이해하기 위해서, 벤치마크 내의 &lt;code&gt;popcnt&lt;/code&gt; 함수를 살펴봐야 합니다. &lt;code&gt;popcnt&lt;/code&gt;는 리프 함수 (다른 함수를 호출하지 않음) 이므로 컴파일러는 이를 인라인화할 수 있습니다.&lt;/p&gt;

&lt;p&gt;함수가 인라인화되어 있으므로 이제 컴파일러에서 사이드 이펙트가 없음을 알 수 있습니다. &lt;code&gt;popcnt&lt;/code&gt;는 전역 변수의 상태에 영향을 주지 않습니다. 따라서 호출을 없앱니다. 컴파일러가 보는 것은 다음과 같습니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-golang&#34; data-lang=&#34;golang&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;BenchmarkPopcnt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;testing&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;B&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;N&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;c1&#34;&gt;// 최적화되어 사라짐
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;테스트해 본 모든 버전의 Go 컴파일러에서 루프가 계속 생성됩니다. 그러나 Intel CPU는 루프, 특히 빈 루프를 최적화하는 데 정말 좋습니다.&lt;/p&gt;

&lt;h4 id=&#34;2-6-1-연습-어셈블리-보기&#34;&gt;2.6.1 연습, 어셈블리 보기&lt;/h4&gt;

&lt;p&gt;계속하기 전에, 우리가 본 것을 확인하기 위해 어셈블리를 살펴봅시다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;% go &lt;span class=&#34;nb&#34;&gt;test&lt;/span&gt; -gcflags&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;-S&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;gcflags = -l -S&lt;/code&gt;를 사용해서 인라인을 비활성화합니다. 어셈블리 출력에 어떻게 영향을 미칠까요?&lt;/p&gt;

&lt;p&gt;&lt;em&gt;최적화는 좋은 것입니다&lt;/em&gt; &lt;br/&gt;
실제 코드를 빠르게 만드는 똑같은 최적화를 제거해야 합니다. 이는 불필요한 계산을 제거함으로써, 관찰할 수 없는 사이드 이펙트가 있는 벤치마크를 제거하는 것과 동일합니다.&lt;/p&gt;

&lt;p&gt;이는 Go 컴파일러가 개선됨에 따라 더 흔해지겠죠.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h4 id=&#34;2-6-2-벤치마크-고치기&#34;&gt;2.6.2 벤치마크 고치기&lt;/h4&gt;

&lt;p&gt;벤치마크 동작을 위해 인라인을 비활성화하는 것은 비현실적입니다. 우리는 최적화를 바탕으로 코드를 작성하려고합니다.&lt;/p&gt;

&lt;p&gt;이 벤치마크를 수정하려면 컴파일러에서 &lt;code&gt;BenchmarkPopcnt&lt;/code&gt;의 바디가 전역 상태를 변경하지 않음을 증명할 수 없도록 해야합니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-golang&#34; data-lang=&#34;golang&#34;&gt;&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Result&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;uint64&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;BenchmarkPopcnt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;testing&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;B&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;uint64&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;N&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;popcnt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;uint64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;Result&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이처럼 컴파일러가 루프 바디를 최적화하지 않도록 권장합니다.&lt;/p&gt;

&lt;p&gt;첫째, &lt;code&gt;popcnt&lt;/code&gt;를 호출한 결과는 &lt;code&gt;r&lt;/code&gt;에 저장하는데 사용합니다. 둘째, 벤치마크가 끝나면 &lt;code&gt;r&lt;/code&gt;이 &lt;code&gt;BenchmarkPopcnt&lt;/code&gt; 범위 내에서 로컬로 선언되었으므로, &lt;code&gt;r&lt;/code&gt;의 결과는 프로그램의 다른 부분에 보여지지 않으며, 최종 조치로 &lt;code&gt;r&lt;/code&gt;의 값을 패키지 퍼블릭 변수 &lt;code&gt;Result&lt;/code&gt;에 할당합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;Result&lt;/code&gt;는 퍼블릭이기 때문에 컴파일러는 이 패키지를 임포트하는 다른 패키지가 시간이 지남에 따라 변경되는 &lt;code&gt;Result&lt;/code&gt; 값을 볼 수 없다는 것을 증명할 수 없으므로, 할당으로 이어지는 모든 작업을 최적화 할 수 없습니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;Result&lt;/code&gt;에 직접 할당하면 어떻게 될까요? 이것이 벤치마크 시간에 영향을 줄까요? &lt;code&gt;popcnt&lt;/code&gt;의 결과를 &lt;code&gt;_&lt;/code&gt;에 할당하면 어떨까요?&lt;/p&gt;

&lt;p&gt;이전 &lt;code&gt;Fib&lt;/code&gt; 벤치마크에서 이러한 예방 조치를 취하지 않았습니다. 그렇게 했어야 했을까요?&lt;/p&gt;

&lt;h3 id=&#34;2-7-벤치마크-실수들&#34;&gt;2.7 벤치마크 실수들&lt;/h3&gt;

&lt;p&gt;&lt;code&gt;for&lt;/code&gt; 루프는 벤치마크 동작에 중요합니다.&lt;/p&gt;

&lt;p&gt;다음은 두 가지 잘못된 벤치마크입니다. 무엇이 잘못되었는지 설명할 수 있을까요?&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-golang&#34; data-lang=&#34;golang&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;BenchmarkFibWrong&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;testing&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;B&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;Fib&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;N&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-golang&#34; data-lang=&#34;golang&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;BenchmarkFibWrong2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;testing&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;B&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;N&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;Fib&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이 벤치마크를 실행해보세요, 어떤가요?&lt;/p&gt;

&lt;h3 id=&#34;2-8-프로파일링-벤치마크&#34;&gt;2.8 프로파일링 벤치마크&lt;/h3&gt;

&lt;p&gt;&lt;code&gt;testing&lt;/code&gt; 패키지는 CPU, 메모리 및 블록 프로파일 생성을 지원합니다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;-cpuprofile=$FILE&lt;/code&gt;은 CPU 프로파일을 &lt;code&gt;$FILE&lt;/code&gt;에 씁니다.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;code&gt;-memprofile=$FILE&lt;/code&gt;, 메모리 프로파일을 &lt;code&gt;$FILE&lt;/code&gt;에 쓰고, &lt;code&gt;-memprofilerate=N&lt;/code&gt;은 프로파일 속도를 1 / N으로 조정합니다.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;code&gt;-blockprofile=$FILE&lt;/code&gt;, &lt;code&gt;$FILE&lt;/code&gt;에 블록 프로파일을 씁니다.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;이 플래그 중 하나를 사용하면 바이너리도 유지됩니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;% go &lt;span class=&#34;nb&#34;&gt;test&lt;/span&gt; -run&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;XXX -bench&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;. -cpuprofile&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;c.p bytes
% go tool pprof c.p&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&#34;2-9-토론&#34;&gt;2.9 토론&lt;/h3&gt;

&lt;p&gt;질문 있으세요?&lt;/p&gt;

&lt;p&gt;휴식 시간이겠군요.&lt;/p&gt;

&lt;h2 id=&#34;3-성능-측정-및-프로파일링&#34;&gt;3. 성능 측정 및 프로파일링&lt;/h2&gt;

&lt;p&gt;이전 섹션에서는 병목 현상이 발생한 위치를 미리 알고 있을 때, 유용한 개별 함수를 벤치마킹하는 방법에 대해 살펴 보았습니다. 하지만, 종종 여러분은 질문하는 입장이 될 것입니다.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;이 프로그램은 왜 이렇게 오래 걸리는 거죠?&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;이처럼 고수준의 질문에 답을 하려면 전체 프로그램을 프로파일링하는 것이 유용합니다. 이번 섹션에서는 Go에 내장된 프로파일링 도구를 사용하여 프로그램내부 동작을 조사할 것입니다.&lt;/p&gt;

&lt;h3 id=&#34;3-1-pprof&#34;&gt;3.1 pprof&lt;/h3&gt;

&lt;p&gt;오늘 우리가 다룰 첫 번째 도구는 pprof입니다. &lt;a href=&#34;https://github.com/google/pprof&#34; target=&#34;_blank&#34;&gt;pprof&lt;/a&gt;는 &lt;a href=&#34;https://github.com/gperftools/gperftools&#34; target=&#34;_blank&#34;&gt;Google Perf Tools&lt;/a&gt; 도구 모음에서 유래했으며, 최초 공개 버전 이후로 Go 런타임에 통합되었습니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;pprof&lt;/code&gt;는 두 부분으로 구성됩니다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;runtime/pprof&lt;/code&gt; 패키지는 모든 Go 프로그램에 내장되어 있습니다.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;go tool pprof&lt;/code&gt;는 프로파일을 조사합니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;3-2-프로파일링-타입&#34;&gt;3.2 프로파일링 타입&lt;/h3&gt;

&lt;p&gt;&lt;code&gt;pprof&lt;/code&gt;는 여러 타입의 프로파일링을 지원합니다. 오늘은 이들 중 세 가지에 대해 설명하겠습니다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;CPU 프로파일링.&lt;/li&gt;
&lt;li&gt;메모리 프로파일링.&lt;/li&gt;
&lt;li&gt;블락 (또는 블락킹) 프로파일링.&lt;/li&gt;
&lt;li&gt;뮤텍스 경합 프로파일링.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&#34;3-2-1-cpu-프로파일링&#34;&gt;3.2.1 CPU 프로파일링&lt;/h4&gt;

&lt;p&gt;CPU 프로파일링은 가장 일반적인 유형의 프로파일이며 가장 명확합니다.&lt;/p&gt;

&lt;p&gt;CPU 프로파일링이 활성화되면, 런타임은 10ms마다 자체적으로 중단되고 현재 실행중인 고루틴의 스택 트래이싱을 기록합니다.&lt;/p&gt;

&lt;p&gt;프로파일이 완료되면 가장 핫한 코드 경로를 결정하기 위해 프로파일을 분석할 수 있습니다.&lt;/p&gt;

&lt;p&gt;함수가 프로파일에 더 많이 나타날수록, 코드 경로가 총 런타임의 백분율로 더 많은 시간이 소요됩니다.&lt;/p&gt;

&lt;h4 id=&#34;3-2-2-메모리-프로파일링&#34;&gt;3.2.2 메모리 프로파일링&lt;/h4&gt;

&lt;p&gt;메모리 프로파일링은 힙 할당이 이루어질 때 스택 트레이싱을 기록합니다.&lt;/p&gt;

&lt;p&gt;스택 할당은 사용 가능(free)한 것으로 가정되며 메모리 프로파일에서 추적되지 않습니다.&lt;/p&gt;

&lt;p&gt;CPU 프로파일링과 같은 메모리 프로파일링은 기본적으로 1000개 할당마다 메모리 프로파일링 샘플 1을 기본으로 합니다. 이 비율은 변경할 수 있습니다.&lt;/p&gt;

&lt;p&gt;메모리 프로파일링은 샘플 기반이며 사용하지 않는 할당을 추적하기 때문에 메모리 프로파일링을 사용하여 애플리케이션의 전체 메모리 사용량을 결정하는 것은 어렵습니다.
                                                                                                                                                                                                                                                                                                                                                   &lt;em&gt;개인적인 의견&lt;/em&gt;: 메모리 누수를 찾는 데 유용한 메모리 프로파일링을 찾지 못했습니다. 애플리케이션에서 사용중인 메모리 양을 확인하는 더 좋은 방법이 있습니다. 나중 프레젠테이션에서 이에 대해 논의할 것입니다.&lt;/p&gt;

&lt;h4 id=&#34;3-2-3-블록-프로파일링&#34;&gt;3.2.3 블록 프로파일링&lt;/h4&gt;

&lt;p&gt;블록 프로파일링은 Go만의 고유한 특징입니다.&lt;/p&gt;

&lt;p&gt;블록 프로파일은 CPU 프로파일과 유사하지만, 고루틴이 공유 자원을 기다리는 데 소요된 시간을 기록합니다.&lt;/p&gt;

&lt;p&gt;이는 애플리케이션의 동시성 병목 현상을 파악하는 데 유용할 수 있습니다.&lt;/p&gt;

&lt;p&gt;블록 프로파일링은 많은 수의 고루틴이 진행할 수 있지만, 블록된 때를 보여줄 수 있습니다. 블럭킹에는 다음이 포함됩니다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;언버퍼드 채널에서 전송 또는 수신합니다.&lt;/li&gt;
&lt;li&gt;풀(full) 채널로 전송하고 빈(empty) 채널에서 수신합니다.&lt;/li&gt;
&lt;li&gt;다른 고루틴이 잠군 &lt;code&gt;sync.Mutex&lt;/code&gt;를 &lt;code&gt;Lock&lt;/code&gt;하려고 합니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;블록 프로파일링은 매우 전문화된 도구이므로, 모든 CPU 및 메모리 사용 병목 현상을 제거했다고 확신하기 전에는 사용해서는 안 됩니다.&lt;/p&gt;

&lt;h4 id=&#34;3-2-4-뮤텍스-프로파일링&#34;&gt;3.2.4 뮤텍스 프로파일링&lt;/h4&gt;

&lt;p&gt;뮤텍스 프로파일링은 블록 프로파일링과 유사하지만 뮤텍스 경합으로 인한 지연을 유발하는 작업에만 집중합니다.&lt;/p&gt;

&lt;p&gt;이 타입의 프로필에 대한 경험이 많지 않지만, 이를 보여주는 예제를 작성했습니다. 곧 그 예제를 살펴 보겠습니다.&lt;/p&gt;

&lt;h3 id=&#34;3-3-한-번에-한-프로파일&#34;&gt;3.3 한 번에 한 프로파일&lt;/h3&gt;

&lt;p&gt;프로파일링은 공짜가 아닙니다.&lt;/p&gt;

&lt;p&gt;프로파일링은 프로그램 성능에 괜찮지만, 프로그램에 측정 가능한 영향을 미칩니다. 특히, 메모리 프로파일 샘플 속도를 증가시키는 경우에 그러합니다.&lt;/p&gt;

&lt;p&gt;대부분의 도구는 한 번에 여러 프로파일링을 활성화하지 못하게 합니다.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;한 번에 둘 이상의 프로파일을 활성화하지 마세요.&lt;/p&gt;

&lt;p&gt;여러 프로파일을 동시에 활성화하면, 서로의 상호 작용을 보게 되고, 그 결과를 버리게 됩니다.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&#34;3-4-프로파일-수집&#34;&gt;3.4 프로파일 수집&lt;/h3&gt;

&lt;p&gt;Go 런타임의 프로파일링 인터페이스는 &lt;code&gt;runtime/pprof&lt;/code&gt; 패키지에 있습니다. &lt;code&gt;runtime/pprof&lt;/code&gt;는 매우 저수준의 도구이며, 역사적 이유로 여러 유형의 프로파일링에 대한 인터페이스가 통일되어 있지 않습니다.&lt;/p&gt;

&lt;p&gt;이전 섹션에서 보았듯이, &lt;code&gt;pprof&lt;/code&gt; 프로파일링은 &lt;code&gt;testing&lt;/code&gt; 패키지에 내장되어 있지만, &lt;code&gt;testing.B&lt;/code&gt; 벤치마크의 컨텍스트 내에 프로파일링하려는 코드를 배치하는 것이 불편하거나 어려운 경우가 있습니다. 그래서 &lt;code&gt;runtime/pprof&lt;/code&gt; API를 직접 사용해야 합니다.&lt;/p&gt;

&lt;p&gt;몇 년 전에 저는 기존 애플리케이션을 보다 쉽게 프로파일링할 수 있도록 [작은 패키지][0]를 작성했습니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-golang&#34; data-lang=&#34;golang&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;github.com/pkg/profile&amp;#34;&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;defer&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;profile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Start&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Stop&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;// ...
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이 섹션에서는 프로파일링 패키지를 사용합니다. 나중에 &lt;code&gt;runtime/pprof&lt;/code&gt; 인터페이스를 직접 사용하는 것에 대해 이야기할 것입니다.&lt;/p&gt;

&lt;h3 id=&#34;3-5-pprof-프로파일-분석&#34;&gt;3.5 pprof 프로파일 분석&lt;/h3&gt;

&lt;p&gt;pprof가 측정할 수 있는 것과 프로파일을 생성하는 방법에 대해 말씀드렸으니 pprof를 사용하여 프로파일을 분석하는 방법에 대해 살펴 보겠습니다.&lt;/p&gt;

&lt;p&gt;분석은 &lt;code&gt;go pprof&lt;/code&gt; 하위 명령으로 수행합니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;go tool pprof /path/to/your/profile&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이 도구는 텍스트, 그래픽, 심지어 프레임 그래프 등 프로파일링 데이터를 여러가지 다르게 표현할 수 있습니다.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Go를 한동안 사용했다면 &lt;code&gt;pprof&lt;/code&gt;에 두 가지 아규먼트가 있다고 들었을 것입니다. Go 1.9부터 프로파일 파일에는 프로파일을 렌더링하는 데 필요한 모든 정보가 포함되어 있습니다. 더 이상 프로파일을 생성한 바이너리가 필요하지 않습니다. 🎉&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h4 id=&#34;3-5-1-더-읽을거리&#34;&gt;3.5.1 더 읽을거리&lt;/h4&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://blog.golang.org/profiling-go-programs&#34; target=&#34;_blank&#34;&gt;Profiling Go programs&lt;/a&gt; (Go Blog)&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://software.intel.com/en-us/blogs/2014/05/10/debugging-performance-issues-in-go-programs&#34; target=&#34;_blank&#34;&gt;Debugging performance issues in Go programs&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&#34;3-5-2-cpu-프로파일링-연습문제&#34;&gt;3.5.2 CPU 프로파일링 (연습문제)&lt;/h4&gt;

&lt;p&gt;단어 개수를 세는 프로그램을 작성해봅시다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-golang&#34; data-lang=&#34;golang&#34;&gt;&lt;span class=&#34;kn&#34;&gt;package&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;main&lt;/span&gt;

&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
	&lt;span class=&#34;s&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
	&lt;span class=&#34;s&#34;&gt;&amp;#34;io&amp;#34;&lt;/span&gt;
	&lt;span class=&#34;s&#34;&gt;&amp;#34;log&amp;#34;&lt;/span&gt;
	&lt;span class=&#34;s&#34;&gt;&amp;#34;os&amp;#34;&lt;/span&gt;
	&lt;span class=&#34;s&#34;&gt;&amp;#34;unicode&amp;#34;&lt;/span&gt;

	&lt;span class=&#34;s&#34;&gt;&amp;#34;github.com/pkg/profile&amp;#34;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;readbyte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;io&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Reader&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;rune&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;buf&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Read&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;buf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[:])&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;rune&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;buf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]),&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;defer&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;profile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Start&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Stop&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;

	&lt;span class=&#34;nx&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;os&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Open&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;os&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Args&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Fatalf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;could not open file %q: %v&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;os&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Args&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

	&lt;span class=&#34;nx&#34;&gt;words&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;inword&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;false&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;readbyte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;io&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;EOF&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
			&lt;span class=&#34;k&#34;&gt;break&lt;/span&gt;
		&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
			&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Fatalf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;could not read file %q: %v&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;os&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Args&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
		&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;unicode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;IsSpace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;inword&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
			&lt;span class=&#34;nx&#34;&gt;words&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;
			&lt;span class=&#34;nx&#34;&gt;inword&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;false&lt;/span&gt;
		&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;inword&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;unicode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;IsLetter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;%q: %d words\n&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;os&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Args&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;words&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;허먼 멜빌(Herman Melville)의 &lt;a href=&#34;https://www.gutenberg.org/ebooks/2701&#34; target=&#34;_blank&#34;&gt;고전 모비딕&lt;/a&gt;(구텐베르크 프로젝트에서 발췌)에 몇 개의 단어가 있는지 살펴보겠습니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-golang&#34; data-lang=&#34;golang&#34;&gt;&lt;span class=&#34;o&#34;&gt;%&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;go&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;build&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;words&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;moby&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;txt&lt;/span&gt;
&lt;span class=&#34;s&#34;&gt;&amp;#34;moby.txt&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;181275&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;words&lt;/span&gt;

&lt;span class=&#34;nx&#34;&gt;real&lt;/span&gt;    &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m2&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;.110&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;
&lt;span class=&#34;nx&#34;&gt;user&lt;/span&gt;    &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m1&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;.264&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;
&lt;span class=&#34;nx&#34;&gt;sys&lt;/span&gt;     &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m0&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;.944&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;wc -w&lt;/code&gt;의 유닉스 명령과 비교합니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-golang&#34; data-lang=&#34;golang&#34;&gt;&lt;span class=&#34;o&#34;&gt;%&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;wc&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;w&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;moby&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;txt&lt;/span&gt;
&lt;span class=&#34;mi&#34;&gt;215829&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;moby&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;txt&lt;/span&gt;

&lt;span class=&#34;nx&#34;&gt;real&lt;/span&gt;    &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m0&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;.012&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;
&lt;span class=&#34;nx&#34;&gt;user&lt;/span&gt;    &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m0&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;.009&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;
&lt;span class=&#34;nx&#34;&gt;sys&lt;/span&gt;     &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m0&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;.002&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;그러니까 숫자가 같지 않네요. wc는 나의 간단한 프로그램과 하는 것처럼 단어를 다르게 생각하기 때문에 약 19% 더 높습니다. 이는 중요하지 않습니다. 두 프로그램 모두 전체 파일을 입력으로 사용하고 단일 패스 카운트에서 한 단어에서 비단어로의 전환 횟수를 계산합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;pprof&lt;/code&gt;를 사용하여 이러한 프로그램의 실행 시간이 다른 이유를 살펴 보겠습니다.&lt;/p&gt;

&lt;h4 id=&#34;3-5-3-cpu-프로파일링-추가&#34;&gt;3.5.3 CPU 프로파일링 추가&lt;/h4&gt;

&lt;p&gt;먼저, &lt;code&gt;main.go&lt;/code&gt; 파일을 수정하여 프로파일링을 활성화 합니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-golang&#34; data-lang=&#34;golang&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
        &lt;span class=&#34;s&#34;&gt;&amp;#34;github.com/pkg/profile&amp;#34;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;defer&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;profile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Start&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Stop&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
        &lt;span class=&#34;o&#34;&gt;//&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;...&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이제 프로그램을 실행하면 &lt;code&gt;cpu.pprof&lt;/code&gt; 파일이 생성됩니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;% go run main.go moby.txt
&lt;span class=&#34;m&#34;&gt;2018&lt;/span&gt;/08/25 &lt;span class=&#34;m&#34;&gt;14&lt;/span&gt;:09:01 profile: cpu profiling enabled, /var/folders/by/3gf34_z95zg05cyj744_vhx40000gn/T/profile239941020/cpu.pprof
&lt;span class=&#34;s2&#34;&gt;&amp;#34;moby.txt&amp;#34;&lt;/span&gt;: &lt;span class=&#34;m&#34;&gt;181275&lt;/span&gt; words
&lt;span class=&#34;m&#34;&gt;2018&lt;/span&gt;/08/25 &lt;span class=&#34;m&#34;&gt;14&lt;/span&gt;:09:03 profile: cpu profiling disabled, /var/folders/by/3gf34_z95zg05cyj744_vhx40000gn/T/profile239941020/cpu.pprof&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이제 &lt;code&gt;go tool pprof&lt;/code&gt;를 사용하여 분석할 수 있는 프로파일이 있죠.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;% go tool pprof /var/folders/by/3gf34_z95zg05cyj744_vhx40000gn/T/profile239941020/cpu.pprof
Type: cpu
Time: Aug &lt;span class=&#34;m&#34;&gt;25&lt;/span&gt;, &lt;span class=&#34;m&#34;&gt;2018&lt;/span&gt; at &lt;span class=&#34;m&#34;&gt;2&lt;/span&gt;:09pm &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;AEST&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
Duration: &lt;span class=&#34;m&#34;&gt;2&lt;/span&gt;.05s, Total &lt;span class=&#34;nv&#34;&gt;samples&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.36s &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;66&lt;/span&gt;.29%&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
Entering interactive mode &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;help&amp;#34;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; commands, &lt;span class=&#34;s2&#34;&gt;&amp;#34;o&amp;#34;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; options&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;pprof&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; top
Showing nodes accounting &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.42s, &lt;span class=&#34;m&#34;&gt;100&lt;/span&gt;% of &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.42s total
      flat  flat%   sum%        cum   cum%
     &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.41s &lt;span class=&#34;m&#34;&gt;99&lt;/span&gt;.30% &lt;span class=&#34;m&#34;&gt;99&lt;/span&gt;.30%      &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.41s &lt;span class=&#34;m&#34;&gt;99&lt;/span&gt;.30%  syscall.Syscall
     &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;.01s   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;.7%   &lt;span class=&#34;m&#34;&gt;100&lt;/span&gt;%      &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.42s   &lt;span class=&#34;m&#34;&gt;100&lt;/span&gt;%  main.readbyte
         &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;     &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;%   &lt;span class=&#34;m&#34;&gt;100&lt;/span&gt;%      &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.41s &lt;span class=&#34;m&#34;&gt;99&lt;/span&gt;.30%  internal/poll.&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;*FD&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;.Read
         &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;     &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;%   &lt;span class=&#34;m&#34;&gt;100&lt;/span&gt;%      &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.42s   &lt;span class=&#34;m&#34;&gt;100&lt;/span&gt;%  main.main
         &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;     &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;%   &lt;span class=&#34;m&#34;&gt;100&lt;/span&gt;%      &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.41s &lt;span class=&#34;m&#34;&gt;99&lt;/span&gt;.30%  os.&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;*File&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;.Read
         &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;     &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;%   &lt;span class=&#34;m&#34;&gt;100&lt;/span&gt;%      &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.41s &lt;span class=&#34;m&#34;&gt;99&lt;/span&gt;.30%  os.&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;*File&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;.read
         &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;     &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;%   &lt;span class=&#34;m&#34;&gt;100&lt;/span&gt;%      &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.42s   &lt;span class=&#34;m&#34;&gt;100&lt;/span&gt;%  runtime.main
         &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;     &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;%   &lt;span class=&#34;m&#34;&gt;100&lt;/span&gt;%      &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.41s &lt;span class=&#34;m&#34;&gt;99&lt;/span&gt;.30%  syscall.Read
         &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;     &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;%   &lt;span class=&#34;m&#34;&gt;100&lt;/span&gt;%      &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.41s &lt;span class=&#34;m&#34;&gt;99&lt;/span&gt;.30%  syscall.read&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;top&lt;/code&gt; 커맨드는 가장 많이 사용하는 커맨드입니다. 이 프로그램은 99%의 시간을 &lt;code&gt;syscall.Syscall&lt;/code&gt;에, 그리고 미미한 부분을 &lt;code&gt;main.readbyte&lt;/code&gt;에 쓰고 있음을 알 수 있습니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;web&lt;/code&gt; 명령으로 이 호출을 시각화할 수도 있습니다. 프로파일 데이터에서 방향 그래프를 생성합니다. 내부적으로는 Graphviz의 &lt;code&gt;dot&lt;/code&gt;명령을 사용합니다.&lt;/p&gt;

&lt;p&gt;그러나 Go 1.10 (아마도 1.11)에서 Go는 네이티브하게 http 서버를 지원하는 &lt;code&gt;pprof&lt;/code&gt; 버전을 제공합니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;% go tool pprof -http&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;:8080 /var/folders/by/3gf34_z95zg05cyj744_vhx40000gn/T/profile239941020/cpu.pprof&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;웹 브라우저를 엽니다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;그래프 모드&lt;/li&gt;
&lt;li&gt;불꽃 그래프 모드&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;그래프에서는 가장 많은 CPU 시간을 소비하는 박스가 가장 큽니다. &lt;code&gt;sys call.SysCall&lt;/code&gt;은 프로그램이 소요한 총 시간의 99.3%입니다. &lt;code&gt;syscall.Syscall&lt;/code&gt;로 이어지는 일련의 박스는 순간적인 호출자를 나타냅니다. 여러 개의 코드 경로가 동일한 함수에 수렴하는 경우 둘 이상이 있을 수 있습니다. 화살표의 크기는 박스의 자식이 소요한 시간을 나타냅니다. &lt;code&gt;main.readByte&lt;/code&gt; 이후 부터는 이 그래프의 암에 사용된 1.41초 중 거의 0을 차지한다는 것을 알 수 있습니다.&lt;/p&gt;

&lt;p&gt;질문: 왜 우리 버전이 wc보다 훨씬 느린지 짐작할 수 있을까요?&lt;/p&gt;

&lt;h4 id=&#34;3-5-4-현재-버전-개선하기&#34;&gt;3.5.4 현재 버전 개선하기&lt;/h4&gt;

&lt;p&gt;프로그램이 느린 이유는 Go의 &lt;code&gt;syscall.Syscall&lt;/code&gt;이 느리기 때문이 아닙니다. 일반적으로 syscall은 비싼 작업이기 때문입니다. (그리고 Spectre 계열의 취약점이 더 많이 발견될수록 비용이 더 많이 듭니다).&lt;/p&gt;

&lt;p&gt;&lt;code&gt;readbyte&lt;/code&gt;를 호출할 때마다 버퍼 크기가 1인 syscall.Read가 발생합니다. 따라서 프로그램에서 실행되는 syscall 수는 입력의 크기와 같습니다. &lt;code&gt;pprof&lt;/code&gt; 그래프에서 입력을 읽는 것이 다른 모든 것을 지배한다는 것을 알 수 있습니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-golang&#34; data-lang=&#34;golang&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;defer&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;profile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Start&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;profile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;MemProfile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;profile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;MemProfileRate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)).&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Stop&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;// defer profile.Start(profile.MemProfile).Stop()
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;os&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Open&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;os&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Args&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Fatalf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;could not open file %q: %v&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;os&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Args&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

	&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bufio&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;NewReader&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;words&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;inword&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;false&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;readbyte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;io&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;EOF&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
			&lt;span class=&#34;k&#34;&gt;break&lt;/span&gt;
		&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
			&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Fatalf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;could not read file %q: %v&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;os&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Args&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
		&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;unicode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;IsSpace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;inword&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
			&lt;span class=&#34;nx&#34;&gt;words&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;
			&lt;span class=&#34;nx&#34;&gt;inword&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;false&lt;/span&gt;
		&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;inword&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;unicode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;IsLetter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;%q: %d words\n&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;os&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Args&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;words&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;입력 파일과 &lt;code&gt;readbyte&lt;/code&gt; 사이에 &lt;code&gt;bufio.Reader&lt;/code&gt;를 삽입하고&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;이 수정된 프로그램의 시간을 &lt;code&gt;wc&lt;/code&gt;와 비교해보세요. 얼마나 가까워졌나요? 프로필을 보고 뭐가 또 있는지 살펴보세요.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h4 id=&#34;3-5-5-메모리-프로파일링&#34;&gt;3.5.5 메모리 프로파일링&lt;/h4&gt;

&lt;p&gt;새로운 &lt;code&gt;words&lt;/code&gt; 프로파일은 &lt;code&gt;readbyte&lt;/code&gt; 함수 안에 무언가가 할당되어 있음을 나타냅니다. &lt;code&gt;pprof&lt;/code&gt;를 사용하여 조사할 수 있습니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-golang&#34; data-lang=&#34;golang&#34;&gt;&lt;span class=&#34;k&#34;&gt;defer&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;profile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Start&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;profile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;MemProfile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Stop&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;다음 평소와 같이 프로그램을 수행하면,&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;% go run main2.go moby.txt
&lt;span class=&#34;m&#34;&gt;2018&lt;/span&gt;/08/25 &lt;span class=&#34;m&#34;&gt;14&lt;/span&gt;:41:15 profile: memory profiling enabled &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;rate &lt;span class=&#34;m&#34;&gt;4096&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;, /var/folders/by/3gf34_z95zg05cyj744_vhx40000gn/T/profile312088211/mem.pprof
&lt;span class=&#34;s2&#34;&gt;&amp;#34;moby.txt&amp;#34;&lt;/span&gt;: &lt;span class=&#34;m&#34;&gt;181275&lt;/span&gt; words
&lt;span class=&#34;m&#34;&gt;2018&lt;/span&gt;/08/25 &lt;span class=&#34;m&#34;&gt;14&lt;/span&gt;:41:15 profile: memory profiling disabled, /var/folders/by/3gf34_z95zg05cyj744_vhx40000gn/T/profile312088211/mem.pprof&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div&gt;
&lt;svg xmlns=&#34;http://www.w3.org/2000/svg&#34; xmlns:xlink=&#34;http://www.w3.org/1999/xlink&#34; width=&#34;100%px&#34; height=&#34;100%px&#34;&gt;
&lt;script type=&#34;text/ecmascript&#34;&gt;
/**
 *  SVGPan library 1.2.2
 * ======================
 *
 * Given an unique existing element with id &#34;viewport&#34; (or when missing, the
 * first g-element), including the library into any SVG adds the following
 * capabilities:
 *
 *  - Mouse panning
 *  - Mouse zooming (using the wheel)
 *  - Object dragging
 *
 * You can configure the behaviour of the pan/zoom/drag with the variables
 * listed in the CONFIGURATION section of this file.
 *
 * Known issues:
 *
 *  - Zooming (while panning) on Safari has still some issues
 *
 * Releases:
 *
 * 1.2.2, Tue Aug 30 17:21:56 CEST 2011, Andrea Leofreddi
 *  - Fixed viewBox on root tag (#7)
 *  - Improved zoom speed (#2)
 *
 * 1.2.1, Mon Jul  4 00:33:18 CEST 2011, Andrea Leofreddi
 *  - Fixed a regression with mouse wheel (now working on Firefox 5)
 *  - Working with viewBox attribute (#4)
 *  - Added &#34;use strict;&#34; and fixed resulting warnings (#5)
 *  - Added configuration variables, dragging is disabled by default (#3)
 *
 * 1.2, Sat Mar 20 08:42:50 GMT 2010, Zeng Xiaohui
 *  Fixed a bug with browser mouse handler interaction
 *
 * 1.1, Wed Feb  3 17:39:33 GMT 2010, Zeng Xiaohui
 *  Updated the zoom code to support the mouse wheel on Safari/Chrome
 *
 * 1.0, Andrea Leofreddi
 *  First release
 *
 * This code is licensed under the following BSD license:
 *
 * Copyright 2009-2017 Andrea Leofreddi &amp;lt;a.leofreddi@vleo.net&amp;gt;. All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification, are
 * permitted provided that the following conditions are met:
 *
 *    1. Redistributions of source code must retain the above copyright
 *       notice, this list of conditions and the following disclaimer.
 *    2. Redistributions in binary form must reproduce the above copyright
 *       notice, this list of conditions and the following disclaimer in the
 *       documentation and/or other materials provided with the distribution.
 *    3. Neither the name of the copyright holder nor the names of its
 *       contributors may be used to endorse or promote products derived from
 *       this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY COPYRIGHT HOLDERS AND CONTRIBUTORS &#39;&#39;AS IS&#39;&#39; AND ANY EXPRESS
 * OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY
 * AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL COPYRIGHT HOLDERS OR
 * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
 * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
 * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF
 * ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * The views and conclusions contained in the software and documentation are those of the
 * authors and should not be interpreted as representing official policies, either expressed
 * or implied, of Andrea Leofreddi.
 */

&#34;use strict&#34;;

/// CONFIGURATION
/// ====&amp;gt;

var enablePan = 1; // 1 or 0: enable or disable panning (default enabled)
var enableZoom = 1; // 1 or 0: enable or disable zooming (default enabled)
var enableDrag = 0; // 1 or 0: enable or disable dragging (default disabled)
var zoomScale = 0.2; // Zoom sensitivity

/// &amp;lt;====
/// END OF CONFIGURATION

var root = document.documentElement;

var state = &#39;none&#39;, svgRoot = null, stateTarget, stateOrigin, stateTf;

setupHandlers(root);

/**
 * Register handlers
 */
function setupHandlers(root){
    setAttributes(root, {
        &#34;onmouseup&#34; : &#34;handleMouseUp(evt)&#34;,
        &#34;onmousedown&#34; : &#34;handleMouseDown(evt)&#34;,
        &#34;onmousemove&#34; : &#34;handleMouseMove(evt)&#34;,
        //&#34;onmouseout&#34; : &#34;handleMouseUp(evt)&#34;, // Decomment this to stop the pan functionality when dragging out of the SVG element
    });

    if(navigator.userAgent.toLowerCase().indexOf(&#39;webkit&#39;) &amp;gt;= 0)
        window.addEventListener(&#39;mousewheel&#39;, handleMouseWheel, false); // Chrome/Safari
    else
        window.addEventListener(&#39;DOMMouseScroll&#39;, handleMouseWheel, false); // Others
}

/**
 * Retrieves the root element for SVG manipulation. The element is then cached into the svgRoot global variable.
 */
function getRoot(root) {
    if(svgRoot == null) {
        var r = root.getElementById(&#34;viewport&#34;) ? root.getElementById(&#34;viewport&#34;) : root.documentElement, t = r;

        while(t != root) {
            if(t.getAttribute(&#34;viewBox&#34;)) {
                setCTM(r, t.getCTM());

                t.removeAttribute(&#34;viewBox&#34;);
            }

            t = t.parentNode;
        }

        svgRoot = r;
    }

    return svgRoot;
}

/**
 * Instance an SVGPoint object with given event coordinates.
 */
function getEventPoint(evt) {
    var p = root.createSVGPoint();

    p.x = evt.clientX;
    p.y = evt.clientY;

    return p;
}

/**
 * Sets the current transform matrix of an element.
 */
function setCTM(element, matrix) {
    var s = &#34;matrix(&#34; + matrix.a + &#34;,&#34; + matrix.b + &#34;,&#34; + matrix.c + &#34;,&#34; + matrix.d + &#34;,&#34; + matrix.e + &#34;,&#34; + matrix.f + &#34;)&#34;;

    element.setAttribute(&#34;transform&#34;, s);
}

/**
 * Dumps a matrix to a string (useful for debug).
 */
function dumpMatrix(matrix) {
    var s = &#34;[ &#34; + matrix.a + &#34;, &#34; + matrix.c + &#34;, &#34; + matrix.e + &#34;\n  &#34; + matrix.b + &#34;, &#34; + matrix.d + &#34;, &#34; + matrix.f + &#34;\n  0, 0, 1 ]&#34;;

    return s;
}

/**
 * Sets attributes of an element.
 */
function setAttributes(element, attributes){
    for (var i in attributes)
        element.setAttributeNS(null, i, attributes[i]);
}

/**
 * Handle mouse wheel event.
 */
function handleMouseWheel(evt) {
    if(!enableZoom)
        return;

    if(evt.preventDefault)
        evt.preventDefault();

    evt.returnValue = false;

    var svgDoc = evt.target.ownerDocument;

    var delta;

    if(evt.wheelDelta)
        delta = evt.wheelDelta / 360; // Chrome/Safari
    else
        delta = evt.detail / -9; // Mozilla

    var z = Math.pow(1 + zoomScale, delta);

    var g = getRoot(svgDoc);

    var p = getEventPoint(evt);

    p = p.matrixTransform(g.getCTM().inverse());

    // Compute new scale matrix in current mouse position
    var k = root.createSVGMatrix().translate(p.x, p.y).scale(z).translate(-p.x, -p.y);

        setCTM(g, g.getCTM().multiply(k));

    if(typeof(stateTf) == &#34;undefined&#34;)
        stateTf = g.getCTM().inverse();

    stateTf = stateTf.multiply(k.inverse());
}

/**
 * Handle mouse move event.
 */
function handleMouseMove(evt) {
    if(evt.preventDefault)
        evt.preventDefault();

    evt.returnValue = false;

    var svgDoc = evt.target.ownerDocument;

    var g = getRoot(svgDoc);

    if(state == &#39;pan&#39; &amp;amp;&amp;amp; enablePan) {
        // Pan mode
        var p = getEventPoint(evt).matrixTransform(stateTf);

        setCTM(g, stateTf.inverse().translate(p.x - stateOrigin.x, p.y - stateOrigin.y));
    } else if(state == &#39;drag&#39; &amp;amp;&amp;amp; enableDrag) {
        // Drag mode
        var p = getEventPoint(evt).matrixTransform(g.getCTM().inverse());

        setCTM(stateTarget, root.createSVGMatrix().translate(p.x - stateOrigin.x, p.y - stateOrigin.y).multiply(g.getCTM().inverse()).multiply(stateTarget.getCTM()));

        stateOrigin = p;
    }
}

/**
 * Handle click event.
 */
function handleMouseDown(evt) {
    if(evt.preventDefault)
        evt.preventDefault();

    evt.returnValue = false;

    var svgDoc = evt.target.ownerDocument;

    var g = getRoot(svgDoc);

    if(
        evt.target.tagName == &#34;svg&#34;
        || !enableDrag // Pan anyway when drag is disabled and the user clicked on an element
    ) {
        // Pan mode
        state = &#39;pan&#39;;

        stateTf = g.getCTM().inverse();

        stateOrigin = getEventPoint(evt).matrixTransform(stateTf);
    } else {
        // Drag mode
        state = &#39;drag&#39;;

        stateTarget = evt.target;

        stateTf = g.getCTM().inverse();

        stateOrigin = getEventPoint(evt).matrixTransform(stateTf);
    }
}

/**
 * Handle mouse button release event.
 */
function handleMouseUp(evt) {
    if(evt.preventDefault)
        evt.preventDefault();

    evt.returnValue = false;

    var svgDoc = evt.target.ownerDocument;

    if(state == &#39;pan&#39; || state == &#39;drag&#39;) {
        // Quit pan mode
        state = &#39;&#39;;
    }
}
&lt;/script&gt;&lt;g id=&#34;viewport&#34; transform=&#34;scale(0.5,0.5) translate(0,0)&#34;&gt;&lt;g id=&#34;graph0&#34; class=&#34;graph&#34; transform=&#34;scale(1 1) rotate(0) translate(4 393)&#34;&gt;
&lt;title&gt;unnamed&lt;/title&gt;
&lt;polygon fill=&#34;#ffffff&#34; stroke=&#34;transparent&#34; points=&#34;-4,4 -4,-393 616,-393 616,4 -4,4&#34;&gt;&lt;/polygon&gt;
&lt;g id=&#34;clust1&#34; class=&#34;cluster&#34;&gt;
&lt;title&gt;cluster_L&lt;/title&gt;
&lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;8,-303 8,-381 464,-381 464,-303 8,-303&#34;&gt;&lt;/polygon&gt;
&lt;/g&gt;
&lt;!-- Type: inuse_space --&gt;
&lt;g id=&#34;node1&#34; class=&#34;node&#34;&gt;
&lt;title&gt;Type: inuse_space&lt;/title&gt;
&lt;polygon fill=&#34;#f8f8f8&#34; stroke=&#34;#000000&#34; points=&#34;456,-373 16,-373 16,-311 456,-311 456,-373&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;start&#34; x=&#34;24&#34; y=&#34;-356.2&#34; font-family=&#34;Times,serif&#34; font-size=&#34;16.00&#34; fill=&#34;#000000&#34;&gt;Type: inuse_space&lt;/text&gt;
&lt;text text-anchor=&#34;start&#34; x=&#34;24&#34; y=&#34;-338.2&#34; font-family=&#34;Times,serif&#34; font-size=&#34;16.00&#34; fill=&#34;#000000&#34;&gt;Time: Mar 23, 2019 at 6:14pm (CET)&lt;/text&gt;
&lt;text text-anchor=&#34;start&#34; x=&#34;24&#34; y=&#34;-320.2&#34; font-family=&#34;Times,serif&#34; font-size=&#34;16.00&#34; fill=&#34;#000000&#34;&gt;Showing nodes accounting for 368.72kB, 100% of 368.72kB total&lt;/text&gt;
&lt;/g&gt;
&lt;!-- N1 --&gt;
&lt;g id=&#34;node1&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N1&lt;/title&gt;
&lt;g id=&#34;a_node1&#34;&gt;&lt;a xlink:title=&#34;main.readbyte (368.72kB)&#34;&gt;
&lt;polygon fill=&#34;#edd5d5&#34; stroke=&#34;#b20000&#34; points=&#34;612,-173 424,-173 424,-87 612,-87 612,-173&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;518&#34; y=&#34;-149.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;24.00&#34; fill=&#34;#000000&#34;&gt;main&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;518&#34; y=&#34;-123.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;24.00&#34; fill=&#34;#000000&#34;&gt;readbyte&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;518&#34; y=&#34;-97.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;24.00&#34; fill=&#34;#000000&#34;&gt;368.72kB (100%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- NN1_0 --&gt;
&lt;g id=&#34;NN1_0&#34; class=&#34;node&#34;&gt;
&lt;title&gt;NN1_0&lt;/title&gt;
&lt;g id=&#34;a_NN1_0&#34;&gt;&lt;a xlink:title=&#34;368.72kB&#34;&gt;
&lt;polygon fill=&#34;#f8f8f8&#34; stroke=&#34;#000000&#34; points=&#34;545,-36 495,-36 491,-32 491,0 541,0 545,-4 545,-36&#34;&gt;&lt;/polygon&gt;
&lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;541,-32 491,-32 &#34;&gt;&lt;/polyline&gt;
&lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;541,-32 541,0 &#34;&gt;&lt;/polyline&gt;
&lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;541,-32 545,-36 &#34;&gt;&lt;/polyline&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;518&#34; y=&#34;-16.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;16B&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N1&amp;#45;&amp;gt;NN1_0 --&gt;
&lt;g id=&#34;edge1&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N1-&amp;gt;NN1_0&lt;/title&gt;
&lt;g id=&#34;a_edge1&#34;&gt;&lt;a xlink:title=&#34;368.72kB&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#000000&#34; d=&#34;M518,-86.6979C518,-73.0814 518,-58.4077 518,-46.1319&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#000000&#34; stroke=&#34;#000000&#34; points=&#34;521.5001,-46.0482 518,-36.0482 514.5001,-46.0482 521.5001,-46.0482&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge1-label&#34;&gt;&lt;a xlink:title=&#34;368.72kB&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;547.5&#34; y=&#34;-57.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 368.72kB&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N2 --&gt;
&lt;g id=&#34;node2&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N2&lt;/title&gt;
&lt;g id=&#34;a_node2&#34;&gt;&lt;a xlink:title=&#34;runtime.main (368.72kB)&#34;&gt;
&lt;polygon fill=&#34;#edd5d5&#34; stroke=&#34;#b20000&#34; points=&#34;562,-360 474,-360 474,-324 562,-324 562,-360&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;518&#34; y=&#34;-349.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;runtime&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;518&#34; y=&#34;-340.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;main&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;518&#34; y=&#34;-331.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 368.72kB (100%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N3 --&gt;
&lt;g id=&#34;node3&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N3&lt;/title&gt;
&lt;g id=&#34;a_node3&#34;&gt;&lt;a xlink:title=&#34;main.main (368.72kB)&#34;&gt;
&lt;polygon fill=&#34;#edd5d5&#34; stroke=&#34;#b20000&#34; points=&#34;562,-260 474,-260 474,-224 562,-224 562,-260&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;518&#34; y=&#34;-249.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;main&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;518&#34; y=&#34;-240.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;main&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;518&#34; y=&#34;-231.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 368.72kB (100%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N2&amp;#45;&amp;gt;N3 --&gt;
&lt;g id=&#34;edge3&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N2-&amp;gt;N3&lt;/title&gt;
&lt;g id=&#34;a_edge3&#34;&gt;&lt;a xlink:title=&#34;runtime.main -&gt; main.main (368.72kB)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b20000&#34; stroke-width=&#34;6&#34; d=&#34;M518,-323.6585C518,-308.7164 518,-287.3665 518,-270.2446&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b20000&#34; stroke=&#34;#b20000&#34; stroke-width=&#34;6&#34; points=&#34;523.2501,-270.2252 518,-260.2253 512.7501,-270.2253 523.2501,-270.2252&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge3-label&#34;&gt;&lt;a xlink:title=&#34;runtime.main -&gt; main.main (368.72kB)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;547.5&#34; y=&#34;-281.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 368.72kB&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N3&amp;#45;&amp;gt;N1 --&gt;
&lt;g id=&#34;edge2&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N3-&amp;gt;N1&lt;/title&gt;
&lt;g id=&#34;a_edge2&#34;&gt;&lt;a xlink:title=&#34;main.main -&gt; main.readbyte (368.72kB)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b20000&#34; stroke-width=&#34;6&#34; d=&#34;M518,-223.5055C518,-212.5063 518,-197.9346 518,-183.5757&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b20000&#34; stroke=&#34;#b20000&#34; stroke-width=&#34;6&#34; points=&#34;523.2501,-183.2119 518,-173.212 512.7501,-183.212 523.2501,-183.2119&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge2-label&#34;&gt;&lt;a xlink:title=&#34;main.main -&gt; main.readbyte (368.72kB)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;547.5&#34; y=&#34;-194.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 368.72kB&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;/g&gt;&lt;/svg&gt;
&lt;/div&gt;

&lt;p&gt;할당이 &lt;code&gt;readbyte&lt;/code&gt;에서 비롯된 것으로 의심했던 것과 같네요. 이는 그렇게 복잡하지 않았죠, readbyte는 3줄짜리라서요.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;pprof를 사용해서 할당 위치를 판별해보세요.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-golang&#34; data-lang=&#34;golang&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;readbyte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;io&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Reader&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;rune&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;buf&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// (1)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;nx&#34;&gt;_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Read&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;buf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[:])&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;rune&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;buf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]),&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;(1) 여기서 할당이 일어납니다.&lt;/p&gt;

&lt;p&gt;다음 섹션에서 왜 이런 일이 발생하는지 자세히 설명하겠지만, 현재는 보여지는 것은 &lt;code&gt;readbyte&lt;/code&gt;에 대한 모든 호출이 새 1바이트 길이의 배열을 할당하고 해당 배열이 힙에 할당되고 있다는 것입니다.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;이것을 피할 수 있는 방법은 무엇일까요? 그 방법들을 CPU와 메모리 프로파일링을 사용해서 입증해봅시다.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;alloc 오브젝트와 inuse 오브젝트&lt;/strong&gt;
메모리 프로파일은 두 가지로 구분되며, &lt;code&gt;go tool pprof&lt;/code&gt; 플래그의 이름을 따라 명명되었습니다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-alloc_objects&lt;/code&gt;는 각 할당이 이루어진 호출 사이트를 리포팅합니다.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-inuse_objects&lt;/code&gt;는 프로파일 끝까지 도달하게 되는 경우, 할당이 이루어진 호출 사이트를 리포팅합니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;다음은 이를 증명해보기 위해, 다수의 메모리를 제어된 방식으로 할당하도록 고안된 프로그램입니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-golang&#34; data-lang=&#34;golang&#34;&gt;&lt;span class=&#34;kd&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;count&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;100000&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;y&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;defer&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;profile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Start&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;profile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;MemProfile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;profile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;MemProfileRate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)).&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Stop&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;y&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;allocate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;runtime&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;GC&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;// allocate allocates count byte slices and returns the first slice allocated.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;allocate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;x&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[][]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;count&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;x&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;append&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;makeByteSlice&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;// makeByteSlice returns a byte slice of a random length in the range [0, 16384).
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;makeByteSlice&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;make&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;rand&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Intn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;^&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;14&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;프로그램은 &lt;code&gt;profile&lt;/code&gt; 패키지의 어노테이션을 달고, 메모리 프로파일 속도를 1로 설정합니다. 즉, 모든 할당에 대해 스택 트레이싱을 기록합니다. 이로 인해 프로그램 속도가 많이 느려지지만, 잠시 후 이유를 알게 됩니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;% go run main.go
&lt;span class=&#34;m&#34;&gt;2018&lt;/span&gt;/08/25 &lt;span class=&#34;m&#34;&gt;15&lt;/span&gt;:22:05 profile: memory profiling enabled &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;rate &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;, /var/folders/by/3gf34_z95zg05cyj744_vhx40000gn/T/profile730812803/mem.pprof
&lt;span class=&#34;m&#34;&gt;2018&lt;/span&gt;/08/25 &lt;span class=&#34;m&#34;&gt;15&lt;/span&gt;:22:05 profile: memory profiling disabled, /var/folders/by/3gf34_z95zg05cyj744_vhx40000gn/T/profile730812803/mem.pprof&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;할당된 객체의 그래프를 살펴 보겠습니다. 이 그래프는 기본값이며 프로파일 동안 모든 객체의 할당으로 이어지는 호출 그래프를 보여줍니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;% go tool pprof -http&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;:8080 /var/folders/by/3gf34_z95zg05cyj744_vhx40000gn/T/profile891268605/mem.pprof&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div&gt;
&lt;svg xmlns=&#34;http://www.w3.org/2000/svg&#34; xmlns:xlink=&#34;http://www.w3.org/1999/xlink&#34; width=&#34;100%px&#34; height=&#34;100%px&#34;&gt;
&lt;script type=&#34;text/ecmascript&#34;&gt;
/**
 *  SVGPan library 1.2.2
 * ======================
 *
 * Given an unique existing element with id &#34;viewport&#34; (or when missing, the
 * first g-element), including the library into any SVG adds the following
 * capabilities:
 *
 *  - Mouse panning
 *  - Mouse zooming (using the wheel)
 *  - Object dragging
 *
 * You can configure the behaviour of the pan/zoom/drag with the variables
 * listed in the CONFIGURATION section of this file.
 *
 * Known issues:
 *
 *  - Zooming (while panning) on Safari has still some issues
 *
 * Releases:
 *
 * 1.2.2, Tue Aug 30 17:21:56 CEST 2011, Andrea Leofreddi
 *  - Fixed viewBox on root tag (#7)
 *  - Improved zoom speed (#2)
 *
 * 1.2.1, Mon Jul  4 00:33:18 CEST 2011, Andrea Leofreddi
 *  - Fixed a regression with mouse wheel (now working on Firefox 5)
 *  - Working with viewBox attribute (#4)
 *  - Added &#34;use strict;&#34; and fixed resulting warnings (#5)
 *  - Added configuration variables, dragging is disabled by default (#3)
 *
 * 1.2, Sat Mar 20 08:42:50 GMT 2010, Zeng Xiaohui
 *  Fixed a bug with browser mouse handler interaction
 *
 * 1.1, Wed Feb  3 17:39:33 GMT 2010, Zeng Xiaohui
 *  Updated the zoom code to support the mouse wheel on Safari/Chrome
 *
 * 1.0, Andrea Leofreddi
 *  First release
 *
 * This code is licensed under the following BSD license:
 *
 * Copyright 2009-2017 Andrea Leofreddi &amp;lt;a.leofreddi@vleo.net&amp;gt;. All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification, are
 * permitted provided that the following conditions are met:
 *
 *    1. Redistributions of source code must retain the above copyright
 *       notice, this list of conditions and the following disclaimer.
 *    2. Redistributions in binary form must reproduce the above copyright
 *       notice, this list of conditions and the following disclaimer in the
 *       documentation and/or other materials provided with the distribution.
 *    3. Neither the name of the copyright holder nor the names of its
 *       contributors may be used to endorse or promote products derived from
 *       this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY COPYRIGHT HOLDERS AND CONTRIBUTORS &#39;&#39;AS IS&#39;&#39; AND ANY EXPRESS
 * OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY
 * AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL COPYRIGHT HOLDERS OR
 * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
 * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
 * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF
 * ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * The views and conclusions contained in the software and documentation are those of the
 * authors and should not be interpreted as representing official policies, either expressed
 * or implied, of Andrea Leofreddi.
 */

&#34;use strict&#34;;

/// CONFIGURATION
/// ====&amp;gt;

var enablePan = 1; // 1 or 0: enable or disable panning (default enabled)
var enableZoom = 1; // 1 or 0: enable or disable zooming (default enabled)
var enableDrag = 0; // 1 or 0: enable or disable dragging (default disabled)
var zoomScale = 0.2; // Zoom sensitivity

/// &amp;lt;====
/// END OF CONFIGURATION

var root = document.documentElement;

var state = &#39;none&#39;, svgRoot = null, stateTarget, stateOrigin, stateTf;

setupHandlers(root);

/**
 * Register handlers
 */
function setupHandlers(root){
    setAttributes(root, {
        &#34;onmouseup&#34; : &#34;handleMouseUp(evt)&#34;,
        &#34;onmousedown&#34; : &#34;handleMouseDown(evt)&#34;,
        &#34;onmousemove&#34; : &#34;handleMouseMove(evt)&#34;,
        //&#34;onmouseout&#34; : &#34;handleMouseUp(evt)&#34;, // Decomment this to stop the pan functionality when dragging out of the SVG element
    });

    if(navigator.userAgent.toLowerCase().indexOf(&#39;webkit&#39;) &amp;gt;= 0)
        window.addEventListener(&#39;mousewheel&#39;, handleMouseWheel, false); // Chrome/Safari
    else
        window.addEventListener(&#39;DOMMouseScroll&#39;, handleMouseWheel, false); // Others
}

/**
 * Retrieves the root element for SVG manipulation. The element is then cached into the svgRoot global variable.
 */
function getRoot(root) {
    if(svgRoot == null) {
        var r = root.getElementById(&#34;viewport&#34;) ? root.getElementById(&#34;viewport&#34;) : root.documentElement, t = r;

        while(t != root) {
            if(t.getAttribute(&#34;viewBox&#34;)) {
                setCTM(r, t.getCTM());

                t.removeAttribute(&#34;viewBox&#34;);
            }

            t = t.parentNode;
        }

        svgRoot = r;
    }

    return svgRoot;
}

/**
 * Instance an SVGPoint object with given event coordinates.
 */
function getEventPoint(evt) {
    var p = root.createSVGPoint();

    p.x = evt.clientX;
    p.y = evt.clientY;

    return p;
}

/**
 * Sets the current transform matrix of an element.
 */
function setCTM(element, matrix) {
    var s = &#34;matrix(&#34; + matrix.a + &#34;,&#34; + matrix.b + &#34;,&#34; + matrix.c + &#34;,&#34; + matrix.d + &#34;,&#34; + matrix.e + &#34;,&#34; + matrix.f + &#34;)&#34;;

    element.setAttribute(&#34;transform&#34;, s);
}

/**
 * Dumps a matrix to a string (useful for debug).
 */
function dumpMatrix(matrix) {
    var s = &#34;[ &#34; + matrix.a + &#34;, &#34; + matrix.c + &#34;, &#34; + matrix.e + &#34;\n  &#34; + matrix.b + &#34;, &#34; + matrix.d + &#34;, &#34; + matrix.f + &#34;\n  0, 0, 1 ]&#34;;

    return s;
}

/**
 * Sets attributes of an element.
 */
function setAttributes(element, attributes){
    for (var i in attributes)
        element.setAttributeNS(null, i, attributes[i]);
}

/**
 * Handle mouse wheel event.
 */
function handleMouseWheel(evt) {
    if(!enableZoom)
        return;

    if(evt.preventDefault)
        evt.preventDefault();

    evt.returnValue = false;

    var svgDoc = evt.target.ownerDocument;

    var delta;

    if(evt.wheelDelta)
        delta = evt.wheelDelta / 360; // Chrome/Safari
    else
        delta = evt.detail / -9; // Mozilla

    var z = Math.pow(1 + zoomScale, delta);

    var g = getRoot(svgDoc);

    var p = getEventPoint(evt);

    p = p.matrixTransform(g.getCTM().inverse());

    // Compute new scale matrix in current mouse position
    var k = root.createSVGMatrix().translate(p.x, p.y).scale(z).translate(-p.x, -p.y);

        setCTM(g, g.getCTM().multiply(k));

    if(typeof(stateTf) == &#34;undefined&#34;)
        stateTf = g.getCTM().inverse();

    stateTf = stateTf.multiply(k.inverse());
}

/**
 * Handle mouse move event.
 */
function handleMouseMove(evt) {
    if(evt.preventDefault)
        evt.preventDefault();

    evt.returnValue = false;

    var svgDoc = evt.target.ownerDocument;

    var g = getRoot(svgDoc);

    if(state == &#39;pan&#39; &amp;amp;&amp;amp; enablePan) {
        // Pan mode
        var p = getEventPoint(evt).matrixTransform(stateTf);

        setCTM(g, stateTf.inverse().translate(p.x - stateOrigin.x, p.y - stateOrigin.y));
    } else if(state == &#39;drag&#39; &amp;amp;&amp;amp; enableDrag) {
        // Drag mode
        var p = getEventPoint(evt).matrixTransform(g.getCTM().inverse());

        setCTM(stateTarget, root.createSVGMatrix().translate(p.x - stateOrigin.x, p.y - stateOrigin.y).multiply(g.getCTM().inverse()).multiply(stateTarget.getCTM()));

        stateOrigin = p;
    }
}

/**
 * Handle click event.
 */
function handleMouseDown(evt) {
    if(evt.preventDefault)
        evt.preventDefault();

    evt.returnValue = false;

    var svgDoc = evt.target.ownerDocument;

    var g = getRoot(svgDoc);

    if(
        evt.target.tagName == &#34;svg&#34;
        || !enableDrag // Pan anyway when drag is disabled and the user clicked on an element
    ) {
        // Pan mode
        state = &#39;pan&#39;;

        stateTf = g.getCTM().inverse();

        stateOrigin = getEventPoint(evt).matrixTransform(stateTf);
    } else {
        // Drag mode
        state = &#39;drag&#39;;

        stateTarget = evt.target;

        stateTf = g.getCTM().inverse();

        stateOrigin = getEventPoint(evt).matrixTransform(stateTf);
    }
}

/**
 * Handle mouse button release event.
 */
function handleMouseUp(evt) {
    if(evt.preventDefault)
        evt.preventDefault();

    evt.returnValue = false;

    var svgDoc = evt.target.ownerDocument;

    if(state == &#39;pan&#39; || state == &#39;drag&#39;) {
        // Quit pan mode
        state = &#39;&#39;;
    }
}
&lt;/script&gt;&lt;g id=&#34;viewport&#34; transform=&#34;scale(0.5,0.5) translate(0,0)&#34;&gt;&lt;g id=&#34;graph0&#34; class=&#34;graph&#34; transform=&#34;scale(1 1) rotate(0) translate(4 510)&#34;&gt;
&lt;title&gt;unnamed&lt;/title&gt;
&lt;polygon fill=&#34;#ffffff&#34; stroke=&#34;transparent&#34; points=&#34;-4,4 -4,-510 573,-510 573,4 -4,4&#34;&gt;&lt;/polygon&gt;
&lt;g id=&#34;clust1&#34; class=&#34;cluster&#34;&gt;
&lt;title&gt;cluster_L&lt;/title&gt;
&lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;8,-402 8,-498 432,-498 432,-402 8,-402&#34;&gt;&lt;/polygon&gt;
&lt;/g&gt;
&lt;!-- Type: alloc_objects --&gt;
&lt;g id=&#34;node1&#34; class=&#34;node&#34;&gt;
&lt;title&gt;Type: alloc_objects&lt;/title&gt;
&lt;polygon fill=&#34;#f8f8f8&#34; stroke=&#34;#000000&#34; points=&#34;423.5,-490 16.5,-490 16.5,-410 423.5,-410 423.5,-490&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;start&#34; x=&#34;24.5&#34; y=&#34;-473.2&#34; font-family=&#34;Times,serif&#34; font-size=&#34;16.00&#34; fill=&#34;#000000&#34;&gt;Type: alloc_objects&lt;/text&gt;
&lt;text text-anchor=&#34;start&#34; x=&#34;24.5&#34; y=&#34;-455.2&#34; font-family=&#34;Times,serif&#34; font-size=&#34;16.00&#34; fill=&#34;#000000&#34;&gt;Time: Mar 23, 2019 at 1:08pm (GMT)&lt;/text&gt;
&lt;text text-anchor=&#34;start&#34; x=&#34;24.5&#34; y=&#34;-437.2&#34; font-family=&#34;Times,serif&#34; font-size=&#34;16.00&#34; fill=&#34;#000000&#34;&gt;Showing nodes accounting for 43837, 99.83% of 43910 total&lt;/text&gt;
&lt;text text-anchor=&#34;start&#34; x=&#34;24.5&#34; y=&#34;-419.2&#34; font-family=&#34;Times,serif&#34; font-size=&#34;16.00&#34; fill=&#34;#000000&#34;&gt;Dropped 66 nodes (cum &amp;lt;= 219)&lt;/text&gt;
&lt;/g&gt;
&lt;!-- N1 --&gt;
&lt;g id=&#34;node1&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N1&lt;/title&gt;
&lt;g id=&#34;a_node1&#34;&gt;&lt;a xlink:title=&#34;main.makeByteSlice (43806)&#34;&gt;
&lt;polygon fill=&#34;#edd5d5&#34; stroke=&#34;#b20000&#34; points=&#34;569,-173 397,-173 397,-87 569,-87 569,-173&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;483&#34; y=&#34;-149.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;24.00&#34; fill=&#34;#000000&#34;&gt;main&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;483&#34; y=&#34;-123.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;24.00&#34; fill=&#34;#000000&#34;&gt;makeByteSlice&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;483&#34; y=&#34;-97.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;24.00&#34; fill=&#34;#000000&#34;&gt;43806 (99.76%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- NN1_0 --&gt;
&lt;g id=&#34;NN1_0&#34; class=&#34;node&#34;&gt;
&lt;title&gt;NN1_0&lt;/title&gt;
&lt;g id=&#34;a_NN1_0&#34;&gt;&lt;a xlink:title=&#34;43806&#34;&gt;
&lt;polygon fill=&#34;#f8f8f8&#34; stroke=&#34;#000000&#34; points=&#34;510,-36 460,-36 456,-32 456,0 506,0 510,-4 510,-36&#34;&gt;&lt;/polygon&gt;
&lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;506,-32 456,-32 &#34;&gt;&lt;/polyline&gt;
&lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;506,-32 506,0 &#34;&gt;&lt;/polyline&gt;
&lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;506,-32 510,-36 &#34;&gt;&lt;/polyline&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;483&#34; y=&#34;-16.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;16B&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N1&amp;#45;&amp;gt;NN1_0 --&gt;
&lt;g id=&#34;edge1&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N1-&amp;gt;NN1_0&lt;/title&gt;
&lt;g id=&#34;a_edge1&#34;&gt;&lt;a xlink:title=&#34;43806&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#000000&#34; d=&#34;M483,-86.6979C483,-73.0814 483,-58.4077 483,-46.1319&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#000000&#34; stroke=&#34;#000000&#34; points=&#34;486.5001,-46.0482 483,-36.0482 479.5001,-46.0482 486.5001,-46.0482&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge1-label&#34;&gt;&lt;a xlink:title=&#34;43806&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;502.5&#34; y=&#34;-57.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 43806&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N2 --&gt;
&lt;g id=&#34;node2&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N2&lt;/title&gt;
&lt;g id=&#34;a_node2&#34;&gt;&lt;a xlink:title=&#34;runtime.main (43856)&#34;&gt;
&lt;polygon fill=&#34;#edd5d5&#34; stroke=&#34;#b20000&#34; points=&#34;524.5,-468 441.5,-468 441.5,-432 524.5,-432 524.5,-468&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;483&#34; y=&#34;-457.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;runtime&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;483&#34; y=&#34;-448.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;main&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;483&#34; y=&#34;-439.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 43856 (99.88%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N4 --&gt;
&lt;g id=&#34;node4&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N4&lt;/title&gt;
&lt;g id=&#34;a_node4&#34;&gt;&lt;a xlink:title=&#34;main.main (43856)&#34;&gt;
&lt;polygon fill=&#34;#edd5d5&#34; stroke=&#34;#b20000&#34; points=&#34;524.5,-359 441.5,-359 441.5,-323 524.5,-323 524.5,-359&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;483&#34; y=&#34;-348.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;main&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;483&#34; y=&#34;-339.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;main&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;483&#34; y=&#34;-330.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 43856 (99.88%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N2&amp;#45;&amp;gt;N4 --&gt;
&lt;g id=&#34;edge2&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N2-&amp;gt;N4&lt;/title&gt;
&lt;g id=&#34;a_edge2&#34;&gt;&lt;a xlink:title=&#34;runtime.main -&gt; main.main (43856)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b20000&#34; stroke-width=&#34;5&#34; d=&#34;M483,-431.5096C483,-414.4952 483,-389.0055 483,-369.4076&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b20000&#34; stroke=&#34;#b20000&#34; stroke-width=&#34;5&#34; points=&#34;487.3751,-369.2172 483,-359.2173 478.6251,-369.2173 487.3751,-369.2172&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge2-label&#34;&gt;&lt;a xlink:title=&#34;runtime.main -&gt; main.main (43856)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;502.5&#34; y=&#34;-380.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 43856&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N3 --&gt;
&lt;g id=&#34;node3&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N3&lt;/title&gt;
&lt;g id=&#34;a_node3&#34;&gt;&lt;a xlink:title=&#34;main.allocate (43837)&#34;&gt;
&lt;polygon fill=&#34;#edd5d5&#34; stroke=&#34;#b20000&#34; points=&#34;525.5,-272 440.5,-272 440.5,-224 525.5,-224 525.5,-272&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;483&#34; y=&#34;-260.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;9.00&#34; fill=&#34;#000000&#34;&gt;main&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;483&#34; y=&#34;-250.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;9.00&#34; fill=&#34;#000000&#34;&gt;allocate&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;483&#34; y=&#34;-240.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;9.00&#34; fill=&#34;#000000&#34;&gt;31 (0.071%)&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;483&#34; y=&#34;-230.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;9.00&#34; fill=&#34;#000000&#34;&gt;of 43837 (99.83%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N3&amp;#45;&amp;gt;N1 --&gt;
&lt;g id=&#34;edge4&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N3-&amp;gt;N1&lt;/title&gt;
&lt;g id=&#34;a_edge4&#34;&gt;&lt;a xlink:title=&#34;main.allocate -&gt; main.makeByteSlice (43806)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b20000&#34; stroke-width=&#34;5&#34; d=&#34;M483,-223.8362C483,-212.1166 483,-197.5399 483,-183.3966&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b20000&#34; stroke=&#34;#b20000&#34; stroke-width=&#34;5&#34; points=&#34;487.3751,-183.2217 483,-173.2218 478.6251,-183.2218 487.3751,-183.2217&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge4-label&#34;&gt;&lt;a xlink:title=&#34;main.allocate -&gt; main.makeByteSlice (43806)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;502.5&#34; y=&#34;-194.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 43806&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N4&amp;#45;&amp;gt;N3 --&gt;
&lt;g id=&#34;edge3&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N4-&amp;gt;N3&lt;/title&gt;
&lt;g id=&#34;a_edge3&#34;&gt;&lt;a xlink:title=&#34;main.main -&gt; main.allocate (43837)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b20000&#34; stroke-width=&#34;5&#34; d=&#34;M483,-322.6262C483,-311.1524 483,-296.019 483,-282.3808&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b20000&#34; stroke=&#34;#b20000&#34; stroke-width=&#34;5&#34; points=&#34;487.3751,-282.3283 483,-272.3284 478.6251,-282.3284 487.3751,-282.3283&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge3-label&#34;&gt;&lt;a xlink:title=&#34;main.main -&gt; main.allocate (43837)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;502.5&#34; y=&#34;-293.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 43837&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;/g&gt;&lt;/svg&gt;
&lt;/div&gt;

&lt;p&gt;당연하게 할당량의 99% 이상이 &lt;code&gt;makeByteSlice&lt;/code&gt; 내부에 있습니다. 이제 &lt;code&gt;-inuse_objects&lt;/code&gt;를 사용하여 동일한 프로파일을 살펴보겠습니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;% go tool pprof -http&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;:8080 /var/folders/by/3gf34_z95zg05cyj744_vhx40000gn/T/profile891268605/mem.pprof&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div&gt;
&lt;svg xmlns=&#34;http://www.w3.org/2000/svg&#34; xmlns:xlink=&#34;http://www.w3.org/1999/xlink&#34; width=&#34;100%px&#34; height=&#34;100%px&#34;&gt;
&lt;script type=&#34;text/ecmascript&#34;&gt;
/**
 *  SVGPan library 1.2.2
 * ======================
 *
 * Given an unique existing element with id &#34;viewport&#34; (or when missing, the
 * first g-element), including the library into any SVG adds the following
 * capabilities:
 *
 *  - Mouse panning
 *  - Mouse zooming (using the wheel)
 *  - Object dragging
 *
 * You can configure the behaviour of the pan/zoom/drag with the variables
 * listed in the CONFIGURATION section of this file.
 *
 * Known issues:
 *
 *  - Zooming (while panning) on Safari has still some issues
 *
 * Releases:
 *
 * 1.2.2, Tue Aug 30 17:21:56 CEST 2011, Andrea Leofreddi
 *  - Fixed viewBox on root tag (#7)
 *  - Improved zoom speed (#2)
 *
 * 1.2.1, Mon Jul  4 00:33:18 CEST 2011, Andrea Leofreddi
 *  - Fixed a regression with mouse wheel (now working on Firefox 5)
 *  - Working with viewBox attribute (#4)
 *  - Added &#34;use strict;&#34; and fixed resulting warnings (#5)
 *  - Added configuration variables, dragging is disabled by default (#3)
 *
 * 1.2, Sat Mar 20 08:42:50 GMT 2010, Zeng Xiaohui
 *  Fixed a bug with browser mouse handler interaction
 *
 * 1.1, Wed Feb  3 17:39:33 GMT 2010, Zeng Xiaohui
 *  Updated the zoom code to support the mouse wheel on Safari/Chrome
 *
 * 1.0, Andrea Leofreddi
 *  First release
 *
 * This code is licensed under the following BSD license:
 *
 * Copyright 2009-2017 Andrea Leofreddi &amp;lt;a.leofreddi@vleo.net&amp;gt;. All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification, are
 * permitted provided that the following conditions are met:
 *
 *    1. Redistributions of source code must retain the above copyright
 *       notice, this list of conditions and the following disclaimer.
 *    2. Redistributions in binary form must reproduce the above copyright
 *       notice, this list of conditions and the following disclaimer in the
 *       documentation and/or other materials provided with the distribution.
 *    3. Neither the name of the copyright holder nor the names of its
 *       contributors may be used to endorse or promote products derived from
 *       this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY COPYRIGHT HOLDERS AND CONTRIBUTORS &#39;&#39;AS IS&#39;&#39; AND ANY EXPRESS
 * OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY
 * AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL COPYRIGHT HOLDERS OR
 * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
 * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
 * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF
 * ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * The views and conclusions contained in the software and documentation are those of the
 * authors and should not be interpreted as representing official policies, either expressed
 * or implied, of Andrea Leofreddi.
 */

&#34;use strict&#34;;

/// CONFIGURATION
/// ====&amp;gt;

var enablePan = 1; // 1 or 0: enable or disable panning (default enabled)
var enableZoom = 1; // 1 or 0: enable or disable zooming (default enabled)
var enableDrag = 0; // 1 or 0: enable or disable dragging (default disabled)
var zoomScale = 0.2; // Zoom sensitivity

/// &amp;lt;====
/// END OF CONFIGURATION

var root = document.documentElement;

var state = &#39;none&#39;, svgRoot = null, stateTarget, stateOrigin, stateTf;

setupHandlers(root);

/**
 * Register handlers
 */
function setupHandlers(root){
    setAttributes(root, {
        &#34;onmouseup&#34; : &#34;handleMouseUp(evt)&#34;,
        &#34;onmousedown&#34; : &#34;handleMouseDown(evt)&#34;,
        &#34;onmousemove&#34; : &#34;handleMouseMove(evt)&#34;,
        //&#34;onmouseout&#34; : &#34;handleMouseUp(evt)&#34;, // Decomment this to stop the pan functionality when dragging out of the SVG element
    });

    if(navigator.userAgent.toLowerCase().indexOf(&#39;webkit&#39;) &amp;gt;= 0)
        window.addEventListener(&#39;mousewheel&#39;, handleMouseWheel, false); // Chrome/Safari
    else
        window.addEventListener(&#39;DOMMouseScroll&#39;, handleMouseWheel, false); // Others
}

/**
 * Retrieves the root element for SVG manipulation. The element is then cached into the svgRoot global variable.
 */
function getRoot(root) {
    if(svgRoot == null) {
        var r = root.getElementById(&#34;viewport&#34;) ? root.getElementById(&#34;viewport&#34;) : root.documentElement, t = r;

        while(t != root) {
            if(t.getAttribute(&#34;viewBox&#34;)) {
                setCTM(r, t.getCTM());

                t.removeAttribute(&#34;viewBox&#34;);
            }

            t = t.parentNode;
        }

        svgRoot = r;
    }

    return svgRoot;
}

/**
 * Instance an SVGPoint object with given event coordinates.
 */
function getEventPoint(evt) {
    var p = root.createSVGPoint();

    p.x = evt.clientX;
    p.y = evt.clientY;

    return p;
}

/**
 * Sets the current transform matrix of an element.
 */
function setCTM(element, matrix) {
    var s = &#34;matrix(&#34; + matrix.a + &#34;,&#34; + matrix.b + &#34;,&#34; + matrix.c + &#34;,&#34; + matrix.d + &#34;,&#34; + matrix.e + &#34;,&#34; + matrix.f + &#34;)&#34;;

    element.setAttribute(&#34;transform&#34;, s);
}

/**
 * Dumps a matrix to a string (useful for debug).
 */
function dumpMatrix(matrix) {
    var s = &#34;[ &#34; + matrix.a + &#34;, &#34; + matrix.c + &#34;, &#34; + matrix.e + &#34;\n  &#34; + matrix.b + &#34;, &#34; + matrix.d + &#34;, &#34; + matrix.f + &#34;\n  0, 0, 1 ]&#34;;

    return s;
}

/**
 * Sets attributes of an element.
 */
function setAttributes(element, attributes){
    for (var i in attributes)
        element.setAttributeNS(null, i, attributes[i]);
}

/**
 * Handle mouse wheel event.
 */
function handleMouseWheel(evt) {
    if(!enableZoom)
        return;

    if(evt.preventDefault)
        evt.preventDefault();

    evt.returnValue = false;

    var svgDoc = evt.target.ownerDocument;

    var delta;

    if(evt.wheelDelta)
        delta = evt.wheelDelta / 360; // Chrome/Safari
    else
        delta = evt.detail / -9; // Mozilla

    var z = Math.pow(1 + zoomScale, delta);

    var g = getRoot(svgDoc);

    var p = getEventPoint(evt);

    p = p.matrixTransform(g.getCTM().inverse());

    // Compute new scale matrix in current mouse position
    var k = root.createSVGMatrix().translate(p.x, p.y).scale(z).translate(-p.x, -p.y);

        setCTM(g, g.getCTM().multiply(k));

    if(typeof(stateTf) == &#34;undefined&#34;)
        stateTf = g.getCTM().inverse();

    stateTf = stateTf.multiply(k.inverse());
}

/**
 * Handle mouse move event.
 */
function handleMouseMove(evt) {
    if(evt.preventDefault)
        evt.preventDefault();

    evt.returnValue = false;

    var svgDoc = evt.target.ownerDocument;

    var g = getRoot(svgDoc);

    if(state == &#39;pan&#39; &amp;amp;&amp;amp; enablePan) {
        // Pan mode
        var p = getEventPoint(evt).matrixTransform(stateTf);

        setCTM(g, stateTf.inverse().translate(p.x - stateOrigin.x, p.y - stateOrigin.y));
    } else if(state == &#39;drag&#39; &amp;amp;&amp;amp; enableDrag) {
        // Drag mode
        var p = getEventPoint(evt).matrixTransform(g.getCTM().inverse());

        setCTM(stateTarget, root.createSVGMatrix().translate(p.x - stateOrigin.x, p.y - stateOrigin.y).multiply(g.getCTM().inverse()).multiply(stateTarget.getCTM()));

        stateOrigin = p;
    }
}

/**
 * Handle click event.
 */
function handleMouseDown(evt) {
    if(evt.preventDefault)
        evt.preventDefault();

    evt.returnValue = false;

    var svgDoc = evt.target.ownerDocument;

    var g = getRoot(svgDoc);

    if(
        evt.target.tagName == &#34;svg&#34;
        || !enableDrag // Pan anyway when drag is disabled and the user clicked on an element
    ) {
        // Pan mode
        state = &#39;pan&#39;;

        stateTf = g.getCTM().inverse();

        stateOrigin = getEventPoint(evt).matrixTransform(stateTf);
    } else {
        // Drag mode
        state = &#39;drag&#39;;

        stateTarget = evt.target;

        stateTf = g.getCTM().inverse();

        stateOrigin = getEventPoint(evt).matrixTransform(stateTf);
    }
}

/**
 * Handle mouse button release event.
 */
function handleMouseUp(evt) {
    if(evt.preventDefault)
        evt.preventDefault();

    evt.returnValue = false;

    var svgDoc = evt.target.ownerDocument;

    if(state == &#39;pan&#39; || state == &#39;drag&#39;) {
        // Quit pan mode
        state = &#39;&#39;;
    }
}
&lt;/script&gt;&lt;g id=&#34;viewport&#34; transform=&#34;scale(0.5,0.5) translate(0,0)&#34;&gt;&lt;g id=&#34;graph0&#34; class=&#34;graph&#34; transform=&#34;scale(1 1) rotate(0) translate(4 2029)&#34;&gt;
&lt;title&gt;unnamed&lt;/title&gt;
&lt;polygon fill=&#34;#ffffff&#34; stroke=&#34;transparent&#34; points=&#34;-4,4 -4,-2029 1378,-2029 1378,4 -4,4&#34;&gt;&lt;/polygon&gt;
&lt;g id=&#34;clust1&#34; class=&#34;cluster&#34;&gt;
&lt;title&gt;cluster_L&lt;/title&gt;
&lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;8,-1939 8,-2017 372,-2017 372,-1939 8,-1939&#34;&gt;&lt;/polygon&gt;
&lt;/g&gt;
&lt;!-- Type: inuse_objects --&gt;
&lt;g id=&#34;node1&#34; class=&#34;node&#34;&gt;
&lt;title&gt;Type: inuse_objects&lt;/title&gt;
&lt;polygon fill=&#34;#f8f8f8&#34; stroke=&#34;#000000&#34; points=&#34;363.5,-2009 16.5,-2009 16.5,-1947 363.5,-1947 363.5,-2009&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;start&#34; x=&#34;24.5&#34; y=&#34;-1992.2&#34; font-family=&#34;Times,serif&#34; font-size=&#34;16.00&#34; fill=&#34;#000000&#34;&gt;Type: inuse_objects&lt;/text&gt;
&lt;text text-anchor=&#34;start&#34; x=&#34;24.5&#34; y=&#34;-1974.2&#34; font-family=&#34;Times,serif&#34; font-size=&#34;16.00&#34; fill=&#34;#000000&#34;&gt;Time: Mar 23, 2019 at 1:08pm (GMT)&lt;/text&gt;
&lt;text text-anchor=&#34;start&#34; x=&#34;24.5&#34; y=&#34;-1956.2&#34; font-family=&#34;Times,serif&#34; font-size=&#34;16.00&#34; fill=&#34;#000000&#34;&gt;Showing nodes accounting for 60, 100% of 60 total&lt;/text&gt;
&lt;/g&gt;
&lt;!-- N1 --&gt;
&lt;g id=&#34;node1&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N1&lt;/title&gt;
&lt;g id=&#34;a_node1&#34;&gt;&lt;a xlink:title=&#34;runtime.malg (24)&#34;&gt;
&lt;polygon fill=&#34;#eddbd5&#34; stroke=&#34;#b22a00&#34; points=&#34;639,-823 503,-823 503,-737 639,-737 639,-823&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;571&#34; y=&#34;-799.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;24.00&#34; fill=&#34;#000000&#34;&gt;runtime&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;571&#34; y=&#34;-773.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;24.00&#34; fill=&#34;#000000&#34;&gt;malg&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;571&#34; y=&#34;-747.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;24.00&#34; fill=&#34;#000000&#34;&gt;24 (40.00%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- NN1_0 --&gt;
&lt;g id=&#34;NN1_0&#34; class=&#34;node&#34;&gt;
&lt;title&gt;NN1_0&lt;/title&gt;
&lt;g id=&#34;a_NN1_0&#34;&gt;&lt;a xlink:title=&#34;24&#34;&gt;
&lt;polygon fill=&#34;#f8f8f8&#34; stroke=&#34;#000000&#34; points=&#34;598,-682 548,-682 544,-678 544,-646 594,-646 598,-650 598,-682&#34;&gt;&lt;/polygon&gt;
&lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;594,-678 544,-678 &#34;&gt;&lt;/polyline&gt;
&lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;594,-678 594,-646 &#34;&gt;&lt;/polyline&gt;
&lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;594,-678 598,-682 &#34;&gt;&lt;/polyline&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;571&#34; y=&#34;-662.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;384B&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N1&amp;#45;&amp;gt;NN1_0 --&gt;
&lt;g id=&#34;edge1&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N1-&amp;gt;NN1_0&lt;/title&gt;
&lt;g id=&#34;a_edge1&#34;&gt;&lt;a xlink:title=&#34;24&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#000000&#34; d=&#34;M571,-736.8059C571,-721.8626 571,-705.5141 571,-692.1016&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#000000&#34; stroke=&#34;#000000&#34; points=&#34;574.5001,-692.0573 571,-682.0573 567.5001,-692.0574 574.5001,-692.0573&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge1-label&#34;&gt;&lt;a xlink:title=&#34;24&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;580&#34; y=&#34;-707.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 24&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N2 --&gt;
&lt;g id=&#34;node2&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N2&lt;/title&gt;
&lt;g id=&#34;a_node2&#34;&gt;&lt;a xlink:title=&#34;runtime.allocm (21)&#34;&gt;
&lt;polygon fill=&#34;#eddbd5&#34; stroke=&#34;#b23000&#34; points=&#34;686,-1235 566,-1235 566,-1151 686,-1151 686,-1235&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;626&#34; y=&#34;-1217.4&#34; font-family=&#34;Times,serif&#34; font-size=&#34;17.00&#34; fill=&#34;#000000&#34;&gt;runtime&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;626&#34; y=&#34;-1198.4&#34; font-family=&#34;Times,serif&#34; font-size=&#34;17.00&#34; fill=&#34;#000000&#34;&gt;allocm&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;626&#34; y=&#34;-1179.4&#34; font-family=&#34;Times,serif&#34; font-size=&#34;17.00&#34; fill=&#34;#000000&#34;&gt;7 (11.67%)&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;626&#34; y=&#34;-1160.4&#34; font-family=&#34;Times,serif&#34; font-size=&#34;17.00&#34; fill=&#34;#000000&#34;&gt;of 21 (35.00%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N2&amp;#45;&amp;gt;N1 --&gt;
&lt;g id=&#34;edge32&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N2-&amp;gt;N1&lt;/title&gt;
&lt;g id=&#34;a_edge32&#34;&gt;&lt;a xlink:title=&#34;runtime.allocm -&gt; runtime.malg (7)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b27b4a&#34; d=&#34;M594.8039,-1150.7397C582.3903,-1129.9153 571,-1103.7828 571,-1078 571,-1078 571,-1078 571,-892 571,-872.8047 571,-851.7589 571,-833.1441&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b27b4a&#34; stroke=&#34;#b27b4a&#34; points=&#34;574.5001,-833.0798 571,-823.0799 567.5001,-833.0799 574.5001,-833.0798&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge32-label&#34;&gt;&lt;a xlink:title=&#34;runtime.allocm -&gt; runtime.malg (7)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;576.5&#34; y=&#34;-979.3&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 7&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- NN2_0 --&gt;
&lt;g id=&#34;NN2_0&#34; class=&#34;node&#34;&gt;
&lt;title&gt;NN2_0&lt;/title&gt;
&lt;g id=&#34;a_NN2_0&#34;&gt;&lt;a xlink:title=&#34;7&#34;&gt;
&lt;polygon fill=&#34;#f8f8f8&#34; stroke=&#34;#000000&#34; points=&#34;653,-1096 603,-1096 599,-1092 599,-1060 649,-1060 653,-1064 653,-1096&#34;&gt;&lt;/polygon&gt;
&lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;649,-1092 599,-1092 &#34;&gt;&lt;/polyline&gt;
&lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;649,-1092 649,-1060 &#34;&gt;&lt;/polyline&gt;
&lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;649,-1092 653,-1096 &#34;&gt;&lt;/polyline&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;626&#34; y=&#34;-1076.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;1kB&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N2&amp;#45;&amp;gt;NN2_0 --&gt;
&lt;g id=&#34;edge2&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N2-&amp;gt;NN2_0&lt;/title&gt;
&lt;g id=&#34;a_edge2&#34;&gt;&lt;a xlink:title=&#34;7&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#000000&#34; d=&#34;M626,-1150.8312C626,-1135.9603 626,-1119.6133 626,-1106.1809&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#000000&#34; stroke=&#34;#000000&#34; points=&#34;629.5001,-1106.117 626,-1096.117 622.5001,-1106.1171 629.5001,-1106.117&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge2-label&#34;&gt;&lt;a xlink:title=&#34;7&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;631.5&#34; y=&#34;-1121.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 7&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N34 --&gt;
&lt;g id=&#34;node34&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N34&lt;/title&gt;
&lt;g id=&#34;a_node34&#34;&gt;&lt;a xlink:title=&#34;runtime.mcommoninit (7)&#34;&gt;
&lt;polygon fill=&#34;#ede5df&#34; stroke=&#34;#b27b4a&#34; points=&#34;708.5,-1001 641.5,-1001 641.5,-965 708.5,-965 708.5,-1001&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;675&#34; y=&#34;-990.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;runtime&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;675&#34; y=&#34;-981.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;mcommoninit&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;675&#34; y=&#34;-972.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 7 (11.67%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N2&amp;#45;&amp;gt;N34 --&gt;
&lt;g id=&#34;edge33&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N2-&amp;gt;N34&lt;/title&gt;
&lt;g id=&#34;a_edge33&#34;&gt;&lt;a xlink:title=&#34;runtime.allocm -&gt; runtime.mcommoninit (7)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b27b4a&#34; d=&#34;M645.0396,-1150.6853C651.3632,-1135.044 657.8435,-1116.9853 662,-1100 669.2881,-1070.2177 672.4987,-1035.1607 673.9079,-1011.2394&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b27b4a&#34; stroke=&#34;#b27b4a&#34; points=&#34;677.4115,-1011.2597 674.4368,-1001.091 670.421,-1010.8953 677.4115,-1011.2597&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge33-label&#34;&gt;&lt;a xlink:title=&#34;runtime.allocm -&gt; runtime.mcommoninit (7)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;675.5&#34; y=&#34;-1074.3&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 7&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N3 --&gt;
&lt;g id=&#34;node3&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N3&lt;/title&gt;
&lt;g id=&#34;a_node3&#34;&gt;&lt;a xlink:title=&#34;runtime.mstart (17)&#34;&gt;
&lt;polygon fill=&#34;#eddcd5&#34; stroke=&#34;#b23800&#34; points=&#34;452.5,-1996 381.5,-1996 381.5,-1960 452.5,-1960 452.5,-1996&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;417&#34; y=&#34;-1985.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;runtime&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;417&#34; y=&#34;-1976.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;mstart&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;417&#34; y=&#34;-1967.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 17 (28.33%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N8 --&gt;
&lt;g id=&#34;node8&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N8&lt;/title&gt;
&lt;g id=&#34;a_node8&#34;&gt;&lt;a xlink:title=&#34;runtime.systemstack (14)&#34;&gt;
&lt;polygon fill=&#34;#edddd5&#34; stroke=&#34;#b23f00&#34; points=&#34;468,-1888 366,-1888 366,-1820 468,-1820 468,-1888&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;417&#34; y=&#34;-1872.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;runtime&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;417&#34; y=&#34;-1857.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;systemstack&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;417&#34; y=&#34;-1842.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;3 (5.00%)&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;417&#34; y=&#34;-1827.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;of 14 (23.33%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N3&amp;#45;&amp;gt;N8 --&gt;
&lt;g id=&#34;edge27&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N3-&amp;gt;N8&lt;/title&gt;
&lt;g id=&#34;a_edge27&#34;&gt;&lt;a xlink:title=&#34;runtime.mstart -&gt; runtime.systemstack (14)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b23f00&#34; stroke-width=&#34;2&#34; d=&#34;M417,-1959.9693C417,-1943.8642 417,-1919.6041 417,-1898.3586&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b23f00&#34; stroke=&#34;#b23f00&#34; stroke-width=&#34;2&#34; points=&#34;420.5001,-1898.2201 417,-1888.2201 413.5001,-1898.2202 420.5001,-1898.2201&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge27-label&#34;&gt;&lt;a xlink:title=&#34;runtime.mstart -&gt; runtime.systemstack (14)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;426&#34; y=&#34;-1909.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 14&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N36 --&gt;
&lt;g id=&#34;node36&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N36&lt;/title&gt;
&lt;g id=&#34;a_node36&#34;&gt;&lt;a xlink:title=&#34;runtime.mstart1 (3)&#34;&gt;
&lt;polygon fill=&#34;#edeae7&#34; stroke=&#34;#b2a085&#34; points=&#34;561.5,-1872 498.5,-1872 498.5,-1836 561.5,-1836 561.5,-1872&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;530&#34; y=&#34;-1861.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;runtime&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;530&#34; y=&#34;-1852.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;mstart1&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;530&#34; y=&#34;-1843.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 3 (5.00%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N3&amp;#45;&amp;gt;N36 --&gt;
&lt;g id=&#34;edge49&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N3-&amp;gt;N36&lt;/title&gt;
&lt;g id=&#34;a_edge49&#34;&gt;&lt;a xlink:title=&#34;runtime.mstart -&gt; runtime.mstart1 (3)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b2a085&#34; d=&#34;M433.4312,-1959.9693C452.6793,-1938.8475 484.7101,-1903.6986 506.5618,-1879.7198&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b2a085&#34; stroke=&#34;#b2a085&#34; points=&#34;509.4003,-1881.8012 513.549,-1872.0524 504.2264,-1877.0863 509.4003,-1881.8012&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge49-label&#34;&gt;&lt;a xlink:title=&#34;runtime.mstart -&gt; runtime.mstart1 (3)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;486.5&#34; y=&#34;-1909.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 3&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N4 --&gt;
&lt;g id=&#34;node4&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N4&lt;/title&gt;
&lt;g id=&#34;a_node4&#34;&gt;&lt;a xlink:title=&#34;runtime.gcBgMarkWorker (8)&#34;&gt;
&lt;polygon fill=&#34;#ede4dd&#34; stroke=&#34;#b2713b&#34; points=&#34;828,-2012 680,-2012 680,-1944 828,-1944 828,-2012&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;754&#34; y=&#34;-1993.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;18.00&#34; fill=&#34;#000000&#34;&gt;runtime&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;754&#34; y=&#34;-1973.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;18.00&#34; fill=&#34;#000000&#34;&gt;gcBgMarkWorker&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;754&#34; y=&#34;-1953.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;18.00&#34; fill=&#34;#000000&#34;&gt;8 (13.33%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- NN4_0 --&gt;
&lt;g id=&#34;NN4_0&#34; class=&#34;node&#34;&gt;
&lt;title&gt;NN4_0&lt;/title&gt;
&lt;g id=&#34;a_NN4_0&#34;&gt;&lt;a xlink:title=&#34;8&#34;&gt;
&lt;polygon fill=&#34;#f8f8f8&#34; stroke=&#34;#000000&#34; points=&#34;781,-1872 731,-1872 727,-1868 727,-1836 777,-1836 781,-1840 781,-1872&#34;&gt;&lt;/polygon&gt;
&lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;777,-1868 727,-1868 &#34;&gt;&lt;/polyline&gt;
&lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;777,-1868 777,-1836 &#34;&gt;&lt;/polyline&gt;
&lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;777,-1868 781,-1872 &#34;&gt;&lt;/polyline&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;754&#34; y=&#34;-1852.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;16B&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N4&amp;#45;&amp;gt;NN4_0 --&gt;
&lt;g id=&#34;edge3&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N4-&amp;gt;NN4_0&lt;/title&gt;
&lt;g id=&#34;a_edge3&#34;&gt;&lt;a xlink:title=&#34;8&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#000000&#34; d=&#34;M754,-1943.7882C754,-1924.3725 754,-1900.3726 754,-1882.0717&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#000000&#34; stroke=&#34;#000000&#34; points=&#34;757.5001,-1882.0327 754,-1872.0327 750.5001,-1882.0328 757.5001,-1882.0327&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge3-label&#34;&gt;&lt;a xlink:title=&#34;8&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;759.5&#34; y=&#34;-1909.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 8&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N5 --&gt;
&lt;g id=&#34;node5&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N5&lt;/title&gt;
&lt;g id=&#34;a_node5&#34;&gt;&lt;a xlink:title=&#34;runtime.schedule (18)&#34;&gt;
&lt;polygon fill=&#34;#eddcd5&#34; stroke=&#34;#b23600&#34; points=&#34;661.5,-1753 590.5,-1753 590.5,-1717 661.5,-1717 661.5,-1753&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;626&#34; y=&#34;-1742.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;runtime&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;626&#34; y=&#34;-1733.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;schedule&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;626&#34; y=&#34;-1724.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 18 (30.00%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N39 --&gt;
&lt;g id=&#34;node39&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N39&lt;/title&gt;
&lt;g id=&#34;a_node39&#34;&gt;&lt;a xlink:title=&#34;runtime.resetspinning (15)&#34;&gt;
&lt;polygon fill=&#34;#edddd5&#34; stroke=&#34;#b23c00&#34; points=&#34;661.5,-1644.5 590.5,-1644.5 590.5,-1608.5 661.5,-1608.5 661.5,-1644.5&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;626&#34; y=&#34;-1633.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;runtime&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;626&#34; y=&#34;-1624.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;resetspinning&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;626&#34; y=&#34;-1615.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 15 (25.00%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N5&amp;#45;&amp;gt;N39 --&gt;
&lt;g id=&#34;edge25&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N5-&amp;gt;N39&lt;/title&gt;
&lt;g id=&#34;a_edge25&#34;&gt;&lt;a xlink:title=&#34;runtime.schedule -&gt; runtime.resetspinning (15)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b23c00&#34; stroke-width=&#34;2&#34; d=&#34;M626,-1716.5945C626,-1699.6581 626,-1674.2853 626,-1654.7773&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b23c00&#34; stroke=&#34;#b23c00&#34; stroke-width=&#34;2&#34; points=&#34;629.5001,-1654.6337 626,-1644.6337 622.5001,-1654.6338 629.5001,-1654.6337&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge25-label&#34;&gt;&lt;a xlink:title=&#34;runtime.schedule -&gt; runtime.resetspinning (15)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;635&#34; y=&#34;-1671.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 15&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N42 --&gt;
&lt;g id=&#34;node42&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N42&lt;/title&gt;
&lt;g id=&#34;a_node42&#34;&gt;&lt;a xlink:title=&#34;runtime.stoplockedm (3)&#34;&gt;
&lt;polygon fill=&#34;#edeae7&#34; stroke=&#34;#b2a085&#34; points=&#34;742.5,-1644.5 679.5,-1644.5 679.5,-1608.5 742.5,-1608.5 742.5,-1644.5&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;711&#34; y=&#34;-1633.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;runtime&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;711&#34; y=&#34;-1624.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;stoplockedm&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;711&#34; y=&#34;-1615.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 3 (5.00%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N5&amp;#45;&amp;gt;N42 --&gt;
&lt;g id=&#34;edge51&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N5-&amp;gt;N42&lt;/title&gt;
&lt;g id=&#34;a_edge51&#34;&gt;&lt;a xlink:title=&#34;runtime.schedule -&gt; runtime.stoplockedm (3)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b2a085&#34; d=&#34;M640.4191,-1716.5945C654.1786,-1699.0308 675.0459,-1672.3943 690.5259,-1652.6346&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b2a085&#34; stroke=&#34;#b2a085&#34; points=&#34;693.382,-1654.6642 696.7939,-1644.6337 687.8716,-1650.3473 693.382,-1654.6642&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge51-label&#34;&gt;&lt;a xlink:title=&#34;runtime.schedule -&gt; runtime.stoplockedm (3)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;682.5&#34; y=&#34;-1671.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 3&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N6 --&gt;
&lt;g id=&#34;node6&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N6&lt;/title&gt;
&lt;g id=&#34;a_node6&#34;&gt;&lt;a xlink:title=&#34;github.com/pkg/profile.Start.func8 (9)&#34;&gt;
&lt;polygon fill=&#34;#ede3db&#34; stroke=&#34;#b2662c&#34; points=&#34;942.5,-2017 853.5,-2017 853.5,-1939 942.5,-1939 942.5,-2017&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;898&#34; y=&#34;-2002.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;13.00&#34; fill=&#34;#000000&#34;&gt;profile&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;898&#34; y=&#34;-1988.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;13.00&#34; fill=&#34;#000000&#34;&gt;Start&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;898&#34; y=&#34;-1974.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;13.00&#34; fill=&#34;#000000&#34;&gt;func8&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;898&#34; y=&#34;-1960.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;13.00&#34; fill=&#34;#000000&#34;&gt;2 (3.33%)&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;898&#34; y=&#34;-1946.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;13.00&#34; fill=&#34;#000000&#34;&gt;of 9 (15.00%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- NN6_0 --&gt;
&lt;g id=&#34;NN6_0&#34; class=&#34;node&#34;&gt;
&lt;title&gt;NN6_0&lt;/title&gt;
&lt;g id=&#34;a_NN6_0&#34;&gt;&lt;a xlink:title=&#34;1&#34;&gt;
&lt;polygon fill=&#34;#f8f8f8&#34; stroke=&#34;#000000&#34; points=&#34;853,-1872 803,-1872 799,-1868 799,-1836 849,-1836 853,-1840 853,-1872&#34;&gt;&lt;/polygon&gt;
&lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;849,-1868 799,-1868 &#34;&gt;&lt;/polyline&gt;
&lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;849,-1868 849,-1836 &#34;&gt;&lt;/polyline&gt;
&lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;849,-1868 853,-1872 &#34;&gt;&lt;/polyline&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;826&#34; y=&#34;-1852.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;16B&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N6&amp;#45;&amp;gt;NN6_0 --&gt;
&lt;g id=&#34;edge4&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N6-&amp;gt;NN6_0&lt;/title&gt;
&lt;g id=&#34;a_edge4&#34;&gt;&lt;a xlink:title=&#34;1&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#000000&#34; d=&#34;M875.2188,-1938.7656C864.3037,-1919.9674 851.5059,-1897.9268 841.6965,-1881.0328&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#000000&#34; stroke=&#34;#000000&#34; points=&#34;844.6333,-1879.1204 836.5852,-1872.23 838.5798,-1882.6354 844.6333,-1879.1204&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge4-label&#34;&gt;&lt;a xlink:title=&#34;1&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;869.5&#34; y=&#34;-1909.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 1&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- NN6_1 --&gt;
&lt;g id=&#34;NN6_1&#34; class=&#34;node&#34;&gt;
&lt;title&gt;NN6_1&lt;/title&gt;
&lt;g id=&#34;a_NN6_1&#34;&gt;&lt;a xlink:title=&#34;1&#34;&gt;
&lt;polygon fill=&#34;#f8f8f8&#34; stroke=&#34;#000000&#34; points=&#34;925,-1872 875,-1872 871,-1868 871,-1836 921,-1836 925,-1840 925,-1872&#34;&gt;&lt;/polygon&gt;
&lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;921,-1868 871,-1868 &#34;&gt;&lt;/polyline&gt;
&lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;921,-1868 921,-1836 &#34;&gt;&lt;/polyline&gt;
&lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;921,-1868 925,-1872 &#34;&gt;&lt;/polyline&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;898&#34; y=&#34;-1852.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;96B&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N6&amp;#45;&amp;gt;NN6_1 --&gt;
&lt;g id=&#34;edge5&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N6-&amp;gt;NN6_1&lt;/title&gt;
&lt;g id=&#34;a_edge5&#34;&gt;&lt;a xlink:title=&#34;1&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#000000&#34; d=&#34;M898,-1938.7656C898,-1920.4896 898,-1899.1488 898,-1882.4524&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#000000&#34; stroke=&#34;#000000&#34; points=&#34;901.5001,-1882.23 898,-1872.23 894.5001,-1882.23 901.5001,-1882.23&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge5-label&#34;&gt;&lt;a xlink:title=&#34;1&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;903.5&#34; y=&#34;-1909.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 1&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N12 --&gt;
&lt;g id=&#34;node12&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N12&lt;/title&gt;
&lt;g id=&#34;a_node12&#34;&gt;&lt;a xlink:title=&#34;os/signal.Notify (7)&#34;&gt;
&lt;polygon fill=&#34;#ede5df&#34; stroke=&#34;#b27b4a&#34; points=&#34;1008.5,-1769 913.5,-1769 913.5,-1701 1008.5,-1701 1008.5,-1769&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;961&#34; y=&#34;-1753.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;signal&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;961&#34; y=&#34;-1738.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;Notify&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;961&#34; y=&#34;-1723.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;3 (5.00%)&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;961&#34; y=&#34;-1708.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;of 7 (11.67%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N6&amp;#45;&amp;gt;N12 --&gt;
&lt;g id=&#34;edge31&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N6-&amp;gt;N12&lt;/title&gt;
&lt;g id=&#34;a_edge31&#34;&gt;&lt;a xlink:title=&#34;github.com/pkg/profile.Start.func8 -&gt; os/signal.Notify (7)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b27b4a&#34; d=&#34;M915.7452,-1938.7387C922.2314,-1923.1877 929.1577,-1904.9936 934,-1888 944.2602,-1851.9925 951.3319,-1810.0505 955.6563,-1779.1959&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b27b4a&#34; stroke=&#34;#b27b4a&#34; points=&#34;959.1386,-1779.5623 957.0182,-1769.1819 952.2025,-1778.619 959.1386,-1779.5623&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge31-label&#34;&gt;&lt;a xlink:title=&#34;github.com/pkg/profile.Start.func8 -&gt; os/signal.Notify (7)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;954.5&#34; y=&#34;-1850.3&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 7&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N7 --&gt;
&lt;g id=&#34;node7&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N7&lt;/title&gt;
&lt;g id=&#34;a_node7&#34;&gt;&lt;a xlink:title=&#34;runtime.mcall (15)&#34;&gt;
&lt;polygon fill=&#34;#edddd5&#34; stroke=&#34;#b23c00&#34; points=&#34;661.5,-1996 590.5,-1996 590.5,-1960 661.5,-1960 661.5,-1996&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;626&#34; y=&#34;-1985.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;runtime&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;626&#34; y=&#34;-1976.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;mcall&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;626&#34; y=&#34;-1967.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 15 (25.00%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N38 --&gt;
&lt;g id=&#34;node38&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N38&lt;/title&gt;
&lt;g id=&#34;a_node38&#34;&gt;&lt;a xlink:title=&#34;runtime.park_m (15)&#34;&gt;
&lt;polygon fill=&#34;#edddd5&#34; stroke=&#34;#b23c00&#34; points=&#34;661.5,-1872 590.5,-1872 590.5,-1836 661.5,-1836 661.5,-1872&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;626&#34; y=&#34;-1861.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;runtime&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;626&#34; y=&#34;-1852.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;park_m&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;626&#34; y=&#34;-1843.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 15 (25.00%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N7&amp;#45;&amp;gt;N38 --&gt;
&lt;g id=&#34;edge22&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N7-&amp;gt;N38&lt;/title&gt;
&lt;g id=&#34;a_edge22&#34;&gt;&lt;a xlink:title=&#34;runtime.mcall -&gt; runtime.park_m (15)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b23c00&#34; stroke-width=&#34;2&#34; d=&#34;M626,-1959.9693C626,-1939.5822 626,-1906.1268 626,-1882.2614&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b23c00&#34; stroke=&#34;#b23c00&#34; stroke-width=&#34;2&#34; points=&#34;629.5001,-1882.0524 626,-1872.0524 622.5001,-1882.0525 629.5001,-1882.0524&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge22-label&#34;&gt;&lt;a xlink:title=&#34;runtime.mcall -&gt; runtime.park_m (15)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;635&#34; y=&#34;-1909.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 15&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- NN8_0 --&gt;
&lt;g id=&#34;NN8_0&#34; class=&#34;node&#34;&gt;
&lt;title&gt;NN8_0&lt;/title&gt;
&lt;g id=&#34;a_NN8_0&#34;&gt;&lt;a xlink:title=&#34;2&#34;&gt;
&lt;polygon fill=&#34;#f8f8f8&#34; stroke=&#34;#000000&#34; points=&#34;372,-1753 322,-1753 318,-1749 318,-1717 368,-1717 372,-1721 372,-1753&#34;&gt;&lt;/polygon&gt;
&lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;368,-1749 318,-1749 &#34;&gt;&lt;/polyline&gt;
&lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;368,-1749 368,-1717 &#34;&gt;&lt;/polyline&gt;
&lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;368,-1749 372,-1753 &#34;&gt;&lt;/polyline&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;345&#34; y=&#34;-1733.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;64B&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N8&amp;#45;&amp;gt;NN8_0 --&gt;
&lt;g id=&#34;edge6&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N8-&amp;gt;NN8_0&lt;/title&gt;
&lt;g id=&#34;a_edge6&#34;&gt;&lt;a xlink:title=&#34;2&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#000000&#34; d=&#34;M396.3677,-1819.8994C385.2882,-1801.5875 371.8181,-1779.3243 361.4517,-1762.1909&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#000000&#34; stroke=&#34;#000000&#34; points=&#34;364.218,-1760.0018 356.0468,-1753.2578 358.2289,-1763.6255 364.218,-1760.0018&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge6-label&#34;&gt;&lt;a xlink:title=&#34;2&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;391.5&#34; y=&#34;-1790.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 2&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- NN8_1 --&gt;
&lt;g id=&#34;NN8_1&#34; class=&#34;node&#34;&gt;
&lt;title&gt;NN8_1&lt;/title&gt;
&lt;g id=&#34;a_NN8_1&#34;&gt;&lt;a xlink:title=&#34;1&#34;&gt;
&lt;polygon fill=&#34;#f8f8f8&#34; stroke=&#34;#000000&#34; points=&#34;444,-1753 394,-1753 390,-1749 390,-1717 440,-1717 444,-1721 444,-1753&#34;&gt;&lt;/polygon&gt;
&lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;440,-1749 390,-1749 &#34;&gt;&lt;/polyline&gt;
&lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;440,-1749 440,-1717 &#34;&gt;&lt;/polyline&gt;
&lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;440,-1749 444,-1753 &#34;&gt;&lt;/polyline&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;417&#34; y=&#34;-1733.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;48B&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N8&amp;#45;&amp;gt;NN8_1 --&gt;
&lt;g id=&#34;edge7&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N8-&amp;gt;NN8_1&lt;/title&gt;
&lt;g id=&#34;a_edge7&#34;&gt;&lt;a xlink:title=&#34;1&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#000000&#34; d=&#34;M417,-1819.8994C417,-1802.0962 417,-1780.5581 417,-1763.6304&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#000000&#34; stroke=&#34;#000000&#34; points=&#34;420.5001,-1763.2578 417,-1753.2578 413.5001,-1763.2579 420.5001,-1763.2578&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge7-label&#34;&gt;&lt;a xlink:title=&#34;1&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;422.5&#34; y=&#34;-1790.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 1&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N37 --&gt;
&lt;g id=&#34;node37&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N37&lt;/title&gt;
&lt;g id=&#34;a_node37&#34;&gt;&lt;a xlink:title=&#34;runtime.newproc.func1 (11)&#34;&gt;
&lt;polygon fill=&#34;#ede0d7&#34; stroke=&#34;#b2500e&#34; points=&#34;515.5,-1648.5 444.5,-1648.5 444.5,-1604.5 515.5,-1604.5 515.5,-1648.5&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;480&#34; y=&#34;-1638.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;runtime&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;480&#34; y=&#34;-1629.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;newproc&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;480&#34; y=&#34;-1620.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;func1&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;480&#34; y=&#34;-1611.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 11 (18.33%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N8&amp;#45;&amp;gt;N37 --&gt;
&lt;g id=&#34;edge29&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N8-&amp;gt;N37&lt;/title&gt;
&lt;g id=&#34;a_edge29&#34;&gt;&lt;a xlink:title=&#34;runtime.systemstack -&gt; runtime.newproc.func1 (11)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b2500e&#34; d=&#34;M433.4212,-1819.8796C440.2591,-1804.5961 447.7997,-1786.1792 453,-1769 464.2403,-1731.8675 471.7309,-1687.8128 475.9136,-1658.6195&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b2500e&#34; stroke=&#34;#b2500e&#34; points=&#34;479.3994,-1658.9627 477.3058,-1648.5768 472.4658,-1658.0015 479.3994,-1658.9627&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge29-label&#34;&gt;&lt;a xlink:title=&#34;runtime.systemstack -&gt; runtime.newproc.func1 (11)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;478&#34; y=&#34;-1731.3&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 11&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N9 --&gt;
&lt;g id=&#34;node9&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N9&lt;/title&gt;
&lt;g id=&#34;a_node9&#34;&gt;&lt;a xlink:title=&#34;runtime.newm (21)&#34;&gt;
&lt;polygon fill=&#34;#eddbd5&#34; stroke=&#34;#b23000&#34; points=&#34;661.5,-1340.5 590.5,-1340.5 590.5,-1304.5 661.5,-1304.5 661.5,-1340.5&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;626&#34; y=&#34;-1329.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;runtime&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;626&#34; y=&#34;-1320.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;newm&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;626&#34; y=&#34;-1311.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 21 (35.00%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N9&amp;#45;&amp;gt;N2 --&gt;
&lt;g id=&#34;edge20&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N9-&amp;gt;N2&lt;/title&gt;
&lt;g id=&#34;a_edge20&#34;&gt;&lt;a xlink:title=&#34;runtime.newm -&gt; runtime.allocm (21)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b23000&#34; stroke-width=&#34;2&#34; d=&#34;M626,-1304.4936C626,-1289.1443 626,-1266.2909 626,-1245.2637&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b23000&#34; stroke=&#34;#b23000&#34; stroke-width=&#34;2&#34; points=&#34;629.5001,-1245.1288 626,-1235.1288 622.5001,-1245.1289 629.5001,-1245.1288&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge20-label&#34;&gt;&lt;a xlink:title=&#34;runtime.newm -&gt; runtime.allocm (21)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;635&#34; y=&#34;-1256.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 21&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N10 --&gt;
&lt;g id=&#34;node10&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N10&lt;/title&gt;
&lt;g id=&#34;a_node10&#34;&gt;&lt;a xlink:title=&#34;runtime.ensureSigM.func1 (5)&#34;&gt;
&lt;polygon fill=&#34;#ede8e3&#34; stroke=&#34;#b28f68&#34; points=&#34;825.5,-1648.5 762.5,-1648.5 762.5,-1604.5 825.5,-1604.5 825.5,-1648.5&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;794&#34; y=&#34;-1638.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;runtime&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;794&#34; y=&#34;-1629.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;ensureSigM&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;794&#34; y=&#34;-1620.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;func1&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;794&#34; y=&#34;-1611.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 5 (8.33%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N30 --&gt;
&lt;g id=&#34;node30&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N30&lt;/title&gt;
&lt;g id=&#34;a_node30&#34;&gt;&lt;a xlink:title=&#34;runtime.LockOSThread (3)&#34;&gt;
&lt;polygon fill=&#34;#edeae7&#34; stroke=&#34;#b2a085&#34; points=&#34;827,-1548 761,-1548 761,-1512 827,-1512 827,-1548&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;794&#34; y=&#34;-1537.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;runtime&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;794&#34; y=&#34;-1528.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;LockOSThread&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;794&#34; y=&#34;-1519.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 3 (5.00%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N10&amp;#45;&amp;gt;N30 --&gt;
&lt;g id=&#34;edge47&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N10-&amp;gt;N30&lt;/title&gt;
&lt;g id=&#34;a_edge47&#34;&gt;&lt;a xlink:title=&#34;runtime.ensureSigM.func1 -&gt; runtime.LockOSThread (3)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b2a085&#34; d=&#34;M794,-1604.1184C794,-1590.4086 794,-1572.7427 794,-1558.0969&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b2a085&#34; stroke=&#34;#b2a085&#34; points=&#34;797.5001,-1558.066 794,-1548.066 790.5001,-1558.066 797.5001,-1558.066&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge47-label&#34;&gt;&lt;a xlink:title=&#34;runtime.ensureSigM.func1 -&gt; runtime.LockOSThread (3)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;799.5&#34; y=&#34;-1573.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 3&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N32 --&gt;
&lt;g id=&#34;node32&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N32&lt;/title&gt;
&lt;g id=&#34;a_node32&#34;&gt;&lt;a xlink:title=&#34;runtime.chansend1 (1)&#34;&gt;
&lt;polygon fill=&#34;#edeceb&#34; stroke=&#34;#b2aea3&#34; points=&#34;908.5,-1548 845.5,-1548 845.5,-1512 908.5,-1512 908.5,-1548&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;877&#34; y=&#34;-1537.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;runtime&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;877&#34; y=&#34;-1528.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;chansend1&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;877&#34; y=&#34;-1519.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 1 (1.67%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N10&amp;#45;&amp;gt;N32 --&gt;
&lt;g id=&#34;edge65&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N10-&amp;gt;N32&lt;/title&gt;
&lt;g id=&#34;a_edge65&#34;&gt;&lt;a xlink:title=&#34;runtime.ensureSigM.func1 -&gt; runtime.chansend1 (1)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b2aea3&#34; d=&#34;M813.2505,-1604.1184C825.6148,-1589.7431 841.72,-1571.0183 854.6492,-1555.9862&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b2aea3&#34; stroke=&#34;#b2aea3&#34; points=&#34;857.594,-1557.9298 861.4614,-1548.066 852.287,-1553.3652 857.594,-1557.9298&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge65-label&#34;&gt;&lt;a xlink:title=&#34;runtime.ensureSigM.func1 -&gt; runtime.chansend1 (1)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;845.5&#34; y=&#34;-1573.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 1&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N40 --&gt;
&lt;g id=&#34;node40&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N40&lt;/title&gt;
&lt;g id=&#34;a_node40&#34;&gt;&lt;a xlink:title=&#34;runtime.selectgo (1)&#34;&gt;
&lt;polygon fill=&#34;#edeceb&#34; stroke=&#34;#b2aea3&#34; points=&#34;989.5,-1548 926.5,-1548 926.5,-1512 989.5,-1512 989.5,-1548&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;958&#34; y=&#34;-1537.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;runtime&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;958&#34; y=&#34;-1528.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;selectgo&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;958&#34; y=&#34;-1519.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 1 (1.67%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N10&amp;#45;&amp;gt;N40 --&gt;
&lt;g id=&#34;edge66&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N10-&amp;gt;N40&lt;/title&gt;
&lt;g id=&#34;a_edge66&#34;&gt;&lt;a xlink:title=&#34;runtime.ensureSigM.func1 -&gt; runtime.selectgo (1)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b2aea3&#34; d=&#34;M825.6208,-1607.8938C852.0775,-1592.3264 889.9577,-1570.0371 918.4241,-1553.2871&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b2aea3&#34; stroke=&#34;#b2aea3&#34; points=&#34;920.4655,-1556.1469 927.3092,-1548.0589 916.9155,-1550.1138 920.4655,-1556.1469&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge66-label&#34;&gt;&lt;a xlink:title=&#34;runtime.ensureSigM.func1 -&gt; runtime.selectgo (1)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;890.5&#34; y=&#34;-1573.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 1&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N11 --&gt;
&lt;g id=&#34;node11&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N11&lt;/title&gt;
&lt;g id=&#34;a_node11&#34;&gt;&lt;a xlink:title=&#34;runtime.startm (18)&#34;&gt;
&lt;polygon fill=&#34;#eddcd5&#34; stroke=&#34;#b23600&#34; points=&#34;661.5,-1451.5 590.5,-1451.5 590.5,-1415.5 661.5,-1415.5 661.5,-1451.5&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;626&#34; y=&#34;-1440.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;runtime&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;626&#34; y=&#34;-1431.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;startm&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;626&#34; y=&#34;-1422.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 18 (30.00%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N11&amp;#45;&amp;gt;N9 --&gt;
&lt;g id=&#34;edge21&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N11-&amp;gt;N9&lt;/title&gt;
&lt;g id=&#34;a_edge21&#34;&gt;&lt;a xlink:title=&#34;runtime.startm -&gt; runtime.newm (18)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b23600&#34; stroke-width=&#34;2&#34; d=&#34;M626,-1415.1706C626,-1397.7373 626,-1371.2482 626,-1351.0489&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b23600&#34; stroke=&#34;#b23600&#34; stroke-width=&#34;2&#34; points=&#34;629.5001,-1350.8566 626,-1340.8566 622.5001,-1350.8567 629.5001,-1350.8566&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge21-label&#34;&gt;&lt;a xlink:title=&#34;runtime.startm -&gt; runtime.newm (18)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;635&#34; y=&#34;-1380.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 18&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- NN12_0 --&gt;
&lt;g id=&#34;NN12_0&#34; class=&#34;node&#34;&gt;
&lt;title&gt;NN12_0&lt;/title&gt;
&lt;g id=&#34;a_NN12_0&#34;&gt;&lt;a xlink:title=&#34;1&#34;&gt;
&lt;polygon fill=&#34;#f8f8f8&#34; stroke=&#34;#000000&#34; points=&#34;916,-1644.5 866,-1644.5 862,-1640.5 862,-1608.5 912,-1608.5 916,-1612.5 916,-1644.5&#34;&gt;&lt;/polygon&gt;
&lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;912,-1640.5 862,-1640.5 &#34;&gt;&lt;/polyline&gt;
&lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;912,-1640.5 912,-1608.5 &#34;&gt;&lt;/polyline&gt;
&lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;912,-1640.5 916,-1644.5 &#34;&gt;&lt;/polyline&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;889&#34; y=&#34;-1624.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;144B&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N12&amp;#45;&amp;gt;NN12_0 --&gt;
&lt;g id=&#34;edge8&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N12-&amp;gt;NN12_0&lt;/title&gt;
&lt;g id=&#34;a_edge8&#34;&gt;&lt;a xlink:title=&#34;1&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#000000&#34; d=&#34;M938.4163,-1700.9676C928.1706,-1685.5279 916.2329,-1667.5385 906.6577,-1653.1091&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#000000&#34; stroke=&#34;#000000&#34; points=&#34;909.4829,-1651.0365 901.0372,-1644.6395 903.6502,-1654.907 909.4829,-1651.0365&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge8-label&#34;&gt;&lt;a xlink:title=&#34;1&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;930.5&#34; y=&#34;-1671.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 1&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- NN12_1 --&gt;
&lt;g id=&#34;NN12_1&#34; class=&#34;node&#34;&gt;
&lt;title&gt;NN12_1&lt;/title&gt;
&lt;g id=&#34;a_NN12_1&#34;&gt;&lt;a xlink:title=&#34;1&#34;&gt;
&lt;polygon fill=&#34;#f8f8f8&#34; stroke=&#34;#000000&#34; points=&#34;988,-1644.5 938,-1644.5 934,-1640.5 934,-1608.5 984,-1608.5 988,-1612.5 988,-1644.5&#34;&gt;&lt;/polygon&gt;
&lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;984,-1640.5 934,-1640.5 &#34;&gt;&lt;/polyline&gt;
&lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;984,-1640.5 984,-1608.5 &#34;&gt;&lt;/polyline&gt;
&lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;984,-1640.5 988,-1644.5 &#34;&gt;&lt;/polyline&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;961&#34; y=&#34;-1624.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;16B&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N12&amp;#45;&amp;gt;NN12_1 --&gt;
&lt;g id=&#34;edge9&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N12-&amp;gt;NN12_1&lt;/title&gt;
&lt;g id=&#34;a_edge9&#34;&gt;&lt;a xlink:title=&#34;1&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#000000&#34; d=&#34;M961,-1700.9676C961,-1686.1105 961,-1668.8926 961,-1654.7575&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#000000&#34; stroke=&#34;#000000&#34; points=&#34;964.5001,-1654.6394 961,-1644.6395 957.5001,-1654.6395 964.5001,-1654.6394&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge9-label&#34;&gt;&lt;a xlink:title=&#34;1&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;966.5&#34; y=&#34;-1671.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 1&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- NN12_2 --&gt;
&lt;g id=&#34;NN12_2&#34; class=&#34;node&#34;&gt;
&lt;title&gt;NN12_2&lt;/title&gt;
&lt;g id=&#34;a_NN12_2&#34;&gt;&lt;a xlink:title=&#34;1&#34;&gt;
&lt;polygon fill=&#34;#f8f8f8&#34; stroke=&#34;#000000&#34; points=&#34;1060,-1644.5 1010,-1644.5 1006,-1640.5 1006,-1608.5 1056,-1608.5 1060,-1612.5 1060,-1644.5&#34;&gt;&lt;/polygon&gt;
&lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;1056,-1640.5 1006,-1640.5 &#34;&gt;&lt;/polyline&gt;
&lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;1056,-1640.5 1056,-1608.5 &#34;&gt;&lt;/polyline&gt;
&lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;1056,-1640.5 1060,-1644.5 &#34;&gt;&lt;/polyline&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1033&#34; y=&#34;-1624.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;48B&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N12&amp;#45;&amp;gt;NN12_2 --&gt;
&lt;g id=&#34;edge10&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N12-&amp;gt;NN12_2&lt;/title&gt;
&lt;g id=&#34;a_edge10&#34;&gt;&lt;a xlink:title=&#34;1&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#000000&#34; d=&#34;M983.5837,-1700.9676C993.8294,-1685.5279 1005.7671,-1667.5385 1015.3423,-1653.1091&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#000000&#34; stroke=&#34;#000000&#34; points=&#34;1018.3498,-1654.907 1020.9628,-1644.6395 1012.5171,-1651.0365 1018.3498,-1654.907&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge10-label&#34;&gt;&lt;a xlink:title=&#34;1&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1008.5&#34; y=&#34;-1671.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 1&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N28 --&gt;
&lt;g id=&#34;node28&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N28&lt;/title&gt;
&lt;g id=&#34;a_node28&#34;&gt;&lt;a xlink:title=&#34;os/signal.Notify.func1 (4)&#34;&gt;
&lt;polygon fill=&#34;#ede9e5&#34; stroke=&#34;#b29877&#34; points=&#34;1127.5,-1552 1064.5,-1552 1064.5,-1508 1127.5,-1508 1127.5,-1552&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1096&#34; y=&#34;-1541.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;signal&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1096&#34; y=&#34;-1532.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;Notify&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1096&#34; y=&#34;-1523.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;func1&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1096&#34; y=&#34;-1514.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 4 (6.67%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N12&amp;#45;&amp;gt;N28 --&gt;
&lt;g id=&#34;edge41&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N12-&amp;gt;N28&lt;/title&gt;
&lt;g id=&#34;a_edge41&#34;&gt;&lt;a xlink:title=&#34;os/signal.Notify -&gt; os/signal.Notify.func1 (4)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b29877&#34; d=&#34;M1008.7726,-1707.9196C1030.2694,-1693.3971 1054.108,-1673.6132 1069,-1650 1085.745,-1623.4486 1092.1621,-1587.8226 1094.5909,-1562.2983&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b29877&#34; stroke=&#34;#b29877&#34; points=&#34;1098.1033,-1562.2794 1095.4061,-1552.0337 1091.1253,-1561.7251 1098.1033,-1562.2794&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge41-label&#34;&gt;&lt;a xlink:title=&#34;os/signal.Notify -&gt; os/signal.Notify.func1 (4)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1092.5&#34; y=&#34;-1622.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 4&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N13 --&gt;
&lt;g id=&#34;node13&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N13&lt;/title&gt;
&lt;g id=&#34;a_node13&#34;&gt;&lt;a xlink:title=&#34;os/signal.signal_enable (4)&#34;&gt;
&lt;polygon fill=&#34;#ede9e5&#34; stroke=&#34;#b29877&#34; points=&#34;1145.5,-1352 1046.5,-1352 1046.5,-1293 1145.5,-1293 1145.5,-1352&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1096&#34; y=&#34;-1336&#34; font-family=&#34;Times,serif&#34; font-size=&#34;15.00&#34; fill=&#34;#000000&#34;&gt;signal&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1096&#34; y=&#34;-1319&#34; font-family=&#34;Times,serif&#34; font-size=&#34;15.00&#34; fill=&#34;#000000&#34;&gt;signal_enable&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1096&#34; y=&#34;-1302&#34; font-family=&#34;Times,serif&#34; font-size=&#34;15.00&#34; fill=&#34;#000000&#34;&gt;4 (6.67%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- NN13_0 --&gt;
&lt;g id=&#34;NN13_0&#34; class=&#34;node&#34;&gt;
&lt;title&gt;NN13_0&lt;/title&gt;
&lt;g id=&#34;a_NN13_0&#34;&gt;&lt;a xlink:title=&#34;4&#34;&gt;
&lt;polygon fill=&#34;#f8f8f8&#34; stroke=&#34;#000000&#34; points=&#34;1123,-1211 1073,-1211 1069,-1207 1069,-1175 1119,-1175 1123,-1179 1123,-1211&#34;&gt;&lt;/polygon&gt;
&lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;1119,-1207 1069,-1207 &#34;&gt;&lt;/polyline&gt;
&lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;1119,-1207 1119,-1175 &#34;&gt;&lt;/polyline&gt;
&lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;1119,-1207 1123,-1211 &#34;&gt;&lt;/polyline&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1096&#34; y=&#34;-1191.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;96B&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N13&amp;#45;&amp;gt;NN13_0 --&gt;
&lt;g id=&#34;edge11&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N13-&amp;gt;NN13_0&lt;/title&gt;
&lt;g id=&#34;a_edge11&#34;&gt;&lt;a xlink:title=&#34;4&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#000000&#34; d=&#34;M1096,-1292.7901C1096,-1271.4241 1096,-1242.774 1096,-1221.6536&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#000000&#34; stroke=&#34;#000000&#34; points=&#34;1099.5001,-1221.3737 1096,-1211.3738 1092.5001,-1221.3738 1099.5001,-1221.3737&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge11-label&#34;&gt;&lt;a xlink:title=&#34;4&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1101.5&#34; y=&#34;-1256.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 4&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N14 --&gt;
&lt;g id=&#34;node14&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N14&lt;/title&gt;
&lt;g id=&#34;a_node14&#34;&gt;&lt;a xlink:title=&#34;runtime.acquireSudog (2)&#34;&gt;
&lt;polygon fill=&#34;#edebe9&#34; stroke=&#34;#b2a794&#34; points=&#34;981,-1347.5 893,-1347.5 893,-1297.5 981,-1297.5 981,-1347.5&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;937&#34; y=&#34;-1333.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;13.00&#34; fill=&#34;#000000&#34;&gt;runtime&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;937&#34; y=&#34;-1319.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;13.00&#34; fill=&#34;#000000&#34;&gt;acquireSudog&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;937&#34; y=&#34;-1305.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;13.00&#34; fill=&#34;#000000&#34;&gt;2 (3.33%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- NN14_0 --&gt;
&lt;g id=&#34;NN14_0&#34; class=&#34;node&#34;&gt;
&lt;title&gt;NN14_0&lt;/title&gt;
&lt;g id=&#34;a_NN14_0&#34;&gt;&lt;a xlink:title=&#34;2&#34;&gt;
&lt;polygon fill=&#34;#f8f8f8&#34; stroke=&#34;#000000&#34; points=&#34;964,-1211 914,-1211 910,-1207 910,-1175 960,-1175 964,-1179 964,-1211&#34;&gt;&lt;/polygon&gt;
&lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;960,-1207 910,-1207 &#34;&gt;&lt;/polyline&gt;
&lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;960,-1207 960,-1175 &#34;&gt;&lt;/polyline&gt;
&lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;960,-1207 964,-1211 &#34;&gt;&lt;/polyline&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;937&#34; y=&#34;-1191.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;96B&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N14&amp;#45;&amp;gt;NN14_0 --&gt;
&lt;g id=&#34;edge12&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N14-&amp;gt;NN14_0&lt;/title&gt;
&lt;g id=&#34;a_edge12&#34;&gt;&lt;a xlink:title=&#34;2&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#000000&#34; d=&#34;M937,-1297.2237C937,-1275.3646 937,-1243.7999 937,-1221.1423&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#000000&#34; stroke=&#34;#000000&#34; points=&#34;940.5001,-1221.1214 937,-1211.1214 933.5001,-1221.1215 940.5001,-1221.1214&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge12-label&#34;&gt;&lt;a xlink:title=&#34;2&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;942.5&#34; y=&#34;-1256.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 2&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N15 --&gt;
&lt;g id=&#34;node15&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N15&lt;/title&gt;
&lt;g id=&#34;a_node15&#34;&gt;&lt;a xlink:title=&#34;runtime.main (6)&#34;&gt;
&lt;polygon fill=&#34;#ede7e1&#34; stroke=&#34;#b28559&#34; points=&#34;1185.5,-1996 1118.5,-1996 1118.5,-1960 1185.5,-1960 1185.5,-1996&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1152&#34; y=&#34;-1985.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;runtime&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1152&#34; y=&#34;-1976.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;main&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1152&#34; y=&#34;-1967.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 6 (10.00%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N20 --&gt;
&lt;g id=&#34;node20&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N20&lt;/title&gt;
&lt;g id=&#34;a_node20&#34;&gt;&lt;a xlink:title=&#34;main.main (6)&#34;&gt;
&lt;polygon fill=&#34;#ede7e1&#34; stroke=&#34;#b28559&#34; points=&#34;1185.5,-1872 1118.5,-1872 1118.5,-1836 1185.5,-1836 1185.5,-1872&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1152&#34; y=&#34;-1861.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;main&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1152&#34; y=&#34;-1852.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;main&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1152&#34; y=&#34;-1843.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 6 (10.00%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N15&amp;#45;&amp;gt;N20 --&gt;
&lt;g id=&#34;edge36&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N15-&amp;gt;N20&lt;/title&gt;
&lt;g id=&#34;a_edge36&#34;&gt;&lt;a xlink:title=&#34;runtime.main -&gt; main.main (6)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b28559&#34; d=&#34;M1152,-1959.9693C1152,-1939.5822 1152,-1906.1268 1152,-1882.2614&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b28559&#34; stroke=&#34;#b28559&#34; points=&#34;1155.5001,-1882.0524 1152,-1872.0524 1148.5001,-1882.0525 1155.5001,-1882.0524&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge36-label&#34;&gt;&lt;a xlink:title=&#34;runtime.main -&gt; main.main (6)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1157.5&#34; y=&#34;-1909.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 6&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N16 --&gt;
&lt;g id=&#34;node16&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N16&lt;/title&gt;
&lt;g id=&#34;a_node16&#34;&gt;&lt;a xlink:title=&#34;github.com/pkg/profile.Start (5)&#34;&gt;
&lt;polygon fill=&#34;#ede8e3&#34; stroke=&#34;#b28f68&#34; points=&#34;1190.5,-1765 1113.5,-1765 1113.5,-1705 1190.5,-1705 1190.5,-1765&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1152&#34; y=&#34;-1751.4&#34; font-family=&#34;Times,serif&#34; font-size=&#34;12.00&#34; fill=&#34;#000000&#34;&gt;profile&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1152&#34; y=&#34;-1738.4&#34; font-family=&#34;Times,serif&#34; font-size=&#34;12.00&#34; fill=&#34;#000000&#34;&gt;Start&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1152&#34; y=&#34;-1725.4&#34; font-family=&#34;Times,serif&#34; font-size=&#34;12.00&#34; fill=&#34;#000000&#34;&gt;1 (1.67%)&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1152&#34; y=&#34;-1712.4&#34; font-family=&#34;Times,serif&#34; font-size=&#34;12.00&#34; fill=&#34;#000000&#34;&gt;of 5 (8.33%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- NN16_0 --&gt;
&lt;g id=&#34;NN16_0&#34; class=&#34;node&#34;&gt;
&lt;title&gt;NN16_0&lt;/title&gt;
&lt;g id=&#34;a_NN16_0&#34;&gt;&lt;a xlink:title=&#34;1&#34;&gt;
&lt;polygon fill=&#34;#f8f8f8&#34; stroke=&#34;#000000&#34; points=&#34;1179,-1644.5 1129,-1644.5 1125,-1640.5 1125,-1608.5 1175,-1608.5 1179,-1612.5 1179,-1644.5&#34;&gt;&lt;/polygon&gt;
&lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;1175,-1640.5 1125,-1640.5 &#34;&gt;&lt;/polyline&gt;
&lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;1175,-1640.5 1175,-1608.5 &#34;&gt;&lt;/polyline&gt;
&lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;1175,-1640.5 1179,-1644.5 &#34;&gt;&lt;/polyline&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1152&#34; y=&#34;-1624.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;48B&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N16&amp;#45;&amp;gt;NN16_0 --&gt;
&lt;g id=&#34;edge13&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N16-&amp;gt;NN16_0&lt;/title&gt;
&lt;g id=&#34;a_edge13&#34;&gt;&lt;a xlink:title=&#34;1&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#000000&#34; d=&#34;M1152,-1704.7767C1152,-1689.236 1152,-1670.3988 1152,-1655.0981&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#000000&#34; stroke=&#34;#000000&#34; points=&#34;1155.5001,-1654.6795 1152,-1644.6796 1148.5001,-1654.6796 1155.5001,-1654.6795&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge13-label&#34;&gt;&lt;a xlink:title=&#34;1&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1157.5&#34; y=&#34;-1671.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 1&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N24 --&gt;
&lt;g id=&#34;node24&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N24&lt;/title&gt;
&lt;g id=&#34;a_node24&#34;&gt;&lt;a xlink:title=&#34;github.com/pkg/profile.Start.func2 (4)&#34;&gt;
&lt;polygon fill=&#34;#ede9e5&#34; stroke=&#34;#b29877&#34; points=&#34;1246.5,-1552 1183.5,-1552 1183.5,-1508 1246.5,-1508 1246.5,-1552&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1215&#34; y=&#34;-1541.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;profile&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1215&#34; y=&#34;-1532.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;Start&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1215&#34; y=&#34;-1523.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;func2&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1215&#34; y=&#34;-1514.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 4 (6.67%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N16&amp;#45;&amp;gt;N24 --&gt;
&lt;g id=&#34;edge38&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N16-&amp;gt;N24&lt;/title&gt;
&lt;g id=&#34;a_edge38&#34;&gt;&lt;a xlink:title=&#34;github.com/pkg/profile.Start -&gt; github.com/pkg/profile.Start.func2 (4)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b29877&#34; d=&#34;M1166.3474,-1704.8138C1173.5611,-1688.7909 1182.0176,-1668.6139 1188,-1650 1197.3344,-1620.9567 1204.659,-1586.9587 1209.31,-1562.5803&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b29877&#34; stroke=&#34;#b29877&#34; points=&#34;1212.8089,-1562.9083 1211.197,-1552.4369 1205.927,-1561.628 1212.8089,-1562.9083&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge38-label&#34;&gt;&lt;a xlink:title=&#34;github.com/pkg/profile.Start -&gt; github.com/pkg/profile.Start.func2 (4)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1205.5&#34; y=&#34;-1622.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 4&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N17 --&gt;
&lt;g id=&#34;node17&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N17&lt;/title&gt;
&lt;g id=&#34;a_node17&#34;&gt;&lt;a xlink:title=&#34;log.(*Logger).Output (4)&#34;&gt;
&lt;polygon fill=&#34;#ede9e5&#34; stroke=&#34;#b29877&#34; points=&#34;1253.5,-1359 1176.5,-1359 1176.5,-1286 1253.5,-1286 1253.5,-1359&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1215&#34; y=&#34;-1345.4&#34; font-family=&#34;Times,serif&#34; font-size=&#34;12.00&#34; fill=&#34;#000000&#34;&gt;log&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1215&#34; y=&#34;-1332.4&#34; font-family=&#34;Times,serif&#34; font-size=&#34;12.00&#34; fill=&#34;#000000&#34;&gt;(*Logger)&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1215&#34; y=&#34;-1319.4&#34; font-family=&#34;Times,serif&#34; font-size=&#34;12.00&#34; fill=&#34;#000000&#34;&gt;Output&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1215&#34; y=&#34;-1306.4&#34; font-family=&#34;Times,serif&#34; font-size=&#34;12.00&#34; fill=&#34;#000000&#34;&gt;1 (1.67%)&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1215&#34; y=&#34;-1293.4&#34; font-family=&#34;Times,serif&#34; font-size=&#34;12.00&#34; fill=&#34;#000000&#34;&gt;of 4 (6.67%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- NN17_0 --&gt;
&lt;g id=&#34;NN17_0&#34; class=&#34;node&#34;&gt;
&lt;title&gt;NN17_0&lt;/title&gt;
&lt;g id=&#34;a_NN17_0&#34;&gt;&lt;a xlink:title=&#34;1&#34;&gt;
&lt;polygon fill=&#34;#f8f8f8&#34; stroke=&#34;#000000&#34; points=&#34;1242,-1211 1192,-1211 1188,-1207 1188,-1175 1238,-1175 1242,-1179 1242,-1211&#34;&gt;&lt;/polygon&gt;
&lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;1238,-1207 1188,-1207 &#34;&gt;&lt;/polyline&gt;
&lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;1238,-1207 1238,-1175 &#34;&gt;&lt;/polyline&gt;
&lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;1238,-1207 1242,-1211 &#34;&gt;&lt;/polyline&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1215&#34; y=&#34;-1191.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;144B&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N17&amp;#45;&amp;gt;NN17_0 --&gt;
&lt;g id=&#34;edge14&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N17-&amp;gt;NN17_0&lt;/title&gt;
&lt;g id=&#34;a_edge14&#34;&gt;&lt;a xlink:title=&#34;1&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#000000&#34; d=&#34;M1215,-1285.7369C1215,-1265.2637 1215,-1240.1681 1215,-1221.2481&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#000000&#34; stroke=&#34;#000000&#34; points=&#34;1218.5001,-1221.1726 1215,-1211.1727 1211.5001,-1221.1727 1218.5001,-1221.1726&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge14-label&#34;&gt;&lt;a xlink:title=&#34;1&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1220.5&#34; y=&#34;-1256.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 1&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N25 --&gt;
&lt;g id=&#34;node25&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N25&lt;/title&gt;
&lt;g id=&#34;a_node25&#34;&gt;&lt;a xlink:title=&#34;log.(*Logger).formatHeader (3)&#34;&gt;
&lt;polygon fill=&#34;#edeae7&#34; stroke=&#34;#b2a085&#34; points=&#34;1309.5,-1100 1246.5,-1100 1246.5,-1056 1309.5,-1056 1309.5,-1100&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1278&#34; y=&#34;-1089.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;log&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1278&#34; y=&#34;-1080.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;(*Logger)&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1278&#34; y=&#34;-1071.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;formatHeader&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1278&#34; y=&#34;-1062.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 3 (5.00%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N17&amp;#45;&amp;gt;N25 --&gt;
&lt;g id=&#34;edge44&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N17-&amp;gt;N25&lt;/title&gt;
&lt;g id=&#34;a_edge44&#34;&gt;&lt;a xlink:title=&#34;log.(*Logger).Output -&gt; log.(*Logger).formatHeader (3)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b2a085&#34; d=&#34;M1232.2632,-1285.6734C1238.9178,-1270.285 1246.0919,-1252.0481 1251,-1235 1263.1677,-1192.7354 1270.6372,-1142.3973 1274.5501,-1110.3247&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b2a085&#34; stroke=&#34;#b2a085&#34; points=&#34;1278.0504,-1110.5266 1275.7424,-1100.1862 1271.0983,-1109.7089 1278.0504,-1110.5266&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge44-label&#34;&gt;&lt;a xlink:title=&#34;log.(*Logger).Output -&gt; log.(*Logger).formatHeader (3)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1273.5&#34; y=&#34;-1189.3&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 3&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N18 --&gt;
&lt;g id=&#34;node18&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N18&lt;/title&gt;
&lt;g id=&#34;a_node18&#34;&gt;&lt;a xlink:title=&#34;runtime.newproc1 (11)&#34;&gt;
&lt;polygon fill=&#34;#ede0d7&#34; stroke=&#34;#b2500e&#34; points=&#34;515.5,-1548 444.5,-1548 444.5,-1512 515.5,-1512 515.5,-1548&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;480&#34; y=&#34;-1537.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;runtime&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;480&#34; y=&#34;-1528.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;newproc1&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;480&#34; y=&#34;-1519.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 11 (18.33%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N18&amp;#45;&amp;gt;N1 --&gt;
&lt;g id=&#34;edge30&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N18-&amp;gt;N1&lt;/title&gt;
&lt;g id=&#34;a_edge30&#34;&gt;&lt;a xlink:title=&#34;runtime.newproc1 -&gt; runtime.malg (10)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b25b1d&#34; d=&#34;M480,-1511.8587C480,-1492.4632 480,-1460.8082 480,-1433.5 480,-1433.5 480,-1433.5 480,-892 480,-869.0789 491.6223,-848.2363 506.5599,-830.9141&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b25b1d&#34; stroke=&#34;#b25b1d&#34; points=&#34;509.4473,-832.9439 513.6265,-823.2081 504.2882,-828.2128 509.4473,-832.9439&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge30-label&#34;&gt;&lt;a xlink:title=&#34;runtime.newproc1 -&gt; runtime.malg (10)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;489&#34; y=&#34;-1121.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 10&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N22 --&gt;
&lt;g id=&#34;node22&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N22&lt;/title&gt;
&lt;g id=&#34;a_node22&#34;&gt;&lt;a xlink:title=&#34;runtime.allgadd (1)&#34;&gt;
&lt;polygon fill=&#34;#edeceb&#34; stroke=&#34;#b2aea3&#34; points=&#34;572,-1457 508,-1457 508,-1410 572,-1410 572,-1457&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;540&#34; y=&#34;-1443.4&#34; font-family=&#34;Times,serif&#34; font-size=&#34;12.00&#34; fill=&#34;#000000&#34;&gt;runtime&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;540&#34; y=&#34;-1430.4&#34; font-family=&#34;Times,serif&#34; font-size=&#34;12.00&#34; fill=&#34;#000000&#34;&gt;allgadd&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;540&#34; y=&#34;-1417.4&#34; font-family=&#34;Times,serif&#34; font-size=&#34;12.00&#34; fill=&#34;#000000&#34;&gt;1 (1.67%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N18&amp;#45;&amp;gt;N22 --&gt;
&lt;g id=&#34;edge67&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N18-&amp;gt;N22&lt;/title&gt;
&lt;g id=&#34;a_edge67&#34;&gt;&lt;a xlink:title=&#34;runtime.newproc1 -&gt; runtime.allgadd (1)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b2aea3&#34; d=&#34;M491.2855,-1511.8491C499.3446,-1498.8874 510.4037,-1481.1007 519.948,-1465.7503&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b2aea3&#34; stroke=&#34;#b2aea3&#34; points=&#34;523.0504,-1467.3891 525.3583,-1457.0487 517.1058,-1463.6929 523.0504,-1467.3891&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge67-label&#34;&gt;&lt;a xlink:title=&#34;runtime.newproc1 -&gt; runtime.allgadd (1)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;519.5&#34; y=&#34;-1478.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 1&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N19 --&gt;
&lt;g id=&#34;node19&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N19&lt;/title&gt;
&lt;g id=&#34;a_node19&#34;&gt;&lt;a xlink:title=&#34;time.LoadLocationFromTZData (3)&#34;&gt;
&lt;polygon fill=&#34;#edeae7&#34; stroke=&#34;#b2a085&#34; points=&#34;1357,-322 1199,-322 1199,-258 1357,-258 1357,-322&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1278&#34; y=&#34;-307.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;13.00&#34; fill=&#34;#000000&#34;&gt;time&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1278&#34; y=&#34;-293.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;13.00&#34; fill=&#34;#000000&#34;&gt;LoadLocationFromTZData&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1278&#34; y=&#34;-279.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;13.00&#34; fill=&#34;#000000&#34;&gt;2 (3.33%)&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1278&#34; y=&#34;-265.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;13.00&#34; fill=&#34;#000000&#34;&gt;of 3 (5.00%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- NN19_0 --&gt;
&lt;g id=&#34;NN19_0&#34; class=&#34;node&#34;&gt;
&lt;title&gt;NN19_0&lt;/title&gt;
&lt;g id=&#34;a_NN19_0&#34;&gt;&lt;a xlink:title=&#34;1&#34;&gt;
&lt;polygon fill=&#34;#f8f8f8&#34; stroke=&#34;#000000&#34; points=&#34;1233,-207 1183,-207 1179,-203 1179,-171 1229,-171 1233,-175 1233,-207&#34;&gt;&lt;/polygon&gt;
&lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;1229,-203 1179,-203 &#34;&gt;&lt;/polyline&gt;
&lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;1229,-203 1229,-171 &#34;&gt;&lt;/polyline&gt;
&lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;1229,-203 1233,-207 &#34;&gt;&lt;/polyline&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1206&#34; y=&#34;-187.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;224B&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N19&amp;#45;&amp;gt;NN19_0 --&gt;
&lt;g id=&#34;edge15&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N19-&amp;gt;NN19_0&lt;/title&gt;
&lt;g id=&#34;a_edge15&#34;&gt;&lt;a xlink:title=&#34;1&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#000000&#34; d=&#34;M1255.0208,-257.7653C1245.3237,-244.1624 1234.1698,-228.516 1224.9538,-215.588&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#000000&#34; stroke=&#34;#000000&#34; points=&#34;1227.5795,-213.2417 1218.9248,-207.1306 1221.8796,-217.305 1227.5795,-213.2417&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge15-label&#34;&gt;&lt;a xlink:title=&#34;1&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1247.5&#34; y=&#34;-228.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 1&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- NN19_1 --&gt;
&lt;g id=&#34;NN19_1&#34; class=&#34;node&#34;&gt;
&lt;title&gt;NN19_1&lt;/title&gt;
&lt;g id=&#34;a_NN19_1&#34;&gt;&lt;a xlink:title=&#34;1&#34;&gt;
&lt;polygon fill=&#34;#f8f8f8&#34; stroke=&#34;#000000&#34; points=&#34;1305,-207 1255,-207 1251,-203 1251,-171 1301,-171 1305,-175 1305,-207&#34;&gt;&lt;/polygon&gt;
&lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;1301,-203 1251,-203 &#34;&gt;&lt;/polyline&gt;
&lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;1301,-203 1301,-171 &#34;&gt;&lt;/polyline&gt;
&lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;1301,-203 1305,-207 &#34;&gt;&lt;/polyline&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1278&#34; y=&#34;-187.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;4kB&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N19&amp;#45;&amp;gt;NN19_1 --&gt;
&lt;g id=&#34;edge16&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N19-&amp;gt;NN19_1&lt;/title&gt;
&lt;g id=&#34;a_edge16&#34;&gt;&lt;a xlink:title=&#34;1&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#000000&#34; d=&#34;M1278,-257.7653C1278,-244.8164 1278,-230.0157 1278,-217.4709&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#000000&#34; stroke=&#34;#000000&#34; points=&#34;1281.5001,-217.1305 1278,-207.1306 1274.5001,-217.1306 1281.5001,-217.1305&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge16-label&#34;&gt;&lt;a xlink:title=&#34;1&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1283.5&#34; y=&#34;-228.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 1&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N23 --&gt;
&lt;g id=&#34;node23&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N23&lt;/title&gt;
&lt;g id=&#34;a_node23&#34;&gt;&lt;a xlink:title=&#34;time.byteString (1)&#34;&gt;
&lt;polygon fill=&#34;#edeceb&#34; stroke=&#34;#b2aea3&#34; points=&#34;1374,-134 1308,-134 1308,-87 1374,-87 1374,-134&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1341&#34; y=&#34;-120.4&#34; font-family=&#34;Times,serif&#34; font-size=&#34;12.00&#34; fill=&#34;#000000&#34;&gt;time&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1341&#34; y=&#34;-107.4&#34; font-family=&#34;Times,serif&#34; font-size=&#34;12.00&#34; fill=&#34;#000000&#34;&gt;byteString&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1341&#34; y=&#34;-94.4&#34; font-family=&#34;Times,serif&#34; font-size=&#34;12.00&#34; fill=&#34;#000000&#34;&gt;1 (1.67%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N19&amp;#45;&amp;gt;N23 --&gt;
&lt;g id=&#34;edge69&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N19-&amp;gt;N23&lt;/title&gt;
&lt;g id=&#34;a_edge69&#34;&gt;&lt;a xlink:title=&#34;time.LoadLocationFromTZData -&gt; time.byteString (1)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b2aea3&#34; d=&#34;M1293.2347,-257.6914C1300.0805,-242.5006 1307.9587,-224.0226 1314,-207 1321.315,-186.3884 1327.9569,-162.7483 1332.8227,-144.0251&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b2aea3&#34; stroke=&#34;#b2aea3&#34; points=&#34;1336.2537,-144.7347 1335.3362,-134.1797 1329.4713,-143.0031 1336.2537,-144.7347&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge69-label&#34;&gt;&lt;a xlink:title=&#34;time.LoadLocationFromTZData -&gt; time.byteString (1)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1330.5&#34; y=&#34;-185.3&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 1&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N20&amp;#45;&amp;gt;N16 --&gt;
&lt;g id=&#34;edge37&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N20-&amp;gt;N16&lt;/title&gt;
&lt;g id=&#34;a_edge37&#34;&gt;&lt;a xlink:title=&#34;main.main -&gt; github.com/pkg/profile.Start (5)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b28f68&#34; d=&#34;M1152,-1835.9265C1152,-1819.9073 1152,-1795.9351 1152,-1775.3731&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b28f68&#34; stroke=&#34;#b28f68&#34; points=&#34;1155.5001,-1775.2981 1152,-1765.2981 1148.5001,-1775.2981 1155.5001,-1775.2981&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge37-label&#34;&gt;&lt;a xlink:title=&#34;main.main -&gt; github.com/pkg/profile.Start (5)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1157.5&#34; y=&#34;-1790.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 5&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N27 --&gt;
&lt;g id=&#34;node27&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N27&lt;/title&gt;
&lt;g id=&#34;a_node27&#34;&gt;&lt;a xlink:title=&#34;main.allocate (1)&#34;&gt;
&lt;polygon fill=&#34;#edeceb&#34; stroke=&#34;#b2aea3&#34; points=&#34;1286.5,-1753 1223.5,-1753 1223.5,-1717 1286.5,-1717 1286.5,-1753&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1255&#34; y=&#34;-1742.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;main&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1255&#34; y=&#34;-1733.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;allocate&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1255&#34; y=&#34;-1724.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 1 (1.67%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N20&amp;#45;&amp;gt;N27 --&gt;
&lt;g id=&#34;edge62&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N20-&amp;gt;N27&lt;/title&gt;
&lt;g id=&#34;a_edge62&#34;&gt;&lt;a xlink:title=&#34;main.main -&gt; main.allocate (1)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b2aea3&#34; d=&#34;M1167.6435,-1835.9265C1184.961,-1815.9188 1213.0171,-1783.5045 1232.6483,-1760.8238&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b2aea3&#34; stroke=&#34;#b2aea3&#34; points=&#34;1235.3112,-1763.0953 1239.2093,-1753.2436 1230.0184,-1758.5142 1235.3112,-1763.0953&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge62-label&#34;&gt;&lt;a xlink:title=&#34;main.main -&gt; main.allocate (1)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1214.5&#34; y=&#34;-1790.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 1&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N21 --&gt;
&lt;g id=&#34;node21&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N21&lt;/title&gt;
&lt;g id=&#34;a_node21&#34;&gt;&lt;a xlink:title=&#34;main.makeByteSlice (1)&#34;&gt;
&lt;polygon fill=&#34;#edeceb&#34; stroke=&#34;#b2aea3&#34; points=&#34;1336.5,-1650 1247.5,-1650 1247.5,-1603 1336.5,-1603 1336.5,-1650&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1292&#34; y=&#34;-1636.4&#34; font-family=&#34;Times,serif&#34; font-size=&#34;12.00&#34; fill=&#34;#000000&#34;&gt;main&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1292&#34; y=&#34;-1623.4&#34; font-family=&#34;Times,serif&#34; font-size=&#34;12.00&#34; fill=&#34;#000000&#34;&gt;makeByteSlice&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1292&#34; y=&#34;-1610.4&#34; font-family=&#34;Times,serif&#34; font-size=&#34;12.00&#34; fill=&#34;#000000&#34;&gt;1 (1.67%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- NN21_0 --&gt;
&lt;g id=&#34;NN21_0&#34; class=&#34;node&#34;&gt;
&lt;title&gt;NN21_0&lt;/title&gt;
&lt;g id=&#34;a_NN21_0&#34;&gt;&lt;a xlink:title=&#34;1&#34;&gt;
&lt;polygon fill=&#34;#f8f8f8&#34; stroke=&#34;#000000&#34; points=&#34;1319,-1548 1269,-1548 1265,-1544 1265,-1512 1315,-1512 1319,-1516 1319,-1548&#34;&gt;&lt;/polygon&gt;
&lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;1315,-1544 1265,-1544 &#34;&gt;&lt;/polyline&gt;
&lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;1315,-1544 1315,-1512 &#34;&gt;&lt;/polyline&gt;
&lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;1315,-1544 1319,-1548 &#34;&gt;&lt;/polyline&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1292&#34; y=&#34;-1528.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;16B&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N21&amp;#45;&amp;gt;NN21_0 --&gt;
&lt;g id=&#34;edge17&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N21-&amp;gt;NN21_0&lt;/title&gt;
&lt;g id=&#34;a_edge17&#34;&gt;&lt;a xlink:title=&#34;1&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#000000&#34; d=&#34;M1292,-1602.6461C1292,-1589.2142 1292,-1572.3595 1292,-1558.2671&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#000000&#34; stroke=&#34;#000000&#34; points=&#34;1295.5001,-1558.1314 1292,-1548.1314 1288.5001,-1558.1315 1295.5001,-1558.1314&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge17-label&#34;&gt;&lt;a xlink:title=&#34;1&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1297.5&#34; y=&#34;-1573.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 1&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- NN22_0 --&gt;
&lt;g id=&#34;NN22_0&#34; class=&#34;node&#34;&gt;
&lt;title&gt;NN22_0&lt;/title&gt;
&lt;g id=&#34;a_NN22_0&#34;&gt;&lt;a xlink:title=&#34;1&#34;&gt;
&lt;polygon fill=&#34;#f8f8f8&#34; stroke=&#34;#000000&#34; points=&#34;567,-1340.5 517,-1340.5 513,-1336.5 513,-1304.5 563,-1304.5 567,-1308.5 567,-1340.5&#34;&gt;&lt;/polygon&gt;
&lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;563,-1336.5 513,-1336.5 &#34;&gt;&lt;/polyline&gt;
&lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;563,-1336.5 563,-1304.5 &#34;&gt;&lt;/polyline&gt;
&lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;563,-1336.5 567,-1340.5 &#34;&gt;&lt;/polyline&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;540&#34; y=&#34;-1320.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;128B&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N22&amp;#45;&amp;gt;NN22_0 --&gt;
&lt;g id=&#34;edge18&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N22-&amp;gt;NN22_0&lt;/title&gt;
&lt;g id=&#34;a_edge18&#34;&gt;&lt;a xlink:title=&#34;1&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#000000&#34; d=&#34;M540,-1409.9598C540,-1392.6172 540,-1368.9589 540,-1350.6212&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#000000&#34; stroke=&#34;#000000&#34; points=&#34;543.5001,-1350.5269 540,-1340.527 536.5001,-1350.527 543.5001,-1350.5269&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge18-label&#34;&gt;&lt;a xlink:title=&#34;1&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;545.5&#34; y=&#34;-1380.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 1&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- NN23_0 --&gt;
&lt;g id=&#34;NN23_0&#34; class=&#34;node&#34;&gt;
&lt;title&gt;NN23_0&lt;/title&gt;
&lt;g id=&#34;a_NN23_0&#34;&gt;&lt;a xlink:title=&#34;1&#34;&gt;
&lt;polygon fill=&#34;#f8f8f8&#34; stroke=&#34;#000000&#34; points=&#34;1368,-36 1318,-36 1314,-32 1314,0 1364,0 1368,-4 1368,-36&#34;&gt;&lt;/polygon&gt;
&lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;1364,-32 1314,-32 &#34;&gt;&lt;/polyline&gt;
&lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;1364,-32 1364,0 &#34;&gt;&lt;/polyline&gt;
&lt;polyline fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;1364,-32 1368,-36 &#34;&gt;&lt;/polyline&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1341&#34; y=&#34;-16.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;16B&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N23&amp;#45;&amp;gt;NN23_0 --&gt;
&lt;g id=&#34;edge19&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N23-&amp;gt;NN23_0&lt;/title&gt;
&lt;g id=&#34;a_edge19&#34;&gt;&lt;a xlink:title=&#34;1&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#000000&#34; d=&#34;M1341,-86.679C1341,-74.3839 1341,-59.2986 1341,-46.4008&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#000000&#34; stroke=&#34;#000000&#34; points=&#34;1344.5001,-46.1905 1341,-36.1905 1337.5001,-46.1905 1344.5001,-46.1905&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge19-label&#34;&gt;&lt;a xlink:title=&#34;1&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1346.5&#34; y=&#34;-57.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 1&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N26 --&gt;
&lt;g id=&#34;node26&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N26&lt;/title&gt;
&lt;g id=&#34;a_node26&#34;&gt;&lt;a xlink:title=&#34;log.Printf (4)&#34;&gt;
&lt;polygon fill=&#34;#ede9e5&#34; stroke=&#34;#b29877&#34; points=&#34;1246.5,-1451.5 1183.5,-1451.5 1183.5,-1415.5 1246.5,-1415.5 1246.5,-1451.5&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1215&#34; y=&#34;-1440.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;log&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1215&#34; y=&#34;-1431.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;Printf&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1215&#34; y=&#34;-1422.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 4 (6.67%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N24&amp;#45;&amp;gt;N26 --&gt;
&lt;g id=&#34;edge39&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N24-&amp;gt;N26&lt;/title&gt;
&lt;g id=&#34;a_edge39&#34;&gt;&lt;a xlink:title=&#34;github.com/pkg/profile.Start.func2 -&gt; log.Printf (4)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b29877&#34; d=&#34;M1215,-1507.6184C1215,-1493.9086 1215,-1476.2427 1215,-1461.5969&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b29877&#34; stroke=&#34;#b29877&#34; points=&#34;1218.5001,-1461.566 1215,-1451.566 1211.5001,-1461.566 1218.5001,-1461.566&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge39-label&#34;&gt;&lt;a xlink:title=&#34;github.com/pkg/profile.Start.func2 -&gt; log.Printf (4)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1220.5&#34; y=&#34;-1478.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 4&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N46 --&gt;
&lt;g id=&#34;node46&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N46&lt;/title&gt;
&lt;g id=&#34;a_node46&#34;&gt;&lt;a xlink:title=&#34;time.Time.Date (3)&#34;&gt;
&lt;polygon fill=&#34;#edeae7&#34; stroke=&#34;#b2a085&#34; points=&#34;1309.5,-1005 1246.5,-1005 1246.5,-961 1309.5,-961 1309.5,-1005&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1278&#34; y=&#34;-994.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;time&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1278&#34; y=&#34;-985.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;Time&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1278&#34; y=&#34;-976.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;Date&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1278&#34; y=&#34;-967.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 3 (5.00%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N25&amp;#45;&amp;gt;N46 --&gt;
&lt;g id=&#34;edge45&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N25-&amp;gt;N46&lt;/title&gt;
&lt;g id=&#34;a_edge45&#34;&gt;&lt;a xlink:title=&#34;log.(*Logger).formatHeader -&gt; time.Time.Date (3)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b2a085&#34; d=&#34;M1278,-1055.9663C1278,-1043.9427 1278,-1028.8283 1278,-1015.4785&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b2a085&#34; stroke=&#34;#b2a085&#34; points=&#34;1281.5001,-1015.2433 1278,-1005.2433 1274.5001,-1015.2433 1281.5001,-1015.2433&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge45-label&#34;&gt;&lt;a xlink:title=&#34;log.(*Logger).formatHeader -&gt; time.Time.Date (3)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1283.5&#34; y=&#34;-1026.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 3&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N26&amp;#45;&amp;gt;N17 --&gt;
&lt;g id=&#34;edge40&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N26-&amp;gt;N17&lt;/title&gt;
&lt;g id=&#34;a_edge40&#34;&gt;&lt;a xlink:title=&#34;log.Printf -&gt; log.(*Logger).Output (4)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b29877&#34; d=&#34;M1215,-1415.1706C1215,-1402.7447 1215,-1385.7181 1215,-1369.6477&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b29877&#34; stroke=&#34;#b29877&#34; points=&#34;1218.5001,-1369.2831 1215,-1359.2831 1211.5001,-1369.2832 1218.5001,-1369.2831&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge40-label&#34;&gt;&lt;a xlink:title=&#34;log.Printf -&gt; log.(*Logger).Output (4)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1220.5&#34; y=&#34;-1380.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 4&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N27&amp;#45;&amp;gt;N21 --&gt;
&lt;g id=&#34;edge61&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N27-&amp;gt;N21&lt;/title&gt;
&lt;g id=&#34;a_edge61&#34;&gt;&lt;a xlink:title=&#34;main.allocate -&gt; main.makeByteSlice (1)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b2aea3&#34; d=&#34;M1261.2765,-1716.5945C1266.5545,-1701.1172 1274.2351,-1678.5945 1280.5963,-1659.9406&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b2aea3&#34; stroke=&#34;#b2aea3&#34; points=&#34;1283.9616,-1660.9158 1283.8766,-1650.3213 1277.3362,-1658.6564 1283.9616,-1660.9158&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge61-label&#34;&gt;&lt;a xlink:title=&#34;main.allocate -&gt; main.makeByteSlice (1)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1281.5&#34; y=&#34;-1671.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 1&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N29 --&gt;
&lt;g id=&#34;node29&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N29&lt;/title&gt;
&lt;g id=&#34;a_node29&#34;&gt;&lt;a xlink:title=&#34;os/signal.enableSignal (4)&#34;&gt;
&lt;polygon fill=&#34;#ede9e5&#34; stroke=&#34;#b29877&#34; points=&#34;1127.5,-1451.5 1064.5,-1451.5 1064.5,-1415.5 1127.5,-1415.5 1127.5,-1451.5&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1096&#34; y=&#34;-1440.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;signal&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1096&#34; y=&#34;-1431.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;enableSignal&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1096&#34; y=&#34;-1422.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 4 (6.67%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N28&amp;#45;&amp;gt;N29 --&gt;
&lt;g id=&#34;edge42&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N28-&amp;gt;N29&lt;/title&gt;
&lt;g id=&#34;a_edge42&#34;&gt;&lt;a xlink:title=&#34;os/signal.Notify.func1 -&gt; os/signal.enableSignal (4)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b29877&#34; d=&#34;M1096,-1507.6184C1096,-1493.9086 1096,-1476.2427 1096,-1461.5969&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b29877&#34; stroke=&#34;#b29877&#34; points=&#34;1099.5001,-1461.566 1096,-1451.566 1092.5001,-1461.566 1099.5001,-1461.566&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge42-label&#34;&gt;&lt;a xlink:title=&#34;os/signal.Notify.func1 -&gt; os/signal.enableSignal (4)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1101.5&#34; y=&#34;-1478.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 4&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N29&amp;#45;&amp;gt;N13 --&gt;
&lt;g id=&#34;edge43&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N29-&amp;gt;N13&lt;/title&gt;
&lt;g id=&#34;a_edge43&#34;&gt;&lt;a xlink:title=&#34;os/signal.enableSignal -&gt; os/signal.signal_enable (4)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b29877&#34; d=&#34;M1096,-1415.1706C1096,-1400.794 1096,-1380.2588 1096,-1362.1713&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b29877&#34; stroke=&#34;#b29877&#34; points=&#34;1099.5001,-1362.1502 1096,-1352.1503 1092.5001,-1362.1503 1099.5001,-1362.1502&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge43-label&#34;&gt;&lt;a xlink:title=&#34;os/signal.enableSignal -&gt; os/signal.signal_enable (4)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1101.5&#34; y=&#34;-1380.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 4&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N41 --&gt;
&lt;g id=&#34;node41&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N41&lt;/title&gt;
&lt;g id=&#34;a_node41&#34;&gt;&lt;a xlink:title=&#34;runtime.startTemplateThread (3)&#34;&gt;
&lt;polygon fill=&#34;#edeae7&#34; stroke=&#34;#b2a085&#34; points=&#34;799.5,-1451.5 716.5,-1451.5 716.5,-1415.5 799.5,-1415.5 799.5,-1451.5&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;758&#34; y=&#34;-1440.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;runtime&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;758&#34; y=&#34;-1431.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;startTemplateThread&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;758&#34; y=&#34;-1422.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 3 (5.00%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N30&amp;#45;&amp;gt;N41 --&gt;
&lt;g id=&#34;edge46&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N30-&amp;gt;N41&lt;/title&gt;
&lt;g id=&#34;a_edge46&#34;&gt;&lt;a xlink:title=&#34;runtime.LockOSThread -&gt; runtime.startTemplateThread (3)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b2a085&#34; d=&#34;M787.2287,-1511.8491C781.8987,-1497.5617 774.3816,-1477.4119 768.3055,-1461.1246&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b2a085&#34; stroke=&#34;#b2a085&#34; points=&#34;771.5155,-1459.7154 764.741,-1451.5695 764.9571,-1462.1622 771.5155,-1459.7154&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge46-label&#34;&gt;&lt;a xlink:title=&#34;runtime.LockOSThread -&gt; runtime.startTemplateThread (3)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;784.5&#34; y=&#34;-1478.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 3&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N31 --&gt;
&lt;g id=&#34;node31&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N31&lt;/title&gt;
&lt;g id=&#34;a_node31&#34;&gt;&lt;a xlink:title=&#34;runtime.chansend (1)&#34;&gt;
&lt;polygon fill=&#34;#edeceb&#34; stroke=&#34;#b2aea3&#34; points=&#34;913.5,-1451.5 850.5,-1451.5 850.5,-1415.5 913.5,-1415.5 913.5,-1451.5&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;882&#34; y=&#34;-1440.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;runtime&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;882&#34; y=&#34;-1431.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;chansend&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;882&#34; y=&#34;-1422.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 1 (1.67%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N31&amp;#45;&amp;gt;N14 --&gt;
&lt;g id=&#34;edge63&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N31-&amp;gt;N14&lt;/title&gt;
&lt;g id=&#34;a_edge63&#34;&gt;&lt;a xlink:title=&#34;runtime.chansend -&gt; runtime.acquireSudog (1)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b2aea3&#34; d=&#34;M891.0821,-1415.1706C898.9482,-1399.2954 910.5351,-1375.911 920.1012,-1356.6049&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b2aea3&#34; stroke=&#34;#b2aea3&#34; points=&#34;923.306,-1358.02 924.6098,-1347.5057 917.0338,-1354.9121 923.306,-1358.02&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge63-label&#34;&gt;&lt;a xlink:title=&#34;runtime.chansend -&gt; runtime.acquireSudog (1)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;914.5&#34; y=&#34;-1380.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 1&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N32&amp;#45;&amp;gt;N31 --&gt;
&lt;g id=&#34;edge64&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N32-&amp;gt;N31&lt;/title&gt;
&lt;g id=&#34;a_edge64&#34;&gt;&lt;a xlink:title=&#34;runtime.chansend1 -&gt; runtime.chansend (1)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b2aea3&#34; d=&#34;M877.9405,-1511.8491C878.6738,-1497.6965 879.7051,-1477.7915 880.5447,-1461.5866&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b2aea3&#34; stroke=&#34;#b2aea3&#34; points=&#34;884.0415,-1461.7373 881.0638,-1451.5695 877.0509,-1461.375 884.0415,-1461.7373&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge64-label&#34;&gt;&lt;a xlink:title=&#34;runtime.chansend1 -&gt; runtime.chansend (1)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;884.5&#34; y=&#34;-1478.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 1&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N33 --&gt;
&lt;g id=&#34;node33&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N33&lt;/title&gt;
&lt;g id=&#34;a_node33&#34;&gt;&lt;a xlink:title=&#34;runtime.handoffp (3)&#34;&gt;
&lt;polygon fill=&#34;#edeae7&#34; stroke=&#34;#b2a085&#34; points=&#34;742.5,-1548 679.5,-1548 679.5,-1512 742.5,-1512 742.5,-1548&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;711&#34; y=&#34;-1537.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;runtime&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;711&#34; y=&#34;-1528.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;handoffp&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;711&#34; y=&#34;-1519.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 3 (5.00%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N33&amp;#45;&amp;gt;N11 --&gt;
&lt;g id=&#34;edge48&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N33-&amp;gt;N11&lt;/title&gt;
&lt;g id=&#34;a_edge48&#34;&gt;&lt;a xlink:title=&#34;runtime.handoffp -&gt; runtime.startm (3)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b2a085&#34; d=&#34;M695.0122,-1511.8491C681.9525,-1497.0226 663.332,-1475.8828 648.7234,-1459.2978&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b2a085&#34; stroke=&#34;#b2a085&#34; points=&#34;651.1524,-1456.7602 641.9162,-1451.5695 645.8996,-1461.387 651.1524,-1456.7602&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge48-label&#34;&gt;&lt;a xlink:title=&#34;runtime.handoffp -&gt; runtime.startm (3)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;679.5&#34; y=&#34;-1478.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 3&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N35 --&gt;
&lt;g id=&#34;node35&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N35&lt;/title&gt;
&lt;g id=&#34;a_node35&#34;&gt;&lt;a xlink:title=&#34;runtime.mpreinit (7)&#34;&gt;
&lt;polygon fill=&#34;#ede5df&#34; stroke=&#34;#b27b4a&#34; points=&#34;673.5,-910 606.5,-910 606.5,-874 673.5,-874 673.5,-910&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;640&#34; y=&#34;-899.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;runtime&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;640&#34; y=&#34;-890.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;mpreinit&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;640&#34; y=&#34;-881.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 7 (11.67%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N34&amp;#45;&amp;gt;N35 --&gt;
&lt;g id=&#34;edge34&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N34-&amp;gt;N35&lt;/title&gt;
&lt;g id=&#34;a_edge34&#34;&gt;&lt;a xlink:title=&#34;runtime.mcommoninit -&gt; runtime.mpreinit (7)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b27b4a&#34; d=&#34;M667.9172,-964.5848C662.951,-951.6726 656.2249,-934.1849 650.6193,-919.6101&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b27b4a&#34; stroke=&#34;#b27b4a&#34; points=&#34;653.8094,-918.1543 646.9528,-910.0773 647.2759,-920.6672 653.8094,-918.1543&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge34-label&#34;&gt;&lt;a xlink:title=&#34;runtime.mcommoninit -&gt; runtime.mpreinit (7)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;665.5&#34; y=&#34;-931.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 7&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N35&amp;#45;&amp;gt;N1 --&gt;
&lt;g id=&#34;edge35&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N35-&amp;gt;N1&lt;/title&gt;
&lt;g id=&#34;a_edge35&#34;&gt;&lt;a xlink:title=&#34;runtime.mpreinit -&gt; runtime.malg (7)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b27b4a&#34; d=&#34;M628.6061,-873.5055C621.5666,-862.0792 612.152,-846.7974 602.9766,-831.904&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b27b4a&#34; stroke=&#34;#b27b4a&#34; points=&#34;605.8468,-829.8901 597.6217,-823.212 599.887,-833.5618 605.8468,-829.8901&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge35-label&#34;&gt;&lt;a xlink:title=&#34;runtime.mpreinit -&gt; runtime.malg (7)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;623.5&#34; y=&#34;-844.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 7&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N36&amp;#45;&amp;gt;N5 --&gt;
&lt;g id=&#34;edge50&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N36-&amp;gt;N5&lt;/title&gt;
&lt;g id=&#34;a_edge50&#34;&gt;&lt;a xlink:title=&#34;runtime.mstart1 -&gt; runtime.schedule (3)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b2a085&#34; d=&#34;M544.5803,-1835.9265C560.6505,-1816.0062 586.6421,-1783.7874 604.9272,-1761.1215&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b2a085&#34; stroke=&#34;#b2a085&#34; points=&#34;607.7277,-1763.2243 611.2825,-1753.2436 602.2795,-1758.8292 607.7277,-1763.2243&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge50-label&#34;&gt;&lt;a xlink:title=&#34;runtime.mstart1 -&gt; runtime.schedule (3)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;589.5&#34; y=&#34;-1790.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 3&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N37&amp;#45;&amp;gt;N18 --&gt;
&lt;g id=&#34;edge28&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N37-&amp;gt;N18&lt;/title&gt;
&lt;g id=&#34;a_edge28&#34;&gt;&lt;a xlink:title=&#34;runtime.newproc.func1 -&gt; runtime.newproc1 (11)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b2500e&#34; d=&#34;M480,-1604.1184C480,-1590.4086 480,-1572.7427 480,-1558.0969&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b2500e&#34; stroke=&#34;#b2500e&#34; points=&#34;483.5001,-1558.066 480,-1548.066 476.5001,-1558.066 483.5001,-1558.066&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge28-label&#34;&gt;&lt;a xlink:title=&#34;runtime.newproc.func1 -&gt; runtime.newproc1 (11)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;489&#34; y=&#34;-1573.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 11&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N38&amp;#45;&amp;gt;N5 --&gt;
&lt;g id=&#34;edge23&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N38-&amp;gt;N5&lt;/title&gt;
&lt;g id=&#34;a_edge23&#34;&gt;&lt;a xlink:title=&#34;runtime.park_m -&gt; runtime.schedule (15)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b23c00&#34; stroke-width=&#34;2&#34; d=&#34;M626,-1835.9265C626,-1816.7051 626,-1786.0332 626,-1763.5417&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b23c00&#34; stroke=&#34;#b23c00&#34; stroke-width=&#34;2&#34; points=&#34;629.5001,-1763.2436 626,-1753.2436 622.5001,-1763.2437 629.5001,-1763.2436&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge23-label&#34;&gt;&lt;a xlink:title=&#34;runtime.park_m -&gt; runtime.schedule (15)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;635&#34; y=&#34;-1790.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 15&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N43 --&gt;
&lt;g id=&#34;node43&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N43&lt;/title&gt;
&lt;g id=&#34;a_node43&#34;&gt;&lt;a xlink:title=&#34;runtime.wakep (15)&#34;&gt;
&lt;polygon fill=&#34;#edddd5&#34; stroke=&#34;#b23c00&#34; points=&#34;661.5,-1548 590.5,-1548 590.5,-1512 661.5,-1512 661.5,-1548&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;626&#34; y=&#34;-1537.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;runtime&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;626&#34; y=&#34;-1528.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;wakep&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;626&#34; y=&#34;-1519.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 15 (25.00%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N39&amp;#45;&amp;gt;N43 --&gt;
&lt;g id=&#34;edge24&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N39-&amp;gt;N43&lt;/title&gt;
&lt;g id=&#34;a_edge24&#34;&gt;&lt;a xlink:title=&#34;runtime.resetspinning -&gt; runtime.wakep (15)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b23c00&#34; stroke-width=&#34;2&#34; d=&#34;M626,-1608.3491C626,-1594.1965 626,-1574.2915 626,-1558.0866&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b23c00&#34; stroke=&#34;#b23c00&#34; stroke-width=&#34;2&#34; points=&#34;629.5001,-1558.0695 626,-1548.0695 622.5001,-1558.0696 629.5001,-1558.0695&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge24-label&#34;&gt;&lt;a xlink:title=&#34;runtime.resetspinning -&gt; runtime.wakep (15)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;635&#34; y=&#34;-1573.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 15&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N40&amp;#45;&amp;gt;N14 --&gt;
&lt;g id=&#34;edge68&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N40-&amp;gt;N14&lt;/title&gt;
&lt;g id=&#34;a_edge68&#34;&gt;&lt;a xlink:title=&#34;runtime.selectgo -&gt; runtime.acquireSudog (1)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b2aea3&#34; d=&#34;M956.1731,-1511.9487C952.6995,-1477.6265 945.0869,-1402.4059 940.5687,-1357.7626&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b2aea3&#34; stroke=&#34;#b2aea3&#34; points=&#34;944.0347,-1357.2488 939.5455,-1347.652 937.0703,-1357.9537 944.0347,-1357.2488&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge68-label&#34;&gt;&lt;a xlink:title=&#34;runtime.selectgo -&gt; runtime.acquireSudog (1)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;955.5&#34; y=&#34;-1429.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 1&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N41&amp;#45;&amp;gt;N9 --&gt;
&lt;g id=&#34;edge52&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N41-&amp;gt;N9&lt;/title&gt;
&lt;g id=&#34;a_edge52&#34;&gt;&lt;a xlink:title=&#34;runtime.startTemplateThread -&gt; runtime.newm (3)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b2a085&#34; d=&#34;M736.4981,-1415.4189C714.4449,-1396.8741 679.9846,-1367.8961 655.414,-1347.2345&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b2a085&#34; stroke=&#34;#b2a085&#34; points=&#34;657.3989,-1344.3306 647.4927,-1340.5734 652.8937,-1349.6882 657.3989,-1344.3306&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge52-label&#34;&gt;&lt;a xlink:title=&#34;runtime.startTemplateThread -&gt; runtime.newm (3)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;713.5&#34; y=&#34;-1380.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 3&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N42&amp;#45;&amp;gt;N33 --&gt;
&lt;g id=&#34;edge53&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N42-&amp;gt;N33&lt;/title&gt;
&lt;g id=&#34;a_edge53&#34;&gt;&lt;a xlink:title=&#34;runtime.stoplockedm -&gt; runtime.handoffp (3)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b2a085&#34; d=&#34;M711,-1608.3491C711,-1594.1965 711,-1574.2915 711,-1558.0866&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b2a085&#34; stroke=&#34;#b2a085&#34; points=&#34;714.5001,-1558.0695 711,-1548.0695 707.5001,-1558.0696 714.5001,-1558.0695&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge53-label&#34;&gt;&lt;a xlink:title=&#34;runtime.stoplockedm -&gt; runtime.handoffp (3)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;716.5&#34; y=&#34;-1573.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 3&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N43&amp;#45;&amp;gt;N11 --&gt;
&lt;g id=&#34;edge26&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N43-&amp;gt;N11&lt;/title&gt;
&lt;g id=&#34;a_edge26&#34;&gt;&lt;a xlink:title=&#34;runtime.wakep -&gt; runtime.startm (15)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b23c00&#34; stroke-width=&#34;2&#34; d=&#34;M626,-1511.8491C626,-1497.6965 626,-1477.7915 626,-1461.5866&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b23c00&#34; stroke=&#34;#b23c00&#34; stroke-width=&#34;2&#34; points=&#34;629.5001,-1461.5695 626,-1451.5695 622.5001,-1461.5696 629.5001,-1461.5695&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge26-label&#34;&gt;&lt;a xlink:title=&#34;runtime.wakep -&gt; runtime.startm (15)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;635&#34; y=&#34;-1478.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 15&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N44 --&gt;
&lt;g id=&#34;node44&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N44&lt;/title&gt;
&lt;g id=&#34;a_node44&#34;&gt;&lt;a xlink:title=&#34;sync.(*Once).Do (3)&#34;&gt;
&lt;polygon fill=&#34;#edeae7&#34; stroke=&#34;#b2a085&#34; points=&#34;1309.5,-591 1246.5,-591 1246.5,-547 1309.5,-547 1309.5,-591&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1278&#34; y=&#34;-580.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;sync&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1278&#34; y=&#34;-571.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;(*Once)&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1278&#34; y=&#34;-562.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;Do&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1278&#34; y=&#34;-553.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 3 (5.00%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N49 --&gt;
&lt;g id=&#34;node49&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N49&lt;/title&gt;
&lt;g id=&#34;a_node49&#34;&gt;&lt;a xlink:title=&#34;time.initLocal (3)&#34;&gt;
&lt;polygon fill=&#34;#edeae7&#34; stroke=&#34;#b2a085&#34; points=&#34;1309.5,-496 1246.5,-496 1246.5,-460 1309.5,-460 1309.5,-496&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1278&#34; y=&#34;-485.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;time&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1278&#34; y=&#34;-476.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;initLocal&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1278&#34; y=&#34;-467.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 3 (5.00%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N44&amp;#45;&amp;gt;N49 --&gt;
&lt;g id=&#34;edge54&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N44-&amp;gt;N49&lt;/title&gt;
&lt;g id=&#34;a_edge54&#34;&gt;&lt;a xlink:title=&#34;sync.(*Once).Do -&gt; time.initLocal (3)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b2a085&#34; d=&#34;M1278,-546.9714C1278,-534.8075 1278,-519.5615 1278,-506.499&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b2a085&#34; stroke=&#34;#b2a085&#34; points=&#34;1281.5001,-506.1556 1278,-496.1556 1274.5001,-506.1556 1281.5001,-506.1556&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge54-label&#34;&gt;&lt;a xlink:title=&#34;sync.(*Once).Do -&gt; time.initLocal (3)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1283.5&#34; y=&#34;-517.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 3&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N45 --&gt;
&lt;g id=&#34;node45&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N45&lt;/title&gt;
&lt;g id=&#34;a_node45&#34;&gt;&lt;a xlink:title=&#34;time.(*Location).get (3)&#34;&gt;
&lt;polygon fill=&#34;#edeae7&#34; stroke=&#34;#b2a085&#34; points=&#34;1309.5,-686 1246.5,-686 1246.5,-642 1309.5,-642 1309.5,-686&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1278&#34; y=&#34;-675.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;time&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1278&#34; y=&#34;-666.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;(*Location)&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1278&#34; y=&#34;-657.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;get&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1278&#34; y=&#34;-648.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 3 (5.00%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N45&amp;#45;&amp;gt;N44 --&gt;
&lt;g id=&#34;edge55&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N45-&amp;gt;N44&lt;/title&gt;
&lt;g id=&#34;a_edge55&#34;&gt;&lt;a xlink:title=&#34;time.(*Location).get -&gt; sync.(*Once).Do (3)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b2a085&#34; d=&#34;M1278,-641.9663C1278,-629.9427 1278,-614.8283 1278,-601.4785&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b2a085&#34; stroke=&#34;#b2a085&#34; points=&#34;1281.5001,-601.2433 1278,-591.2433 1274.5001,-601.2433 1281.5001,-601.2433&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge55-label&#34;&gt;&lt;a xlink:title=&#34;time.(*Location).get -&gt; sync.(*Once).Do (3)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1283.5&#34; y=&#34;-612.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 3&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N48 --&gt;
&lt;g id=&#34;node48&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N48&lt;/title&gt;
&lt;g id=&#34;a_node48&#34;&gt;&lt;a xlink:title=&#34;time.Time.date (3)&#34;&gt;
&lt;polygon fill=&#34;#edeae7&#34; stroke=&#34;#b2a085&#34; points=&#34;1309.5,-910 1246.5,-910 1246.5,-874 1309.5,-874 1309.5,-910&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1278&#34; y=&#34;-899.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;Time&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1278&#34; y=&#34;-890.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;date&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1278&#34; y=&#34;-881.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 3 (5.00%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N46&amp;#45;&amp;gt;N48 --&gt;
&lt;g id=&#34;edge56&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N46-&amp;gt;N48&lt;/title&gt;
&lt;g id=&#34;a_edge56&#34;&gt;&lt;a xlink:title=&#34;time.Time.Date -&gt; time.Time.date (3)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b2a085&#34; d=&#34;M1278,-960.9714C1278,-948.8075 1278,-933.5615 1278,-920.499&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b2a085&#34; stroke=&#34;#b2a085&#34; points=&#34;1281.5001,-920.1556 1278,-910.1556 1274.5001,-920.1556 1281.5001,-920.1556&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge56-label&#34;&gt;&lt;a xlink:title=&#34;time.Time.Date -&gt; time.Time.date (3)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1283.5&#34; y=&#34;-931.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 3&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N47 --&gt;
&lt;g id=&#34;node47&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N47&lt;/title&gt;
&lt;g id=&#34;a_node47&#34;&gt;&lt;a xlink:title=&#34;time.Time.abs (3)&#34;&gt;
&lt;polygon fill=&#34;#edeae7&#34; stroke=&#34;#b2a085&#34; points=&#34;1309.5,-798 1246.5,-798 1246.5,-762 1309.5,-762 1309.5,-798&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1278&#34; y=&#34;-787.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;Time&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1278&#34; y=&#34;-778.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;abs&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1278&#34; y=&#34;-769.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 3 (5.00%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N47&amp;#45;&amp;gt;N45 --&gt;
&lt;g id=&#34;edge57&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N47-&amp;gt;N45&lt;/title&gt;
&lt;g id=&#34;a_edge57&#34;&gt;&lt;a xlink:title=&#34;time.Time.abs -&gt; time.(*Location).get (3)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b2a085&#34; d=&#34;M1278,-761.875C1278,-744.4315 1278,-717.6614 1278,-696.5246&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b2a085&#34; stroke=&#34;#b2a085&#34; points=&#34;1281.5001,-696.3659 1278,-686.366 1274.5001,-696.366 1281.5001,-696.3659&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge57-label&#34;&gt;&lt;a xlink:title=&#34;time.Time.abs -&gt; time.(*Location).get (3)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1283.5&#34; y=&#34;-707.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 3&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N48&amp;#45;&amp;gt;N47 --&gt;
&lt;g id=&#34;edge58&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N48-&amp;gt;N47&lt;/title&gt;
&lt;g id=&#34;a_edge58&#34;&gt;&lt;a xlink:title=&#34;time.Time.date -&gt; time.Time.abs (3)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b2a085&#34; d=&#34;M1278,-873.5055C1278,-855.7282 1278,-828.6184 1278,-808.1587&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b2a085&#34; stroke=&#34;#b2a085&#34; points=&#34;1281.5001,-808.1503 1278,-798.1504 1274.5001,-808.1504 1281.5001,-808.1503&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge58-label&#34;&gt;&lt;a xlink:title=&#34;time.Time.date -&gt; time.Time.abs (3)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1283.5&#34; y=&#34;-844.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 3&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N50 --&gt;
&lt;g id=&#34;node50&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N50&lt;/title&gt;
&lt;g id=&#34;a_node50&#34;&gt;&lt;a xlink:title=&#34;time.loadLocation (3)&#34;&gt;
&lt;polygon fill=&#34;#edeae7&#34; stroke=&#34;#b2a085&#34; points=&#34;1309.5,-409 1246.5,-409 1246.5,-373 1309.5,-373 1309.5,-409&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1278&#34; y=&#34;-398.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;time&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1278&#34; y=&#34;-389.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;loadLocation&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1278&#34; y=&#34;-380.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 3 (5.00%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N49&amp;#45;&amp;gt;N50 --&gt;
&lt;g id=&#34;edge59&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N49-&amp;gt;N50&lt;/title&gt;
&lt;g id=&#34;a_edge59&#34;&gt;&lt;a xlink:title=&#34;time.initLocal -&gt; time.loadLocation (3)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b2a085&#34; d=&#34;M1278,-459.9735C1278,-448.1918 1278,-432.5607 1278,-419.1581&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b2a085&#34; stroke=&#34;#b2a085&#34; points=&#34;1281.5001,-419.0033 1278,-409.0034 1274.5001,-419.0034 1281.5001,-419.0033&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge59-label&#34;&gt;&lt;a xlink:title=&#34;time.initLocal -&gt; time.loadLocation (3)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1283.5&#34; y=&#34;-430.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 3&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N50&amp;#45;&amp;gt;N19 --&gt;
&lt;g id=&#34;edge60&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N50-&amp;gt;N19&lt;/title&gt;
&lt;g id=&#34;a_edge60&#34;&gt;&lt;a xlink:title=&#34;time.loadLocation -&gt; time.LoadLocationFromTZData (3)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b2a085&#34; d=&#34;M1278,-372.9432C1278,-361.6199 1278,-346.5228 1278,-332.3139&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b2a085&#34; stroke=&#34;#b2a085&#34; points=&#34;1281.5001,-332.1913 1278,-322.1913 1274.5001,-332.1913 1281.5001,-332.1913&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge60-label&#34;&gt;&lt;a xlink:title=&#34;time.loadLocation -&gt; time.LoadLocationFromTZData (3)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;1283.5&#34; y=&#34;-343.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 3&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;/g&gt;&lt;/svg&gt;
&lt;/div&gt;

&lt;h4 id=&#34;3-5-6-블록-프로파일링&#34;&gt;3.5.6 블록 프로파일링&lt;/h4&gt;

&lt;p&gt;마지막으로 볼 프로파일 유형은 블록 프로파일 링입니다. &lt;code&gt;net/http&lt;/code&gt; 패키지의 &lt;code&gt;ClientServer&lt;/code&gt; 벤치 마크를 사용합니다&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;% go &lt;span class=&#34;nb&#34;&gt;test&lt;/span&gt; -run&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;XXX -bench&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;ClientServer$ -blockprofile&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;/tmp/block.p net/http
% go tool pprof -http&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;:8080 /tmp/block.p&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div&gt;
&lt;svg xmlns=&#34;http://www.w3.org/2000/svg&#34; xmlns:xlink=&#34;http://www.w3.org/1999/xlink&#34; width=&#34;100%px&#34; height=&#34;100%px&#34;&gt;
&lt;script type=&#34;text/ecmascript&#34;&gt;
/**
 *  SVGPan library 1.2.2
 * ======================
 *
 * Given an unique existing element with id &#34;viewport&#34; (or when missing, the
 * first g-element), including the library into any SVG adds the following
 * capabilities:
 *
 *  - Mouse panning
 *  - Mouse zooming (using the wheel)
 *  - Object dragging
 *
 * You can configure the behaviour of the pan/zoom/drag with the variables
 * listed in the CONFIGURATION section of this file.
 *
 * Known issues:
 *
 *  - Zooming (while panning) on Safari has still some issues
 *
 * Releases:
 *
 * 1.2.2, Tue Aug 30 17:21:56 CEST 2011, Andrea Leofreddi
 *  - Fixed viewBox on root tag (#7)
 *  - Improved zoom speed (#2)
 *
 * 1.2.1, Mon Jul  4 00:33:18 CEST 2011, Andrea Leofreddi
 *  - Fixed a regression with mouse wheel (now working on Firefox 5)
 *  - Working with viewBox attribute (#4)
 *  - Added &#34;use strict;&#34; and fixed resulting warnings (#5)
 *  - Added configuration variables, dragging is disabled by default (#3)
 *
 * 1.2, Sat Mar 20 08:42:50 GMT 2010, Zeng Xiaohui
 *  Fixed a bug with browser mouse handler interaction
 *
 * 1.1, Wed Feb  3 17:39:33 GMT 2010, Zeng Xiaohui
 *  Updated the zoom code to support the mouse wheel on Safari/Chrome
 *
 * 1.0, Andrea Leofreddi
 *  First release
 *
 * This code is licensed under the following BSD license:
 *
 * Copyright 2009-2017 Andrea Leofreddi &amp;lt;a.leofreddi@vleo.net&amp;gt;. All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification, are
 * permitted provided that the following conditions are met:
 *
 *    1. Redistributions of source code must retain the above copyright
 *       notice, this list of conditions and the following disclaimer.
 *    2. Redistributions in binary form must reproduce the above copyright
 *       notice, this list of conditions and the following disclaimer in the
 *       documentation and/or other materials provided with the distribution.
 *    3. Neither the name of the copyright holder nor the names of its
 *       contributors may be used to endorse or promote products derived from
 *       this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY COPYRIGHT HOLDERS AND CONTRIBUTORS &#39;&#39;AS IS&#39;&#39; AND ANY EXPRESS
 * OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY
 * AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL COPYRIGHT HOLDERS OR
 * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
 * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
 * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF
 * ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * The views and conclusions contained in the software and documentation are those of the
 * authors and should not be interpreted as representing official policies, either expressed
 * or implied, of Andrea Leofreddi.
 */

&#34;use strict&#34;;

/// CONFIGURATION
/// ====&amp;gt;

var enablePan = 1; // 1 or 0: enable or disable panning (default enabled)
var enableZoom = 1; // 1 or 0: enable or disable zooming (default enabled)
var enableDrag = 0; // 1 or 0: enable or disable dragging (default disabled)
var zoomScale = 0.2; // Zoom sensitivity

/// &amp;lt;====
/// END OF CONFIGURATION

var root = document.documentElement;

var state = &#39;none&#39;, svgRoot = null, stateTarget, stateOrigin, stateTf;

setupHandlers(root);

/**
 * Register handlers
 */
function setupHandlers(root){
    setAttributes(root, {
        &#34;onmouseup&#34; : &#34;handleMouseUp(evt)&#34;,
        &#34;onmousedown&#34; : &#34;handleMouseDown(evt)&#34;,
        &#34;onmousemove&#34; : &#34;handleMouseMove(evt)&#34;,
        //&#34;onmouseout&#34; : &#34;handleMouseUp(evt)&#34;, // Decomment this to stop the pan functionality when dragging out of the SVG element
    });

    if(navigator.userAgent.toLowerCase().indexOf(&#39;webkit&#39;) &amp;gt;= 0)
        window.addEventListener(&#39;mousewheel&#39;, handleMouseWheel, false); // Chrome/Safari
    else
        window.addEventListener(&#39;DOMMouseScroll&#39;, handleMouseWheel, false); // Others
}

/**
 * Retrieves the root element for SVG manipulation. The element is then cached into the svgRoot global variable.
 */
function getRoot(root) {
    if(svgRoot == null) {
        var r = root.getElementById(&#34;viewport&#34;) ? root.getElementById(&#34;viewport&#34;) : root.documentElement, t = r;

        while(t != root) {
            if(t.getAttribute(&#34;viewBox&#34;)) {
                setCTM(r, t.getCTM());

                t.removeAttribute(&#34;viewBox&#34;);
            }

            t = t.parentNode;
        }

        svgRoot = r;
    }

    return svgRoot;
}

/**
 * Instance an SVGPoint object with given event coordinates.
 */
function getEventPoint(evt) {
    var p = root.createSVGPoint();

    p.x = evt.clientX;
    p.y = evt.clientY;

    return p;
}

/**
 * Sets the current transform matrix of an element.
 */
function setCTM(element, matrix) {
    var s = &#34;matrix(&#34; + matrix.a + &#34;,&#34; + matrix.b + &#34;,&#34; + matrix.c + &#34;,&#34; + matrix.d + &#34;,&#34; + matrix.e + &#34;,&#34; + matrix.f + &#34;)&#34;;

    element.setAttribute(&#34;transform&#34;, s);
}

/**
 * Dumps a matrix to a string (useful for debug).
 */
function dumpMatrix(matrix) {
    var s = &#34;[ &#34; + matrix.a + &#34;, &#34; + matrix.c + &#34;, &#34; + matrix.e + &#34;\n  &#34; + matrix.b + &#34;, &#34; + matrix.d + &#34;, &#34; + matrix.f + &#34;\n  0, 0, 1 ]&#34;;

    return s;
}

/**
 * Sets attributes of an element.
 */
function setAttributes(element, attributes){
    for (var i in attributes)
        element.setAttributeNS(null, i, attributes[i]);
}

/**
 * Handle mouse wheel event.
 */
function handleMouseWheel(evt) {
    if(!enableZoom)
        return;

    if(evt.preventDefault)
        evt.preventDefault();

    evt.returnValue = false;

    var svgDoc = evt.target.ownerDocument;

    var delta;

    if(evt.wheelDelta)
        delta = evt.wheelDelta / 360; // Chrome/Safari
    else
        delta = evt.detail / -9; // Mozilla

    var z = Math.pow(1 + zoomScale, delta);

    var g = getRoot(svgDoc);

    var p = getEventPoint(evt);

    p = p.matrixTransform(g.getCTM().inverse());

    // Compute new scale matrix in current mouse position
    var k = root.createSVGMatrix().translate(p.x, p.y).scale(z).translate(-p.x, -p.y);

        setCTM(g, g.getCTM().multiply(k));

    if(typeof(stateTf) == &#34;undefined&#34;)
        stateTf = g.getCTM().inverse();

    stateTf = stateTf.multiply(k.inverse());
}

/**
 * Handle mouse move event.
 */
function handleMouseMove(evt) {
    if(evt.preventDefault)
        evt.preventDefault();

    evt.returnValue = false;

    var svgDoc = evt.target.ownerDocument;

    var g = getRoot(svgDoc);

    if(state == &#39;pan&#39; &amp;amp;&amp;amp; enablePan) {
        // Pan mode
        var p = getEventPoint(evt).matrixTransform(stateTf);

        setCTM(g, stateTf.inverse().translate(p.x - stateOrigin.x, p.y - stateOrigin.y));
    } else if(state == &#39;drag&#39; &amp;amp;&amp;amp; enableDrag) {
        // Drag mode
        var p = getEventPoint(evt).matrixTransform(g.getCTM().inverse());

        setCTM(stateTarget, root.createSVGMatrix().translate(p.x - stateOrigin.x, p.y - stateOrigin.y).multiply(g.getCTM().inverse()).multiply(stateTarget.getCTM()));

        stateOrigin = p;
    }
}

/**
 * Handle click event.
 */
function handleMouseDown(evt) {
    if(evt.preventDefault)
        evt.preventDefault();

    evt.returnValue = false;

    var svgDoc = evt.target.ownerDocument;

    var g = getRoot(svgDoc);

    if(
        evt.target.tagName == &#34;svg&#34;
        || !enableDrag // Pan anyway when drag is disabled and the user clicked on an element
    ) {
        // Pan mode
        state = &#39;pan&#39;;

        stateTf = g.getCTM().inverse();

        stateOrigin = getEventPoint(evt).matrixTransform(stateTf);
    } else {
        // Drag mode
        state = &#39;drag&#39;;

        stateTarget = evt.target;

        stateTf = g.getCTM().inverse();

        stateOrigin = getEventPoint(evt).matrixTransform(stateTf);
    }
}

/**
 * Handle mouse button release event.
 */
function handleMouseUp(evt) {
    if(evt.preventDefault)
        evt.preventDefault();

    evt.returnValue = false;

    var svgDoc = evt.target.ownerDocument;

    if(state == &#39;pan&#39; || state == &#39;drag&#39;) {
        // Quit pan mode
        state = &#39;&#39;;
    }
}
&lt;/script&gt;&lt;g id=&#34;viewport&#34; transform=&#34;scale(0.5,0.5) translate(0,0)&#34;&gt;&lt;g id=&#34;graph0&#34; class=&#34;graph&#34; transform=&#34;scale(1 1) rotate(0) translate(4 1715)&#34;&gt;
&lt;title&gt;unnamed&lt;/title&gt;
&lt;polygon fill=&#34;#ffffff&#34; stroke=&#34;transparent&#34; points=&#34;-4,4 -4,-1715 606,-1715 606,4 -4,4&#34;&gt;&lt;/polygon&gt;
&lt;g id=&#34;clust1&#34; class=&#34;cluster&#34;&gt;
&lt;title&gt;cluster_L&lt;/title&gt;
&lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;18,-1607 18,-1703 418,-1703 418,-1607 18,-1607&#34;&gt;&lt;/polygon&gt;
&lt;/g&gt;
&lt;!-- Type: delay --&gt;
&lt;g id=&#34;node1&#34; class=&#34;node&#34;&gt;
&lt;title&gt;Type: delay&lt;/title&gt;
&lt;polygon fill=&#34;#f8f8f8&#34; stroke=&#34;#000000&#34; points=&#34;409.5,-1695 26.5,-1695 26.5,-1615 409.5,-1615 409.5,-1695&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;start&#34; x=&#34;34.5&#34; y=&#34;-1678.2&#34; font-family=&#34;Times,serif&#34; font-size=&#34;16.00&#34; fill=&#34;#000000&#34;&gt;Type: delay&lt;/text&gt;
&lt;text text-anchor=&#34;start&#34; x=&#34;34.5&#34; y=&#34;-1660.2&#34; font-family=&#34;Times,serif&#34; font-size=&#34;16.00&#34; fill=&#34;#000000&#34;&gt;Time: Mar 23, 2019 at 6:05pm (CET)&lt;/text&gt;
&lt;text text-anchor=&#34;start&#34; x=&#34;34.5&#34; y=&#34;-1642.2&#34; font-family=&#34;Times,serif&#34; font-size=&#34;16.00&#34; fill=&#34;#000000&#34;&gt;Showing nodes accounting for 7.82s, 100% of 7.82s total&lt;/text&gt;
&lt;text text-anchor=&#34;start&#34; x=&#34;34.5&#34; y=&#34;-1624.2&#34; font-family=&#34;Times,serif&#34; font-size=&#34;16.00&#34; fill=&#34;#000000&#34;&gt;Dropped 39 nodes (cum &amp;lt;= 0.04s)&lt;/text&gt;
&lt;/g&gt;
&lt;!-- N1 --&gt;
&lt;g id=&#34;node1&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N1&lt;/title&gt;
&lt;g id=&#34;a_node1&#34;&gt;&lt;a xlink:title=&#34;runtime.selectgo (4.55s)&#34;&gt;
&lt;polygon fill=&#34;#edd8d5&#34; stroke=&#34;#b21a00&#34; points=&#34;164,-86 0,-86 0,0 164,0 164,-86&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;82&#34; y=&#34;-62.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;24.00&#34; fill=&#34;#000000&#34;&gt;runtime&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;82&#34; y=&#34;-36.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;24.00&#34; fill=&#34;#000000&#34;&gt;selectgo&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;82&#34; y=&#34;-10.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;24.00&#34; fill=&#34;#000000&#34;&gt;4.55s (58.18%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N2 --&gt;
&lt;g id=&#34;node2&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N2&lt;/title&gt;
&lt;g id=&#34;a_node2&#34;&gt;&lt;a xlink:title=&#34;testing.(*B).runN (5.06s)&#34;&gt;
&lt;polygon fill=&#34;#edd8d5&#34; stroke=&#34;#b21500&#34; points=&#34;508,-1176 428,-1176 428,-1132 508,-1132 508,-1176&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;468&#34; y=&#34;-1165.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;testing&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;468&#34; y=&#34;-1156.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;(*B)&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;468&#34; y=&#34;-1147.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;runN&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;468&#34; y=&#34;-1138.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 5.06s (64.63%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N7 --&gt;
&lt;g id=&#34;node7&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N7&lt;/title&gt;
&lt;g id=&#34;a_node7&#34;&gt;&lt;a xlink:title=&#34;net/http_test.BenchmarkClientServer (1.94s)&#34;&gt;
&lt;polygon fill=&#34;#edddd5&#34; stroke=&#34;#b23c00&#34; points=&#34;410,-1077 316,-1077 316,-1041 410,-1041 410,-1077&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;363&#34; y=&#34;-1066.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;http_test&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;363&#34; y=&#34;-1057.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;BenchmarkClientServer&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;363&#34; y=&#34;-1048.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 1.94s (24.83%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N2&amp;#45;&amp;gt;N7 --&gt;
&lt;g id=&#34;edge13&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N2-&amp;gt;N7&lt;/title&gt;
&lt;g id=&#34;a_edge13&#34;&gt;&lt;a xlink:title=&#34;testing.(*B).runN -&gt; net/http_test.BenchmarkClientServer (1.94s)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b23c00&#34; stroke-width=&#34;2&#34; d=&#34;M443.647,-1131.9663C427.8199,-1117.6466 407.1473,-1098.9428 390.6948,-1084.0572&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b23c00&#34; stroke=&#34;#b23c00&#34; stroke-width=&#34;2&#34; points=&#34;392.7604,-1081.2062 382.9968,-1077.0924 388.064,-1086.3969 392.7604,-1081.2062&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge13-label&#34;&gt;&lt;a xlink:title=&#34;testing.(*B).runN -&gt; net/http_test.BenchmarkClientServer (1.94s)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;439&#34; y=&#34;-1102.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 1.94s&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N36 --&gt;
&lt;g id=&#34;node36&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N36&lt;/title&gt;
&lt;g id=&#34;a_node36&#34;&gt;&lt;a xlink:title=&#34;testing.runBenchmarks.func1 (3.11s)&#34;&gt;
&lt;polygon fill=&#34;#eddbd5&#34; stroke=&#34;#b22b00&#34; points=&#34;508,-1081 428,-1081 428,-1037 508,-1037 508,-1081&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;468&#34; y=&#34;-1070.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;testing&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;468&#34; y=&#34;-1061.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;runBenchmarks&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;468&#34; y=&#34;-1052.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;func1&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;468&#34; y=&#34;-1043.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 3.11s (39.80%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N2&amp;#45;&amp;gt;N36 --&gt;
&lt;g id=&#34;edge4&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N2-&amp;gt;N36&lt;/title&gt;
&lt;g id=&#34;a_edge4&#34;&gt;&lt;a xlink:title=&#34;testing.(*B).runN -&gt; testing.runBenchmarks.func1 (3.11s)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b22b00&#34; stroke-width=&#34;2&#34; d=&#34;M468,-1131.9663C468,-1119.9427 468,-1104.8283 468,-1091.4785&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b22b00&#34; stroke=&#34;#b22b00&#34; stroke-width=&#34;2&#34; points=&#34;471.5001,-1091.2433 468,-1081.2433 464.5001,-1091.2433 471.5001,-1091.2433&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge4-label&#34;&gt;&lt;a xlink:title=&#34;testing.(*B).runN -&gt; testing.runBenchmarks.func1 (3.11s)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;485&#34; y=&#34;-1102.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 3.11s&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N3 --&gt;
&lt;g id=&#34;node3&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N3&lt;/title&gt;
&lt;g id=&#34;a_node3&#34;&gt;&lt;a xlink:title=&#34;runtime.chanrecv1 (3.23s)&#34;&gt;
&lt;polygon fill=&#34;#eddad5&#34; stroke=&#34;#b22900&#34; points=&#34;544,-407 392,-407 392,-327 544,-327 544,-407&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;468&#34; y=&#34;-385.4&#34; font-family=&#34;Times,serif&#34; font-size=&#34;22.00&#34; fill=&#34;#000000&#34;&gt;runtime&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;468&#34; y=&#34;-361.4&#34; font-family=&#34;Times,serif&#34; font-size=&#34;22.00&#34; fill=&#34;#000000&#34;&gt;chanrecv1&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;468&#34; y=&#34;-337.4&#34; font-family=&#34;Times,serif&#34; font-size=&#34;22.00&#34; fill=&#34;#000000&#34;&gt;3.23s (41.25%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N4 --&gt;
&lt;g id=&#34;node4&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N4&lt;/title&gt;
&lt;g id=&#34;a_node4&#34;&gt;&lt;a xlink:title=&#34;runtime.main (3.11s)&#34;&gt;
&lt;polygon fill=&#34;#eddbd5&#34; stroke=&#34;#b22b00&#34; points=&#34;508,-1673 428,-1673 428,-1637 508,-1637 508,-1673&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;468&#34; y=&#34;-1662.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;runtime&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;468&#34; y=&#34;-1653.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;main&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;468&#34; y=&#34;-1644.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 3.11s (39.80%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N16 --&gt;
&lt;g id=&#34;node16&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N16&lt;/title&gt;
&lt;g id=&#34;a_node16&#34;&gt;&lt;a xlink:title=&#34;main.main (3.11s)&#34;&gt;
&lt;polygon fill=&#34;#eddbd5&#34; stroke=&#34;#b22b00&#34; points=&#34;508,-1560 428,-1560 428,-1524 508,-1524 508,-1560&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;468&#34; y=&#34;-1549.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;main&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;468&#34; y=&#34;-1540.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;main&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;468&#34; y=&#34;-1531.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 3.11s (39.80%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N4&amp;#45;&amp;gt;N16 --&gt;
&lt;g id=&#34;edge3&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N4-&amp;gt;N16&lt;/title&gt;
&lt;g id=&#34;a_edge3&#34;&gt;&lt;a xlink:title=&#34;runtime.main -&gt; main.main (3.11s)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b22b00&#34; stroke-width=&#34;2&#34; d=&#34;M468,-1636.8446C468,-1618.8877 468,-1591.1466 468,-1570.2969&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b22b00&#34; stroke=&#34;#b22b00&#34; stroke-width=&#34;2&#34; points=&#34;471.5001,-1570.1103 468,-1560.1103 464.5001,-1570.1104 471.5001,-1570.1103&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge3-label&#34;&gt;&lt;a xlink:title=&#34;runtime.main -&gt; main.main (3.11s)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;485&#34; y=&#34;-1585.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 3.11s&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N5 --&gt;
&lt;g id=&#34;node5&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N5&lt;/title&gt;
&lt;g id=&#34;a_node5&#34;&gt;&lt;a xlink:title=&#34;net/http.(*persistConn).writeLoop (2.54s)&#34;&gt;
&lt;polygon fill=&#34;#eddcd5&#34; stroke=&#34;#b23300&#34; points=&#34;122,-181 42,-181 42,-137 122,-137 122,-181&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;82&#34; y=&#34;-170.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;http&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;82&#34; y=&#34;-161.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;(*persistConn)&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;82&#34; y=&#34;-152.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;writeLoop&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;82&#34; y=&#34;-143.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 2.54s (32.44%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N5&amp;#45;&amp;gt;N1 --&gt;
&lt;g id=&#34;edge12&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N5-&amp;gt;N1&lt;/title&gt;
&lt;g id=&#34;a_edge12&#34;&gt;&lt;a xlink:title=&#34;net/http.(*persistConn).writeLoop -&gt; runtime.selectgo (2.54s)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b23300&#34; stroke-width=&#34;2&#34; d=&#34;M82,-136.9082C82,-125.3769 82,-110.7235 82,-96.4411&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b23300&#34; stroke=&#34;#b23300&#34; stroke-width=&#34;2&#34; points=&#34;85.5001,-96.1567 82,-86.1568 78.5001,-96.1568 85.5001,-96.1567&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge12-label&#34;&gt;&lt;a xlink:title=&#34;net/http.(*persistConn).writeLoop -&gt; runtime.selectgo (2.54s)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;99&#34; y=&#34;-107.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 2.54s&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N6 --&gt;
&lt;g id=&#34;node6&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N6&lt;/title&gt;
&lt;g id=&#34;a_node6&#34;&gt;&lt;a xlink:title=&#34;testing.(*B).launch (1.94s)&#34;&gt;
&lt;polygon fill=&#34;#edddd5&#34; stroke=&#34;#b23c00&#34; points=&#34;410,-1271 330,-1271 330,-1227 410,-1227 410,-1271&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;370&#34; y=&#34;-1260.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;testing&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;370&#34; y=&#34;-1251.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;(*B)&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;370&#34; y=&#34;-1242.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;launch&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;370&#34; y=&#34;-1233.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 1.94s (24.82%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N6&amp;#45;&amp;gt;N2 --&gt;
&lt;g id=&#34;edge14&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N6-&amp;gt;N2&lt;/title&gt;
&lt;g id=&#34;a_edge14&#34;&gt;&lt;a xlink:title=&#34;testing.(*B).launch -&gt; testing.(*B).runN (1.94s)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b23c00&#34; stroke-width=&#34;2&#34; d=&#34;M392.7295,-1226.9663C406.1152,-1213.9903 423.2145,-1197.4145 437.7315,-1183.3419&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b23c00&#34; stroke=&#34;#b23c00&#34; stroke-width=&#34;2&#34; points=&#34;440.3103,-1185.7167 445.0543,-1176.2433 435.438,-1180.6906 440.3103,-1185.7167&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge14-label&#34;&gt;&lt;a xlink:title=&#34;testing.(*B).launch -&gt; testing.(*B).runN (1.94s)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;442&#34; y=&#34;-1197.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 1.94s&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N14 --&gt;
&lt;g id=&#34;node14&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N14&lt;/title&gt;
&lt;g id=&#34;a_node14&#34;&gt;&lt;a xlink:title=&#34;io/ioutil.ReadAll (0.11s)&#34;&gt;
&lt;polygon fill=&#34;#edeceb&#34; stroke=&#34;#b2aea5&#34; points=&#34;409,-982 333,-982 333,-946 409,-946 409,-982&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;371&#34; y=&#34;-971.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;ioutil&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;371&#34; y=&#34;-962.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;ReadAll&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;371&#34; y=&#34;-953.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 0.11s (1.46%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N7&amp;#45;&amp;gt;N14 --&gt;
&lt;g id=&#34;edge32&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N7-&amp;gt;N14&lt;/title&gt;
&lt;g id=&#34;a_edge32&#34;&gt;&lt;a xlink:title=&#34;net/http_test.BenchmarkClientServer -&gt; io/ioutil.ReadAll (0.11s)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b2aea5&#34; d=&#34;M364.5425,-1040.683C365.6935,-1027.0149 367.2877,-1008.0833 368.6041,-992.4508&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b2aea5&#34; stroke=&#34;#b2aea5&#34; points=&#34;372.1107,-992.5192 369.4623,-982.2607 365.1354,-991.9317 372.1107,-992.5192&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge32-label&#34;&gt;&lt;a xlink:title=&#34;net/http_test.BenchmarkClientServer -&gt; io/ioutil.ReadAll (0.11s)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;385&#34; y=&#34;-1007.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 0.11s&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N28 --&gt;
&lt;g id=&#34;node28&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N28&lt;/title&gt;
&lt;g id=&#34;a_node28&#34;&gt;&lt;a xlink:title=&#34;net/http.Get (1.83s)&#34;&gt;
&lt;polygon fill=&#34;#edddd5&#34; stroke=&#34;#b23f00&#34; points=&#34;315,-982 235,-982 235,-946 315,-946 315,-982&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;275&#34; y=&#34;-971.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;http&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;275&#34; y=&#34;-962.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;Get&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;275&#34; y=&#34;-953.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 1.83s (23.37%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N7&amp;#45;&amp;gt;N28 --&gt;
&lt;g id=&#34;edge22&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N7-&amp;gt;N28&lt;/title&gt;
&lt;g id=&#34;a_edge22&#34;&gt;&lt;a xlink:title=&#34;net/http_test.BenchmarkClientServer -&gt; net/http.Get (1.83s)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b23f00&#34; stroke-width=&#34;2&#34; d=&#34;M346.0327,-1040.683C332.6412,-1026.2263 313.7953,-1005.8813 298.8802,-989.7798&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b23f00&#34; stroke=&#34;#b23f00&#34; stroke-width=&#34;2&#34; points=&#34;301.2785,-987.2185 291.9152,-982.2607 296.1432,-991.9754 301.2785,-987.2185&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge22-label&#34;&gt;&lt;a xlink:title=&#34;net/http_test.BenchmarkClientServer -&gt; net/http.Get (1.83s)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;342&#34; y=&#34;-1007.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 1.83s&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N8 --&gt;
&lt;g id=&#34;node8&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N8&lt;/title&gt;
&lt;g id=&#34;a_node8&#34;&gt;&lt;a xlink:title=&#34;net/http.(*persistConn).readLoop (0.18s)&#34;&gt;
&lt;polygon fill=&#34;#edecea&#34; stroke=&#34;#b2ab9d&#34; points=&#34;216,-181 140,-181 140,-137 216,-137 216,-181&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;178&#34; y=&#34;-170.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;http&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;178&#34; y=&#34;-161.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;(*persistConn)&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;178&#34; y=&#34;-152.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;readLoop&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;178&#34; y=&#34;-143.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 0.18s (2.36%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N8&amp;#45;&amp;gt;N1 --&gt;
&lt;g id=&#34;edge25&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N8-&amp;gt;N1&lt;/title&gt;
&lt;g id=&#34;a_edge25&#34;&gt;&lt;a xlink:title=&#34;net/http.(*persistConn).readLoop -&gt; runtime.selectgo (0.18s)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b2ab9d&#34; d=&#34;M159.7172,-136.9082C149.6181,-124.7052 136.6254,-109.0057 124.1652,-93.9496&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b2ab9d&#34; stroke=&#34;#b2ab9d&#34; points=&#34;126.788,-91.6292 117.7159,-86.1568 121.3953,-96.0922 126.788,-91.6292&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge25-label&#34;&gt;&lt;a xlink:title=&#34;net/http.(*persistConn).readLoop -&gt; runtime.selectgo (0.18s)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;162&#34; y=&#34;-107.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 0.18s&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N9 --&gt;
&lt;g id=&#34;node9&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N9&lt;/title&gt;
&lt;g id=&#34;a_node9&#34;&gt;&lt;a xlink:title=&#34;sync.(*Cond).Wait (0.04s)&#34;&gt;
&lt;polygon fill=&#34;#ededec&#34; stroke=&#34;#b2b1ad&#34; points=&#34;600.5,-1374 527.5,-1374 527.5,-1322 600.5,-1322 600.5,-1374&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;564&#34; y=&#34;-1362&#34; font-family=&#34;Times,serif&#34; font-size=&#34;10.00&#34; fill=&#34;#000000&#34;&gt;sync&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;564&#34; y=&#34;-1351&#34; font-family=&#34;Times,serif&#34; font-size=&#34;10.00&#34; fill=&#34;#000000&#34;&gt;(*Cond)&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;564&#34; y=&#34;-1340&#34; font-family=&#34;Times,serif&#34; font-size=&#34;10.00&#34; fill=&#34;#000000&#34;&gt;Wait&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;564&#34; y=&#34;-1329&#34; font-family=&#34;Times,serif&#34; font-size=&#34;10.00&#34; fill=&#34;#000000&#34;&gt;0.04s (0.57%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N10 --&gt;
&lt;g id=&#34;node10&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N10&lt;/title&gt;
&lt;g id=&#34;a_node10&#34;&gt;&lt;a xlink:title=&#34;net/http.(*conn).serve (0.04s)&#34;&gt;
&lt;polygon fill=&#34;#ededec&#34; stroke=&#34;#b2b1ad&#34; points=&#34;602,-1677 526,-1677 526,-1633 602,-1633 602,-1677&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;564&#34; y=&#34;-1666.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;http&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;564&#34; y=&#34;-1657.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;(*conn)&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;564&#34; y=&#34;-1648.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;serve&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;564&#34; y=&#34;-1639.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 0.04s (0.57%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N27 --&gt;
&lt;g id=&#34;node27&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N27&lt;/title&gt;
&lt;g id=&#34;a_node27&#34;&gt;&lt;a xlink:title=&#34;net/http.(*response).finishRequest (0.04s)&#34;&gt;
&lt;polygon fill=&#34;#ededec&#34; stroke=&#34;#b2b1ad&#34; points=&#34;602,-1564 526,-1564 526,-1520 602,-1520 602,-1564&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;564&#34; y=&#34;-1553.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;http&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;564&#34; y=&#34;-1544.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;(*response)&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;564&#34; y=&#34;-1535.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;finishRequest&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;564&#34; y=&#34;-1526.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 0.04s (0.57%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N10&amp;#45;&amp;gt;N27 --&gt;
&lt;g id=&#34;edge33&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N10-&amp;gt;N27&lt;/title&gt;
&lt;g id=&#34;a_edge33&#34;&gt;&lt;a xlink:title=&#34;net/http.(*conn).serve -&gt; net/http.(*response).finishRequest (0.04s)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b2b1ad&#34; d=&#34;M564,-1632.9442C564,-1616.2222 564,-1592.9909 564,-1574.194&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b2b1ad&#34; stroke=&#34;#b2b1ad&#34; points=&#34;567.5001,-1574.0001 564,-1564.0002 560.5001,-1574.0002 567.5001,-1574.0001&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge33-label&#34;&gt;&lt;a xlink:title=&#34;net/http.(*conn).serve -&gt; net/http.(*response).finishRequest (0.04s)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;581&#34; y=&#34;-1585.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 0.04s&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N11 --&gt;
&lt;g id=&#34;node11&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N11&lt;/title&gt;
&lt;g id=&#34;a_node11&#34;&gt;&lt;a xlink:title=&#34;testing.(*B).Run (3.11s)&#34;&gt;
&lt;polygon fill=&#34;#eddbd5&#34; stroke=&#34;#b22b00&#34; points=&#34;508,-986 428,-986 428,-942 508,-942 508,-986&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;468&#34; y=&#34;-975.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;testing&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;468&#34; y=&#34;-966.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;(*B)&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;468&#34; y=&#34;-957.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;Run&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;468&#34; y=&#34;-948.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 3.11s (39.80%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N32 --&gt;
&lt;g id=&#34;node32&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N32&lt;/title&gt;
&lt;g id=&#34;a_node32&#34;&gt;&lt;a xlink:title=&#34;testing.(*B).run (3.11s)&#34;&gt;
&lt;polygon fill=&#34;#eddbd5&#34; stroke=&#34;#b22b00&#34; points=&#34;508,-891 428,-891 428,-847 508,-847 508,-891&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;468&#34; y=&#34;-880.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;testing&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;468&#34; y=&#34;-871.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;(*B)&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;468&#34; y=&#34;-862.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;run&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;468&#34; y=&#34;-853.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 3.11s (39.77%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N11&amp;#45;&amp;gt;N32 --&gt;
&lt;g id=&#34;edge8&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N11-&amp;gt;N32&lt;/title&gt;
&lt;g id=&#34;a_edge8&#34;&gt;&lt;a xlink:title=&#34;testing.(*B).Run -&gt; testing.(*B).run (3.11s)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b22b00&#34; stroke-width=&#34;2&#34; d=&#34;M468,-941.9663C468,-929.9427 468,-914.8283 468,-901.4785&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b22b00&#34; stroke=&#34;#b22b00&#34; stroke-width=&#34;2&#34; points=&#34;471.5001,-901.2433 468,-891.2433 464.5001,-901.2433 471.5001,-901.2433&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge8-label&#34;&gt;&lt;a xlink:title=&#34;testing.(*B).Run -&gt; testing.(*B).run (3.11s)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;485&#34; y=&#34;-912.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 3.11s&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N12 --&gt;
&lt;g id=&#34;node12&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N12&lt;/title&gt;
&lt;g id=&#34;a_node12&#34;&gt;&lt;a xlink:title=&#34;net/http.(*Transport).roundTrip (1.83s)&#34;&gt;
&lt;polygon fill=&#34;#edddd5&#34; stroke=&#34;#b23f00&#34; points=&#34;314,-276 234,-276 234,-232 314,-232 314,-276&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;274&#34; y=&#34;-265.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;http&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;274&#34; y=&#34;-256.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;(*Transport)&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;274&#34; y=&#34;-247.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;roundTrip&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;274&#34; y=&#34;-238.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 1.83s (23.37%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N26 --&gt;
&lt;g id=&#34;node26&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N26&lt;/title&gt;
&lt;g id=&#34;a_node26&#34;&gt;&lt;a xlink:title=&#34;net/http.(*persistConn).roundTrip (1.83s)&#34;&gt;
&lt;polygon fill=&#34;#edddd5&#34; stroke=&#34;#b23f00&#34; points=&#34;314,-181 234,-181 234,-137 314,-137 314,-181&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;274&#34; y=&#34;-170.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;http&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;274&#34; y=&#34;-161.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;(*persistConn)&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;274&#34; y=&#34;-152.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;roundTrip&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;274&#34; y=&#34;-143.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 1.83s (23.36%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N12&amp;#45;&amp;gt;N26 --&gt;
&lt;g id=&#34;edge23&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N12-&amp;gt;N26&lt;/title&gt;
&lt;g id=&#34;a_edge23&#34;&gt;&lt;a xlink:title=&#34;net/http.(*Transport).roundTrip -&gt; net/http.(*persistConn).roundTrip (1.83s)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b23f00&#34; stroke-width=&#34;2&#34; d=&#34;M274,-231.9663C274,-219.9427 274,-204.8283 274,-191.4785&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b23f00&#34; stroke=&#34;#b23f00&#34; stroke-width=&#34;2&#34; points=&#34;277.5001,-191.2433 274,-181.2433 270.5001,-191.2433 277.5001,-191.2433&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge23-label&#34;&gt;&lt;a xlink:title=&#34;net/http.(*Transport).roundTrip -&gt; net/http.(*persistConn).roundTrip (1.83s)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;291&#34; y=&#34;-202.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 1.83s&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N13 --&gt;
&lt;g id=&#34;node13&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N13&lt;/title&gt;
&lt;g id=&#34;a_node13&#34;&gt;&lt;a xlink:title=&#34;bytes.(*Buffer).ReadFrom (0.11s)&#34;&gt;
&lt;polygon fill=&#34;#edeceb&#34; stroke=&#34;#b2aea5&#34; points=&#34;409,-796 333,-796 333,-752 409,-752 409,-796&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;371&#34; y=&#34;-785.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;bytes&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;371&#34; y=&#34;-776.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;(*Buffer)&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;371&#34; y=&#34;-767.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;ReadFrom&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;371&#34; y=&#34;-758.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 0.11s (1.46%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N22 --&gt;
&lt;g id=&#34;node22&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N22&lt;/title&gt;
&lt;g id=&#34;a_node22&#34;&gt;&lt;a xlink:title=&#34;net/http.(*bodyEOFSignal).Read (0.11s)&#34;&gt;
&lt;polygon fill=&#34;#edeceb&#34; stroke=&#34;#b2aea5&#34; points=&#34;409.5,-701 332.5,-701 332.5,-657 409.5,-657 409.5,-701&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;371&#34; y=&#34;-690.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;http&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;371&#34; y=&#34;-681.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;(*bodyEOFSignal)&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;371&#34; y=&#34;-672.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;Read&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;371&#34; y=&#34;-663.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 0.11s (1.46%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N13&amp;#45;&amp;gt;N22 --&gt;
&lt;g id=&#34;edge26&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N13-&amp;gt;N22&lt;/title&gt;
&lt;g id=&#34;a_edge26&#34;&gt;&lt;a xlink:title=&#34;bytes.(*Buffer).ReadFrom -&gt; net/http.(*bodyEOFSignal).Read (0.11s)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b2aea5&#34; d=&#34;M371,-751.9663C371,-739.9427 371,-724.8283 371,-711.4785&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b2aea5&#34; stroke=&#34;#b2aea5&#34; points=&#34;374.5001,-711.2433 371,-701.2433 367.5001,-711.2433 374.5001,-711.2433&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge26-label&#34;&gt;&lt;a xlink:title=&#34;bytes.(*Buffer).ReadFrom -&gt; net/http.(*bodyEOFSignal).Read (0.11s)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;388&#34; y=&#34;-722.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 0.11s&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N15 --&gt;
&lt;g id=&#34;node15&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N15&lt;/title&gt;
&lt;g id=&#34;a_node15&#34;&gt;&lt;a xlink:title=&#34;io/ioutil.readAll (0.11s)&#34;&gt;
&lt;polygon fill=&#34;#edeceb&#34; stroke=&#34;#b2aea5&#34; points=&#34;409,-887 333,-887 333,-851 409,-851 409,-887&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;371&#34; y=&#34;-876.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;ioutil&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;371&#34; y=&#34;-867.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;readAll&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;371&#34; y=&#34;-858.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 0.11s (1.46%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N14&amp;#45;&amp;gt;N15 --&gt;
&lt;g id=&#34;edge27&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N14-&amp;gt;N15&lt;/title&gt;
&lt;g id=&#34;a_edge27&#34;&gt;&lt;a xlink:title=&#34;io/ioutil.ReadAll -&gt; io/ioutil.readAll (0.11s)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b2aea5&#34; d=&#34;M371,-945.683C371,-932.0149 371,-913.0833 371,-897.4508&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b2aea5&#34; stroke=&#34;#b2aea5&#34; points=&#34;374.5001,-897.2607 371,-887.2607 367.5001,-897.2608 374.5001,-897.2607&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge27-label&#34;&gt;&lt;a xlink:title=&#34;io/ioutil.ReadAll -&gt; io/ioutil.readAll (0.11s)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;388&#34; y=&#34;-912.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 0.11s&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N15&amp;#45;&amp;gt;N13 --&gt;
&lt;g id=&#34;edge28&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N15-&amp;gt;N13&lt;/title&gt;
&lt;g id=&#34;a_edge28&#34;&gt;&lt;a xlink:title=&#34;io/ioutil.readAll -&gt; bytes.(*Buffer).ReadFrom (0.11s)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b2aea5&#34; d=&#34;M371,-850.683C371,-838.1876 371,-821.2931 371,-806.542&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b2aea5&#34; stroke=&#34;#b2aea5&#34; points=&#34;374.5001,-806.2732 371,-796.2733 367.5001,-806.2733 374.5001,-806.2732&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge28-label&#34;&gt;&lt;a xlink:title=&#34;io/ioutil.readAll -&gt; bytes.(*Buffer).ReadFrom (0.11s)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;388&#34; y=&#34;-817.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 0.11s&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N30 --&gt;
&lt;g id=&#34;node30&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N30&lt;/title&gt;
&lt;g id=&#34;a_node30&#34;&gt;&lt;a xlink:title=&#34;net/http_test.TestMain (3.11s)&#34;&gt;
&lt;polygon fill=&#34;#eddbd5&#34; stroke=&#34;#b22b00&#34; points=&#34;508,-1465 428,-1465 428,-1429 508,-1429 508,-1465&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;468&#34; y=&#34;-1454.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;http_test&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;468&#34; y=&#34;-1445.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;TestMain&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;468&#34; y=&#34;-1436.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 3.11s (39.80%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N16&amp;#45;&amp;gt;N30 --&gt;
&lt;g id=&#34;edge1&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N16-&amp;gt;N30&lt;/title&gt;
&lt;g id=&#34;a_edge1&#34;&gt;&lt;a xlink:title=&#34;main.main -&gt; net/http_test.TestMain (3.11s)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b22b00&#34; stroke-width=&#34;2&#34; d=&#34;M468,-1523.683C468,-1510.0149 468,-1491.0833 468,-1475.4508&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b22b00&#34; stroke=&#34;#b22b00&#34; stroke-width=&#34;2&#34; points=&#34;471.5001,-1475.2607 468,-1465.2607 464.5001,-1475.2608 471.5001,-1475.2607&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge1-label&#34;&gt;&lt;a xlink:title=&#34;main.main -&gt; net/http_test.TestMain (3.11s)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;485&#34; y=&#34;-1490.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 3.11s&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N17 --&gt;
&lt;g id=&#34;node17&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N17&lt;/title&gt;
&lt;g id=&#34;a_node17&#34;&gt;&lt;a xlink:title=&#34;net/http.(*Client).Do (1.83s)&#34;&gt;
&lt;polygon fill=&#34;#edddd5&#34; stroke=&#34;#b23f00&#34; points=&#34;314,-796 234,-796 234,-752 314,-752 314,-796&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;274&#34; y=&#34;-785.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;http&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;274&#34; y=&#34;-776.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;(*Client)&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;274&#34; y=&#34;-767.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;Do&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;274&#34; y=&#34;-758.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 1.83s (23.37%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N19 --&gt;
&lt;g id=&#34;node19&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N19&lt;/title&gt;
&lt;g id=&#34;a_node19&#34;&gt;&lt;a xlink:title=&#34;net/http.(*Client).do (1.83s)&#34;&gt;
&lt;polygon fill=&#34;#edddd5&#34; stroke=&#34;#b23f00&#34; points=&#34;314,-701 234,-701 234,-657 314,-657 314,-701&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;274&#34; y=&#34;-690.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;http&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;274&#34; y=&#34;-681.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;(*Client)&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;274&#34; y=&#34;-672.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;do&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;274&#34; y=&#34;-663.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 1.83s (23.37%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N17&amp;#45;&amp;gt;N19 --&gt;
&lt;g id=&#34;edge15&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N17-&amp;gt;N19&lt;/title&gt;
&lt;g id=&#34;a_edge15&#34;&gt;&lt;a xlink:title=&#34;net/http.(*Client).Do -&gt; net/http.(*Client).do (1.83s)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b23f00&#34; stroke-width=&#34;2&#34; d=&#34;M274,-751.9663C274,-739.9427 274,-724.8283 274,-711.4785&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b23f00&#34; stroke=&#34;#b23f00&#34; stroke-width=&#34;2&#34; points=&#34;277.5001,-711.2433 274,-701.2433 270.5001,-711.2433 277.5001,-711.2433&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge15-label&#34;&gt;&lt;a xlink:title=&#34;net/http.(*Client).Do -&gt; net/http.(*Client).do (1.83s)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;291&#34; y=&#34;-722.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 1.83s&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N18 --&gt;
&lt;g id=&#34;node18&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N18&lt;/title&gt;
&lt;g id=&#34;a_node18&#34;&gt;&lt;a xlink:title=&#34;net/http.(*Client).Get (1.83s)&#34;&gt;
&lt;polygon fill=&#34;#edddd5&#34; stroke=&#34;#b23f00&#34; points=&#34;314,-891 234,-891 234,-847 314,-847 314,-891&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;274&#34; y=&#34;-880.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;http&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;274&#34; y=&#34;-871.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;(*Client)&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;274&#34; y=&#34;-862.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;Get&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;274&#34; y=&#34;-853.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 1.83s (23.37%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N18&amp;#45;&amp;gt;N17 --&gt;
&lt;g id=&#34;edge16&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N18-&amp;gt;N17&lt;/title&gt;
&lt;g id=&#34;a_edge16&#34;&gt;&lt;a xlink:title=&#34;net/http.(*Client).Get -&gt; net/http.(*Client).Do (1.83s)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b23f00&#34; stroke-width=&#34;2&#34; d=&#34;M274,-846.9663C274,-834.9427 274,-819.8283 274,-806.4785&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b23f00&#34; stroke=&#34;#b23f00&#34; stroke-width=&#34;2&#34; points=&#34;277.5001,-806.2433 274,-796.2433 270.5001,-806.2433 277.5001,-806.2433&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge16-label&#34;&gt;&lt;a xlink:title=&#34;net/http.(*Client).Get -&gt; net/http.(*Client).Do (1.83s)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;291&#34; y=&#34;-817.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 1.83s&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N20 --&gt;
&lt;g id=&#34;node20&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N20&lt;/title&gt;
&lt;g id=&#34;a_node20&#34;&gt;&lt;a xlink:title=&#34;net/http.(*Client).send (1.83s)&#34;&gt;
&lt;polygon fill=&#34;#edddd5&#34; stroke=&#34;#b23f00&#34; points=&#34;314,-606 234,-606 234,-562 314,-562 314,-606&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;274&#34; y=&#34;-595.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;http&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;274&#34; y=&#34;-586.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;(*Client)&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;274&#34; y=&#34;-577.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;send&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;274&#34; y=&#34;-568.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 1.83s (23.37%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N19&amp;#45;&amp;gt;N20 --&gt;
&lt;g id=&#34;edge17&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N19-&amp;gt;N20&lt;/title&gt;
&lt;g id=&#34;a_edge17&#34;&gt;&lt;a xlink:title=&#34;net/http.(*Client).do -&gt; net/http.(*Client).send (1.83s)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b23f00&#34; stroke-width=&#34;2&#34; d=&#34;M274,-656.9663C274,-644.9427 274,-629.8283 274,-616.4785&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b23f00&#34; stroke=&#34;#b23f00&#34; stroke-width=&#34;2&#34; points=&#34;277.5001,-616.2433 274,-606.2433 270.5001,-616.2433 277.5001,-616.2433&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge17-label&#34;&gt;&lt;a xlink:title=&#34;net/http.(*Client).do -&gt; net/http.(*Client).send (1.83s)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;291&#34; y=&#34;-627.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 1.83s&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N29 --&gt;
&lt;g id=&#34;node29&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N29&lt;/title&gt;
&lt;g id=&#34;a_node29&#34;&gt;&lt;a xlink:title=&#34;net/http.send (1.83s)&#34;&gt;
&lt;polygon fill=&#34;#edddd5&#34; stroke=&#34;#b23f00&#34; points=&#34;314,-502.5 234,-502.5 234,-466.5 314,-466.5 314,-502.5&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;274&#34; y=&#34;-491.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;http&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;274&#34; y=&#34;-482.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;send&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;274&#34; y=&#34;-473.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 1.83s (23.37%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N20&amp;#45;&amp;gt;N29 --&gt;
&lt;g id=&#34;edge18&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N20-&amp;gt;N29&lt;/title&gt;
&lt;g id=&#34;a_edge18&#34;&gt;&lt;a xlink:title=&#34;net/http.(*Client).send -&gt; net/http.send (1.83s)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b23f00&#34; stroke-width=&#34;2&#34; d=&#34;M274,-561.9177C274,-547.4041 274,-528.2841 274,-512.677&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b23f00&#34; stroke=&#34;#b23f00&#34; stroke-width=&#34;2&#34; points=&#34;277.5001,-512.5331 274,-502.5331 270.5001,-512.5331 277.5001,-512.5331&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge18-label&#34;&gt;&lt;a xlink:title=&#34;net/http.(*Client).send -&gt; net/http.send (1.83s)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;291&#34; y=&#34;-532.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 1.83s&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N21 --&gt;
&lt;g id=&#34;node21&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N21&lt;/title&gt;
&lt;g id=&#34;a_node21&#34;&gt;&lt;a xlink:title=&#34;net/http.(*Transport).RoundTrip (1.83s)&#34;&gt;
&lt;polygon fill=&#34;#edddd5&#34; stroke=&#34;#b23f00&#34; points=&#34;314,-389 234,-389 234,-345 314,-345 314,-389&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;274&#34; y=&#34;-378.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;http&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;274&#34; y=&#34;-369.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;(*Transport)&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;274&#34; y=&#34;-360.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;RoundTrip&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;274&#34; y=&#34;-351.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 1.83s (23.37%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N21&amp;#45;&amp;gt;N12 --&gt;
&lt;g id=&#34;edge19&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N21-&amp;gt;N12&lt;/title&gt;
&lt;g id=&#34;a_edge19&#34;&gt;&lt;a xlink:title=&#34;net/http.(*Transport).RoundTrip -&gt; net/http.(*Transport).roundTrip (1.83s)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b23f00&#34; stroke-width=&#34;2&#34; d=&#34;M274,-344.9442C274,-328.2222 274,-304.9909 274,-286.194&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b23f00&#34; stroke=&#34;#b23f00&#34; stroke-width=&#34;2&#34; points=&#34;277.5001,-286.0001 274,-276.0002 270.5001,-286.0002 277.5001,-286.0001&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge19-label&#34;&gt;&lt;a xlink:title=&#34;net/http.(*Transport).RoundTrip -&gt; net/http.(*Transport).roundTrip (1.83s)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;291&#34; y=&#34;-297.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 1.83s&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N23 --&gt;
&lt;g id=&#34;node23&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N23&lt;/title&gt;
&lt;g id=&#34;a_node23&#34;&gt;&lt;a xlink:title=&#34;net/http.(*bodyEOFSignal).condfn (0.11s)&#34;&gt;
&lt;polygon fill=&#34;#edeceb&#34; stroke=&#34;#b2aea5&#34; points=&#34;424.5,-606 347.5,-606 347.5,-562 424.5,-562 424.5,-606&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;386&#34; y=&#34;-595.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;http&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;386&#34; y=&#34;-586.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;(*bodyEOFSignal)&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;386&#34; y=&#34;-577.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;condfn&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;386&#34; y=&#34;-568.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 0.11s (1.46%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N22&amp;#45;&amp;gt;N23 --&gt;
&lt;g id=&#34;edge29&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N22-&amp;gt;N23&lt;/title&gt;
&lt;g id=&#34;a_edge29&#34;&gt;&lt;a xlink:title=&#34;net/http.(*bodyEOFSignal).Read -&gt; net/http.(*bodyEOFSignal).condfn (0.11s)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b2aea5&#34; d=&#34;M374.479,-656.9663C376.3775,-644.9427 378.764,-629.8283 380.8718,-616.4785&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b2aea5&#34; stroke=&#34;#b2aea5&#34; points=&#34;384.3854,-616.6668 382.4879,-606.2433 377.471,-615.575 384.3854,-616.6668&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge29-label&#34;&gt;&lt;a xlink:title=&#34;net/http.(*bodyEOFSignal).Read -&gt; net/http.(*bodyEOFSignal).condfn (0.11s)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;397&#34; y=&#34;-627.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 0.11s&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N25 --&gt;
&lt;g id=&#34;node25&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N25&lt;/title&gt;
&lt;g id=&#34;a_node25&#34;&gt;&lt;a xlink:title=&#34;net/http.(*persistConn).readLoop.func4 (0.11s)&#34;&gt;
&lt;polygon fill=&#34;#edeceb&#34; stroke=&#34;#b2aea5&#34; points=&#34;440,-511 364,-511 364,-458 440,-458 440,-511&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;402&#34; y=&#34;-500.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;http&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;402&#34; y=&#34;-491.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;(*persistConn)&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;402&#34; y=&#34;-482.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;readLoop&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;402&#34; y=&#34;-473.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;func4&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;402&#34; y=&#34;-464.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 0.11s (1.46%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N23&amp;#45;&amp;gt;N25 --&gt;
&lt;g id=&#34;edge30&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N23-&amp;gt;N25&lt;/title&gt;
&lt;g id=&#34;a_edge30&#34;&gt;&lt;a xlink:title=&#34;net/http.(*bodyEOFSignal).condfn -&gt; net/http.(*persistConn).readLoop.func4 (0.11s)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b2aea5&#34; d=&#34;M389.5509,-561.9177C391.4731,-549.9644 393.8976,-534.8865 396.0953,-521.2199&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b2aea5&#34; stroke=&#34;#b2aea5&#34; points=&#34;399.5874,-521.5481 397.7195,-511.1192 392.6762,-520.4367 399.5874,-521.5481&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge30-label&#34;&gt;&lt;a xlink:title=&#34;net/http.(*bodyEOFSignal).condfn -&gt; net/http.(*persistConn).readLoop.func4 (0.11s)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;412&#34; y=&#34;-532.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 0.11s&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N24 --&gt;
&lt;g id=&#34;node24&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N24&lt;/title&gt;
&lt;g id=&#34;a_node24&#34;&gt;&lt;a xlink:title=&#34;net/http.(*connReader).abortPendingRead (0.04s)&#34;&gt;
&lt;polygon fill=&#34;#ededec&#34; stroke=&#34;#b2b1ad&#34; points=&#34;602,-1469 526,-1469 526,-1425 602,-1425 602,-1469&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;564&#34; y=&#34;-1458.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;http&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;564&#34; y=&#34;-1449.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;(*connReader)&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;564&#34; y=&#34;-1440.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;abortPendingRead&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;564&#34; y=&#34;-1431.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 0.04s (0.57%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N24&amp;#45;&amp;gt;N9 --&gt;
&lt;g id=&#34;edge34&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N24-&amp;gt;N9&lt;/title&gt;
&lt;g id=&#34;a_edge34&#34;&gt;&lt;a xlink:title=&#34;net/http.(*connReader).abortPendingRead -&gt; sync.(*Cond).Wait (0.04s)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b2b1ad&#34; d=&#34;M564,-1424.5354C564,-1412.7414 564,-1397.9936 564,-1384.6003&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b2b1ad&#34; stroke=&#34;#b2b1ad&#34; points=&#34;567.5001,-1384.2317 564,-1374.2317 560.5001,-1384.2318 567.5001,-1384.2317&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge34-label&#34;&gt;&lt;a xlink:title=&#34;net/http.(*connReader).abortPendingRead -&gt; sync.(*Cond).Wait (0.04s)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;581&#34; y=&#34;-1395.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 0.04s&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N25&amp;#45;&amp;gt;N3 --&gt;
&lt;g id=&#34;edge31&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N25-&amp;gt;N3&lt;/title&gt;
&lt;g id=&#34;a_edge31&#34;&gt;&lt;a xlink:title=&#34;net/http.(*persistConn).readLoop.func4 -&gt; runtime.chanrecv1 (0.11s)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b2aea5&#34; d=&#34;M407.6455,-457.835C410.4989,-447.2388 414.5394,-435.175 420,-425 421.7403,-421.7573 423.6784,-418.5263 425.7497,-415.3436&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b2aea5&#34; stroke=&#34;#b2aea5&#34; points=&#34;428.6744,-417.2682 431.4997,-407.057 422.9232,-413.2776 428.6744,-417.2682&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge31-label&#34;&gt;&lt;a xlink:title=&#34;net/http.(*persistConn).readLoop.func4 -&gt; runtime.chanrecv1 (0.11s)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;437&#34; y=&#34;-428.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 0.11s&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N26&amp;#45;&amp;gt;N1 --&gt;
&lt;g id=&#34;edge24&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N26-&amp;gt;N1&lt;/title&gt;
&lt;g id=&#34;a_edge24&#34;&gt;&lt;a xlink:title=&#34;net/http.(*persistConn).roundTrip -&gt; runtime.selectgo (1.83s)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b23f00&#34; stroke-width=&#34;2&#34; d=&#34;M237.2515,-136.7857C220.6768,-126.7674 200.8542,-114.7871 183,-104 176.2813,-99.9407 169.3109,-95.7299 162.3148,-91.5038&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b23f00&#34; stroke=&#34;#b23f00&#34; stroke-width=&#34;2&#34; points=&#34;163.8256,-88.3274 153.4563,-86.1529 160.2063,-94.3192 163.8256,-88.3274&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge24-label&#34;&gt;&lt;a xlink:title=&#34;net/http.(*persistConn).roundTrip -&gt; runtime.selectgo (1.83s)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;223&#34; y=&#34;-107.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 1.83s&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N27&amp;#45;&amp;gt;N24 --&gt;
&lt;g id=&#34;edge35&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N27-&amp;gt;N24&lt;/title&gt;
&lt;g id=&#34;a_edge35&#34;&gt;&lt;a xlink:title=&#34;net/http.(*response).finishRequest -&gt; net/http.(*connReader).abortPendingRead (0.04s)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b2b1ad&#34; d=&#34;M564,-1519.9663C564,-1507.9427 564,-1492.8283 564,-1479.4785&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b2b1ad&#34; stroke=&#34;#b2b1ad&#34; points=&#34;567.5001,-1479.2433 564,-1469.2433 560.5001,-1479.2433 567.5001,-1479.2433&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge35-label&#34;&gt;&lt;a xlink:title=&#34;net/http.(*response).finishRequest -&gt; net/http.(*connReader).abortPendingRead (0.04s)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;581&#34; y=&#34;-1490.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 0.04s&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N28&amp;#45;&amp;gt;N18 --&gt;
&lt;g id=&#34;edge20&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N28-&amp;gt;N18&lt;/title&gt;
&lt;g id=&#34;a_edge20&#34;&gt;&lt;a xlink:title=&#34;net/http.Get -&gt; net/http.(*Client).Get (1.83s)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b23f00&#34; stroke-width=&#34;2&#34; d=&#34;M274.8072,-945.683C274.6757,-933.1876 274.4978,-916.2931 274.3425,-901.542&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b23f00&#34; stroke=&#34;#b23f00&#34; stroke-width=&#34;2&#34; points=&#34;277.8396,-901.2359 274.2345,-891.2733 270.84,-901.3096 277.8396,-901.2359&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge20-label&#34;&gt;&lt;a xlink:title=&#34;net/http.Get -&gt; net/http.(*Client).Get (1.83s)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;292&#34; y=&#34;-912.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 1.83s&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N29&amp;#45;&amp;gt;N21 --&gt;
&lt;g id=&#34;edge21&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N29-&amp;gt;N21&lt;/title&gt;
&lt;g id=&#34;a_edge21&#34;&gt;&lt;a xlink:title=&#34;net/http.send -&gt; net/http.(*Transport).RoundTrip (1.83s)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b23f00&#34; stroke-width=&#34;2&#34; d=&#34;M274,-466.3981C274,-448.5845 274,-420.9917 274,-399.3937&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b23f00&#34; stroke=&#34;#b23f00&#34; stroke-width=&#34;2&#34; points=&#34;277.5001,-399.3417 274,-389.3417 270.5001,-399.3417 277.5001,-399.3417&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge21-label&#34;&gt;&lt;a xlink:title=&#34;net/http.send -&gt; net/http.(*Transport).RoundTrip (1.83s)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;291&#34; y=&#34;-428.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 1.83s&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N33 --&gt;
&lt;g id=&#34;node33&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N33&lt;/title&gt;
&lt;g id=&#34;a_node33&#34;&gt;&lt;a xlink:title=&#34;testing.(*M).Run (3.11s)&#34;&gt;
&lt;polygon fill=&#34;#eddbd5&#34; stroke=&#34;#b22b00&#34; points=&#34;508,-1370 428,-1370 428,-1326 508,-1326 508,-1370&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;468&#34; y=&#34;-1359.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;testing&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;468&#34; y=&#34;-1350.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;(*M)&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;468&#34; y=&#34;-1341.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;Run&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;468&#34; y=&#34;-1332.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 3.11s (39.80%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N30&amp;#45;&amp;gt;N33 --&gt;
&lt;g id=&#34;edge2&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N30-&amp;gt;N33&lt;/title&gt;
&lt;g id=&#34;a_edge2&#34;&gt;&lt;a xlink:title=&#34;net/http_test.TestMain -&gt; testing.(*M).Run (3.11s)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b22b00&#34; stroke-width=&#34;2&#34; d=&#34;M468,-1428.8419C468,-1415.2878 468,-1396.4077 468,-1380.3016&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b22b00&#34; stroke=&#34;#b22b00&#34; stroke-width=&#34;2&#34; points=&#34;471.5001,-1380.2021 468,-1370.2021 464.5001,-1380.2022 471.5001,-1380.2021&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge2-label&#34;&gt;&lt;a xlink:title=&#34;net/http_test.TestMain -&gt; testing.(*M).Run (3.11s)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;485&#34; y=&#34;-1395.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 3.11s&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N31 --&gt;
&lt;g id=&#34;node31&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N31&lt;/title&gt;
&lt;g id=&#34;a_node31&#34;&gt;&lt;a xlink:title=&#34;testing.(*B).doBench (3.11s)&#34;&gt;
&lt;polygon fill=&#34;#eddbd5&#34; stroke=&#34;#b22b00&#34; points=&#34;508,-701 428,-701 428,-657 508,-657 508,-701&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;468&#34; y=&#34;-690.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;testing&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;468&#34; y=&#34;-681.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;(*B)&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;468&#34; y=&#34;-672.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;doBench&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;468&#34; y=&#34;-663.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 3.11s (39.77%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N31&amp;#45;&amp;gt;N3 --&gt;
&lt;g id=&#34;edge9&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N31-&amp;gt;N3&lt;/title&gt;
&lt;g id=&#34;a_edge9&#34;&gt;&lt;a xlink:title=&#34;testing.(*B).doBench -&gt; runtime.chanrecv1 (3.11s)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b22b00&#34; stroke-width=&#34;2&#34; d=&#34;M468,-656.5617C468,-606.79 468,-486.1141 468,-417.2858&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b22b00&#34; stroke=&#34;#b22b00&#34; stroke-width=&#34;2&#34; points=&#34;471.5001,-417.1125 468,-407.1125 464.5001,-417.1125 471.5001,-417.1125&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge9-label&#34;&gt;&lt;a xlink:title=&#34;testing.(*B).doBench -&gt; runtime.chanrecv1 (3.11s)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;485&#34; y=&#34;-532.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 3.11s&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N34 --&gt;
&lt;g id=&#34;node34&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N34&lt;/title&gt;
&lt;g id=&#34;a_node34&#34;&gt;&lt;a xlink:title=&#34;testing.(*benchContext).processBench (3.11s)&#34;&gt;
&lt;polygon fill=&#34;#eddbd5&#34; stroke=&#34;#b22b00&#34; points=&#34;508,-796 428,-796 428,-752 508,-752 508,-796&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;468&#34; y=&#34;-785.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;testing&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;468&#34; y=&#34;-776.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;(*benchContext)&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;468&#34; y=&#34;-767.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;processBench&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;468&#34; y=&#34;-758.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 3.11s (39.77%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N32&amp;#45;&amp;gt;N34 --&gt;
&lt;g id=&#34;edge10&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N32-&amp;gt;N34&lt;/title&gt;
&lt;g id=&#34;a_edge10&#34;&gt;&lt;a xlink:title=&#34;testing.(*B).run -&gt; testing.(*benchContext).processBench (3.11s)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b22b00&#34; stroke-width=&#34;2&#34; d=&#34;M468,-846.9663C468,-834.9427 468,-819.8283 468,-806.4785&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b22b00&#34; stroke=&#34;#b22b00&#34; stroke-width=&#34;2&#34; points=&#34;471.5001,-806.2433 468,-796.2433 464.5001,-806.2433 471.5001,-806.2433&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge10-label&#34;&gt;&lt;a xlink:title=&#34;testing.(*B).run -&gt; testing.(*benchContext).processBench (3.11s)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;485&#34; y=&#34;-817.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 3.11s&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N35 --&gt;
&lt;g id=&#34;node35&#34; class=&#34;node&#34;&gt;
&lt;title&gt;N35&lt;/title&gt;
&lt;g id=&#34;a_node35&#34;&gt;&lt;a xlink:title=&#34;testing.runBenchmarks (3.11s)&#34;&gt;
&lt;polygon fill=&#34;#eddbd5&#34; stroke=&#34;#b22b00&#34; points=&#34;508,-1267 428,-1267 428,-1231 508,-1231 508,-1267&#34;&gt;&lt;/polygon&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;468&#34; y=&#34;-1256.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;testing&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;468&#34; y=&#34;-1247.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;runBenchmarks&lt;/text&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;468&#34; y=&#34;-1238.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 3.11s (39.80%)&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N33&amp;#45;&amp;gt;N35 --&gt;
&lt;g id=&#34;edge5&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N33-&amp;gt;N35&lt;/title&gt;
&lt;g id=&#34;a_edge5&#34;&gt;&lt;a xlink:title=&#34;testing.(*M).Run -&gt; testing.runBenchmarks (3.11s)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b22b00&#34; stroke-width=&#34;2&#34; d=&#34;M468,-1325.5354C468,-1311.3043 468,-1292.7726 468,-1277.5091&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b22b00&#34; stroke=&#34;#b22b00&#34; stroke-width=&#34;2&#34; points=&#34;471.5001,-1277.0807 468,-1267.0808 464.5001,-1277.0808 471.5001,-1277.0807&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge5-label&#34;&gt;&lt;a xlink:title=&#34;testing.(*M).Run -&gt; testing.runBenchmarks (3.11s)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;485&#34; y=&#34;-1292.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 3.11s&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N34&amp;#45;&amp;gt;N31 --&gt;
&lt;g id=&#34;edge11&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N34-&amp;gt;N31&lt;/title&gt;
&lt;g id=&#34;a_edge11&#34;&gt;&lt;a xlink:title=&#34;testing.(*benchContext).processBench -&gt; testing.(*B).doBench (3.11s)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b22b00&#34; stroke-width=&#34;2&#34; d=&#34;M468,-751.9663C468,-739.9427 468,-724.8283 468,-711.4785&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b22b00&#34; stroke=&#34;#b22b00&#34; stroke-width=&#34;2&#34; points=&#34;471.5001,-711.2433 468,-701.2433 464.5001,-711.2433 471.5001,-711.2433&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge11-label&#34;&gt;&lt;a xlink:title=&#34;testing.(*benchContext).processBench -&gt; testing.(*B).doBench (3.11s)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;485&#34; y=&#34;-722.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 3.11s&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N35&amp;#45;&amp;gt;N2 --&gt;
&lt;g id=&#34;edge6&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N35-&amp;gt;N2&lt;/title&gt;
&lt;g id=&#34;a_edge6&#34;&gt;&lt;a xlink:title=&#34;testing.runBenchmarks -&gt; testing.(*B).runN (3.11s)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b22b00&#34; stroke-width=&#34;2&#34; d=&#34;M468,-1230.683C468,-1218.1876 468,-1201.2931 468,-1186.542&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b22b00&#34; stroke=&#34;#b22b00&#34; stroke-width=&#34;2&#34; points=&#34;471.5001,-1186.2732 468,-1176.2733 464.5001,-1186.2733 471.5001,-1186.2732&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge6-label&#34;&gt;&lt;a xlink:title=&#34;testing.runBenchmarks -&gt; testing.(*B).runN (3.11s)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;485&#34; y=&#34;-1197.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 3.11s&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;!-- N36&amp;#45;&amp;gt;N11 --&gt;
&lt;g id=&#34;edge7&#34; class=&#34;edge&#34;&gt;
&lt;title&gt;N36-&amp;gt;N11&lt;/title&gt;
&lt;g id=&#34;a_edge7&#34;&gt;&lt;a xlink:title=&#34;testing.runBenchmarks.func1 -&gt; testing.(*B).Run (3.11s)&#34;&gt;
&lt;path fill=&#34;none&#34; stroke=&#34;#b22b00&#34; stroke-width=&#34;2&#34; d=&#34;M468,-1036.9663C468,-1024.9427 468,-1009.8283 468,-996.4785&#34;&gt;&lt;/path&gt;
&lt;polygon fill=&#34;#b22b00&#34; stroke=&#34;#b22b00&#34; stroke-width=&#34;2&#34; points=&#34;471.5001,-996.2433 468,-986.2433 464.5001,-996.2433 471.5001,-996.2433&#34;&gt;&lt;/polygon&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;g id=&#34;a_edge7-label&#34;&gt;&lt;a xlink:title=&#34;testing.runBenchmarks.func1 -&gt; testing.(*B).Run (3.11s)&#34;&gt;
&lt;text text-anchor=&#34;middle&#34; x=&#34;485&#34; y=&#34;-1007.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 3.11s&lt;/text&gt;
&lt;/a&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;/g&gt;
&lt;/g&gt;&lt;/svg&gt;
&lt;/div&gt;

&lt;h4 id=&#34;3-5-7-쓰레드-생성-프로파일링&#34;&gt;3.5.7 쓰레드 생성 프로파일링&lt;/h4&gt;

&lt;p&gt;Go 1.11(?)은 운영체제 쓰레드 작성 프로파일링에 대한 지원이 추가되었습니다.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;쓰레드 작성 프로파일 링을 godoc에 추가하고 프로파일링 결과인 &lt;code&gt;godoc -http=:8080 -index&lt;/code&gt;를 살펴보세요.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h4 id=&#34;3-5-8-프레임-포인터&#34;&gt;3.5.8 프레임 포인터&lt;/h4&gt;

&lt;p&gt;Go 1.7이 출시되었으며 amd64용 새 컴파일러와 함께 컴파일러는 기본적으로 프레임 포인터를 활성화합니다.&lt;/p&gt;

&lt;p&gt;프레임 포인터는 항상 현재 스택 프레임의 상단을 가리키는 레지스터입니다.&lt;/p&gt;

&lt;p&gt;프레임 포인터를 사용하면 &lt;code&gt;gdb(1)&lt;/code&gt; 및 &lt;code&gt;perf(1)&lt;/code&gt;와 같은 도구가 Go 호출 스택을 이해할 수 있습니다.&lt;/p&gt;

&lt;p&gt;이 워크샵에서는 이러한 도구를 다루지 않지만 Go 프로그램을 프로파일 링하는 7가지 방법에 대해 발표한 프레젠테이션을 읽고 볼 수 있습니다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://talks.godoc.org/github.com/davecheney/presentations/seven.slide&#34; target=&#34;_blank&#34;&gt;Go 프로그램을 프로파일링하는 7가지 방법&lt;/a&gt; (슬라이드)&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.youtube.com/watch?v=2h_NFBFrciI&#34; target=&#34;_blank&#34;&gt;Go 프로그램을 프로파일링하는 7가지 방법&lt;/a&gt; (비디오, 30분)&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.bigmarker.com/remote-meetup-go/Seven-ways-to-profile-a-Go-program&#34; target=&#34;_blank&#34;&gt;Go 프로그램을 프로파일링하는 7가지 방법&lt;/a&gt; (웹캐스트, 60분)&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&#34;3-5-9-연습문제&#34;&gt;3.5.9 연습문제&lt;/h4&gt;

&lt;p&gt;잘 알고 있는 코드 조각에서 프로파일을 생성합니다. 코드 샘플이 없으면 &lt;code&gt;godoc&lt;/code&gt;을 프로파일링해 봅니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;% go get golang.org/x/tools/cmd/godoc
% &lt;span class=&#34;nb&#34;&gt;cd&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$GOPATH&lt;/span&gt;/src/golang.org/x/tools/cmd/godoc
% vim main.go&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;한 머신에서 프로필을 생성하고 다른 머신에서 검사하려면 어떻게 해야할까요?&lt;/p&gt;

&lt;h2 id=&#34;4-컴파일러-최적화&#34;&gt;4. 컴파일러 최적화&lt;/h2&gt;

&lt;p&gt;이 섹션에서는 Go 컴파일러가 수행하는 최적화 중 일부를 다룹니다.&lt;/p&gt;

&lt;p&gt;예를 들면 다음과 같습니다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;이스케이프 분석&lt;/li&gt;
&lt;li&gt;인라인&lt;/li&gt;
&lt;li&gt;데드 코드 제거&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;코드는 여전히 AST 형식이지만, 컴파일러의 프론트 엔드에서 모두 처리됩니다. 그런 다음 코드는 SSA 컴파일러로 전달되어 더욱 최적화됩니다.&lt;/p&gt;

&lt;h3 id=&#34;4-1-go-컴파일러의-역사&#34;&gt;4.1 Go 컴파일러의 역사&lt;/h3&gt;

&lt;p&gt;Go 컴파일러는 2007년경 Plan9 컴파일러 툴 체인의 포크로 시작했습니다. 당시 컴파일러는 아호(Aho)나 울만(Ullman)의 &lt;a href=&#34;https://www.goodreads.com/book/show/112269.Principles_of_Compiler_Design&#34; target=&#34;_blank&#34;&gt;드래곤북(Principles of Compiler Design)&lt;/a&gt;과 매우 닯아 있습니다.&lt;/p&gt;

&lt;p&gt;2015년 당시 Go 1.5 컴파일러는 기계적으로 &lt;a href=&#34;https://golang.org/doc/go1.5#c&#34; target=&#34;_blank&#34;&gt;C에서 Go&lt;/a&gt;로 변환되었습니다.&lt;/p&gt;

&lt;p&gt;1 년 후, Go 1.7은 &lt;a href=&#34;https://en.wikipedia.org/wiki/Static_single_assignment_form&#34; target=&#34;_blank&#34;&gt;SSA&lt;/a&gt; 기술을 기반으로 한 &lt;a href=&#34;https://blog.golang.org/go1.7&#34; target=&#34;_blank&#34;&gt;새로운 컴파일러 백엔드&lt;/a&gt;를 도입하여 이전의 Plan 9 스타일 코드 생성을 대체했습니다. 이 새로운 백엔드는 일반 및 아키텍처별 최적화에 대한 많은 기회를 제공했습니다.&lt;/p&gt;

&lt;h3 id=&#34;4-2-이스케이프-분석-escape-analysis&#34;&gt;4.2 이스케이프 분석 (Escape analysis)&lt;/h3&gt;

&lt;p&gt;우리가 논의하고자 하는 첫 번째 최적화는 이스케이프 분석입니다.&lt;/p&gt;

&lt;p&gt;이스케이프 분석이 무엇을 하는 것인지 보여 주려면, Go 스펙에 힙이나 스택이 언급되어 있지 않음을 상기하셔야 합니다. 도입부에서 언어가 가비지 콜렉트된다는 것을 언급할 뿐, 이것이 어떻게 이루어지는지에 대한 힌트는 주지 않습니다.&lt;/p&gt;

&lt;p&gt;Go 스펙을 준수하는 Go 구현은 모든 할당을 힙에 저장할 수 있습니다. 그렇게 되면 가비지 컬렉터에 큰 부담이 되겠지만, 잘못된 것은 아닙니다. 몇 년 동안, gccgo는 이스케이프 분석에 대한 지원이 매우 제한적이었으므로 힙 모드에서 효과적으로 작동하는 것으로 간주될 수 있습니다.&lt;/p&gt;

&lt;p&gt;그러나 고루틴의 스택은 지역 변수를 저장하는데 값싼 장소입니다. 왜냐하면 스택에 대해서 가비지 콜렉션할 필요가 없기 때문입니다. 따라서 스택에 저장하는 것이 안전한 경우, 스택에 할당하는 것이 더 효율적입니다.&lt;/p&gt;

&lt;p&gt;일부 언어, 예를 들면 C 및 C ++에서, 스택 또는 힙 할당을 선택하는 것은 프로그래머의 수작업이었습니다. 힙 할당은 &lt;code&gt;malloc&lt;/code&gt;과 &lt;code&gt;free&lt;/code&gt;로 이루어지고 무료이며 스택 할당은 &lt;code&gt;alloca&lt;/code&gt;를 통해 이루어집니다. 이러한 메커니즘을 사용해서 발생하는 실수가 메모리 손상 버그의 흔한 원인입니다.&lt;/p&gt;

&lt;p&gt;Go에서는, 컴파일러가 함수 호출의 라이프 사이클보다 오래 존재하는 값은 힙에 자동적으로 이동시킵니다. 이를 값이 힙으로 빠져나갔다(이스케이프되었다)고 말합니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-golang&#34; data-lang=&#34;golang&#34;&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Foo&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;d&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;NewFoo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Foo&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Foo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;d&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;7&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이 예제에서 &lt;code&gt;NewFoo&lt;/code&gt;에 할당된 &lt;code&gt;Foo&lt;/code&gt;는 힙으로 이동하여 &lt;code&gt;NewFoo&lt;/code&gt;가 반환된 후에도 내용이 유효하게 유지됩니다.&lt;/p&gt;

&lt;p&gt;이것은 Go의 초기 시절부터 존재했습니다. 자동 수정 기능만큼의 최적화는 아닙니다. Go에서 실수로 스택에 할당된 변수의 주소를 반환할 수 없습니다.&lt;/p&gt;

&lt;p&gt;그러나 컴파일러는 그 반대로 할 수도 있습니다. 힙에 할당된 것으로 추정되는 것을 찾아 스택으로 옮길 수 있습니다.&lt;/p&gt;

&lt;p&gt;예제를 살펴보겠습니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-golang&#34; data-lang=&#34;golang&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Sum&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;kd&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;count&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;numbers&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;make&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;count&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;range&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;numbers&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;numbers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

	&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;sum&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;range&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;numbers&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;sum&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;sum&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;answer&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Sum&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;answer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Sum은 1과 100 사이에 &lt;code&gt;int&lt;/code&gt;를 더하고 결과를 반환합니다.&lt;/p&gt;

&lt;p&gt;숫자 slice는 Sum 내에서만 참조되므로, 컴파일러는 해당 슬라이스에 대한 100개의 정수를 힙이 아닌 스택에 저장합니다. 가비지 콜렉트할 &lt;code&gt;numbers&lt;/code&gt;가 필요 없습니다. &lt;code&gt;Sum&lt;/code&gt;이 반환될 때 자동으로 해제됩니다.&lt;/p&gt;

&lt;h4 id=&#34;4-2-1-증명하기&#34;&gt;4.2.1 증명하기&lt;/h4&gt;

&lt;p&gt;컴파일러 이스케이프 분석 디시즌을 출력하려면, &lt;code&gt;-m&lt;/code&gt; 플래그를 사용합니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;% go build -gcflags&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;-m examples/esc/sum.go
&lt;span class=&#34;c1&#34;&gt;# command-line-arguments
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;examples/esc/sum.go:22:13: inlining call to fmt.Println
examples/esc/sum.go:8:17: Sum make&lt;span class=&#34;o&#34;&gt;([]&lt;/span&gt;int, count&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; does not escape
examples/esc/sum.go:22:13: answer escapes to heap
examples/esc/sum.go:22:13: io.Writer&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;os.Stdout&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; escapes to heap
examples/esc/sum.go:22:13: main &lt;span class=&#34;o&#34;&gt;[]&lt;/span&gt;interface &lt;span class=&#34;o&#34;&gt;{}&lt;/span&gt; literal does not escape
&amp;lt;autogenerated&amp;gt;:1: os.&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;*File&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;.close .this does not escape&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;8행은 컴파일러가 &lt;code&gt;make ([] int, 100)&lt;/code&gt;의 결과가 힙으로 이스케이프되지 않음을 올바르게 추론했음을 보여줍니다.&lt;/p&gt;

&lt;p&gt;22번 째 줄은 &lt;code&gt;answer&lt;/code&gt;가 힙으로 이스케이프되었다고 보고하는데 &lt;code&gt;fmt.Println&lt;/code&gt;은 가변적(variadic) 함수입니다. 가변적 함수에 대한 매개 변수는 Slice로 박싱됩니다, 이 경우에는 &lt;code&gt;[]interface {}&lt;/code&gt;입니다. 그래서 &lt;code&gt;answer&lt;/code&gt;는 인터페이스 값으로 배치됩니다. 왜냐하면 &lt;code&gt;fmt.Println&lt;/code&gt; 호출에 의해 참조되기 때문입니다.  Go 1.6부터 가비지 콜렉터는 인터페이스를 통해 전달된 모든 값이 포인터가 되어야하므로 컴파일러가 보는 관점은 대략 다음과 같습니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-golang&#34; data-lang=&#34;golang&#34;&gt;&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;answer&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Sum&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([]&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;interface&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;answer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;...&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이는 다음과 같이= &lt;code&gt;-gcflags=&amp;quot;-m -m&amp;quot;&lt;/code&gt; 플래그를 사용해서 확인할 수 있습니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;% go build -gcflags&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;-m -m&amp;#39;&lt;/span&gt; examples/esc/sum.go &lt;span class=&#34;m&#34;&gt;2&lt;/span&gt;&amp;gt;&lt;span class=&#34;p&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; grep sum.go:22
examples/esc/sum.go:22:13: inlining call to fmt.Println func&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;...interface &lt;span class=&#34;o&#34;&gt;{})&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;int, error&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; fmt.Fprintln&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;io.Writer&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;os.Stdout&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;, fmt.a...&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
examples/esc/sum.go:22:13: answer escapes to heap
examples/esc/sum.go:22:13:      from ~arg0 &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;assign-pair&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; at examples/esc/sum.go:22:13
examples/esc/sum.go:22:13: io.Writer&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;os.Stdout&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; escapes to heap
examples/esc/sum.go:22:13:      from io.Writer&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;os.Stdout&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;passed to call&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;argument escapes&lt;span class=&#34;o&#34;&gt;])&lt;/span&gt; at examples/esc/sum.go:22:13
examples/esc/sum.go:22:13: main &lt;span class=&#34;o&#34;&gt;[]&lt;/span&gt;interface &lt;span class=&#34;o&#34;&gt;{}&lt;/span&gt; literal does not escape&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;요약하자면, 22번 째 줄은 걱정하지 않아도 됩니다. 이번 논의에서 중요하지 않습니다.&lt;/p&gt;

&lt;h4 id=&#34;4-2-2-연습문제&#34;&gt;4.2.2 연습문제&lt;/h4&gt;

&lt;ul&gt;
&lt;li&gt;이 최적화가 모든 &lt;code&gt;count&lt;/code&gt; 값에 참일까요?&lt;/li&gt;
&lt;li&gt;&lt;code&gt;count&lt;/code&gt;가 상수가 아닌 변수인 경우, 이 최적화가 참일까요?&lt;/li&gt;
&lt;li&gt;&lt;code&gt;count&lt;/code&gt;가 &lt;code&gt;Sum&lt;/code&gt;의 매개변수인 경우, 이 최적화가 참일까요?&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&#34;4-2-3-이스케이프-분석-계속&#34;&gt;4.2.3 이스케이프 분석 (계속)&lt;/h4&gt;

&lt;p&gt;이 예제는 약간 인위적인 예제입니다. 실제 코드가 아니라 예제일 뿐입니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-golang&#34; data-lang=&#34;golang&#34;&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Point&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;X&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Y&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Width&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;640&lt;/span&gt;
&lt;span class=&#34;kd&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Height&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;480&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Center&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;p&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Point&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;X&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Width&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Y&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Height&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;NewPoint&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;p&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;new&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Point&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;Center&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;X&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Y&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;NewPoint&lt;/code&gt;는 새 &lt;code&gt;*Point&lt;/code&gt; 값 &lt;code&gt;p&lt;/code&gt;를 생성합니다. &lt;code&gt;p&lt;/code&gt;를 스크린 중앙의 좌표로 이동시키는 &lt;code&gt;Center&lt;/code&gt; 함수로 전달합니다. 마지막으로 &lt;code&gt;p.X&lt;/code&gt; 와 &lt;code&gt;p.Y&lt;/code&gt;를 출력합니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;% go build -gcflags&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;-m examples/esc/center.go
&lt;span class=&#34;c1&#34;&gt;# command-line-arguments
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;examples/esc/center.go:11:6: can inline Center
examples/esc/center.go:18:8: inlining call to Center
examples/esc/center.go:19:13: inlining call to fmt.Println
examples/esc/center.go:11:13: Center p does not escape
examples/esc/center.go:19:15: p.X escapes to heap
examples/esc/center.go:19:20: p.Y escapes to heap
examples/esc/center.go:19:13: io.Writer&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;os.Stdout&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; escapes to heap
examples/esc/center.go:17:10: NewPoint new&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;Point&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; does not escape
examples/esc/center.go:19:13: NewPoint &lt;span class=&#34;o&#34;&gt;[]&lt;/span&gt;interface &lt;span class=&#34;o&#34;&gt;{}&lt;/span&gt; literal does not escape
&amp;lt;autogenerated&amp;gt;:1: os.&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;*File&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;.close .this does not escape&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;p&lt;/code&gt;가 &lt;code&gt;new&lt;/code&gt; 함수로 할당 되었더라도, 참조가 없는 &lt;code&gt;p&lt;/code&gt;가 &lt;code&gt;Center&lt;/code&gt; 함수를 이스케이프하지 않기 때문에, &lt;code&gt;p&lt;/code&gt;가 힙에 저장되지 않습니다.&lt;/p&gt;

&lt;p&gt;질문: 19행은 어떤가요? &lt;code&gt;p&lt;/code&gt;가 이스케이프되지 않으면, 힙으로 이스케이프되는 건 무엇일까요?&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;Sum&lt;/code&gt;이 할당되지 않도록 벤치마크를 작성해보세요&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&#34;4-3-인라이닝&#34;&gt;4.3 인라이닝&lt;/h3&gt;

&lt;p&gt;Go 함수에서 호출은 고정된 오버헤드를 가지는데, 스택 및 선점(preemption)을 체크합니다.&lt;/p&gt;

&lt;p&gt;이 중 일부는 하드웨어 분기 예측 변수에 의해 개선되지만, 함수 크기와 클럭 주기에 있어서는 여전히 비용이 듭니다.&lt;/p&gt;

&lt;p&gt;인라이닝은 이러한 비용을 피하는 고전적인 최적화입니다.&lt;/p&gt;

&lt;p&gt;Go 1.11 인라이닝이 오직 리프 함수에만 작용하기 전까지는, 함수는 다른 함수를 호출하지 않습니다. 이에 대한 정당성은 다음과 같습니다.&lt;/p&gt;

&lt;p&gt;만약 함수가 많은 일을 한다면, 프리앰블 오버헤드는 무시할 수 있습니다. 이는 함수가 특정 크기를 초과하는 이유입니다. (현재 일부 명령어 카운트와 추가로 인라이닝을 방지하는 몇 가지 작업을 합쳐서입니다. (예: Go 1.7 이전 스위치))&lt;/p&gt;

&lt;p&gt;반면에 작은 함수는 상대적으로 적은 양의 유용한 작업을 수행하기 위해 고정된 오버헤드를 지불합니다. 가장 많은 혜택을 받기 때문에 이들이 인라이닝 타겟이 되는 함수들입니다.&lt;/p&gt;

&lt;p&gt;또 다른 이유는 인라인이 많으면, 스택 트레이싱을 따라가기가 어렵습니다.&lt;/p&gt;

&lt;h4 id=&#34;4-3-1-인라이닝-예제&#34;&gt;4.3.1 인라이닝 (예제)&lt;/h4&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-golang&#34; data-lang=&#34;golang&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Max&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;F&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;kd&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;20&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Max&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nb&#34;&gt;panic&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;다시 &lt;code&gt;-gcflags = -m&lt;/code&gt; 플래그를 사용하여 컴파일러 최적화 디시즌을 살펴봅시다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;% go build -gcflags&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;-m examples/inl/max.go
&lt;span class=&#34;c1&#34;&gt;# command-line-arguments
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;examples/inl/max.go:4:6: can inline Max
examples/inl/max.go:11:6: can inline F
examples/inl/max.go:13:8: inlining call to Max
examples/inl/max.go:20:6: can inline main
examples/inl/max.go:21:3: inlining call to F
examples/inl/max.go:21:3: inlining call to Max&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;컴파일러는 두 줄을 출력했습니다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;첫 번째는 3행에서, &lt;code&gt;Max&lt;/code&gt; 선언은 인라인 될 수 있음을 알려줍니다.&lt;/li&gt;
&lt;li&gt;두 번째는 &lt;code&gt;Max&lt;/code&gt;의 본문이 12행에서 발신자에게 인라인되었다고 보고합니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;//go:noinline&lt;/code&gt; 주석을 사용하지 않고 &lt;code&gt;Max&lt;/code&gt;를 다시 작성하여 올바른 답을 여전히 리턴하지만 더 이상 컴파일러가 인라인될 수 있다고 간주하지 않도록 해봅시다.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&#34;4-3-2-인라인은-어떻게-생겼나요&#34;&gt;4.3.2 인라인은 어떻게 생겼나요?&lt;/h3&gt;

&lt;p&gt;&lt;code&gt;max.go&lt;/code&gt;를 컴파일하고 &lt;code&gt;F()&lt;/code&gt;의 최적화된 버전을 봅시다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;% go build -gcflags&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;-S examples/inl/max.go &lt;span class=&#34;m&#34;&gt;2&lt;/span&gt;&amp;gt;&lt;span class=&#34;p&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; grep -A5 &lt;span class=&#34;s1&#34;&gt;&amp;#39;&amp;#34;&amp;#34;.F STEXT&amp;#39;&lt;/span&gt;
&lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;.F STEXT nosplit &lt;span class=&#34;nv&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;2&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;args&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;0x0 &lt;span class=&#34;nv&#34;&gt;locals&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;0x0
        0x0000 &lt;span class=&#34;m&#34;&gt;00000&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;/Users/dfc/devel/high-performance-go-workshop/examples/inl/max.go:11&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;     TEXT    &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;.F&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;SB&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;, NOSPLIT&lt;span class=&#34;p&#34;&gt;|&lt;/span&gt;ABIInternal, &lt;span class=&#34;nv&#34;&gt;$0&lt;/span&gt;-0
        0x0000 &lt;span class=&#34;m&#34;&gt;00000&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;/Users/dfc/devel/high-performance-go-workshop/examples/inl/max.go:11&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;     FUNCDATA        &lt;span class=&#34;nv&#34;&gt;$0&lt;/span&gt;, gclocals·33cdeccccebe80329f1fdbee7f5874cb&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;SB&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
        0x0000 &lt;span class=&#34;m&#34;&gt;00000&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;/Users/dfc/devel/high-performance-go-workshop/examples/inl/max.go:11&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;     FUNCDATA        &lt;span class=&#34;nv&#34;&gt;$1&lt;/span&gt;, gclocals·33cdeccccebe80329f1fdbee7f5874cb&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;SB&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
        0x0000 &lt;span class=&#34;m&#34;&gt;00000&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;/Users/dfc/devel/high-performance-go-workshop/examples/inl/max.go:11&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;     FUNCDATA        &lt;span class=&#34;nv&#34;&gt;$3&lt;/span&gt;, gclocals·33cdeccccebe80329f1fdbee7f5874cb&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;SB&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
        0x0000 &lt;span class=&#34;m&#34;&gt;00000&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;/Users/dfc/devel/high-performance-go-workshop/examples/inl/max.go:13&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;     PCDATA  &lt;span class=&#34;nv&#34;&gt;$2&lt;/span&gt;, &lt;span class=&#34;nv&#34;&gt;$0&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이는 Max가 인라인되었을 때 F의 바디입니다. 이 함수에는 아무 일도 일어나지 않습니다. 쓸데없이 화면에 텍스트가 많이 나오는 건 알고 있지만, 제 말을 믿으세요. 일어나는 한가지 일은 RET뿐입니다. 실제로 F는 다음과 같이 되었습니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-golang&#34; data-lang=&#34;golang&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;F&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;FUNCDATA와 PCDATA가 무엇인가요?
&lt;code&gt;-S&lt;/code&gt;의 출력은 바이너리로 들어가는 최종 기계 코드가 아닙니다. 링커는 최종 링크 단계에서 일부 처리를 수행합니다. &lt;code&gt;FUNCDATA&lt;/code&gt; 및 &lt;code&gt;PCDATA&lt;/code&gt;와 같은 줄은 연결시 다른 곳으로 이동하는 가비지 콜렉터의 메타 데이터입니다. &lt;code&gt;-S&lt;/code&gt;의 출력을 읽을 때 &lt;code&gt;FUNCDATA&lt;/code&gt; 및 &lt;code&gt;PCDATA&lt;/code&gt; 행은 그냥 무시하세요. 그들은 최종 바이너리의 일부가 아니니깐요.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h4 id=&#34;4-3-3-논의&#34;&gt;4.3.3 논의&lt;/h4&gt;

&lt;p&gt;&lt;code&gt;F()&lt;/code&gt;에서 왜 &lt;code&gt;a&lt;/code&gt;와 &lt;code&gt;b&lt;/code&gt;를 상수로 선언했을까요?&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;a&lt;/code&gt;와 &lt;code&gt;b&lt;/code&gt;가 변수로 선언되면 어떻게 될까요? a와 b가 매개변수로 F()에 전달되면 어떻게 될까요?&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;br/&gt;
&amp;gt; &lt;code&gt;-gcflags = -S&lt;/code&gt;는 작업 디렉토리에 최종 바이너리가 빌드되는 것을 막지 않습니다. 이후의 &lt;code&gt;go build..&lt;/code&gt; 실행으로 출력이 생성되지 않으면 작업 디렉토리에서 &lt;code&gt;./max&lt;/code&gt; 바이너리를 삭제하세요&lt;/p&gt;

&lt;h4 id=&#34;4-3-4-인라이닝-레벨-조정&#34;&gt;4.3.4 인라이닝 레벨 조정&lt;/h4&gt;

&lt;p&gt;인라인 레벨 조정은 &lt;code&gt;-gcflags = -l&lt;/code&gt; 플래그를 사용하여 수행됩니다. 다소 혼란스럽지만, 단일 &lt;code&gt;-l&lt;/code&gt;을 전달하면 인라인이 비활성화되고 더 공격적인 설정에서 둘 이상이 전달하면 인라인이 활성화됩니다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-gcflags = -l&lt;/code&gt;, 인라인 비활성화&lt;/li&gt;
&lt;li&gt;전달하지 않음, 보통 인라이닝&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-gcflags = &#39;-l -l&#39;&lt;/code&gt;인라인 레벨 2, 더 공격적이며, 더 빨라질 수 있으며, 더 큰 바이너리를 만들 수 있습니다.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-gcflags = &#39;-l -l -l&#39;&lt;/code&gt; 인라인 레벨 3, 좀 더 공격적이며, 확실히 더 큰 바이너리를 만들고, 좀 더 빠를 수 있지만 버그가 있을 수 있습니다.&lt;/li&gt;
&lt;li&gt;- Go 1.11의 &lt;code&gt;-gcflags = -l = 4&lt;/code&gt; (4 개의 &lt;code&gt;-l&lt;/code&gt;s)는 실험적인 중간 스택 인라인 최적화를 가능하게합니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&#34;4-3-5-중간-스택-인라이닝&#34;&gt;4.3.5 중간 스택 인라이닝&lt;/h4&gt;

&lt;p&gt;Go 1.12부터 소위 중간 스택 인라이닝이 활성화되었습니다 (Go 1.11의 미리보기에서 &lt;code&gt;-gcflags=&#39;-l -l -l&#39;&lt;/code&gt; 플래그로 이전에 사용할 수 있었습니다.)&lt;/p&gt;

&lt;p&gt;이전 예에서 중간 스택의 인라이닝 예제를 볼 수 있습니다. Go 1.11 및 이전 &lt;code&gt;F&lt;/code&gt;는 리프 함수가 아니었습니다. max라고 하죠. 그러나 개선된 &lt;code&gt;F&lt;/code&gt; 인라이닝으로 인해 F는 이제 호출자에게 인라이닝됩니다. 이것은 두 가지 이유입니다. &lt;code&gt;max&lt;/code&gt;가 &lt;code&gt;F&lt;/code&gt;에 인라인딩되면, &lt;code&gt;F&lt;/code&gt;는 다른 함수 호출을 포함하지 않으므로, 복잡성 예산(complexity budget)을 초과하지 않았다고 가정한다면, 잠재적 리프 함수가 됩니다. 왜냐하면 F는 단순한 함수이기 때문입니다. 즉, 인라이닝과 데드 코드 제거로 복잡성 예산(complexity budget)의 많은 부분이 제거되었기 때문에, 최대 호출에 관계없이 중간 스택에서 실행할 수 있습니다.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;중간 스택 인라이닝을 사용하면 함수의 빠른 경로를 인라인화하여 고속 경로에서 함수 호출 오버헤드를 제거할 수 있습니다. Go 1.13에 착지한 이 최근 CL은 &lt;code&gt;sync.RWMutex.Unlock()&lt;/code&gt; 적용된 이 기술을 보여줍니다.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;더 읽을거리&lt;/strong&gt;
- &lt;a href=&#34;https://docs.google.com/presentation/d/1Wcblp3jpfeKwA0Y4FOmj63PW52M_qmNqlQkNaLj0P5o/edit#slide=id.p&#34; target=&#34;_blank&#34;&gt;David Lazar의 Go 컴파일러 프레젠테이션의 중간 스택 인라인&lt;/a&gt;
- &lt;a href=&#34;https://github.com/golang/proposal/blob/master/design/19348-midstack-inlining.md&#34; target=&#34;_blank&#34;&gt;Go 컴파일러에서 중간 스택 인라니닝&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&#34;4-4-데드-코드-제거&#34;&gt;4.4 데드 코드 제거&lt;/h3&gt;

&lt;p&gt;&lt;code&gt;a&lt;/code&gt;와 &lt;code&gt;b&lt;/code&gt;가 상수라는 것이 왜 중요할까요?&lt;/p&gt;

&lt;p&gt;어떤 일이 발생했는지 이해하기 위해 컴파일러에서 &lt;code&gt;Max&lt;/code&gt;를 &lt;code&gt;F&lt;/code&gt;로 인라인으로 설정한 후 무엇을 발생하는지 보겠습니다. 컴파일러로부터 이를 쉽게 얻을 수는 없지만, 손으로 직접 하는 것이 좋습니다.&lt;/p&gt;

&lt;p&gt;이전:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-golang&#34; data-lang=&#34;golang&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Max&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;F&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;kd&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;20&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Max&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nb&#34;&gt;panic&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이후:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-golang&#34; data-lang=&#34;golang&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;F&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;kd&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;20&lt;/span&gt;
	&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;result&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;result&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;result&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;result&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nb&#34;&gt;panic&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;a&lt;/code&gt;와 &lt;code&gt;b&lt;/code&gt;는 상수이므로 컴파일시에 분기가 절대 거짓이 아님을 증명할 수 있습니다. &lt;code&gt;100&lt;/code&gt;은 항상 &lt;code&gt;20&lt;/code&gt;보다 큽니다. 따라서 컴파일러는 F를 더욱 최적화할 수 있습니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-golang&#34; data-lang=&#34;golang&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;F&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;kd&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;20&lt;/span&gt;
	&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;result&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;result&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;result&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;result&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nb&#34;&gt;panic&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이제 분기 결과를 알게 되면 결과의 내용도 알게 됩니다. 이것은 호출 분기 제거입니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-golang&#34; data-lang=&#34;golang&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;F&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;kd&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;20&lt;/span&gt;
        &lt;span class=&#34;kd&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;result&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;result&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
                &lt;span class=&#34;nb&#34;&gt;panic&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이제 분기가 제거되어 결과가 항상 a와 같다는 것을 알 수 있으며 a가 상수이기 때문에 결과가 상수라는 것을 알 수 있습니다. 컴파일러는 이 증명을 두 번째 브랜치에 적용합니다&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-golang&#34; data-lang=&#34;golang&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;F&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;kd&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;20&lt;/span&gt;
        &lt;span class=&#34;kd&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;result&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;false&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
                &lt;span class=&#34;nb&#34;&gt;panic&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;그리고 다시 분기 제거를 사용하여 최종 형태 F로 줄입니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-golang&#34; data-lang=&#34;golang&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;F&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;kd&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;20&lt;/span&gt;
        &lt;span class=&#34;kd&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;result&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;그리고 마지막으로&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-golang&#34; data-lang=&#34;golang&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;F&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id=&#34;4-4-1-데드-코드-제거&#34;&gt;4.4.1 데드 코드 제거&lt;/h4&gt;

&lt;p&gt;분기 제거는 데드 코드 제거로 알려진 최적화 범주 중 하나입니다. 실제로 정적 증거(static proofs)를 사용하여 코드 조각에 도달할 수 없거나 죽은 것으로 알려져 있으므로 최종 바이너리에서 컴파일, 최적화 또는 생성할 필요가 없습니다.&lt;/p&gt;

&lt;p&gt;데드 코드 제거가 인라인과 함께 작동하여 도달할 수 없는 것으로 입증된 루프와 분기를 제거하여 생성된 된 코드의 양을 줄이는 방법을 보았습니다.&lt;/p&gt;

&lt;p&gt;이를 활용하여 고가의 디버깅을 구현하고 숨길 수 있습니다&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-golang&#34; data-lang=&#34;golang&#34;&gt;&lt;span class=&#34;kd&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;debug&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;false&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;빌드 태그와 함께 사용하면 매우 유용해질 수 있습니다.&lt;/p&gt;

&lt;h4 id=&#34;4-4-2-더-읽을거리&#34;&gt;4.4.2 더 읽을거리&lt;/h4&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://dave.cheney.net/2014/09/28/using-build-to-switch-between-debug-and-release&#34; target=&#34;_blank&#34;&gt;Using // +build to switch between debug and release builds&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://dave.cheney.net/2013/10/12/how-to-use-conditional-compilation-with-the-go-build-tool&#34; target=&#34;_blank&#34;&gt;How to use conditional compilation with the go build tool&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;4-5-컴파일러-플래그-연습문제&#34;&gt;4.5 컴파일러 플래그 연습문제&lt;/h3&gt;

&lt;p&gt;컴파일러 플래그는 다음과 같이 주어집니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;go build -gcflags&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$FLAGS&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;아래 컴파일러 기능들의 동작을 살펴봅시다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-S&lt;/code&gt;는 컴파일할 패키지의 (Go Flavoured) 어셈블리를 출력합니다.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-l&lt;/code&gt;은 인라이너의 동작을 제어합니다. &lt;code&gt;-l&lt;/code&gt;은 인라이닝을 비활성화하고 &lt;code&gt;-l -l&lt;/code&gt;은 인라이닝 코드에 대한 컴파일러의 식욕을 자극합니다. 컴파일 시간, 프로그램 크기 및 실행 시간의 차이를 실험할 수 있습니다.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-m은&lt;/code&gt; 인라이닝, 이스케이프 분석과 같은 디시즌을 제어합니다. &lt;code&gt;-m-m&lt;/code&gt;은 컴파일러가 생각하고 있는 것들을 자세히 출력합니다.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-l -N&lt;/code&gt;은 모든 최적화를 비활성화합니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
&lt;p&gt;이후의 &lt;code&gt;go build..&lt;/code&gt; 실행으로 출력이 생성되지 않으면, 작업 디렉토리에서 &lt;code&gt;./max&lt;/code&gt; 바이너리를 삭제하세요&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h4 id=&#34;4-5-1-더-읽을거리&#34;&gt;4.5.1 더 읽을거리&lt;/h4&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://go-talks.appspot.com/github.com/rakyll/talks/gcinspect/talk.slide#1&#34; target=&#34;_blank&#34;&gt;Codegen Inspection by Jaana Burcu Dogan&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;4-6-바운드-체크-제거&#34;&gt;4.6 바운드 체크 제거&lt;/h3&gt;

&lt;p&gt;Go는 바운드 체크 언어입니다. 즉, 배열 및 슬라이스 구독 동작이 해당 타입의 범위 내에 있는지 확인한다는 것을 뜻합니다.&lt;/p&gt;

&lt;p&gt;배열의 경우, 컴파일 타임에 수행할 수 있습니다. 슬라이스의 경우, 런타임에 수행해야 합니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-golang&#34; data-lang=&#34;golang&#34;&gt;&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;v&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;make&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;9&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;A&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;B&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;C&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;D&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;E&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;F&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;G&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;H&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;I&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;BenchmarkBoundsCheckInOrder&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;testing&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;B&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;N&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;A&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;v&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;B&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;v&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;C&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;v&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;D&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;v&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;E&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;v&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;F&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;v&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;G&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;v&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;H&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;v&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;7&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;I&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;v&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;8&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;-gcflags = -S&lt;/code&gt;를 사용해서 &lt;code&gt;BenchmarkBoundsCheckInOrder&lt;/code&gt;를 분해보세요. 루프당 몇 개의 바운드 체크 작업이 수행되나요?&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-golang&#34; data-lang=&#34;golang&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;BenchmarkBoundsCheckOutOfOrder&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;testing&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;B&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;N&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;I&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;v&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;8&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;A&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;v&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;B&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;v&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;C&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;v&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;D&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;v&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;E&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;v&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;F&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;v&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;G&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;v&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;H&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;v&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;7&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;A부터 I까지의 순서를 재정렬하면 어셈블리에 영향을 주어야 합니다. BenchmarkBoundsCheckOutOfOrder를 분석하고 찾아보세요&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h4 id=&#34;4-6-1-연습문제&#34;&gt;4.6.1 연습문제&lt;/h4&gt;

&lt;ul&gt;
&lt;li&gt;구독 연산의 순서를 재정렬하면 함수 크기에 영향을 주나요? 함수 속도에 영향을 주나요?&lt;/li&gt;
&lt;li&gt;v가 벤치마크 함수 내부로 이동하면 어떻게 될까요?&lt;/li&gt;
&lt;li&gt;v가 &lt;code&gt;var v[9] int?&lt;/code&gt; 배열로 선언되면 어떻게 될까요?&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;5-엑스큐션-트레이서&#34;&gt;5. 엑스큐션 트레이서&lt;/h2&gt;

&lt;p&gt;엑스큐션 트레이서는 Go 1.5때 &lt;a href=&#34;https://github.com/dvyukov&#34; target=&#34;_blank&#34;&gt;Dmitry Vyukov&lt;/a&gt;에 의해 개발되었으며, 몇 년 동안 문서화 및 활용률이 낮았습니다.&lt;/p&gt;

&lt;p&gt;샘플 기반 프로파일링과 달리 엑스큐션 트레이서는 Go 런타임에 통합되므로 특정 시점에서 Go 프로그램이 무엇을 하고 있는지 알 수 있을 뿐 아니라 그 이유도 알 수 있습니다.&lt;/p&gt;

&lt;h3 id=&#34;5-1-엑스큐션-트레이서란-무엇인가-왜-필요한가&#34;&gt;5.1 엑스큐션 트레이서란 무엇인가, 왜 필요한가&lt;/h3&gt;

&lt;p&gt;엑스큐션 트레이서가 무엇을 하는지 그리고 왜 중요한지를 설명하는 가장 쉬운 방법은 pprof &lt;code&gt;go tool pprof&lt;/code&gt;의 성능이 저하되는 코드 조각을 살펴보는 것인 듯 합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;examples/mandelbrot&lt;/code&gt; 디렉토리에는 간단한 만델브로트 생성기가 들어 있습니다. 이 코드는 &lt;a href=&#34;https://github.com/campoy/mandelbrot&#34; target=&#34;_blank&#34;&gt;프란체스 캄포이&lt;/a&gt;에서 따왔습니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span class=&#34;nb&#34;&gt;cd&lt;/span&gt; examples/mandelbrot
go build &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; ./mandelbrot&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&#34;https://dave.cheney.net/high-performance-go-workshop/images/mandelbrot.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;h3 id=&#34;5-1-1-얼마나-오래-걸리는가&#34;&gt;5.1.1 얼마나 오래 걸리는가&lt;/h3&gt;

&lt;p&gt;자, 1024 x 1024 픽셀의 이미지를 생성하는데 얼마나 오래 걸릴까요? 가장 간단한 방법은 &lt;code&gt;time(1)&lt;/code&gt;과 같은 것들을 사용하는 것입니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;% &lt;span class=&#34;nb&#34;&gt;time&lt;/span&gt; ./mandelbrot
real    0m1.654s
user    0m1.630s
sys     0m0.015s&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;time go run man&lt;/code&gt;을 사용하지 마세요. 그렇지 않으면 프로그램을 컴파일하고 실행하는데 걸리는 시간이 길어집니다.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&#34;5-1-2-프로그램은-무엇을-하고-있을까요&#34;&gt;5.1.2 프로그램은 무엇을 하고 있을까요&lt;/h3&gt;

&lt;p&gt;따라서, 이 예제에서 프로그램은 만델브로트를 생성하고 png에 쓰는 데 1.6 초가 걸렸습니다.&lt;/p&gt;

&lt;p&gt;괜찮나요? 더 빨리 만들 수 있을까요?&lt;/p&gt;

&lt;p&gt;질문에 대한 한 가지 답변은 Go 내장 pprof 지원을 사용하여 프로그램을 프로파일링하는 것이 될 수 있습니다.&lt;/p&gt;

&lt;p&gt;한번 해봅시다.&lt;/p&gt;

&lt;h2 id=&#34;5-2-프로파일링-생성&#34;&gt;5.2 프로파일링 생성&lt;/h2&gt;

&lt;p&gt;프로파일을 생성하려면 다음 중 하나를 선택해야 합니다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;runtime/pprof&lt;/code&gt; 패키지를 직접 사용합니다.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;github.com/pkg/profile&lt;/code&gt;과 같은 래퍼를 사용하여 자동화합니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;5-3-runtime-pprof-사용한-프로파일-생성&#34;&gt;5.3 runtime/pprof 사용한 프로파일 생성&lt;/h2&gt;

&lt;p&gt;마술이 없다는 것을 보여주기 위해 &lt;code&gt;os.Stdout&lt;/code&gt;에 CPU 프로파일을 쓰도록 프로그램을 수정해 봅시다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-golang&#34; data-lang=&#34;golang&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;runtime/pprof&amp;#34;&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;pprof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;StartCPUProfile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;os&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Stdout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;defer&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;pprof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;StopCPUProfile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이 코드를 main 함수의 맨 위에 추가하면 프로그램은 &lt;code&gt;os.Stdout&lt;/code&gt;에 프로파일을 작성합니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span class=&#34;nb&#34;&gt;cd&lt;/span&gt; examples/mandelbrot-runtime-pprof
go run mandelbrot.go &amp;gt; cpu.pprof&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;CPU 프로파일에는 컴파일이 아닌 &lt;code&gt;mandelbrot.go&lt;/code&gt;의 실행만 포함되므로 이 경우 &lt;code&gt;go run&lt;/code&gt;을 사용할 수 있습니다.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h4 id=&#34;5-3-1-github-com-pkg-profile-사용한-프로파일-생성&#34;&gt;5.3.1 github.com/pkg/profile 사용한 프로파일 생성&lt;/h4&gt;

&lt;p&gt;이전 슬라이드는 프로필을 생성하는 매우 저렴한 방법을 보여 주었지만 몇 가지 문제가 있습니다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;출력을 파일로 리디렉션하는 것을 잊어 버린 경우 해당 터미널 세션이 종료됩니다. 😞 (힌트 : &lt;code&gt;reset (1)&lt;/code&gt;은 여러분의 친구입니다)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;os.Stdout&lt;/code&gt;에 다른 것을 쓰면 (예 : fmt.Println) 디&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;code&gt;runtime/pprof&lt;/code&gt;를 사용하는 권장 방법은 트레이싱을 파일에 쓰는 것입니다. 하지만, 누군가가 ^C으로 프로그램을 중단시켰다면, 트레이싱이 멈춰 있는지, 그리고 프로그램이 중단되기 전에 파일이 닫혀 있는지 확인해야 합니다.&lt;/p&gt;

&lt;p&gt;그래서 몇 년 전에 저는 이를 관리하기 위해 패키지를 작성했습니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-golang&#34; data-lang=&#34;golang&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;github.com/pkg/profile&amp;#34;&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;defer&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;profile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Start&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;profile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;CPUProfile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;profile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ProfilePath&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;.&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)).&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Stop&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이 버전을 실행하면 현재 작업 디렉토리에 프로파일이 작성됩니다.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;pkg/profile&lt;/code&gt;을 사용하는 것이 필수는 아니지만, 트레이싱 수집 및 기록과 관련된 많은 보일러 플레이트가 필요하므로 이 워크샵의 나머지 부분에서 사용합니다.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&#34;5-3-2-프로파일-분석하기&#34;&gt;5.3.2 프로파일 분석하기&lt;/h3&gt;

&lt;p&gt;이제 프로파일이 있으니, &lt;code&gt;go tool pprof&lt;/code&gt;를 사용해서 분석할 수 있습니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;% go tool pprof -http&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;:8080 cpu.pprof&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이 실행에서 프로그램이 1.81 초 동안 실행되었음을 알 수 있습니다 (프로파일링은 약간의 오버 헤드를 추가 함). pprof는 샘플 기반이므로 운영 체제의 &lt;code&gt;SIGPROF&lt;/code&gt; 타이머에 의존하여 &lt;code&gt;pprof&lt;/code&gt;가 1.53 초 동안 만 데이터를 캡처했음을 알 수 있습니다.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Go 1.9 이후 pprof 트레이싱에는 트레이싱을 분석하는 데 필요한 모든 정보가 포함됩니다. 더 이상 트레이싱을 생성하는 일치하는 바이너리가 없어도 됩니다. 🎉&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;code&gt;top pprof&lt;/code&gt; 기능을 사용하여 트레이싱에 의해 기록된 함수를 정렬할 수 있습니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;% go tool pprof cpu.pprof
Type: cpu
Time: Mar &lt;span class=&#34;m&#34;&gt;24&lt;/span&gt;, &lt;span class=&#34;m&#34;&gt;2019&lt;/span&gt; at &lt;span class=&#34;m&#34;&gt;5&lt;/span&gt;:18pm &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;CET&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
Duration: &lt;span class=&#34;m&#34;&gt;2&lt;/span&gt;.16s, Total &lt;span class=&#34;nv&#34;&gt;samples&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.91s &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;88&lt;/span&gt;.51%&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
Entering interactive mode &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;help&amp;#34;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; commands, &lt;span class=&#34;s2&#34;&gt;&amp;#34;o&amp;#34;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; options&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;pprof&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; top
Showing nodes accounting &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.90s, &lt;span class=&#34;m&#34;&gt;99&lt;/span&gt;.48% of &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.91s total
Showing top &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt; nodes out of &lt;span class=&#34;m&#34;&gt;35&lt;/span&gt;
      flat  flat%   sum%        cum   cum%
     &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;.82s &lt;span class=&#34;m&#34;&gt;42&lt;/span&gt;.93% &lt;span class=&#34;m&#34;&gt;42&lt;/span&gt;.93%      &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.63s &lt;span class=&#34;m&#34;&gt;85&lt;/span&gt;.34%  main.fillPixel
     &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;.81s &lt;span class=&#34;m&#34;&gt;42&lt;/span&gt;.41% &lt;span class=&#34;m&#34;&gt;85&lt;/span&gt;.34%      &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;.81s &lt;span class=&#34;m&#34;&gt;42&lt;/span&gt;.41%  main.paint
     &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;.11s  &lt;span class=&#34;m&#34;&gt;5&lt;/span&gt;.76% &lt;span class=&#34;m&#34;&gt;91&lt;/span&gt;.10%      &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;.12s  &lt;span class=&#34;m&#34;&gt;6&lt;/span&gt;.28%  runtime.mallocgc
     &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;.04s  &lt;span class=&#34;m&#34;&gt;2&lt;/span&gt;.09% &lt;span class=&#34;m&#34;&gt;93&lt;/span&gt;.19%      &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;.04s  &lt;span class=&#34;m&#34;&gt;2&lt;/span&gt;.09%  runtime.memmove
     &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;.04s  &lt;span class=&#34;m&#34;&gt;2&lt;/span&gt;.09% &lt;span class=&#34;m&#34;&gt;95&lt;/span&gt;.29%      &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;.04s  &lt;span class=&#34;m&#34;&gt;2&lt;/span&gt;.09%  runtime.nanotime
     &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;.03s  &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.57% &lt;span class=&#34;m&#34;&gt;96&lt;/span&gt;.86%      &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;.03s  &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.57%  runtime.pthread_cond_signal
     &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;.02s  &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.05% &lt;span class=&#34;m&#34;&gt;97&lt;/span&gt;.91%      &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;.04s  &lt;span class=&#34;m&#34;&gt;2&lt;/span&gt;.09%  compress/flate.&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;*compressor&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;.deflate
     &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;.01s  &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;.52% &lt;span class=&#34;m&#34;&gt;98&lt;/span&gt;.43%      &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;.01s  &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;.52%  compress/flate.&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;*compressor&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;.findMatch
     &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;.01s  &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;.52% &lt;span class=&#34;m&#34;&gt;98&lt;/span&gt;.95%      &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;.01s  &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;.52%  compress/flate.hash4
     &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;.01s  &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;.52% &lt;span class=&#34;m&#34;&gt;99&lt;/span&gt;.48%      &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;.01s  &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;.52%  image/png.filter&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;pprof가 스택을 캡처했을 때 CPU에는 &lt;code&gt;main.fillPixel&lt;/code&gt; 함수가 가장 많았습니다.&lt;/p&gt;

&lt;p&gt;스택에서 &lt;code&gt;main.paint&lt;/code&gt;를 찾는 것은 놀라운 일이 아닙니다. 픽셀을 그리는 것은 이 프로그램이 하는 일입니다. 그러나 페인트가 너무 많은 시간을 소비하는 원인은 무엇일까요? top에 대해 누적 플래그(cummulative flag)를 사용해서 확인할 수 있습니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;pprof&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; top --cum
Showing nodes accounting &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; 1630ms, &lt;span class=&#34;m&#34;&gt;85&lt;/span&gt;.34% of 1910ms total
Showing top &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt; nodes out of &lt;span class=&#34;m&#34;&gt;35&lt;/span&gt;
      flat  flat%   sum%        cum   cum%
         &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;     &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;%     &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;%     1840ms &lt;span class=&#34;m&#34;&gt;96&lt;/span&gt;.34%  main.main
         &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;     &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;%     &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;%     1840ms &lt;span class=&#34;m&#34;&gt;96&lt;/span&gt;.34%  runtime.main
     820ms &lt;span class=&#34;m&#34;&gt;42&lt;/span&gt;.93% &lt;span class=&#34;m&#34;&gt;42&lt;/span&gt;.93%     1630ms &lt;span class=&#34;m&#34;&gt;85&lt;/span&gt;.34%  main.fillPixel
         &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;     &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;% &lt;span class=&#34;m&#34;&gt;42&lt;/span&gt;.93%     1630ms &lt;span class=&#34;m&#34;&gt;85&lt;/span&gt;.34%  main.seqFillImg
     810ms &lt;span class=&#34;m&#34;&gt;42&lt;/span&gt;.41% &lt;span class=&#34;m&#34;&gt;85&lt;/span&gt;.34%      810ms &lt;span class=&#34;m&#34;&gt;42&lt;/span&gt;.41%  main.paint
         &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;     &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;% &lt;span class=&#34;m&#34;&gt;85&lt;/span&gt;.34%      210ms &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;.99%  image/png.&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;*Encoder&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;.Encode
         &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;     &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;% &lt;span class=&#34;m&#34;&gt;85&lt;/span&gt;.34%      210ms &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;.99%  image/png.Encode
         &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;     &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;% &lt;span class=&#34;m&#34;&gt;85&lt;/span&gt;.34%      160ms  &lt;span class=&#34;m&#34;&gt;8&lt;/span&gt;.38%  main.&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;*img&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;.At
         &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;     &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;% &lt;span class=&#34;m&#34;&gt;85&lt;/span&gt;.34%      160ms  &lt;span class=&#34;m&#34;&gt;8&lt;/span&gt;.38%  runtime.convT2Inoptr
         &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;     &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;% &lt;span class=&#34;m&#34;&gt;85&lt;/span&gt;.34%      150ms  &lt;span class=&#34;m&#34;&gt;7&lt;/span&gt;.85%  image/png.&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;*encoder&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;.writeIDATs&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;정렬 결과는 &lt;code&gt;main.fillPixed&lt;/code&gt;가 대부분의 작업을 처리하고 있다고 제안하고 있습니다.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;웹 명령을 사용하여 프로파일을 시각화할 수도 있습니다.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div&gt;
    &lt;svg xmlns=&#34;http://www.w3.org/2000/svg&#34; xmlns:xlink=&#34;http://www.w3.org/1999/xlink&#34; width=&#34;100%px&#34; height=&#34;100%px&#34;&gt;
    &lt;script type=&#34;text/ecmascript&#34;&gt;
    /**
     *  SVGPan library 1.2.1
     * ======================
     *
     * Given an unique existing element with id &#34;viewport&#34; (or when missing, the first g
     * element), including the the library into any SVG adds the following capabilities:
     *
     *  - Mouse panning
     *  - Mouse zooming (using the wheel)
     *  - Object dragging
     *
     * You can configure the behaviour of the pan/zoom/drag with the variables
     * listed in the CONFIGURATION section of this file.
     *
     * Known issues:
     *
     *  - Zooming (while panning) on Safari has still some issues
     *
     * Releases:
     *
     * 1.2.1, Mon Jul  4 00:33:18 CEST 2011, Andrea Leofreddi
     *  - Fixed a regression with mouse wheel (now working on Firefox 5)
     *  - Working with viewBox attribute (#4)
     *  - Added &#34;use strict;&#34; and fixed resulting warnings (#5)
     *  - Added configuration variables, dragging is disabled by default (#3)
     *
     * 1.2, Sat Mar 20 08:42:50 GMT 2010, Zeng Xiaohui
     *  Fixed a bug with browser mouse handler interaction
     *
     * 1.1, Wed Feb  3 17:39:33 GMT 2010, Zeng Xiaohui
     *  Updated the zoom code to support the mouse wheel on Safari/Chrome
     *
     * 1.0, Andrea Leofreddi
     *  First release
     *
     * This code is licensed under the following BSD license:
     *
     * Copyright 2009-2010 Andrea Leofreddi &amp;lt;a.leofreddi@itcharm.com&amp;gt;. All rights reserved.
     *
     * Redistribution and use in source and binary forms, with or without modification, are
     * permitted provided that the following conditions are met:
     *
     *    1. Redistributions of source code must retain the above copyright notice, this list of
     *       conditions and the following disclaimer.
     *
     *    2. Redistributions in binary form must reproduce the above copyright notice, this list
     *       of conditions and the following disclaimer in the documentation and/or other materials
     *       provided with the distribution.
     *
     * THIS SOFTWARE IS PROVIDED BY Andrea Leofreddi ``AS IS&#39;&#39; AND ANY EXPRESS OR IMPLIED
     * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND
     * FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL Andrea Leofreddi OR
     * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
     * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
     * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
     * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
     * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF
     * ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
     *
     * The views and conclusions contained in the software and documentation are those of the
     * authors and should not be interpreted as representing official policies, either expressed
     * or implied, of Andrea Leofreddi.
     */
    
    &#34;use strict&#34;;
    
    /// CONFIGURATION
    /// ====&amp;gt;
    
    var enablePan = 1; // 1 or 0: enable or disable panning (default enabled)
    var enableZoom = 1; // 1 or 0: enable or disable zooming (default enabled)
    var enableDrag = 0; // 1 or 0: enable or disable dragging (default disabled)
    
    /// &amp;lt;====
    /// END OF CONFIGURATION
    
    var root = document.documentElement;
    
    var state = &#39;none&#39;, svgRoot, stateTarget, stateOrigin, stateTf;
    
    setupHandlers(root);
    
    /**
     * Register handlers
     */
    function setupHandlers(root){
        setAttributes(root, {
            &#34;onmouseup&#34; : &#34;handleMouseUp(evt)&#34;,
            &#34;onmousedown&#34; : &#34;handleMouseDown(evt)&#34;,
            &#34;onmousemove&#34; : &#34;handleMouseMove(evt)&#34;,
            //&#34;onmouseout&#34; : &#34;handleMouseUp(evt)&#34;, // Decomment this to stop the pan functionality when dragging out of the SVG element
        });
    
        if(navigator.userAgent.toLowerCase().indexOf(&#39;webkit&#39;) &amp;gt;= 0)
            window.addEventListener(&#39;mousewheel&#39;, handleMouseWheel, false); // Chrome/Safari
        else
            window.addEventListener(&#39;DOMMouseScroll&#39;, handleMouseWheel, false); // Others
    }
    
    /**
     * Retrieves the root element for SVG manipulation. The element is then cached into the svgRoot global variable.
     */
    function getRoot(root) {
        if(typeof(svgRoot) == &#34;undefined&#34;) {
            var g = null;
    
            g = root.getElementById(&#34;viewport&#34;);
    
            if(g == null)
                g = root.getElementsByTagName(&#39;g&#39;)[0];
    
            if(g == null)
                alert(&#39;Unable to obtain SVG root element&#39;);
    
            setCTM(g, g.getCTM());
    
            g.removeAttribute(&#34;viewBox&#34;);
    
            svgRoot = g;
        }
    
        return svgRoot;
    }
    
    /**
     * Instance an SVGPoint object with given event coordinates.
     */
    function getEventPoint(evt) {
        var p = root.createSVGPoint();
    
        p.x = evt.clientX;
        p.y = evt.clientY;
    
        return p;
    }
    
    /**
     * Sets the current transform matrix of an element.
     */
    function setCTM(element, matrix) {
        var s = &#34;matrix(&#34; + matrix.a + &#34;,&#34; + matrix.b + &#34;,&#34; + matrix.c + &#34;,&#34; + matrix.d + &#34;,&#34; + matrix.e + &#34;,&#34; + matrix.f + &#34;)&#34;;
    
        element.setAttribute(&#34;transform&#34;, s);
    }
    
    /**
     * Dumps a matrix to a string (useful for debug).
     */
    function dumpMatrix(matrix) {
        var s = &#34;[ &#34; + matrix.a + &#34;, &#34; + matrix.c + &#34;, &#34; + matrix.e + &#34;\n  &#34; + matrix.b + &#34;, &#34; + matrix.d + &#34;, &#34; + matrix.f + &#34;\n  0, 0, 1 ]&#34;;
    
        return s;
    }
    
    /**
     * Sets attributes of an element.
     */
    function setAttributes(element, attributes){
        for (var i in attributes)
            element.setAttributeNS(null, i, attributes[i]);
    }
    
    /**
     * Handle mouse wheel event.
     */
    function handleMouseWheel(evt) {
        if(!enableZoom)
            return;
    
        if(evt.preventDefault)
            evt.preventDefault();
    
        evt.returnValue = false;
    
        var svgDoc = evt.target.ownerDocument;
    
        var delta;
    
        if(evt.wheelDelta)
            delta = evt.wheelDelta / 3600; // Chrome/Safari
        else
            delta = evt.detail / -90; // Mozilla
    
        var z = 1 + delta; // Zoom factor: 0.9/1.1
    
        var g = getRoot(svgDoc);
    
        var p = getEventPoint(evt);
    
        p = p.matrixTransform(g.getCTM().inverse());
    
        // Compute new scale matrix in current mouse position
        var k = root.createSVGMatrix().translate(p.x, p.y).scale(z).translate(-p.x, -p.y);
    
            setCTM(g, g.getCTM().multiply(k));
    
        if(typeof(stateTf) == &#34;undefined&#34;)
            stateTf = g.getCTM().inverse();
    
        stateTf = stateTf.multiply(k.inverse());
    }
    
    /**
     * Handle mouse move event.
     */
    function handleMouseMove(evt) {
        if(evt.preventDefault)
            evt.preventDefault();
    
        evt.returnValue = false;
    
        var svgDoc = evt.target.ownerDocument;
    
        var g = getRoot(svgDoc);
    
        if(state == &#39;pan&#39; &amp;amp;&amp;amp; enablePan) {
            // Pan mode
            var p = getEventPoint(evt).matrixTransform(stateTf);
    
            setCTM(g, stateTf.inverse().translate(p.x - stateOrigin.x, p.y - stateOrigin.y));
        } else if(state == &#39;drag&#39; &amp;amp;&amp;amp; enableDrag) {
            // Drag mode
            var p = getEventPoint(evt).matrixTransform(g.getCTM().inverse());
    
            setCTM(stateTarget, root.createSVGMatrix().translate(p.x - stateOrigin.x, p.y - stateOrigin.y).multiply(g.getCTM().inverse()).multiply(stateTarget.getCTM()));
    
            stateOrigin = p;
        }
    }
    
    /**
     * Handle click event.
     */
    function handleMouseDown(evt) {
        if(evt.preventDefault)
            evt.preventDefault();
    
        evt.returnValue = false;
    
        var svgDoc = evt.target.ownerDocument;
    
        var g = getRoot(svgDoc);
    
        if(
            evt.target.tagName == &#34;svg&#34;
            || !enableDrag // Pan anyway when drag is disabled and the user clicked on an element
        ) {
            // Pan mode
            state = &#39;pan&#39;;
    
            stateTf = g.getCTM().inverse();
    
            stateOrigin = getEventPoint(evt).matrixTransform(stateTf);
        } else {
            // Drag mode
            state = &#39;drag&#39;;
    
            stateTarget = evt.target;
    
            stateTf = g.getCTM().inverse();
    
            stateOrigin = getEventPoint(evt).matrixTransform(stateTf);
        }
    }
    
    /**
     * Handle mouse button release event.
     */
    function handleMouseUp(evt) {
        if(evt.preventDefault)
            evt.preventDefault();
    
        evt.returnValue = false;
    
        var svgDoc = evt.target.ownerDocument;
    
        if(state == &#39;pan&#39; || state == &#39;drag&#39;) {
            // Quit pan mode
            state = &#39;&#39;;
        }
    }
    
    &lt;/script&gt;&lt;g id=&#34;viewport&#34; transform=&#34;scale(0.5,0.5) translate(0,0)&#34;&gt;&lt;g id=&#34;graph0&#34; class=&#34;graph&#34; transform=&#34;scale(1 1) rotate(0) translate(4 2858)&#34;&gt;
    &lt;title&gt;unnamed&lt;/title&gt;
    &lt;polygon fill=&#34;#ffffff&#34; stroke=&#34;transparent&#34; points=&#34;-4,4 -4,-2858 822.5,-2858 822.5,4 -4,4&#34;&gt;&lt;/polygon&gt;
    &lt;g id=&#34;clust1&#34; class=&#34;cluster&#34;&gt;
    &lt;title&gt;cluster_L&lt;/title&gt;
    &lt;polygon fill=&#34;none&#34; stroke=&#34;#000000&#34; points=&#34;8,-2750 8,-2846 316,-2846 316,-2750 8,-2750&#34;&gt;&lt;/polygon&gt;
    &lt;/g&gt;
    &lt;!-- Type: cpu --&gt;
    &lt;g id=&#34;node1&#34; class=&#34;node&#34;&gt;
    &lt;title&gt;Type: cpu&lt;/title&gt;
    &lt;polygon fill=&#34;#f8f8f8&#34; stroke=&#34;#000000&#34; points=&#34;307.5,-2838 16.5,-2838 16.5,-2758 307.5,-2758 307.5,-2838&#34;&gt;&lt;/polygon&gt;
    &lt;text text-anchor=&#34;start&#34; x=&#34;24.5&#34; y=&#34;-2821.2&#34; font-family=&#34;Times,serif&#34; font-size=&#34;16.00&#34; fill=&#34;#000000&#34;&gt;Type: cpu&lt;/text&gt;
    &lt;text text-anchor=&#34;start&#34; x=&#34;24.5&#34; y=&#34;-2803.2&#34; font-family=&#34;Times,serif&#34; font-size=&#34;16.00&#34; fill=&#34;#000000&#34;&gt;Time: Sep 17, 2017 at 12:22pm (AEST)&lt;/text&gt;
    &lt;text text-anchor=&#34;start&#34; x=&#34;24.5&#34; y=&#34;-2785.2&#34; font-family=&#34;Times,serif&#34; font-size=&#34;16.00&#34; fill=&#34;#000000&#34;&gt;Duration: 1.81s, Total samples = 1.53s (84.33%)&lt;/text&gt;
    &lt;text text-anchor=&#34;start&#34; x=&#34;24.5&#34; y=&#34;-2767.2&#34; font-family=&#34;Times,serif&#34; font-size=&#34;16.00&#34; fill=&#34;#000000&#34;&gt;Showing nodes accounting for 1.53s, 100% of 1.53s total&lt;/text&gt;
    &lt;/g&gt;
    &lt;!-- N1 --&gt;
    &lt;g id=&#34;node2&#34; class=&#34;node&#34;&gt;
    &lt;title&gt;N1&lt;/title&gt;
    &lt;g id=&#34;a_node2&#34;&gt;&lt;a xlink:title=&#34;main.paint /Users/dfc/devel/understanding-the-execution-tracer/examples/mandelbrot-pkg-profile/mandelbrot.go (1s)&#34;&gt;
    &lt;polygon fill=&#34;#edd8d5&#34; stroke=&#34;#b21500&#34; points=&#34;416.5,-2348 295.5,-2348 295.5,-2236 416.5,-2236 416.5,-2348&#34;&gt;&lt;/polygon&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;356&#34; y=&#34;-2324.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;24.00&#34; fill=&#34;#000000&#34;&gt;main&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;356&#34; y=&#34;-2298.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;24.00&#34; fill=&#34;#000000&#34;&gt;paint&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;356&#34; y=&#34;-2272.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;24.00&#34; fill=&#34;#000000&#34;&gt;mandelbrot.go&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;356&#34; y=&#34;-2246.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;24.00&#34; fill=&#34;#000000&#34;&gt;1s (65.36%)&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N2 --&gt;
    &lt;g id=&#34;node3&#34; class=&#34;node&#34;&gt;
    &lt;title&gt;N2&lt;/title&gt;
    &lt;g id=&#34;a_node3&#34;&gt;&lt;a xlink:title=&#34;runtime.main /Users/dfc/go/src/runtime/proc.go (1.53s)&#34;&gt;
    &lt;polygon fill=&#34;#edd5d5&#34; stroke=&#34;#b20000&#34; points=&#34;386,-2820 326,-2820 326,-2776 386,-2776 386,-2820&#34;&gt;&lt;/polygon&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;356&#34; y=&#34;-2809.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;runtime&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;356&#34; y=&#34;-2800.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;main&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;356&#34; y=&#34;-2791.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;proc.go&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;356&#34; y=&#34;-2782.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 1.53s (100%)&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N4 --&gt;
    &lt;g id=&#34;node5&#34; class=&#34;node&#34;&gt;
    &lt;title&gt;N4&lt;/title&gt;
    &lt;g id=&#34;a_node5&#34;&gt;&lt;a xlink:title=&#34;main.main /Users/dfc/devel/understanding-the-execution-tracer/examples/mandelbrot-pkg-profile/mandelbrot.go (1.53s)&#34;&gt;
    &lt;polygon fill=&#34;#edd5d5&#34; stroke=&#34;#b20000&#34; points=&#34;386,-2707 326,-2707 326,-2663 386,-2663 386,-2707&#34;&gt;&lt;/polygon&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;356&#34; y=&#34;-2696.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;main&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;356&#34; y=&#34;-2687.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;main&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;356&#34; y=&#34;-2678.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;mandelbrot.go&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;356&#34; y=&#34;-2669.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 1.53s (100%)&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N2&amp;#45;&amp;gt;N4 --&gt;
    &lt;g id=&#34;edge1&#34; class=&#34;edge&#34;&gt;
    &lt;title&gt;N2-&amp;gt;N4&lt;/title&gt;
    &lt;g id=&#34;a_edge1&#34;&gt;&lt;a xlink:title=&#34;runtime.main /Users/dfc/go/src/runtime/proc.go -&gt; main.main /Users/dfc/devel/understanding-the-execution-tracer/examples/mandelbrot-pkg-profile/mandelbrot.go (1.53s)&#34;&gt;
    &lt;path fill=&#34;none&#34; stroke=&#34;#b20000&#34; stroke-width=&#34;6&#34; d=&#34;M356,-2775.9442C356,-2759.2222 356,-2735.9909 356,-2717.194&#34;&gt;&lt;/path&gt;
    &lt;polygon fill=&#34;#b20000&#34; stroke=&#34;#b20000&#34; stroke-width=&#34;6&#34; points=&#34;361.2501,-2717.0001 356,-2707.0002 350.7501,-2717.0002 361.2501,-2717.0001&#34;&gt;&lt;/polygon&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;g id=&#34;a_edge1-label&#34;&gt;&lt;a xlink:title=&#34;runtime.main /Users/dfc/go/src/runtime/proc.go -&gt; main.main /Users/dfc/devel/understanding-the-execution-tracer/examples/mandelbrot-pkg-profile/mandelbrot.go (1.53s)&#34;&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;369&#34; y=&#34;-2728.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 1.53s&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N3 --&gt;
    &lt;g id=&#34;node4&#34; class=&#34;node&#34;&gt;
    &lt;title&gt;N3&lt;/title&gt;
    &lt;g id=&#34;a_node4&#34;&gt;&lt;a xlink:title=&#34;main.fillPixel /Users/dfc/devel/understanding-the-execution-tracer/examples/mandelbrot-pkg-profile/mandelbrot.go (1.27s)&#34;&gt;
    &lt;polygon fill=&#34;#edd6d5&#34; stroke=&#34;#b20900&#34; points=&#34;410.5,-2517 301.5,-2517 301.5,-2414 410.5,-2414 410.5,-2517&#34;&gt;&lt;/polygon&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;356&#34; y=&#34;-2499.4&#34; font-family=&#34;Times,serif&#34; font-size=&#34;17.00&#34; fill=&#34;#000000&#34;&gt;main&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;356&#34; y=&#34;-2480.4&#34; font-family=&#34;Times,serif&#34; font-size=&#34;17.00&#34; fill=&#34;#000000&#34;&gt;fillPixel&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;356&#34; y=&#34;-2461.4&#34; font-family=&#34;Times,serif&#34; font-size=&#34;17.00&#34; fill=&#34;#000000&#34;&gt;mandelbrot.go&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;356&#34; y=&#34;-2442.4&#34; font-family=&#34;Times,serif&#34; font-size=&#34;17.00&#34; fill=&#34;#000000&#34;&gt;0.27s (17.65%)&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;356&#34; y=&#34;-2423.4&#34; font-family=&#34;Times,serif&#34; font-size=&#34;17.00&#34; fill=&#34;#000000&#34;&gt;of 1.27s (83.01%)&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N3&amp;#45;&amp;gt;N1 --&gt;
    &lt;g id=&#34;edge4&#34; class=&#34;edge&#34;&gt;
    &lt;title&gt;N3-&amp;gt;N1&lt;/title&gt;
    &lt;g id=&#34;a_edge4&#34;&gt;&lt;a xlink:title=&#34;main.fillPixel /Users/dfc/devel/understanding-the-execution-tracer/examples/mandelbrot-pkg-profile/mandelbrot.go -&gt; main.paint /Users/dfc/devel/understanding-the-execution-tracer/examples/mandelbrot-pkg-profile/mandelbrot.go (1s)&#34;&gt;
    &lt;path fill=&#34;none&#34; stroke=&#34;#b21500&#34; stroke-width=&#34;4&#34; d=&#34;M356,-2413.914C356,-2396.4678 356,-2376.7376 356,-2358.3118&#34;&gt;&lt;/path&gt;
    &lt;polygon fill=&#34;#b21500&#34; stroke=&#34;#b21500&#34; stroke-width=&#34;4&#34; points=&#34;359.5001,-2358.2321 356,-2348.2322 352.5001,-2358.2322 359.5001,-2358.2321&#34;&gt;&lt;/polygon&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;g id=&#34;a_edge4-label&#34;&gt;&lt;a xlink:title=&#34;main.fillPixel /Users/dfc/devel/understanding-the-execution-tracer/examples/mandelbrot-pkg-profile/mandelbrot.go -&gt; main.paint /Users/dfc/devel/understanding-the-execution-tracer/examples/mandelbrot-pkg-profile/mandelbrot.go (1s)&#34;&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;373&#34; y=&#34;-2384.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 1s&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;373&#34; y=&#34;-2369.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; (inline)&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N35 --&gt;
    &lt;g id=&#34;node36&#34; class=&#34;node&#34;&gt;
    &lt;title&gt;N35&lt;/title&gt;
    &lt;g id=&#34;a_node36&#34;&gt;&lt;a xlink:title=&#34;image/png.Encode /Users/dfc/go/src/image/png/writer.go (0.26s)&#34;&gt;
    &lt;polygon fill=&#34;#ede1d9&#34; stroke=&#34;#b2591a&#34; points=&#34;484,-2612 420,-2612 420,-2568 484,-2568 484,-2612&#34;&gt;&lt;/polygon&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;452&#34; y=&#34;-2601.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;image/png&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;452&#34; y=&#34;-2592.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;Encode&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;452&#34; y=&#34;-2583.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;writer.go&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;452&#34; y=&#34;-2574.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 0.26s (16.99%)&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N4&amp;#45;&amp;gt;N35 --&gt;
    &lt;g id=&#34;edge6&#34; class=&#34;edge&#34;&gt;
    &lt;title&gt;N4-&amp;gt;N35&lt;/title&gt;
    &lt;g id=&#34;a_edge6&#34;&gt;&lt;a xlink:title=&#34;main.main /Users/dfc/devel/understanding-the-execution-tracer/examples/mandelbrot-pkg-profile/mandelbrot.go -&gt; image/png.Encode /Users/dfc/go/src/image/png/writer.go (0.26s)&#34;&gt;
    &lt;path fill=&#34;none&#34; stroke=&#34;#b2591a&#34; d=&#34;M378.2656,-2662.9663C391.3782,-2649.9903 408.1285,-2633.4145 422.3493,-2619.3419&#34;&gt;&lt;/path&gt;
    &lt;polygon fill=&#34;#b2591a&#34; stroke=&#34;#b2591a&#34; points=&#34;424.8764,-2621.7651 429.5226,-2612.2433 419.9527,-2616.7895 424.8764,-2621.7651&#34;&gt;&lt;/polygon&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;g id=&#34;a_edge6-label&#34;&gt;&lt;a xlink:title=&#34;main.main /Users/dfc/devel/understanding-the-execution-tracer/examples/mandelbrot-pkg-profile/mandelbrot.go -&gt; image/png.Encode /Users/dfc/go/src/image/png/writer.go (0.26s)&#34;&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;422&#34; y=&#34;-2633.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 0.26s&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N38 --&gt;
    &lt;g id=&#34;node39&#34; class=&#34;node&#34;&gt;
    &lt;title&gt;N38&lt;/title&gt;
    &lt;g id=&#34;a_node39&#34;&gt;&lt;a xlink:title=&#34;main.seqFillImg /Users/dfc/devel/understanding-the-execution-tracer/examples/mandelbrot-pkg-profile/mandelbrot.go (1.27s)&#34;&gt;
    &lt;polygon fill=&#34;#edd6d5&#34; stroke=&#34;#b20900&#34; points=&#34;388,-2612 324,-2612 324,-2568 388,-2568 388,-2612&#34;&gt;&lt;/polygon&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;356&#34; y=&#34;-2601.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;main&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;356&#34; y=&#34;-2592.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;seqFillImg&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;356&#34; y=&#34;-2583.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;mandelbrot.go&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;356&#34; y=&#34;-2574.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 1.27s (83.01%)&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N4&amp;#45;&amp;gt;N38 --&gt;
    &lt;g id=&#34;edge2&#34; class=&#34;edge&#34;&gt;
    &lt;title&gt;N4-&amp;gt;N38&lt;/title&gt;
    &lt;g id=&#34;a_edge2&#34;&gt;&lt;a xlink:title=&#34;main.main /Users/dfc/devel/understanding-the-execution-tracer/examples/mandelbrot-pkg-profile/mandelbrot.go -&gt; main.seqFillImg /Users/dfc/devel/understanding-the-execution-tracer/examples/mandelbrot-pkg-profile/mandelbrot.go (1.27s)&#34;&gt;
    &lt;path fill=&#34;none&#34; stroke=&#34;#b20900&#34; stroke-width=&#34;5&#34; d=&#34;M356,-2662.9663C356,-2650.9427 356,-2635.8283 356,-2622.4785&#34;&gt;&lt;/path&gt;
    &lt;polygon fill=&#34;#b20900&#34; stroke=&#34;#b20900&#34; stroke-width=&#34;5&#34; points=&#34;360.3751,-2622.2432 356,-2612.2433 351.6251,-2622.2433 360.3751,-2622.2432&#34;&gt;&lt;/polygon&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;g id=&#34;a_edge2-label&#34;&gt;&lt;a xlink:title=&#34;main.main /Users/dfc/devel/understanding-the-execution-tracer/examples/mandelbrot-pkg-profile/mandelbrot.go -&gt; main.seqFillImg /Users/dfc/devel/understanding-the-execution-tracer/examples/mandelbrot-pkg-profile/mandelbrot.go (1.27s)&#34;&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;369&#34; y=&#34;-2633.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 1.27s&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N5 --&gt;
    &lt;g id=&#34;node6&#34; class=&#34;node&#34;&gt;
    &lt;title&gt;N5&lt;/title&gt;
    &lt;g id=&#34;a_node6&#34;&gt;&lt;a xlink:title=&#34;runtime.mallocgc /Users/dfc/go/src/runtime/malloc.go (0.16s)&#34;&gt;
    &lt;polygon fill=&#34;#ede6e0&#34; stroke=&#34;#b28355&#34; points=&#34;594,-1873 502,-1873 502,-1790 594,-1790 594,-1873&#34;&gt;&lt;/polygon&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;548&#34; y=&#34;-1857.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;runtime&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;548&#34; y=&#34;-1842.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;mallocgc&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;548&#34; y=&#34;-1827.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;malloc.go&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;548&#34; y=&#34;-1812.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;0.13s (8.50%)&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;548&#34; y=&#34;-1797.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt;of 0.16s (10.46%)&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N41 --&gt;
    &lt;g id=&#34;node42&#34; class=&#34;node&#34;&gt;
    &lt;title&gt;N41&lt;/title&gt;
    &lt;g id=&#34;a_node42&#34;&gt;&lt;a xlink:title=&#34;runtime.(*mcache).nextFree /Users/dfc/go/src/runtime/malloc.go (0.03s)&#34;&gt;
    &lt;polygon fill=&#34;#edecea&#34; stroke=&#34;#b2ada1&#34; points=&#34;600.5,-1728.5 539.5,-1728.5 539.5,-1675.5 600.5,-1675.5 600.5,-1728.5&#34;&gt;&lt;/polygon&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;570&#34; y=&#34;-1718.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;runtime&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;570&#34; y=&#34;-1709.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;(*mcache)&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;570&#34; y=&#34;-1700.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;nextFree&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;570&#34; y=&#34;-1691.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;malloc.go&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;570&#34; y=&#34;-1682.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 0.03s (1.96%)&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N5&amp;#45;&amp;gt;N41 --&gt;
    &lt;g id=&#34;edge35&#34; class=&#34;edge&#34;&gt;
    &lt;title&gt;N5-&amp;gt;N41&lt;/title&gt;
    &lt;g id=&#34;a_edge35&#34;&gt;&lt;a xlink:title=&#34;runtime.mallocgc /Users/dfc/go/src/runtime/malloc.go -&gt; runtime.(*mcache).nextFree /Users/dfc/go/src/runtime/malloc.go (0.03s)&#34;&gt;
    &lt;path fill=&#34;none&#34; stroke=&#34;#b2ada1&#34; d=&#34;M555.082,-1789.8126C557.8847,-1773.3148 561.0778,-1754.5194 563.7887,-1738.5621&#34;&gt;&lt;/path&gt;
    &lt;polygon fill=&#34;#b2ada1&#34; stroke=&#34;#b2ada1&#34; points=&#34;567.2672,-1738.9833 565.4916,-1728.5383 560.3661,-1737.8108 567.2672,-1738.9833&#34;&gt;&lt;/polygon&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;g id=&#34;a_edge35-label&#34;&gt;&lt;a xlink:title=&#34;runtime.mallocgc /Users/dfc/go/src/runtime/malloc.go -&gt; runtime.(*mcache).nextFree /Users/dfc/go/src/runtime/malloc.go (0.03s)&#34;&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;573&#34; y=&#34;-1760.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 0.03s&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N6 --&gt;
    &lt;g id=&#34;node7&#34; class=&#34;node&#34;&gt;
    &lt;title&gt;N6&lt;/title&gt;
    &lt;g id=&#34;a_node7&#34;&gt;&lt;a xlink:title=&#34;image/png.(*encoder).writeImage /Users/dfc/go/src/image/png/writer.go (0.19s)&#34;&gt;
    &lt;polygon fill=&#34;#ede5de&#34; stroke=&#34;#b27743&#34; points=&#34;499,-2185 435,-2185 435,-2132 499,-2132 499,-2185&#34;&gt;&lt;/polygon&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;467&#34; y=&#34;-2174.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;image/png&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;467&#34; y=&#34;-2165.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;(*encoder)&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;467&#34; y=&#34;-2156.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;writeImage&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;467&#34; y=&#34;-2147.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;writer.go&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;467&#34; y=&#34;-2138.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 0.19s (12.42%)&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N8 --&gt;
    &lt;g id=&#34;node9&#34; class=&#34;node&#34;&gt;
    &lt;title&gt;N8&lt;/title&gt;
    &lt;g id=&#34;a_node9&#34;&gt;&lt;a xlink:title=&#34;main.(*img).At /Users/dfc/devel/understanding-the-execution-tracer/examples/mandelbrot-pkg-profile/mandelbrot.go (0.18s)&#34;&gt;
    &lt;polygon fill=&#34;#ede5df&#34; stroke=&#34;#b27b49&#34; points=&#34;580,-2081 516,-2081 516,-2028 580,-2028 580,-2081&#34;&gt;&lt;/polygon&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;548&#34; y=&#34;-2070.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;main&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;548&#34; y=&#34;-2061.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;(*img)&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;548&#34; y=&#34;-2052.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;At&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;548&#34; y=&#34;-2043.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;mandelbrot.go&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;548&#34; y=&#34;-2034.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 0.18s (11.76%)&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N6&amp;#45;&amp;gt;N8 --&gt;
    &lt;g id=&#34;edge11&#34; class=&#34;edge&#34;&gt;
    &lt;title&gt;N6-&amp;gt;N8&lt;/title&gt;
    &lt;g id=&#34;a_edge11&#34;&gt;&lt;a xlink:title=&#34;image/png.(*encoder).writeImage /Users/dfc/go/src/image/png/writer.go -&gt; main.(*img).At /Users/dfc/devel/understanding-the-execution-tracer/examples/mandelbrot-pkg-profile/mandelbrot.go (0.11s)&#34;&gt;
    &lt;path fill=&#34;none&#34; stroke=&#34;#b29572&#34; d=&#34;M484.252,-2131.9097C491.321,-2121.437 499.7656,-2109.4412 508,-2099 510.6052,-2095.6965 513.3873,-2092.3245 516.225,-2088.9884&#34;&gt;&lt;/path&gt;
    &lt;polygon fill=&#34;#b29572&#34; stroke=&#34;#b29572&#34; points=&#34;518.9729,-2091.1622 522.8904,-2081.3182 513.6891,-2086.5706 518.9729,-2091.1622&#34;&gt;&lt;/polygon&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;g id=&#34;a_edge11-label&#34;&gt;&lt;a xlink:title=&#34;image/png.(*encoder).writeImage /Users/dfc/go/src/image/png/writer.go -&gt; main.(*img).At /Users/dfc/devel/understanding-the-execution-tracer/examples/mandelbrot-pkg-profile/mandelbrot.go (0.11s)&#34;&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;521&#34; y=&#34;-2102.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 0.11s&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N18 --&gt;
    &lt;g id=&#34;node19&#34; class=&#34;node&#34;&gt;
    &lt;title&gt;N18&lt;/title&gt;
    &lt;g id=&#34;a_node19&#34;&gt;&lt;a xlink:title=&#34;image/png.filter /Users/dfc/go/src/image/png/writer.go (0.01s)&#34;&gt;
    &lt;polygon fill=&#34;#edecec&#34; stroke=&#34;#b2b1ac&#34; points=&#34;409.5,-2080.5 350.5,-2080.5 350.5,-2028.5 409.5,-2028.5 409.5,-2080.5&#34;&gt;&lt;/polygon&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;380&#34; y=&#34;-2068.5&#34; font-family=&#34;Times,serif&#34; font-size=&#34;10.00&#34; fill=&#34;#000000&#34;&gt;image/png&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;380&#34; y=&#34;-2057.5&#34; font-family=&#34;Times,serif&#34; font-size=&#34;10.00&#34; fill=&#34;#000000&#34;&gt;filter&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;380&#34; y=&#34;-2046.5&#34; font-family=&#34;Times,serif&#34; font-size=&#34;10.00&#34; fill=&#34;#000000&#34;&gt;writer.go&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;380&#34; y=&#34;-2035.5&#34; font-family=&#34;Times,serif&#34; font-size=&#34;10.00&#34; fill=&#34;#000000&#34;&gt;0.01s (0.65%)&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N6&amp;#45;&amp;gt;N18 --&gt;
    &lt;g id=&#34;edge45&#34; class=&#34;edge&#34;&gt;
    &lt;title&gt;N6-&amp;gt;N18&lt;/title&gt;
    &lt;g id=&#34;a_edge45&#34;&gt;&lt;a xlink:title=&#34;image/png.(*encoder).writeImage /Users/dfc/go/src/image/png/writer.go -&gt; image/png.filter /Users/dfc/go/src/image/png/writer.go (0.01s)&#34;&gt;
    &lt;path fill=&#34;none&#34; stroke=&#34;#b2b1ac&#34; d=&#34;M442.607,-2131.9174C437.3869,-2126.0755 431.9544,-2119.8776 427,-2114 420.1205,-2105.8386 412.8838,-2096.878 406.2063,-2088.4432&#34;&gt;&lt;/path&gt;
    &lt;polygon fill=&#34;#b2b1ac&#34; stroke=&#34;#b2b1ac&#34; points=&#34;408.9391,-2086.2563 400.0054,-2080.5606 403.4374,-2090.5842 408.9391,-2086.2563&#34;&gt;&lt;/polygon&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;g id=&#34;a_edge45-label&#34;&gt;&lt;a xlink:title=&#34;image/png.(*encoder).writeImage /Users/dfc/go/src/image/png/writer.go -&gt; image/png.filter /Users/dfc/go/src/image/png/writer.go (0.01s)&#34;&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;440&#34; y=&#34;-2102.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 0.01s&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N31 --&gt;
    &lt;g id=&#34;node32&#34; class=&#34;node&#34;&gt;
    &lt;title&gt;N31&lt;/title&gt;
    &lt;g id=&#34;a_node32&#34;&gt;&lt;a xlink:title=&#34;compress/zlib.(*Writer).Write /Users/dfc/go/src/compress/zlib/writer.go (0.07s)&#34;&gt;
    &lt;polygon fill=&#34;#edeae7&#34; stroke=&#34;#b2a289&#34; points=&#34;488.5,-2081 427.5,-2081 427.5,-2028 488.5,-2028 488.5,-2081&#34;&gt;&lt;/polygon&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;458&#34; y=&#34;-2070.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;compress/zlib&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;458&#34; y=&#34;-2061.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;(*Writer)&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;458&#34; y=&#34;-2052.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;Write&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;458&#34; y=&#34;-2043.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;writer.go&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;458&#34; y=&#34;-2034.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 0.07s (4.58%)&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N6&amp;#45;&amp;gt;N31 --&gt;
    &lt;g id=&#34;edge16&#34; class=&#34;edge&#34;&gt;
    &lt;title&gt;N6-&amp;gt;N31&lt;/title&gt;
    &lt;g id=&#34;a_edge16&#34;&gt;&lt;a xlink:title=&#34;image/png.(*encoder).writeImage /Users/dfc/go/src/image/png/writer.go -&gt; compress/zlib.(*Writer).Write /Users/dfc/go/src/compress/zlib/writer.go (0.07s)&#34;&gt;
    &lt;path fill=&#34;none&#34; stroke=&#34;#b2a289&#34; d=&#34;M461.4749,-2131.7712C460.4711,-2125.9384 459.5645,-2119.7812 459,-2114 458.2821,-2106.6481 457.8872,-2098.7615 457.6909,-2091.2124&#34;&gt;&lt;/path&gt;
    &lt;polygon fill=&#34;#b2a289&#34; stroke=&#34;#b2a289&#34; points=&#34;461.1905,-2091.1533 457.5346,-2081.2093 454.1913,-2091.2628 461.1905,-2091.1533&#34;&gt;&lt;/polygon&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;g id=&#34;a_edge16-label&#34;&gt;&lt;a xlink:title=&#34;image/png.(*encoder).writeImage /Users/dfc/go/src/image/png/writer.go -&gt; compress/zlib.(*Writer).Write /Users/dfc/go/src/compress/zlib/writer.go (0.07s)&#34;&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;472&#34; y=&#34;-2102.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 0.07s&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N7 --&gt;
    &lt;g id=&#34;node8&#34; class=&#34;node&#34;&gt;
    &lt;title&gt;N7&lt;/title&gt;
    &lt;g id=&#34;a_node8&#34;&gt;&lt;a xlink:title=&#34;image/png.(*Encoder).Encode /Users/dfc/go/src/image/png/writer.go (0.26s)&#34;&gt;
    &lt;polygon fill=&#34;#ede1d9&#34; stroke=&#34;#b2591a&#34; points=&#34;499,-2492 435,-2492 435,-2439 499,-2439 499,-2492&#34;&gt;&lt;/polygon&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;467&#34; y=&#34;-2481.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;image/png&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;467&#34; y=&#34;-2472.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;(*Encoder)&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;467&#34; y=&#34;-2463.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;Encode&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;467&#34; y=&#34;-2454.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;writer.go&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;467&#34; y=&#34;-2445.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 0.26s (16.99%)&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N34 --&gt;
    &lt;g id=&#34;node35&#34; class=&#34;node&#34;&gt;
    &lt;title&gt;N34&lt;/title&gt;
    &lt;g id=&#34;a_node35&#34;&gt;&lt;a xlink:title=&#34;image/png.(*encoder).writeIDATs /Users/dfc/go/src/image/png/writer.go (0.19s)&#34;&gt;
    &lt;polygon fill=&#34;#ede5de&#34; stroke=&#34;#b27743&#34; points=&#34;499,-2318.5 435,-2318.5 435,-2265.5 499,-2265.5 499,-2318.5&#34;&gt;&lt;/polygon&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;467&#34; y=&#34;-2308.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;image/png&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;467&#34; y=&#34;-2299.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;(*encoder)&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;467&#34; y=&#34;-2290.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;writeIDATs&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;467&#34; y=&#34;-2281.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;writer.go&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;467&#34; y=&#34;-2272.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 0.19s (12.42%)&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N7&amp;#45;&amp;gt;N34 --&gt;
    &lt;g id=&#34;edge7&#34; class=&#34;edge&#34;&gt;
    &lt;title&gt;N7-&amp;gt;N34&lt;/title&gt;
    &lt;g id=&#34;a_edge7&#34;&gt;&lt;a xlink:title=&#34;image/png.(*Encoder).Encode /Users/dfc/go/src/image/png/writer.go -&gt; image/png.(*encoder).writeIDATs /Users/dfc/go/src/image/png/writer.go (0.19s)&#34;&gt;
    &lt;path fill=&#34;none&#34; stroke=&#34;#b27743&#34; d=&#34;M467,-2438.7709C467,-2409.351 467,-2361.8667 467,-2328.9085&#34;&gt;&lt;/path&gt;
    &lt;polygon fill=&#34;#b27743&#34; stroke=&#34;#b27743&#34; points=&#34;470.5001,-2328.7595 467,-2318.7595 463.5001,-2328.7596 470.5001,-2328.7595&#34;&gt;&lt;/polygon&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;g id=&#34;a_edge7-label&#34;&gt;&lt;a xlink:title=&#34;image/png.(*Encoder).Encode /Users/dfc/go/src/image/png/writer.go -&gt; image/png.(*encoder).writeIDATs /Users/dfc/go/src/image/png/writer.go (0.19s)&#34;&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;480&#34; y=&#34;-2377.3&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 0.19s&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N36 --&gt;
    &lt;g id=&#34;node37&#34; class=&#34;node&#34;&gt;
    &lt;title&gt;N36&lt;/title&gt;
    &lt;g id=&#34;a_node37&#34;&gt;&lt;a xlink:title=&#34;image/png.opaque /Users/dfc/go/src/image/png/writer.go (0.07s)&#34;&gt;
    &lt;polygon fill=&#34;#edeae7&#34; stroke=&#34;#b2a289&#34; points=&#34;578.5,-2314 517.5,-2314 517.5,-2270 578.5,-2270 578.5,-2314&#34;&gt;&lt;/polygon&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;548&#34; y=&#34;-2303.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;image/png&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;548&#34; y=&#34;-2294.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;opaque&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;548&#34; y=&#34;-2285.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;writer.go&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;548&#34; y=&#34;-2276.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 0.07s (4.58%)&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N7&amp;#45;&amp;gt;N36 --&gt;
    &lt;g id=&#34;edge15&#34; class=&#34;edge&#34;&gt;
    &lt;title&gt;N7-&amp;gt;N36&lt;/title&gt;
    &lt;g id=&#34;a_edge15&#34;&gt;&lt;a xlink:title=&#34;image/png.(*Encoder).Encode /Users/dfc/go/src/image/png/writer.go -&gt; image/png.opaque /Users/dfc/go/src/image/png/writer.go (0.07s)&#34;&gt;
    &lt;path fill=&#34;none&#34; stroke=&#34;#b2a289&#34; d=&#34;M479.4787,-2438.7709C494.0192,-2407.6255 518.0115,-2356.2347 533.4032,-2323.266&#34;&gt;&lt;/path&gt;
    &lt;polygon fill=&#34;#b2a289&#34; stroke=&#34;#b2a289&#34; points=&#34;536.6335,-2324.6203 537.6925,-2314.0785 530.2907,-2321.659 536.6335,-2324.6203&#34;&gt;&lt;/polygon&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;g id=&#34;a_edge15-label&#34;&gt;&lt;a xlink:title=&#34;image/png.(*Encoder).Encode /Users/dfc/go/src/image/png/writer.go -&gt; image/png.opaque /Users/dfc/go/src/image/png/writer.go (0.07s)&#34;&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;525&#34; y=&#34;-2377.3&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 0.07s&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N10 --&gt;
    &lt;g id=&#34;node11&#34; class=&#34;node&#34;&gt;
    &lt;title&gt;N10&lt;/title&gt;
    &lt;g id=&#34;a_node11&#34;&gt;&lt;a xlink:title=&#34;runtime.convT2Inoptr /Users/dfc/go/src/runtime/iface.go (0.18s)&#34;&gt;
    &lt;polygon fill=&#34;#ede5df&#34; stroke=&#34;#b27b49&#34; points=&#34;580,-1972.5 516,-1972.5 516,-1928.5 580,-1928.5 580,-1972.5&#34;&gt;&lt;/polygon&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;548&#34; y=&#34;-1962.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;runtime&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;548&#34; y=&#34;-1953.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;convT2Inoptr&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;548&#34; y=&#34;-1944.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;iface.go&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;548&#34; y=&#34;-1935.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 0.18s (11.76%)&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N8&amp;#45;&amp;gt;N10 --&gt;
    &lt;g id=&#34;edge9&#34; class=&#34;edge&#34;&gt;
    &lt;title&gt;N8-&amp;gt;N10&lt;/title&gt;
    &lt;g id=&#34;a_edge9&#34;&gt;&lt;a xlink:title=&#34;main.(*img).At /Users/dfc/devel/understanding-the-execution-tracer/examples/mandelbrot-pkg-profile/mandelbrot.go -&gt; runtime.convT2Inoptr /Users/dfc/go/src/runtime/iface.go (0.18s)&#34;&gt;
    &lt;path fill=&#34;none&#34; stroke=&#34;#b27b49&#34; d=&#34;M548,-2027.9873C548,-2014.2341 548,-1997.3207 548,-1982.8083&#34;&gt;&lt;/path&gt;
    &lt;polygon fill=&#34;#b27b49&#34; stroke=&#34;#b27b49&#34; points=&#34;551.5001,-1982.7448 548,-1972.7448 544.5001,-1982.7448 551.5001,-1982.7448&#34;&gt;&lt;/polygon&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;g id=&#34;a_edge9-label&#34;&gt;&lt;a xlink:title=&#34;main.(*img).At /Users/dfc/devel/understanding-the-execution-tracer/examples/mandelbrot-pkg-profile/mandelbrot.go -&gt; runtime.convT2Inoptr /Users/dfc/go/src/runtime/iface.go (0.18s)&#34;&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;561&#34; y=&#34;-1998.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 0.18s&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N9 --&gt;
    &lt;g id=&#34;node10&#34; class=&#34;node&#34;&gt;
    &lt;title&gt;N9&lt;/title&gt;
    &lt;g id=&#34;a_node10&#34;&gt;&lt;a xlink:title=&#34;syscall.Syscall /Users/dfc/go/src/syscall/asm_darwin_amd64.s (0.05s)&#34;&gt;
    &lt;polygon fill=&#34;#edebe9&#34; stroke=&#34;#b2a895&#34; points=&#34;500.5,-60 405.5,-60 405.5,0 500.5,0 500.5,-60&#34;&gt;&lt;/polygon&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-46.4&#34; font-family=&#34;Times,serif&#34; font-size=&#34;12.00&#34; fill=&#34;#000000&#34;&gt;syscall&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-33.4&#34; font-family=&#34;Times,serif&#34; font-size=&#34;12.00&#34; fill=&#34;#000000&#34;&gt;Syscall&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-20.4&#34; font-family=&#34;Times,serif&#34; font-size=&#34;12.00&#34; fill=&#34;#000000&#34;&gt;asm_darwin_amd64.s&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-7.4&#34; font-family=&#34;Times,serif&#34; font-size=&#34;12.00&#34; fill=&#34;#000000&#34;&gt;0.05s (3.27%)&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N10&amp;#45;&amp;gt;N5 --&gt;
    &lt;g id=&#34;edge10&#34; class=&#34;edge&#34;&gt;
    &lt;title&gt;N10-&amp;gt;N5&lt;/title&gt;
    &lt;g id=&#34;a_edge10&#34;&gt;&lt;a xlink:title=&#34;runtime.convT2Inoptr /Users/dfc/go/src/runtime/iface.go -&gt; runtime.mallocgc /Users/dfc/go/src/runtime/malloc.go (0.16s)&#34;&gt;
    &lt;path fill=&#34;none&#34; stroke=&#34;#b28355&#34; d=&#34;M548,-1928.3959C548,-1915.7144 548,-1899.2214 548,-1883.4481&#34;&gt;&lt;/path&gt;
    &lt;polygon fill=&#34;#b28355&#34; stroke=&#34;#b28355&#34; points=&#34;551.5001,-1883.234 548,-1873.234 544.5001,-1883.2341 551.5001,-1883.234&#34;&gt;&lt;/polygon&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;g id=&#34;a_edge10-label&#34;&gt;&lt;a xlink:title=&#34;runtime.convT2Inoptr /Users/dfc/go/src/runtime/iface.go -&gt; runtime.mallocgc /Users/dfc/go/src/runtime/malloc.go (0.16s)&#34;&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;561&#34; y=&#34;-1894.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 0.16s&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N13 --&gt;
    &lt;g id=&#34;node14&#34; class=&#34;node&#34;&gt;
    &lt;title&gt;N13&lt;/title&gt;
    &lt;g id=&#34;a_node14&#34;&gt;&lt;a xlink:title=&#34;runtime.memmove /Users/dfc/go/src/runtime/memmove_amd64.s (0.02s)&#34;&gt;
    &lt;polygon fill=&#34;#edeceb&#34; stroke=&#34;#b2afa6&#34; points=&#34;695.5,-1859.5 612.5,-1859.5 612.5,-1803.5 695.5,-1803.5 695.5,-1859.5&#34;&gt;&lt;/polygon&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;654&#34; y=&#34;-1846.7&#34; font-family=&#34;Times,serif&#34; font-size=&#34;11.00&#34; fill=&#34;#000000&#34;&gt;runtime&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;654&#34; y=&#34;-1834.7&#34; font-family=&#34;Times,serif&#34; font-size=&#34;11.00&#34; fill=&#34;#000000&#34;&gt;memmove&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;654&#34; y=&#34;-1822.7&#34; font-family=&#34;Times,serif&#34; font-size=&#34;11.00&#34; fill=&#34;#000000&#34;&gt;memmove_amd64.s&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;654&#34; y=&#34;-1810.7&#34; font-family=&#34;Times,serif&#34; font-size=&#34;11.00&#34; fill=&#34;#000000&#34;&gt;0.02s (1.31%)&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N10&amp;#45;&amp;gt;N13 --&gt;
    &lt;g id=&#34;edge39&#34; class=&#34;edge&#34;&gt;
    &lt;title&gt;N10-&amp;gt;N13&lt;/title&gt;
    &lt;g id=&#34;a_edge39&#34;&gt;&lt;a xlink:title=&#34;runtime.convT2Inoptr /Users/dfc/go/src/runtime/iface.go -&gt; runtime.memmove /Users/dfc/go/src/runtime/memmove_amd64.s (0.02s)&#34;&gt;
    &lt;path fill=&#34;none&#34; stroke=&#34;#b2afa6&#34; d=&#34;M567.6894,-1928.3959C582.9118,-1911.3066 604.2995,-1887.2958 621.9756,-1867.4519&#34;&gt;&lt;/path&gt;
    &lt;polygon fill=&#34;#b2afa6&#34; stroke=&#34;#b2afa6&#34; points=&#34;624.7575,-1869.5908 628.7955,-1859.7956 619.5305,-1864.9348 624.7575,-1869.5908&#34;&gt;&lt;/polygon&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;g id=&#34;a_edge39-label&#34;&gt;&lt;a xlink:title=&#34;runtime.convT2Inoptr /Users/dfc/go/src/runtime/iface.go -&gt; runtime.memmove /Users/dfc/go/src/runtime/memmove_amd64.s (0.02s)&#34;&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;614&#34; y=&#34;-1894.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 0.02s&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N11 --&gt;
    &lt;g id=&#34;node12&#34; class=&#34;node&#34;&gt;
    &lt;title&gt;N11&lt;/title&gt;
    &lt;g id=&#34;a_node12&#34;&gt;&lt;a xlink:title=&#34;compress/flate.(*compressor).deflate /Users/dfc/go/src/compress/flate/deflate.go (0.07s)&#34;&gt;
    &lt;polygon fill=&#34;#edeae7&#34; stroke=&#34;#b2a289&#34; points=&#34;486.5,-1739 419.5,-1739 419.5,-1665 486.5,-1665 486.5,-1739&#34;&gt;&lt;/polygon&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-1727&#34; font-family=&#34;Times,serif&#34; font-size=&#34;10.00&#34; fill=&#34;#000000&#34;&gt;compress/flate&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-1716&#34; font-family=&#34;Times,serif&#34; font-size=&#34;10.00&#34; fill=&#34;#000000&#34;&gt;(*compressor)&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-1705&#34; font-family=&#34;Times,serif&#34; font-size=&#34;10.00&#34; fill=&#34;#000000&#34;&gt;deflate&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-1694&#34; font-family=&#34;Times,serif&#34; font-size=&#34;10.00&#34; fill=&#34;#000000&#34;&gt;deflate.go&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-1683&#34; font-family=&#34;Times,serif&#34; font-size=&#34;10.00&#34; fill=&#34;#000000&#34;&gt;0.01s (0.65%)&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-1672&#34; font-family=&#34;Times,serif&#34; font-size=&#34;10.00&#34; fill=&#34;#000000&#34;&gt;of 0.07s (4.58%)&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N24 --&gt;
    &lt;g id=&#34;node25&#34; class=&#34;node&#34;&gt;
    &lt;title&gt;N24&lt;/title&gt;
    &lt;g id=&#34;a_node25&#34;&gt;&lt;a xlink:title=&#34;compress/flate.(*compressor).findMatch /Users/dfc/go/src/compress/flate/deflate.go (0.01s)&#34;&gt;
    &lt;polygon fill=&#34;#edecec&#34; stroke=&#34;#b2b1ac&#34; points=&#34;565.5,-1614 504.5,-1614 504.5,-1561 565.5,-1561 565.5,-1614&#34;&gt;&lt;/polygon&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;535&#34; y=&#34;-1603.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;compress/flate&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;535&#34; y=&#34;-1594.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;(*compressor)&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;535&#34; y=&#34;-1585.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;findMatch&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;535&#34; y=&#34;-1576.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;deflate.go&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;535&#34; y=&#34;-1567.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 0.01s (0.65%)&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N11&amp;#45;&amp;gt;N24 --&gt;
    &lt;g id=&#34;edge41&#34; class=&#34;edge&#34;&gt;
    &lt;title&gt;N11-&amp;gt;N24&lt;/title&gt;
    &lt;g id=&#34;a_edge41&#34;&gt;&lt;a xlink:title=&#34;compress/flate.(*compressor).deflate /Users/dfc/go/src/compress/flate/deflate.go -&gt; compress/flate.(*compressor).findMatch /Users/dfc/go/src/compress/flate/deflate.go (0.01s)&#34;&gt;
    &lt;path fill=&#34;none&#34; stroke=&#34;#b2b1ac&#34; d=&#34;M479.6231,-1664.8251C489.2902,-1651.3265 500.1782,-1636.1231 509.7255,-1622.7918&#34;&gt;&lt;/path&gt;
    &lt;polygon fill=&#34;#b2b1ac&#34; stroke=&#34;#b2b1ac&#34; points=&#34;512.8026,-1624.5064 515.7795,-1614.3384 507.1115,-1620.4307 512.8026,-1624.5064&#34;&gt;&lt;/polygon&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;g id=&#34;a_edge41-label&#34;&gt;&lt;a xlink:title=&#34;compress/flate.(*compressor).deflate /Users/dfc/go/src/compress/flate/deflate.go -&gt; compress/flate.(*compressor).findMatch /Users/dfc/go/src/compress/flate/deflate.go (0.01s)&#34;&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;514&#34; y=&#34;-1635.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 0.01s&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N26 --&gt;
    &lt;g id=&#34;node27&#34; class=&#34;node&#34;&gt;
    &lt;title&gt;N26&lt;/title&gt;
    &lt;g id=&#34;a_node27&#34;&gt;&lt;a xlink:title=&#34;compress/flate.(*compressor).writeBlock /Users/dfc/go/src/compress/flate/deflate.go (0.05s)&#34;&gt;
    &lt;polygon fill=&#34;#edebe9&#34; stroke=&#34;#b2a895&#34; points=&#34;483.5,-1614 422.5,-1614 422.5,-1561 483.5,-1561 483.5,-1614&#34;&gt;&lt;/polygon&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-1603.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;compress/flate&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-1594.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;(*compressor)&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-1585.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;writeBlock&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-1576.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;deflate.go&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-1567.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 0.05s (3.27%)&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N11&amp;#45;&amp;gt;N26 --&gt;
    &lt;g id=&#34;edge20&#34; class=&#34;edge&#34;&gt;
    &lt;title&gt;N11-&amp;gt;N26&lt;/title&gt;
    &lt;g id=&#34;a_edge20&#34;&gt;&lt;a xlink:title=&#34;compress/flate.(*compressor).deflate /Users/dfc/go/src/compress/flate/deflate.go -&gt; compress/flate.(*compressor).writeBlock /Users/dfc/go/src/compress/flate/deflate.go (0.05s)&#34;&gt;
    &lt;path fill=&#34;none&#34; stroke=&#34;#b2a895&#34; d=&#34;M453,-1664.8251C453,-1651.9693 453,-1637.5671 453,-1624.7086&#34;&gt;&lt;/path&gt;
    &lt;polygon fill=&#34;#b2a895&#34; stroke=&#34;#b2a895&#34; points=&#34;456.5001,-1624.3383 453,-1614.3384 449.5001,-1624.3384 456.5001,-1624.3383&#34;&gt;&lt;/polygon&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;g id=&#34;a_edge20-label&#34;&gt;&lt;a xlink:title=&#34;compress/flate.(*compressor).deflate /Users/dfc/go/src/compress/flate/deflate.go -&gt; compress/flate.(*compressor).writeBlock /Users/dfc/go/src/compress/flate/deflate.go (0.05s)&#34;&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;466&#34; y=&#34;-1635.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 0.05s&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N12 --&gt;
    &lt;g id=&#34;node13&#34; class=&#34;node&#34;&gt;
    &lt;title&gt;N12&lt;/title&gt;
    &lt;g id=&#34;a_node13&#34;&gt;&lt;a xlink:title=&#34;runtime.mmap /Users/dfc/go/src/runtime/sys_darwin_amd64.s (0.02s)&#34;&gt;
    &lt;polygon fill=&#34;#edeceb&#34; stroke=&#34;#b2afa6&#34; points=&#34;683,-669 597,-669 597,-613 683,-613 683,-669&#34;&gt;&lt;/polygon&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;640&#34; y=&#34;-656.2&#34; font-family=&#34;Times,serif&#34; font-size=&#34;11.00&#34; fill=&#34;#000000&#34;&gt;runtime&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;640&#34; y=&#34;-644.2&#34; font-family=&#34;Times,serif&#34; font-size=&#34;11.00&#34; fill=&#34;#000000&#34;&gt;mmap&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;640&#34; y=&#34;-632.2&#34; font-family=&#34;Times,serif&#34; font-size=&#34;11.00&#34; fill=&#34;#000000&#34;&gt;sys_darwin_amd64.s&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;640&#34; y=&#34;-620.2&#34; font-family=&#34;Times,serif&#34; font-size=&#34;11.00&#34; fill=&#34;#000000&#34;&gt;0.02s (1.31%)&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N14 --&gt;
    &lt;g id=&#34;node15&#34; class=&#34;node&#34;&gt;
    &lt;title&gt;N14&lt;/title&gt;
    &lt;g id=&#34;a_node15&#34;&gt;&lt;a xlink:title=&#34;compress/flate.(*huffmanBitWriter).write /Users/dfc/go/src/compress/flate/huffman_bit_writer.go (0.05s)&#34;&gt;
    &lt;polygon fill=&#34;#edebe9&#34; stroke=&#34;#b2a895&#34; points=&#34;488.5,-1189 417.5,-1189 417.5,-1136 488.5,-1136 488.5,-1189&#34;&gt;&lt;/polygon&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-1178.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;compress/flate&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-1169.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;(*huffmanBitWriter)&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-1160.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;write&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-1151.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;huffman_bit_writer.go&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-1142.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 0.05s (3.27%)&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N27 --&gt;
    &lt;g id=&#34;node28&#34; class=&#34;node&#34;&gt;
    &lt;title&gt;N27&lt;/title&gt;
    &lt;g id=&#34;a_node28&#34;&gt;&lt;a xlink:title=&#34;compress/flate.(*dictWriter).Write /Users/dfc/go/src/compress/flate/deflate.go (0.05s)&#34;&gt;
    &lt;polygon fill=&#34;#edebe9&#34; stroke=&#34;#b2a895&#34; points=&#34;483.5,-1085 422.5,-1085 422.5,-1032 483.5,-1032 483.5,-1085&#34;&gt;&lt;/polygon&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-1074.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;compress/flate&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-1065.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;(*dictWriter)&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-1056.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;Write&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-1047.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;deflate.go&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-1038.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 0.05s (3.27%)&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N14&amp;#45;&amp;gt;N27 --&gt;
    &lt;g id=&#34;edge23&#34; class=&#34;edge&#34;&gt;
    &lt;title&gt;N14-&amp;gt;N27&lt;/title&gt;
    &lt;g id=&#34;a_edge23&#34;&gt;&lt;a xlink:title=&#34;compress/flate.(*huffmanBitWriter).write /Users/dfc/go/src/compress/flate/huffman_bit_writer.go -&gt; compress/flate.(*dictWriter).Write /Users/dfc/go/src/compress/flate/deflate.go (0.05s)&#34;&gt;
    &lt;path fill=&#34;none&#34; stroke=&#34;#b2a895&#34; d=&#34;M453,-1135.9873C453,-1123.7358 453,-1108.9766 453,-1095.6407&#34;&gt;&lt;/path&gt;
    &lt;polygon fill=&#34;#b2a895&#34; stroke=&#34;#b2a895&#34; points=&#34;456.5001,-1095.3259 453,-1085.3259 449.5001,-1095.3259 456.5001,-1095.3259&#34;&gt;&lt;/polygon&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;g id=&#34;a_edge23-label&#34;&gt;&lt;a xlink:title=&#34;compress/flate.(*huffmanBitWriter).write /Users/dfc/go/src/compress/flate/huffman_bit_writer.go -&gt; compress/flate.(*dictWriter).Write /Users/dfc/go/src/compress/flate/deflate.go (0.05s)&#34;&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;466&#34; y=&#34;-1106.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 0.05s&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N15 --&gt;
    &lt;g id=&#34;node16&#34; class=&#34;node&#34;&gt;
    &lt;title&gt;N15&lt;/title&gt;
    &lt;g id=&#34;a_node16&#34;&gt;&lt;a xlink:title=&#34;compress/flate.(*huffmanBitWriter).writeTokens /Users/dfc/go/src/compress/flate/huffman_bit_writer.go (0.05s)&#34;&gt;
    &lt;polygon fill=&#34;#edebe9&#34; stroke=&#34;#b2a895&#34; points=&#34;488.5,-1397 417.5,-1397 417.5,-1344 488.5,-1344 488.5,-1397&#34;&gt;&lt;/polygon&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-1386.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;compress/flate&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-1377.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;(*huffmanBitWriter)&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-1368.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;writeTokens&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-1359.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;huffman_bit_writer.go&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-1350.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 0.05s (3.27%)&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N28 --&gt;
    &lt;g id=&#34;node29&#34; class=&#34;node&#34;&gt;
    &lt;title&gt;N28&lt;/title&gt;
    &lt;g id=&#34;a_node29&#34;&gt;&lt;a xlink:title=&#34;compress/flate.(*huffmanBitWriter).writeBits /Users/dfc/go/src/compress/flate/huffman_bit_writer.go (0.01s)&#34;&gt;
    &lt;polygon fill=&#34;#edecec&#34; stroke=&#34;#b2b1ac&#34; points=&#34;399.5,-1293 328.5,-1293 328.5,-1240 399.5,-1240 399.5,-1293&#34;&gt;&lt;/polygon&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;364&#34; y=&#34;-1282.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;compress/flate&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;364&#34; y=&#34;-1273.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;(*huffmanBitWriter)&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;364&#34; y=&#34;-1264.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;writeBits&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;364&#34; y=&#34;-1255.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;huffman_bit_writer.go&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;364&#34; y=&#34;-1246.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 0.01s (0.65%)&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N15&amp;#45;&amp;gt;N28 --&gt;
    &lt;g id=&#34;edge44&#34; class=&#34;edge&#34;&gt;
    &lt;title&gt;N15-&amp;gt;N28&lt;/title&gt;
    &lt;g id=&#34;a_edge44&#34;&gt;&lt;a xlink:title=&#34;compress/flate.(*huffmanBitWriter).writeTokens /Users/dfc/go/src/compress/flate/huffman_bit_writer.go -&gt; compress/flate.(*huffmanBitWriter).writeBits /Users/dfc/go/src/compress/flate/huffman_bit_writer.go (0.01s)&#34;&gt;
    &lt;path fill=&#34;none&#34; stroke=&#34;#b2b1ac&#34; d=&#34;M430.3113,-1343.9873C419.204,-1331.008 405.6881,-1315.2141 393.7636,-1301.2799&#34;&gt;&lt;/path&gt;
    &lt;polygon fill=&#34;#b2b1ac&#34; stroke=&#34;#b2b1ac&#34; points=&#34;396.1179,-1298.648 386.9568,-1293.3259 390.7995,-1303.1993 396.1179,-1298.648&#34;&gt;&lt;/polygon&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;g id=&#34;a_edge44-label&#34;&gt;&lt;a xlink:title=&#34;compress/flate.(*huffmanBitWriter).writeTokens /Users/dfc/go/src/compress/flate/huffman_bit_writer.go -&gt; compress/flate.(*huffmanBitWriter).writeBits /Users/dfc/go/src/compress/flate/huffman_bit_writer.go (0.01s)&#34;&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;426&#34; y=&#34;-1314.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 0.01s&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N30 --&gt;
    &lt;g id=&#34;node31&#34; class=&#34;node&#34;&gt;
    &lt;title&gt;N30&lt;/title&gt;
    &lt;g id=&#34;a_node31&#34;&gt;&lt;a xlink:title=&#34;compress/flate.(*huffmanBitWriter).writeCode /Users/dfc/go/src/compress/flate/huffman_bit_writer.go (0.04s)&#34;&gt;
    &lt;polygon fill=&#34;#edecea&#34; stroke=&#34;#b2aa9b&#34; points=&#34;488.5,-1293 417.5,-1293 417.5,-1240 488.5,-1240 488.5,-1293&#34;&gt;&lt;/polygon&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-1282.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;compress/flate&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-1273.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;(*huffmanBitWriter)&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-1264.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;writeCode&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-1255.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;huffman_bit_writer.go&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-1246.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 0.04s (2.61%)&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N15&amp;#45;&amp;gt;N30 --&gt;
    &lt;g id=&#34;edge33&#34; class=&#34;edge&#34;&gt;
    &lt;title&gt;N15-&amp;gt;N30&lt;/title&gt;
    &lt;g id=&#34;a_edge33&#34;&gt;&lt;a xlink:title=&#34;compress/flate.(*huffmanBitWriter).writeTokens /Users/dfc/go/src/compress/flate/huffman_bit_writer.go -&gt; compress/flate.(*huffmanBitWriter).writeCode /Users/dfc/go/src/compress/flate/huffman_bit_writer.go (0.04s)&#34;&gt;
    &lt;path fill=&#34;none&#34; stroke=&#34;#b2aa9b&#34; d=&#34;M453,-1343.9873C453,-1331.7358 453,-1316.9766 453,-1303.6407&#34;&gt;&lt;/path&gt;
    &lt;polygon fill=&#34;#b2aa9b&#34; stroke=&#34;#b2aa9b&#34; points=&#34;456.5001,-1303.3259 453,-1293.3259 449.5001,-1303.3259 456.5001,-1303.3259&#34;&gt;&lt;/polygon&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;g id=&#34;a_edge33-label&#34;&gt;&lt;a xlink:title=&#34;compress/flate.(*huffmanBitWriter).writeTokens /Users/dfc/go/src/compress/flate/huffman_bit_writer.go -&gt; compress/flate.(*huffmanBitWriter).writeCode /Users/dfc/go/src/compress/flate/huffman_bit_writer.go (0.04s)&#34;&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;466&#34; y=&#34;-1314.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 0.04s&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N16 --&gt;
    &lt;g id=&#34;node17&#34; class=&#34;node&#34;&gt;
    &lt;title&gt;N16&lt;/title&gt;
    &lt;g id=&#34;a_node17&#34;&gt;&lt;a xlink:title=&#34;runtime.systemstack /Users/dfc/go/src/runtime/asm_amd64.s (0.03s)&#34;&gt;
    &lt;polygon fill=&#34;#edecea&#34; stroke=&#34;#b2ada1&#34; points=&#34;646.5,-1609.5 585.5,-1609.5 585.5,-1565.5 646.5,-1565.5 646.5,-1609.5&#34;&gt;&lt;/polygon&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;616&#34; y=&#34;-1599.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;runtime&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;616&#34; y=&#34;-1590.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;systemstack&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;616&#34; y=&#34;-1581.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;asm_amd64.s&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;616&#34; y=&#34;-1572.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 0.03s (1.96%)&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N42 --&gt;
    &lt;g id=&#34;node43&#34; class=&#34;node&#34;&gt;
    &lt;title&gt;N42&lt;/title&gt;
    &lt;g id=&#34;a_node43&#34;&gt;&lt;a xlink:title=&#34;runtime.(*mcache).nextFree.func1 /Users/dfc/go/src/runtime/malloc.go (0.02s)&#34;&gt;
    &lt;polygon fill=&#34;#edeceb&#34; stroke=&#34;#b2afa6&#34; points=&#34;725.5,-1510 664.5,-1510 664.5,-1448 725.5,-1448 725.5,-1510&#34;&gt;&lt;/polygon&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;695&#34; y=&#34;-1499.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;runtime&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;695&#34; y=&#34;-1490.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;(*mcache)&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;695&#34; y=&#34;-1481.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;nextFree&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;695&#34; y=&#34;-1472.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;func1&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;695&#34; y=&#34;-1463.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;malloc.go&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;695&#34; y=&#34;-1454.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 0.02s (1.31%)&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N16&amp;#45;&amp;gt;N42 --&gt;
    &lt;g id=&#34;edge40&#34; class=&#34;edge&#34;&gt;
    &lt;title&gt;N16-&amp;gt;N42&lt;/title&gt;
    &lt;g id=&#34;a_edge40&#34;&gt;&lt;a xlink:title=&#34;runtime.systemstack /Users/dfc/go/src/runtime/asm_amd64.s -&gt; runtime.(*mcache).nextFree.func1 /Users/dfc/go/src/runtime/malloc.go (0.02s)&#34;&gt;
    &lt;path fill=&#34;none&#34; stroke=&#34;#b2afa6&#34; d=&#34;M632.1775,-1565.2816C641.928,-1551.89 654.6326,-1534.4413 666.0634,-1518.742&#34;&gt;&lt;/path&gt;
    &lt;polygon fill=&#34;#b2afa6&#34; stroke=&#34;#b2afa6&#34; points=&#34;669.1992,-1520.3815 672.2559,-1510.2371 663.5403,-1516.2611 669.1992,-1520.3815&#34;&gt;&lt;/polygon&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;g id=&#34;a_edge40-label&#34;&gt;&lt;a xlink:title=&#34;runtime.systemstack /Users/dfc/go/src/runtime/asm_amd64.s -&gt; runtime.(*mcache).nextFree.func1 /Users/dfc/go/src/runtime/malloc.go (0.02s)&#34;&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;670&#34; y=&#34;-1531.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 0.02s&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N46 --&gt;
    &lt;g id=&#34;node47&#34; class=&#34;node&#34;&gt;
    &lt;title&gt;N46&lt;/title&gt;
    &lt;g id=&#34;a_node47&#34;&gt;&lt;a xlink:title=&#34;runtime.(*mheap).alloc.func1 /Users/dfc/go/src/runtime/mheap.go (0.01s)&#34;&gt;
    &lt;polygon fill=&#34;#edecec&#34; stroke=&#34;#b2b1ac&#34; points=&#34;646.5,-1510 585.5,-1510 585.5,-1448 646.5,-1448 646.5,-1510&#34;&gt;&lt;/polygon&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;616&#34; y=&#34;-1499.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;runtime&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;616&#34; y=&#34;-1490.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;(*mheap)&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;616&#34; y=&#34;-1481.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;alloc&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;616&#34; y=&#34;-1472.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;func1&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;616&#34; y=&#34;-1463.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;mheap.go&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;616&#34; y=&#34;-1454.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 0.01s (0.65%)&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N16&amp;#45;&amp;gt;N46 --&gt;
    &lt;g id=&#34;edge59&#34; class=&#34;edge&#34;&gt;
    &lt;title&gt;N16-&amp;gt;N46&lt;/title&gt;
    &lt;g id=&#34;a_edge59&#34;&gt;&lt;a xlink:title=&#34;runtime.systemstack /Users/dfc/go/src/runtime/asm_amd64.s -&gt; runtime.(*mheap).alloc.func1 /Users/dfc/go/src/runtime/mheap.go (0.01s)&#34;&gt;
    &lt;path fill=&#34;none&#34; stroke=&#34;#b2b1ac&#34; d=&#34;M616,-1565.2816C616,-1552.386 616,-1535.7282 616,-1520.4933&#34;&gt;&lt;/path&gt;
    &lt;polygon fill=&#34;#b2b1ac&#34; stroke=&#34;#b2b1ac&#34; points=&#34;619.5001,-1520.2371 616,-1510.2371 612.5001,-1520.2372 619.5001,-1520.2371&#34;&gt;&lt;/polygon&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;g id=&#34;a_edge59-label&#34;&gt;&lt;a xlink:title=&#34;runtime.systemstack /Users/dfc/go/src/runtime/asm_amd64.s -&gt; runtime.(*mheap).alloc.func1 /Users/dfc/go/src/runtime/mheap.go (0.01s)&#34;&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;629&#34; y=&#34;-1531.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 0.01s&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N17 --&gt;
    &lt;g id=&#34;node18&#34; class=&#34;node&#34;&gt;
    &lt;title&gt;N17&lt;/title&gt;
    &lt;g id=&#34;a_node18&#34;&gt;&lt;a xlink:title=&#34;compress/flate.matchLen /Users/dfc/go/src/compress/flate/deflate.go (0.01s)&#34;&gt;
    &lt;polygon fill=&#34;#edecec&#34; stroke=&#34;#b2b1ac&#34; points=&#34;567,-1505 507,-1505 507,-1453 567,-1453 567,-1505&#34;&gt;&lt;/polygon&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;537&#34; y=&#34;-1493&#34; font-family=&#34;Times,serif&#34; font-size=&#34;10.00&#34; fill=&#34;#000000&#34;&gt;compress/flate&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;537&#34; y=&#34;-1482&#34; font-family=&#34;Times,serif&#34; font-size=&#34;10.00&#34; fill=&#34;#000000&#34;&gt;matchLen&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;537&#34; y=&#34;-1471&#34; font-family=&#34;Times,serif&#34; font-size=&#34;10.00&#34; fill=&#34;#000000&#34;&gt;deflate.go&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;537&#34; y=&#34;-1460&#34; font-family=&#34;Times,serif&#34; font-size=&#34;10.00&#34; fill=&#34;#000000&#34;&gt;0.01s (0.65%)&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N19 --&gt;
    &lt;g id=&#34;node20&#34; class=&#34;node&#34;&gt;
    &lt;title&gt;N19&lt;/title&gt;
    &lt;g id=&#34;a_node20&#34;&gt;&lt;a xlink:title=&#34;runtime.(*mcentral).grow /Users/dfc/go/src/runtime/mcentral.go (0.02s)&#34;&gt;
    &lt;polygon fill=&#34;#edeceb&#34; stroke=&#34;#b2afa6&#34; points=&#34;725.5,-1189 664.5,-1189 664.5,-1136 725.5,-1136 725.5,-1189&#34;&gt;&lt;/polygon&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;695&#34; y=&#34;-1178.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;runtime&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;695&#34; y=&#34;-1169.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;(*mcentral)&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;695&#34; y=&#34;-1160.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;grow&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;695&#34; y=&#34;-1151.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;mcentral.go&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;695&#34; y=&#34;-1142.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 0.02s (1.31%)&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N45 --&gt;
    &lt;g id=&#34;node46&#34; class=&#34;node&#34;&gt;
    &lt;title&gt;N45&lt;/title&gt;
    &lt;g id=&#34;a_node46&#34;&gt;&lt;a xlink:title=&#34;runtime.(*mheap).alloc /Users/dfc/go/src/runtime/mheap.go (0.01s)&#34;&gt;
    &lt;polygon fill=&#34;#edecec&#34; stroke=&#34;#b2b1ac&#34; points=&#34;725.5,-1085 664.5,-1085 664.5,-1032 725.5,-1032 725.5,-1085&#34;&gt;&lt;/polygon&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;695&#34; y=&#34;-1074.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;runtime&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;695&#34; y=&#34;-1065.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;(*mheap)&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;695&#34; y=&#34;-1056.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;alloc&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;695&#34; y=&#34;-1047.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;mheap.go&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;695&#34; y=&#34;-1038.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 0.01s (0.65%)&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N19&amp;#45;&amp;gt;N45 --&gt;
    &lt;g id=&#34;edge46&#34; class=&#34;edge&#34;&gt;
    &lt;title&gt;N19-&amp;gt;N45&lt;/title&gt;
    &lt;g id=&#34;a_edge46&#34;&gt;&lt;a xlink:title=&#34;runtime.(*mcentral).grow /Users/dfc/go/src/runtime/mcentral.go -&gt; runtime.(*mheap).alloc /Users/dfc/go/src/runtime/mheap.go (0.01s)&#34;&gt;
    &lt;path fill=&#34;none&#34; stroke=&#34;#b2b1ac&#34; d=&#34;M695,-1135.9873C695,-1123.7358 695,-1108.9766 695,-1095.6407&#34;&gt;&lt;/path&gt;
    &lt;polygon fill=&#34;#b2b1ac&#34; stroke=&#34;#b2b1ac&#34; points=&#34;698.5001,-1095.3259 695,-1085.3259 691.5001,-1095.3259 698.5001,-1095.3259&#34;&gt;&lt;/polygon&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;g id=&#34;a_edge46-label&#34;&gt;&lt;a xlink:title=&#34;runtime.(*mcentral).grow /Users/dfc/go/src/runtime/mcentral.go -&gt; runtime.(*mheap).alloc /Users/dfc/go/src/runtime/mheap.go (0.01s)&#34;&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;708&#34; y=&#34;-1106.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 0.01s&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N51 --&gt;
    &lt;g id=&#34;node52&#34; class=&#34;node&#34;&gt;
    &lt;title&gt;N51&lt;/title&gt;
    &lt;g id=&#34;a_node52&#34;&gt;&lt;a xlink:title=&#34;runtime.heapBits.initSpan /Users/dfc/go/src/runtime/mbitmap.go (0.01s)&#34;&gt;
    &lt;polygon fill=&#34;#edecec&#34; stroke=&#34;#b2b1ac&#34; points=&#34;811.5,-1085 750.5,-1085 750.5,-1032 811.5,-1032 811.5,-1085&#34;&gt;&lt;/polygon&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;781&#34; y=&#34;-1074.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;runtime&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;781&#34; y=&#34;-1065.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;heapBits&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;781&#34; y=&#34;-1056.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;initSpan&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;781&#34; y=&#34;-1047.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;mbitmap.go&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;781&#34; y=&#34;-1038.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 0.01s (0.65%)&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N19&amp;#45;&amp;gt;N51 --&gt;
    &lt;g id=&#34;edge47&#34; class=&#34;edge&#34;&gt;
    &lt;title&gt;N19-&amp;gt;N51&lt;/title&gt;
    &lt;g id=&#34;a_edge47&#34;&gt;&lt;a xlink:title=&#34;runtime.(*mcentral).grow /Users/dfc/go/src/runtime/mcentral.go -&gt; runtime.heapBits.initSpan /Users/dfc/go/src/runtime/mbitmap.go (0.01s)&#34;&gt;
    &lt;path fill=&#34;none&#34; stroke=&#34;#b2b1ac&#34; d=&#34;M716.9239,-1135.9873C727.6568,-1123.008 740.7172,-1107.2141 752.2397,-1093.2799&#34;&gt;&lt;/path&gt;
    &lt;polygon fill=&#34;#b2b1ac&#34; stroke=&#34;#b2b1ac&#34; points=&#34;755.1416,-1095.2628 758.8171,-1085.3259 749.7471,-1090.8019 755.1416,-1095.2628&#34;&gt;&lt;/polygon&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;g id=&#34;a_edge47-label&#34;&gt;&lt;a xlink:title=&#34;runtime.(*mcentral).grow /Users/dfc/go/src/runtime/mcentral.go -&gt; runtime.heapBits.initSpan /Users/dfc/go/src/runtime/mbitmap.go (0.01s)&#34;&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;756&#34; y=&#34;-1106.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 0.01s&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N20 --&gt;
    &lt;g id=&#34;node21&#34; class=&#34;node&#34;&gt;
    &lt;title&gt;N20&lt;/title&gt;
    &lt;g id=&#34;a_node21&#34;&gt;&lt;a xlink:title=&#34;runtime.memclrNoHeapPointers /Users/dfc/go/src/runtime/memclr_amd64.s (0.01s)&#34;&gt;
    &lt;polygon fill=&#34;#edecec&#34; stroke=&#34;#b2b1ac&#34; points=&#34;739.5,-980.5 650.5,-980.5 650.5,-928.5 739.5,-928.5 739.5,-980.5&#34;&gt;&lt;/polygon&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;695&#34; y=&#34;-968.5&#34; font-family=&#34;Times,serif&#34; font-size=&#34;10.00&#34; fill=&#34;#000000&#34;&gt;runtime&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;695&#34; y=&#34;-957.5&#34; font-family=&#34;Times,serif&#34; font-size=&#34;10.00&#34; fill=&#34;#000000&#34;&gt;memclrNoHeapPointers&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;695&#34; y=&#34;-946.5&#34; font-family=&#34;Times,serif&#34; font-size=&#34;10.00&#34; fill=&#34;#000000&#34;&gt;memclr_amd64.s&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;695&#34; y=&#34;-935.5&#34; font-family=&#34;Times,serif&#34; font-size=&#34;10.00&#34; fill=&#34;#000000&#34;&gt;0.01s (0.65%)&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N21 --&gt;
    &lt;g id=&#34;node22&#34; class=&#34;node&#34;&gt;
    &lt;title&gt;N21&lt;/title&gt;
    &lt;g id=&#34;a_node22&#34;&gt;&lt;a xlink:title=&#34;bufio.(*Writer).Flush /Users/dfc/go/src/bufio/bufio.go (0.05s)&#34;&gt;
    &lt;polygon fill=&#34;#edebe9&#34; stroke=&#34;#b2a895&#34; points=&#34;483.5,-877 422.5,-877 422.5,-824 483.5,-824 483.5,-877&#34;&gt;&lt;/polygon&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-866.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;bufio&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-857.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;(*Writer)&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-848.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;Flush&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-839.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;bufio.go&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-830.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 0.05s (3.27%)&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N32 --&gt;
    &lt;g id=&#34;node33&#34; class=&#34;node&#34;&gt;
    &lt;title&gt;N32&lt;/title&gt;
    &lt;g id=&#34;a_node33&#34;&gt;&lt;a xlink:title=&#34;image/png.(*encoder).Write /Users/dfc/go/src/image/png/writer.go (0.05s)&#34;&gt;
    &lt;polygon fill=&#34;#edebe9&#34; stroke=&#34;#b2a895&#34; points=&#34;483.5,-773 422.5,-773 422.5,-720 483.5,-720 483.5,-773&#34;&gt;&lt;/polygon&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-762.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;image/png&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-753.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;(*encoder)&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-744.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;Write&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-735.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;writer.go&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-726.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 0.05s (3.27%)&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N21&amp;#45;&amp;gt;N32 --&gt;
    &lt;g id=&#34;edge18&#34; class=&#34;edge&#34;&gt;
    &lt;title&gt;N21-&amp;gt;N32&lt;/title&gt;
    &lt;g id=&#34;a_edge18&#34;&gt;&lt;a xlink:title=&#34;bufio.(*Writer).Flush /Users/dfc/go/src/bufio/bufio.go -&gt; image/png.(*encoder).Write /Users/dfc/go/src/image/png/writer.go (0.05s)&#34;&gt;
    &lt;path fill=&#34;none&#34; stroke=&#34;#b2a895&#34; d=&#34;M453,-823.9873C453,-811.7358 453,-796.9766 453,-783.6407&#34;&gt;&lt;/path&gt;
    &lt;polygon fill=&#34;#b2a895&#34; stroke=&#34;#b2a895&#34; points=&#34;456.5001,-783.3259 453,-773.3259 449.5001,-783.3259 456.5001,-783.3259&#34;&gt;&lt;/polygon&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;g id=&#34;a_edge18-label&#34;&gt;&lt;a xlink:title=&#34;bufio.(*Writer).Flush /Users/dfc/go/src/bufio/bufio.go -&gt; image/png.(*encoder).Write /Users/dfc/go/src/image/png/writer.go (0.05s)&#34;&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;466&#34; y=&#34;-794.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 0.05s&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N22 --&gt;
    &lt;g id=&#34;node23&#34; class=&#34;node&#34;&gt;
    &lt;title&gt;N22&lt;/title&gt;
    &lt;g id=&#34;a_node23&#34;&gt;&lt;a xlink:title=&#34;bufio.(*Writer).Write /Users/dfc/go/src/bufio/bufio.go (0.05s)&#34;&gt;
    &lt;polygon fill=&#34;#edebe9&#34; stroke=&#34;#b2a895&#34; points=&#34;483.5,-981 422.5,-981 422.5,-928 483.5,-928 483.5,-981&#34;&gt;&lt;/polygon&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-970.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;bufio&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-961.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;(*Writer)&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-952.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;Write&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-943.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;bufio.go&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-934.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 0.05s (3.27%)&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N22&amp;#45;&amp;gt;N21 --&gt;
    &lt;g id=&#34;edge19&#34; class=&#34;edge&#34;&gt;
    &lt;title&gt;N22-&amp;gt;N21&lt;/title&gt;
    &lt;g id=&#34;a_edge19&#34;&gt;&lt;a xlink:title=&#34;bufio.(*Writer).Write /Users/dfc/go/src/bufio/bufio.go -&gt; bufio.(*Writer).Flush /Users/dfc/go/src/bufio/bufio.go (0.05s)&#34;&gt;
    &lt;path fill=&#34;none&#34; stroke=&#34;#b2a895&#34; d=&#34;M453,-927.9873C453,-915.7358 453,-900.9766 453,-887.6407&#34;&gt;&lt;/path&gt;
    &lt;polygon fill=&#34;#b2a895&#34; stroke=&#34;#b2a895&#34; points=&#34;456.5001,-887.3259 453,-877.3259 449.5001,-887.3259 456.5001,-887.3259&#34;&gt;&lt;/polygon&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;g id=&#34;a_edge19-label&#34;&gt;&lt;a xlink:title=&#34;bufio.(*Writer).Write /Users/dfc/go/src/bufio/bufio.go -&gt; bufio.(*Writer).Flush /Users/dfc/go/src/bufio/bufio.go (0.05s)&#34;&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;466&#34; y=&#34;-898.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 0.05s&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N23 --&gt;
    &lt;g id=&#34;node24&#34; class=&#34;node&#34;&gt;
    &lt;title&gt;N23&lt;/title&gt;
    &lt;g id=&#34;a_node24&#34;&gt;&lt;a xlink:title=&#34;compress/flate.(*Writer).Write /Users/dfc/go/src/compress/flate/deflate.go (0.07s)&#34;&gt;
    &lt;polygon fill=&#34;#edeae7&#34; stroke=&#34;#b2a289&#34; points=&#34;486.5,-1977 425.5,-1977 425.5,-1924 486.5,-1924 486.5,-1977&#34;&gt;&lt;/polygon&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;456&#34; y=&#34;-1966.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;compress/flate&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;456&#34; y=&#34;-1957.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;(*Writer)&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;456&#34; y=&#34;-1948.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;Write&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;456&#34; y=&#34;-1939.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;deflate.go&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;456&#34; y=&#34;-1930.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 0.07s (4.58%)&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N25 --&gt;
    &lt;g id=&#34;node26&#34; class=&#34;node&#34;&gt;
    &lt;title&gt;N25&lt;/title&gt;
    &lt;g id=&#34;a_node26&#34;&gt;&lt;a xlink:title=&#34;compress/flate.(*compressor).write /Users/dfc/go/src/compress/flate/deflate.go (0.07s)&#34;&gt;
    &lt;polygon fill=&#34;#edeae7&#34; stroke=&#34;#b2a289&#34; points=&#34;483.5,-1858 422.5,-1858 422.5,-1805 483.5,-1805 483.5,-1858&#34;&gt;&lt;/polygon&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-1847.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;compress/flate&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-1838.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;(*compressor)&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-1829.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;write&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-1820.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;deflate.go&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-1811.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 0.07s (4.58%)&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N23&amp;#45;&amp;gt;N25 --&gt;
    &lt;g id=&#34;edge12&#34; class=&#34;edge&#34;&gt;
    &lt;title&gt;N23-&amp;gt;N25&lt;/title&gt;
    &lt;g id=&#34;a_edge12&#34;&gt;&lt;a xlink:title=&#34;compress/flate.(*Writer).Write /Users/dfc/go/src/compress/flate/deflate.go -&gt; compress/flate.(*compressor).write /Users/dfc/go/src/compress/flate/deflate.go (0.07s)&#34;&gt;
    &lt;path fill=&#34;none&#34; stroke=&#34;#b2a289&#34; d=&#34;M455.3267,-1923.7941C454.9137,-1907.4111 454.3791,-1886.2042 453.9265,-1868.2506&#34;&gt;&lt;/path&gt;
    &lt;polygon fill=&#34;#b2a289&#34; stroke=&#34;#b2a289&#34; points=&#34;457.422,-1868.0254 453.671,-1858.1168 450.4242,-1868.2019 457.422,-1868.0254&#34;&gt;&lt;/polygon&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;g id=&#34;a_edge12-label&#34;&gt;&lt;a xlink:title=&#34;compress/flate.(*Writer).Write /Users/dfc/go/src/compress/flate/deflate.go -&gt; compress/flate.(*compressor).write /Users/dfc/go/src/compress/flate/deflate.go (0.07s)&#34;&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;467&#34; y=&#34;-1894.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 0.07s&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N24&amp;#45;&amp;gt;N17 --&gt;
    &lt;g id=&#34;edge42&#34; class=&#34;edge&#34;&gt;
    &lt;title&gt;N24-&amp;gt;N17&lt;/title&gt;
    &lt;g id=&#34;a_edge42&#34;&gt;&lt;a xlink:title=&#34;compress/flate.(*compressor).findMatch /Users/dfc/go/src/compress/flate/deflate.go -&gt; compress/flate.matchLen /Users/dfc/go/src/compress/flate/deflate.go (0.01s)&#34;&gt;
    &lt;path fill=&#34;none&#34; stroke=&#34;#b2b1ac&#34; d=&#34;M535.4893,-1560.9579C535.7405,-1547.3274 536.0506,-1530.5068 536.3243,-1515.658&#34;&gt;&lt;/path&gt;
    &lt;polygon fill=&#34;#b2b1ac&#34; stroke=&#34;#b2b1ac&#34; points=&#34;539.8308,-1515.3309 536.5158,-1505.2681 532.832,-1515.2018 539.8308,-1515.3309&#34;&gt;&lt;/polygon&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;g id=&#34;a_edge42-label&#34;&gt;&lt;a xlink:title=&#34;compress/flate.(*compressor).findMatch /Users/dfc/go/src/compress/flate/deflate.go -&gt; compress/flate.matchLen /Users/dfc/go/src/compress/flate/deflate.go (0.01s)&#34;&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;549&#34; y=&#34;-1531.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 0.01s&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N25&amp;#45;&amp;gt;N11 --&gt;
    &lt;g id=&#34;edge13&#34; class=&#34;edge&#34;&gt;
    &lt;title&gt;N25-&amp;gt;N11&lt;/title&gt;
    &lt;g id=&#34;a_edge13&#34;&gt;&lt;a xlink:title=&#34;compress/flate.(*compressor).write /Users/dfc/go/src/compress/flate/deflate.go -&gt; compress/flate.(*compressor).deflate /Users/dfc/go/src/compress/flate/deflate.go (0.07s)&#34;&gt;
    &lt;path fill=&#34;none&#34; stroke=&#34;#b2a289&#34; d=&#34;M453,-1804.9812C453,-1788.9977 453,-1768.1718 453,-1749.4341&#34;&gt;&lt;/path&gt;
    &lt;polygon fill=&#34;#b2a289&#34; stroke=&#34;#b2a289&#34; points=&#34;456.5001,-1749.283 453,-1739.283 449.5001,-1749.2831 456.5001,-1749.283&#34;&gt;&lt;/polygon&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;g id=&#34;a_edge13-label&#34;&gt;&lt;a xlink:title=&#34;compress/flate.(*compressor).write /Users/dfc/go/src/compress/flate/deflate.go -&gt; compress/flate.(*compressor).deflate /Users/dfc/go/src/compress/flate/deflate.go (0.07s)&#34;&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;466&#34; y=&#34;-1760.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 0.07s&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N29 --&gt;
    &lt;g id=&#34;node30&#34; class=&#34;node&#34;&gt;
    &lt;title&gt;N29&lt;/title&gt;
    &lt;g id=&#34;a_node30&#34;&gt;&lt;a xlink:title=&#34;compress/flate.(*huffmanBitWriter).writeBlock /Users/dfc/go/src/compress/flate/huffman_bit_writer.go (0.05s)&#34;&gt;
    &lt;polygon fill=&#34;#edebe9&#34; stroke=&#34;#b2a895&#34; points=&#34;488.5,-1505.5 417.5,-1505.5 417.5,-1452.5 488.5,-1452.5 488.5,-1505.5&#34;&gt;&lt;/polygon&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-1495.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;compress/flate&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-1486.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;(*huffmanBitWriter)&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-1477.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;writeBlock&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-1468.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;huffman_bit_writer.go&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-1459.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 0.05s (3.27%)&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N26&amp;#45;&amp;gt;N29 --&gt;
    &lt;g id=&#34;edge21&#34; class=&#34;edge&#34;&gt;
    &lt;title&gt;N26-&amp;gt;N29&lt;/title&gt;
    &lt;g id=&#34;a_edge21&#34;&gt;&lt;a xlink:title=&#34;compress/flate.(*compressor).writeBlock /Users/dfc/go/src/compress/flate/deflate.go -&gt; compress/flate.(*huffmanBitWriter).writeBlock /Users/dfc/go/src/compress/flate/huffman_bit_writer.go (0.05s)&#34;&gt;
    &lt;path fill=&#34;none&#34; stroke=&#34;#b2a895&#34; d=&#34;M453,-1560.9579C453,-1547.4283 453,-1530.7558 453,-1515.9883&#34;&gt;&lt;/path&gt;
    &lt;polygon fill=&#34;#b2a895&#34; stroke=&#34;#b2a895&#34; points=&#34;456.5001,-1515.6441 453,-1505.6441 449.5001,-1515.6441 456.5001,-1515.6441&#34;&gt;&lt;/polygon&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;g id=&#34;a_edge21-label&#34;&gt;&lt;a xlink:title=&#34;compress/flate.(*compressor).writeBlock /Users/dfc/go/src/compress/flate/deflate.go -&gt; compress/flate.(*huffmanBitWriter).writeBlock /Users/dfc/go/src/compress/flate/huffman_bit_writer.go (0.05s)&#34;&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;466&#34; y=&#34;-1531.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 0.05s&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N27&amp;#45;&amp;gt;N22 --&gt;
    &lt;g id=&#34;edge22&#34; class=&#34;edge&#34;&gt;
    &lt;title&gt;N27-&amp;gt;N22&lt;/title&gt;
    &lt;g id=&#34;a_edge22&#34;&gt;&lt;a xlink:title=&#34;compress/flate.(*dictWriter).Write /Users/dfc/go/src/compress/flate/deflate.go -&gt; bufio.(*Writer).Write /Users/dfc/go/src/bufio/bufio.go (0.05s)&#34;&gt;
    &lt;path fill=&#34;none&#34; stroke=&#34;#b2a895&#34; d=&#34;M453,-1031.9873C453,-1019.7358 453,-1004.9766 453,-991.6407&#34;&gt;&lt;/path&gt;
    &lt;polygon fill=&#34;#b2a895&#34; stroke=&#34;#b2a895&#34; points=&#34;456.5001,-991.3259 453,-981.3259 449.5001,-991.3259 456.5001,-991.3259&#34;&gt;&lt;/polygon&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;g id=&#34;a_edge22-label&#34;&gt;&lt;a xlink:title=&#34;compress/flate.(*dictWriter).Write /Users/dfc/go/src/compress/flate/deflate.go -&gt; bufio.(*Writer).Write /Users/dfc/go/src/bufio/bufio.go (0.05s)&#34;&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;466&#34; y=&#34;-1002.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 0.05s&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N28&amp;#45;&amp;gt;N14 --&gt;
    &lt;g id=&#34;edge43&#34; class=&#34;edge&#34;&gt;
    &lt;title&gt;N28-&amp;gt;N14&lt;/title&gt;
    &lt;g id=&#34;a_edge43&#34;&gt;&lt;a xlink:title=&#34;compress/flate.(*huffmanBitWriter).writeBits /Users/dfc/go/src/compress/flate/huffman_bit_writer.go -&gt; compress/flate.(*huffmanBitWriter).write /Users/dfc/go/src/compress/flate/huffman_bit_writer.go (0.01s)&#34;&gt;
    &lt;path fill=&#34;none&#34; stroke=&#34;#b2b1ac&#34; d=&#34;M386.6887,-1239.9873C397.796,-1227.008 411.3119,-1211.2141 423.2364,-1197.2799&#34;&gt;&lt;/path&gt;
    &lt;polygon fill=&#34;#b2b1ac&#34; stroke=&#34;#b2b1ac&#34; points=&#34;426.2005,-1199.1993 430.0432,-1189.3259 420.8821,-1194.648 426.2005,-1199.1993&#34;&gt;&lt;/polygon&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;g id=&#34;a_edge43-label&#34;&gt;&lt;a xlink:title=&#34;compress/flate.(*huffmanBitWriter).writeBits /Users/dfc/go/src/compress/flate/huffman_bit_writer.go -&gt; compress/flate.(*huffmanBitWriter).write /Users/dfc/go/src/compress/flate/huffman_bit_writer.go (0.01s)&#34;&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;426&#34; y=&#34;-1210.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 0.01s&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N29&amp;#45;&amp;gt;N15 --&gt;
    &lt;g id=&#34;edge24&#34; class=&#34;edge&#34;&gt;
    &lt;title&gt;N29-&amp;gt;N15&lt;/title&gt;
    &lt;g id=&#34;a_edge24&#34;&gt;&lt;a xlink:title=&#34;compress/flate.(*huffmanBitWriter).writeBlock /Users/dfc/go/src/compress/flate/huffman_bit_writer.go -&gt; compress/flate.(*huffmanBitWriter).writeTokens /Users/dfc/go/src/compress/flate/huffman_bit_writer.go (0.05s)&#34;&gt;
    &lt;path fill=&#34;none&#34; stroke=&#34;#b2a895&#34; d=&#34;M453,-1452.4579C453,-1438.9283 453,-1422.2558 453,-1407.4883&#34;&gt;&lt;/path&gt;
    &lt;polygon fill=&#34;#b2a895&#34; stroke=&#34;#b2a895&#34; points=&#34;456.5001,-1407.1441 453,-1397.1441 449.5001,-1407.1441 456.5001,-1407.1441&#34;&gt;&lt;/polygon&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;g id=&#34;a_edge24-label&#34;&gt;&lt;a xlink:title=&#34;compress/flate.(*huffmanBitWriter).writeBlock /Users/dfc/go/src/compress/flate/huffman_bit_writer.go -&gt; compress/flate.(*huffmanBitWriter).writeTokens /Users/dfc/go/src/compress/flate/huffman_bit_writer.go (0.05s)&#34;&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;466&#34; y=&#34;-1418.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 0.05s&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N30&amp;#45;&amp;gt;N14 --&gt;
    &lt;g id=&#34;edge32&#34; class=&#34;edge&#34;&gt;
    &lt;title&gt;N30-&amp;gt;N14&lt;/title&gt;
    &lt;g id=&#34;a_edge32&#34;&gt;&lt;a xlink:title=&#34;compress/flate.(*huffmanBitWriter).writeCode /Users/dfc/go/src/compress/flate/huffman_bit_writer.go -&gt; compress/flate.(*huffmanBitWriter).write /Users/dfc/go/src/compress/flate/huffman_bit_writer.go (0.04s)&#34;&gt;
    &lt;path fill=&#34;none&#34; stroke=&#34;#b2aa9b&#34; d=&#34;M453,-1239.9873C453,-1227.7358 453,-1212.9766 453,-1199.6407&#34;&gt;&lt;/path&gt;
    &lt;polygon fill=&#34;#b2aa9b&#34; stroke=&#34;#b2aa9b&#34; points=&#34;456.5001,-1199.3259 453,-1189.3259 449.5001,-1199.3259 456.5001,-1199.3259&#34;&gt;&lt;/polygon&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;g id=&#34;a_edge32-label&#34;&gt;&lt;a xlink:title=&#34;compress/flate.(*huffmanBitWriter).writeCode /Users/dfc/go/src/compress/flate/huffman_bit_writer.go -&gt; compress/flate.(*huffmanBitWriter).write /Users/dfc/go/src/compress/flate/huffman_bit_writer.go (0.04s)&#34;&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;466&#34; y=&#34;-1210.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 0.04s&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N31&amp;#45;&amp;gt;N23 --&gt;
    &lt;g id=&#34;edge14&#34; class=&#34;edge&#34;&gt;
    &lt;title&gt;N31-&amp;gt;N23&lt;/title&gt;
    &lt;g id=&#34;a_edge14&#34;&gt;&lt;a xlink:title=&#34;compress/zlib.(*Writer).Write /Users/dfc/go/src/compress/zlib/writer.go -&gt; compress/flate.(*Writer).Write /Users/dfc/go/src/compress/flate/deflate.go (0.07s)&#34;&gt;
    &lt;path fill=&#34;none&#34; stroke=&#34;#b2a289&#34; d=&#34;M457.4901,-2027.9873C457.2545,-2015.7358 456.9707,-2000.9766 456.7142,-1987.6407&#34;&gt;&lt;/path&gt;
    &lt;polygon fill=&#34;#b2a289&#34; stroke=&#34;#b2a289&#34; points=&#34;460.2076,-1987.2567 456.5159,-1977.3259 453.2089,-1987.3914 460.2076,-1987.2567&#34;&gt;&lt;/polygon&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;g id=&#34;a_edge14-label&#34;&gt;&lt;a xlink:title=&#34;compress/zlib.(*Writer).Write /Users/dfc/go/src/compress/zlib/writer.go -&gt; compress/flate.(*Writer).Write /Users/dfc/go/src/compress/flate/deflate.go (0.07s)&#34;&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;470&#34; y=&#34;-1998.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 0.07s&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N33 --&gt;
    &lt;g id=&#34;node34&#34; class=&#34;node&#34;&gt;
    &lt;title&gt;N33&lt;/title&gt;
    &lt;g id=&#34;a_node34&#34;&gt;&lt;a xlink:title=&#34;image/png.(*encoder).writeChunk /Users/dfc/go/src/image/png/writer.go (0.05s)&#34;&gt;
    &lt;polygon fill=&#34;#edebe9&#34; stroke=&#34;#b2a895&#34; points=&#34;483.5,-667.5 422.5,-667.5 422.5,-614.5 483.5,-614.5 483.5,-667.5&#34;&gt;&lt;/polygon&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-657.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;image/png&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-648.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;(*encoder)&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-639.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;writeChunk&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-630.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;writer.go&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-621.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 0.05s (3.27%)&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N32&amp;#45;&amp;gt;N33 --&gt;
    &lt;g id=&#34;edge25&#34; class=&#34;edge&#34;&gt;
    &lt;title&gt;N32-&amp;gt;N33&lt;/title&gt;
    &lt;g id=&#34;a_edge25&#34;&gt;&lt;a xlink:title=&#34;image/png.(*encoder).Write /Users/dfc/go/src/image/png/writer.go -&gt; image/png.(*encoder).writeChunk /Users/dfc/go/src/image/png/writer.go (0.05s)&#34;&gt;
    &lt;path fill=&#34;none&#34; stroke=&#34;#b2a895&#34; d=&#34;M453,-719.8779C453,-707.1335 453,-691.6669 453,-677.8173&#34;&gt;&lt;/path&gt;
    &lt;polygon fill=&#34;#b2a895&#34; stroke=&#34;#b2a895&#34; points=&#34;456.5001,-677.6136 453,-667.6136 449.5001,-677.6136 456.5001,-677.6136&#34;&gt;&lt;/polygon&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;g id=&#34;a_edge25-label&#34;&gt;&lt;a xlink:title=&#34;image/png.(*encoder).Write /Users/dfc/go/src/image/png/writer.go -&gt; image/png.(*encoder).writeChunk /Users/dfc/go/src/image/png/writer.go (0.05s)&#34;&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;466&#34; y=&#34;-690.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 0.05s&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N39 --&gt;
    &lt;g id=&#34;node40&#34; class=&#34;node&#34;&gt;
    &lt;title&gt;N39&lt;/title&gt;
    &lt;g id=&#34;a_node40&#34;&gt;&lt;a xlink:title=&#34;os.(*File).Write /Users/dfc/go/src/os/file.go (0.05s)&#34;&gt;
    &lt;polygon fill=&#34;#edebe9&#34; stroke=&#34;#b2a895&#34; points=&#34;483.5,-562 422.5,-562 422.5,-509 483.5,-509 483.5,-562&#34;&gt;&lt;/polygon&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-551.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;os&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-542.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;(*File)&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-533.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;Write&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-524.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;file.go&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-515.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 0.05s (3.27%)&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N33&amp;#45;&amp;gt;N39 --&gt;
    &lt;g id=&#34;edge26&#34; class=&#34;edge&#34;&gt;
    &lt;title&gt;N33-&amp;gt;N39&lt;/title&gt;
    &lt;g id=&#34;a_edge26&#34;&gt;&lt;a xlink:title=&#34;image/png.(*encoder).writeChunk /Users/dfc/go/src/image/png/writer.go -&gt; os.(*File).Write /Users/dfc/go/src/os/file.go (0.05s)&#34;&gt;
    &lt;path fill=&#34;none&#34; stroke=&#34;#b2a895&#34; d=&#34;M453,-614.3779C453,-601.6335 453,-586.1669 453,-572.3173&#34;&gt;&lt;/path&gt;
    &lt;polygon fill=&#34;#b2a895&#34; stroke=&#34;#b2a895&#34; points=&#34;456.5001,-572.1136 453,-562.1136 449.5001,-572.1136 456.5001,-572.1136&#34;&gt;&lt;/polygon&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;g id=&#34;a_edge26-label&#34;&gt;&lt;a xlink:title=&#34;image/png.(*encoder).writeChunk /Users/dfc/go/src/image/png/writer.go -&gt; os.(*File).Write /Users/dfc/go/src/os/file.go (0.05s)&#34;&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;466&#34; y=&#34;-583.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 0.05s&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N34&amp;#45;&amp;gt;N6 --&gt;
    &lt;g id=&#34;edge8&#34; class=&#34;edge&#34;&gt;
    &lt;title&gt;N34-&amp;gt;N6&lt;/title&gt;
    &lt;g id=&#34;a_edge8&#34;&gt;&lt;a xlink:title=&#34;image/png.(*encoder).writeIDATs /Users/dfc/go/src/image/png/writer.go -&gt; image/png.(*encoder).writeImage /Users/dfc/go/src/image/png/writer.go (0.19s)&#34;&gt;
    &lt;path fill=&#34;none&#34; stroke=&#34;#b27743&#34; d=&#34;M467,-2265.3051C467,-2245.2046 467,-2217.4141 467,-2195.2196&#34;&gt;&lt;/path&gt;
    &lt;polygon fill=&#34;#b27743&#34; stroke=&#34;#b27743&#34; points=&#34;470.5001,-2195.1486 467,-2185.1486 463.5001,-2195.1486 470.5001,-2195.1486&#34;&gt;&lt;/polygon&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;g id=&#34;a_edge8-label&#34;&gt;&lt;a xlink:title=&#34;image/png.(*encoder).writeIDATs /Users/dfc/go/src/image/png/writer.go -&gt; image/png.(*encoder).writeImage /Users/dfc/go/src/image/png/writer.go (0.19s)&#34;&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;480&#34; y=&#34;-2206.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 0.19s&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N35&amp;#45;&amp;gt;N7 --&gt;
    &lt;g id=&#34;edge5&#34; class=&#34;edge&#34;&gt;
    &lt;title&gt;N35-&amp;gt;N7&lt;/title&gt;
    &lt;g id=&#34;a_edge5&#34;&gt;&lt;a xlink:title=&#34;image/png.Encode /Users/dfc/go/src/image/png/writer.go -&gt; image/png.(*Encoder).Encode /Users/dfc/go/src/image/png/writer.go (0.26s)&#34;&gt;
    &lt;path fill=&#34;none&#34; stroke=&#34;#b2591a&#34; d=&#34;M454.6817,-2567.7419C456.8687,-2549.5896 460.0037,-2523.5695 462.5636,-2502.3221&#34;&gt;&lt;/path&gt;
    &lt;polygon fill=&#34;#b2591a&#34; stroke=&#34;#b2591a&#34; points=&#34;466.0461,-2502.6772 463.7674,-2492.3303 459.0963,-2501.8398 466.0461,-2502.6772&#34;&gt;&lt;/polygon&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;g id=&#34;a_edge5-label&#34;&gt;&lt;a xlink:title=&#34;image/png.Encode /Users/dfc/go/src/image/png/writer.go -&gt; image/png.(*Encoder).Encode /Users/dfc/go/src/image/png/writer.go (0.26s)&#34;&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;471&#34; y=&#34;-2538.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 0.26s&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N36&amp;#45;&amp;gt;N8 --&gt;
    &lt;g id=&#34;edge17&#34; class=&#34;edge&#34;&gt;
    &lt;title&gt;N36-&amp;gt;N8&lt;/title&gt;
    &lt;g id=&#34;a_edge17&#34;&gt;&lt;a xlink:title=&#34;image/png.opaque /Users/dfc/go/src/image/png/writer.go -&gt; main.(*img).At /Users/dfc/devel/understanding-the-execution-tracer/examples/mandelbrot-pkg-profile/mandelbrot.go (0.07s)&#34;&gt;
    &lt;path fill=&#34;none&#34; stroke=&#34;#b2a289&#34; d=&#34;M548,-2269.6566C548,-2228.6906 548,-2141.196 548,-2091.3206&#34;&gt;&lt;/path&gt;
    &lt;polygon fill=&#34;#b2a289&#34; stroke=&#34;#b2a289&#34; points=&#34;551.5001,-2091.279 548,-2081.279 544.5001,-2091.279 551.5001,-2091.279&#34;&gt;&lt;/polygon&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;g id=&#34;a_edge17-label&#34;&gt;&lt;a xlink:title=&#34;image/png.opaque /Users/dfc/go/src/image/png/writer.go -&gt; main.(*img).At /Users/dfc/devel/understanding-the-execution-tracer/examples/mandelbrot-pkg-profile/mandelbrot.go (0.07s)&#34;&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;561&#34; y=&#34;-2154.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 0.07s&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N37 --&gt;
    &lt;g id=&#34;node38&#34; class=&#34;node&#34;&gt;
    &lt;title&gt;N37&lt;/title&gt;
    &lt;g id=&#34;a_node38&#34;&gt;&lt;a xlink:title=&#34;internal/poll.(*FD).Write /Users/dfc/go/src/internal/poll/fd_unix.go (0.05s)&#34;&gt;
    &lt;polygon fill=&#34;#edebe9&#34; stroke=&#34;#b2a895&#34; points=&#34;483.5,-354 422.5,-354 422.5,-301 483.5,-301 483.5,-354&#34;&gt;&lt;/polygon&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-343.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;internal/poll&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-334.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;(*FD)&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-325.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;Write&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-316.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;fd_unix.go&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-307.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 0.05s (3.27%)&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N56 --&gt;
    &lt;g id=&#34;node57&#34; class=&#34;node&#34;&gt;
    &lt;title&gt;N56&lt;/title&gt;
    &lt;g id=&#34;a_node57&#34;&gt;&lt;a xlink:title=&#34;syscall.Write /Users/dfc/go/src/syscall/syscall_unix.go (0.05s)&#34;&gt;
    &lt;polygon fill=&#34;#edebe9&#34; stroke=&#34;#b2a895&#34; points=&#34;483.5,-250 422.5,-250 422.5,-206 483.5,-206 483.5,-250&#34;&gt;&lt;/polygon&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-239.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;syscall&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-230.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;Write&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-221.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;syscall_unix.go&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-212.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 0.05s (3.27%)&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N37&amp;#45;&amp;gt;N56 --&gt;
    &lt;g id=&#34;edge27&#34; class=&#34;edge&#34;&gt;
    &lt;title&gt;N37-&amp;gt;N56&lt;/title&gt;
    &lt;g id=&#34;a_edge27&#34;&gt;&lt;a xlink:title=&#34;internal/poll.(*FD).Write /Users/dfc/go/src/internal/poll/fd_unix.go -&gt; syscall.Write /Users/dfc/go/src/syscall/syscall_unix.go (0.05s)&#34;&gt;
    &lt;path fill=&#34;none&#34; stroke=&#34;#b2a895&#34; d=&#34;M453,-300.8358C453,-288.2993 453,-273.2498 453,-260.0933&#34;&gt;&lt;/path&gt;
    &lt;polygon fill=&#34;#b2a895&#34; stroke=&#34;#b2a895&#34; points=&#34;456.5001,-260.0321 453,-250.0321 449.5001,-260.0322 456.5001,-260.0321&#34;&gt;&lt;/polygon&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;g id=&#34;a_edge27-label&#34;&gt;&lt;a xlink:title=&#34;internal/poll.(*FD).Write /Users/dfc/go/src/internal/poll/fd_unix.go -&gt; syscall.Write /Users/dfc/go/src/syscall/syscall_unix.go (0.05s)&#34;&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;466&#34; y=&#34;-271.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 0.05s&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N38&amp;#45;&amp;gt;N3 --&gt;
    &lt;g id=&#34;edge3&#34; class=&#34;edge&#34;&gt;
    &lt;title&gt;N38-&amp;gt;N3&lt;/title&gt;
    &lt;g id=&#34;a_edge3&#34;&gt;&lt;a xlink:title=&#34;main.seqFillImg /Users/dfc/devel/understanding-the-execution-tracer/examples/mandelbrot-pkg-profile/mandelbrot.go -&gt; main.fillPixel /Users/dfc/devel/understanding-the-execution-tracer/examples/mandelbrot-pkg-profile/mandelbrot.go (1.27s)&#34;&gt;
    &lt;path fill=&#34;none&#34; stroke=&#34;#b20900&#34; stroke-width=&#34;5&#34; d=&#34;M356,-2567.7419C356,-2556.2626 356,-2541.6368 356,-2527.0613&#34;&gt;&lt;/path&gt;
    &lt;polygon fill=&#34;#b20900&#34; stroke=&#34;#b20900&#34; stroke-width=&#34;5&#34; points=&#34;360.3751,-2527.0179 356,-2517.0179 351.6251,-2527.018 360.3751,-2527.0179&#34;&gt;&lt;/polygon&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;g id=&#34;a_edge3-label&#34;&gt;&lt;a xlink:title=&#34;main.seqFillImg /Users/dfc/devel/understanding-the-execution-tracer/examples/mandelbrot-pkg-profile/mandelbrot.go -&gt; main.fillPixel /Users/dfc/devel/understanding-the-execution-tracer/examples/mandelbrot-pkg-profile/mandelbrot.go (1.27s)&#34;&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;369&#34; y=&#34;-2538.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 1.27s&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N40 --&gt;
    &lt;g id=&#34;node41&#34; class=&#34;node&#34;&gt;
    &lt;title&gt;N40&lt;/title&gt;
    &lt;g id=&#34;a_node41&#34;&gt;&lt;a xlink:title=&#34;os.(*File).write /Users/dfc/go/src/os/file_unix.go (0.05s)&#34;&gt;
    &lt;polygon fill=&#34;#edebe9&#34; stroke=&#34;#b2a895&#34; points=&#34;483.5,-458 422.5,-458 422.5,-405 483.5,-405 483.5,-458&#34;&gt;&lt;/polygon&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-447.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;os&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-438.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;(*File)&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-429.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;write&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-420.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;file_unix.go&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-411.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 0.05s (3.27%)&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N39&amp;#45;&amp;gt;N40 --&gt;
    &lt;g id=&#34;edge28&#34; class=&#34;edge&#34;&gt;
    &lt;title&gt;N39-&amp;gt;N40&lt;/title&gt;
    &lt;g id=&#34;a_edge28&#34;&gt;&lt;a xlink:title=&#34;os.(*File).Write /Users/dfc/go/src/os/file.go -&gt; os.(*File).write /Users/dfc/go/src/os/file_unix.go (0.05s)&#34;&gt;
    &lt;path fill=&#34;none&#34; stroke=&#34;#b2a895&#34; d=&#34;M453,-508.9873C453,-496.7358 453,-481.9766 453,-468.6407&#34;&gt;&lt;/path&gt;
    &lt;polygon fill=&#34;#b2a895&#34; stroke=&#34;#b2a895&#34; points=&#34;456.5001,-468.3259 453,-458.3259 449.5001,-468.3259 456.5001,-468.3259&#34;&gt;&lt;/polygon&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;g id=&#34;a_edge28-label&#34;&gt;&lt;a xlink:title=&#34;os.(*File).Write /Users/dfc/go/src/os/file.go -&gt; os.(*File).write /Users/dfc/go/src/os/file_unix.go (0.05s)&#34;&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;466&#34; y=&#34;-479.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 0.05s&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N40&amp;#45;&amp;gt;N37 --&gt;
    &lt;g id=&#34;edge29&#34; class=&#34;edge&#34;&gt;
    &lt;title&gt;N40-&amp;gt;N37&lt;/title&gt;
    &lt;g id=&#34;a_edge29&#34;&gt;&lt;a xlink:title=&#34;os.(*File).write /Users/dfc/go/src/os/file_unix.go -&gt; internal/poll.(*FD).Write /Users/dfc/go/src/internal/poll/fd_unix.go (0.05s)&#34;&gt;
    &lt;path fill=&#34;none&#34; stroke=&#34;#b2a895&#34; d=&#34;M453,-404.9873C453,-392.7358 453,-377.9766 453,-364.6407&#34;&gt;&lt;/path&gt;
    &lt;polygon fill=&#34;#b2a895&#34; stroke=&#34;#b2a895&#34; points=&#34;456.5001,-364.3259 453,-354.3259 449.5001,-364.3259 456.5001,-364.3259&#34;&gt;&lt;/polygon&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;g id=&#34;a_edge29-label&#34;&gt;&lt;a xlink:title=&#34;os.(*File).write /Users/dfc/go/src/os/file_unix.go -&gt; internal/poll.(*FD).Write /Users/dfc/go/src/internal/poll/fd_unix.go (0.05s)&#34;&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;466&#34; y=&#34;-375.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 0.05s&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N41&amp;#45;&amp;gt;N16 --&gt;
    &lt;g id=&#34;edge34&#34; class=&#34;edge&#34;&gt;
    &lt;title&gt;N41-&amp;gt;N16&lt;/title&gt;
    &lt;g id=&#34;a_edge34&#34;&gt;&lt;a xlink:title=&#34;runtime.(*mcache).nextFree /Users/dfc/go/src/runtime/malloc.go -&gt; runtime.systemstack /Users/dfc/go/src/runtime/asm_amd64.s (0.03s)&#34;&gt;
    &lt;path fill=&#34;none&#34; stroke=&#34;#b2ada1&#34; d=&#34;M580.6689,-1675.4436C587.4319,-1658.6098 596.2142,-1636.7493 603.3309,-1619.035&#34;&gt;&lt;/path&gt;
    &lt;polygon fill=&#34;#b2ada1&#34; stroke=&#34;#b2ada1&#34; points=&#34;606.6096,-1620.2625 607.0898,-1609.6785 600.1142,-1617.6529 606.6096,-1620.2625&#34;&gt;&lt;/polygon&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;g id=&#34;a_edge34-label&#34;&gt;&lt;a xlink:title=&#34;runtime.(*mcache).nextFree /Users/dfc/go/src/runtime/malloc.go -&gt; runtime.systemstack /Users/dfc/go/src/runtime/asm_amd64.s (0.03s)&#34;&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;610&#34; y=&#34;-1635.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 0.03s&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N43 --&gt;
    &lt;g id=&#34;node44&#34; class=&#34;node&#34;&gt;
    &lt;title&gt;N43&lt;/title&gt;
    &lt;g id=&#34;a_node44&#34;&gt;&lt;a xlink:title=&#34;runtime.(*mcache).refill /Users/dfc/go/src/runtime/mcache.go (0.02s)&#34;&gt;
    &lt;polygon fill=&#34;#edeceb&#34; stroke=&#34;#b2afa6&#34; points=&#34;725.5,-1397 664.5,-1397 664.5,-1344 725.5,-1344 725.5,-1397&#34;&gt;&lt;/polygon&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;695&#34; y=&#34;-1386.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;runtime&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;695&#34; y=&#34;-1377.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;(*mcache)&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;695&#34; y=&#34;-1368.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;refill&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;695&#34; y=&#34;-1359.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;mcache.go&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;695&#34; y=&#34;-1350.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 0.02s (1.31%)&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N42&amp;#45;&amp;gt;N43 --&gt;
    &lt;g id=&#34;edge36&#34; class=&#34;edge&#34;&gt;
    &lt;title&gt;N42-&amp;gt;N43&lt;/title&gt;
    &lt;g id=&#34;a_edge36&#34;&gt;&lt;a xlink:title=&#34;runtime.(*mcache).nextFree.func1 /Users/dfc/go/src/runtime/malloc.go -&gt; runtime.(*mcache).refill /Users/dfc/go/src/runtime/mcache.go (0.02s)&#34;&gt;
    &lt;path fill=&#34;none&#34; stroke=&#34;#b2afa6&#34; d=&#34;M695,-1447.9083C695,-1435.259 695,-1420.5418 695,-1407.3573&#34;&gt;&lt;/path&gt;
    &lt;polygon fill=&#34;#b2afa6&#34; stroke=&#34;#b2afa6&#34; points=&#34;698.5001,-1407.181 695,-1397.181 691.5001,-1407.1811 698.5001,-1407.181&#34;&gt;&lt;/polygon&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;g id=&#34;a_edge36-label&#34;&gt;&lt;a xlink:title=&#34;runtime.(*mcache).nextFree.func1 /Users/dfc/go/src/runtime/malloc.go -&gt; runtime.(*mcache).refill /Users/dfc/go/src/runtime/mcache.go (0.02s)&#34;&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;708&#34; y=&#34;-1418.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 0.02s&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N44 --&gt;
    &lt;g id=&#34;node45&#34; class=&#34;node&#34;&gt;
    &lt;title&gt;N44&lt;/title&gt;
    &lt;g id=&#34;a_node45&#34;&gt;&lt;a xlink:title=&#34;runtime.(*mcentral).cacheSpan /Users/dfc/go/src/runtime/mcentral.go (0.02s)&#34;&gt;
    &lt;polygon fill=&#34;#edeceb&#34; stroke=&#34;#b2afa6&#34; points=&#34;725.5,-1293 664.5,-1293 664.5,-1240 725.5,-1240 725.5,-1293&#34;&gt;&lt;/polygon&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;695&#34; y=&#34;-1282.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;runtime&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;695&#34; y=&#34;-1273.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;(*mcentral)&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;695&#34; y=&#34;-1264.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;cacheSpan&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;695&#34; y=&#34;-1255.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;mcentral.go&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;695&#34; y=&#34;-1246.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 0.02s (1.31%)&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N43&amp;#45;&amp;gt;N44 --&gt;
    &lt;g id=&#34;edge37&#34; class=&#34;edge&#34;&gt;
    &lt;title&gt;N43-&amp;gt;N44&lt;/title&gt;
    &lt;g id=&#34;a_edge37&#34;&gt;&lt;a xlink:title=&#34;runtime.(*mcache).refill /Users/dfc/go/src/runtime/mcache.go -&gt; runtime.(*mcentral).cacheSpan /Users/dfc/go/src/runtime/mcentral.go (0.02s)&#34;&gt;
    &lt;path fill=&#34;none&#34; stroke=&#34;#b2afa6&#34; d=&#34;M695,-1343.9873C695,-1331.7358 695,-1316.9766 695,-1303.6407&#34;&gt;&lt;/path&gt;
    &lt;polygon fill=&#34;#b2afa6&#34; stroke=&#34;#b2afa6&#34; points=&#34;698.5001,-1303.3259 695,-1293.3259 691.5001,-1303.3259 698.5001,-1303.3259&#34;&gt;&lt;/polygon&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;g id=&#34;a_edge37-label&#34;&gt;&lt;a xlink:title=&#34;runtime.(*mcache).refill /Users/dfc/go/src/runtime/mcache.go -&gt; runtime.(*mcentral).cacheSpan /Users/dfc/go/src/runtime/mcentral.go (0.02s)&#34;&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;708&#34; y=&#34;-1314.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 0.02s&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N44&amp;#45;&amp;gt;N19 --&gt;
    &lt;g id=&#34;edge38&#34; class=&#34;edge&#34;&gt;
    &lt;title&gt;N44-&amp;gt;N19&lt;/title&gt;
    &lt;g id=&#34;a_edge38&#34;&gt;&lt;a xlink:title=&#34;runtime.(*mcentral).cacheSpan /Users/dfc/go/src/runtime/mcentral.go -&gt; runtime.(*mcentral).grow /Users/dfc/go/src/runtime/mcentral.go (0.02s)&#34;&gt;
    &lt;path fill=&#34;none&#34; stroke=&#34;#b2afa6&#34; d=&#34;M695,-1239.9873C695,-1227.7358 695,-1212.9766 695,-1199.6407&#34;&gt;&lt;/path&gt;
    &lt;polygon fill=&#34;#b2afa6&#34; stroke=&#34;#b2afa6&#34; points=&#34;698.5001,-1199.3259 695,-1189.3259 691.5001,-1199.3259 698.5001,-1199.3259&#34;&gt;&lt;/polygon&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;g id=&#34;a_edge38-label&#34;&gt;&lt;a xlink:title=&#34;runtime.(*mcentral).cacheSpan /Users/dfc/go/src/runtime/mcentral.go -&gt; runtime.(*mcentral).grow /Users/dfc/go/src/runtime/mcentral.go (0.02s)&#34;&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;708&#34; y=&#34;-1210.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 0.02s&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N45&amp;#45;&amp;gt;N20 --&gt;
    &lt;g id=&#34;edge48&#34; class=&#34;edge&#34;&gt;
    &lt;title&gt;N45-&amp;gt;N20&lt;/title&gt;
    &lt;g id=&#34;a_edge48&#34;&gt;&lt;a xlink:title=&#34;runtime.(*mheap).alloc /Users/dfc/go/src/runtime/mheap.go -&gt; runtime.memclrNoHeapPointers /Users/dfc/go/src/runtime/memclr_amd64.s (0.01s)&#34;&gt;
    &lt;path fill=&#34;none&#34; stroke=&#34;#b2b1ac&#34; d=&#34;M695,-1031.9873C695,-1019.4227 695,-1004.2205 695,-990.621&#34;&gt;&lt;/path&gt;
    &lt;polygon fill=&#34;#b2b1ac&#34; stroke=&#34;#b2b1ac&#34; points=&#34;698.5001,-990.6041 695,-980.6041 691.5001,-990.6041 698.5001,-990.6041&#34;&gt;&lt;/polygon&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;g id=&#34;a_edge48-label&#34;&gt;&lt;a xlink:title=&#34;runtime.(*mheap).alloc /Users/dfc/go/src/runtime/mheap.go -&gt; runtime.memclrNoHeapPointers /Users/dfc/go/src/runtime/memclr_amd64.s (0.01s)&#34;&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;708&#34; y=&#34;-1002.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 0.01s&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N48 --&gt;
    &lt;g id=&#34;node49&#34; class=&#34;node&#34;&gt;
    &lt;title&gt;N48&lt;/title&gt;
    &lt;g id=&#34;a_node49&#34;&gt;&lt;a xlink:title=&#34;runtime.(*mheap).alloc_m /Users/dfc/go/src/runtime/mheap.go (0.01s)&#34;&gt;
    &lt;polygon fill=&#34;#edecec&#34; stroke=&#34;#b2b1ac&#34; points=&#34;645.5,-1397 584.5,-1397 584.5,-1344 645.5,-1344 645.5,-1397&#34;&gt;&lt;/polygon&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;615&#34; y=&#34;-1386.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;runtime&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;615&#34; y=&#34;-1377.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;(*mheap)&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;615&#34; y=&#34;-1368.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;alloc_m&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;615&#34; y=&#34;-1359.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;mheap.go&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;615&#34; y=&#34;-1350.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 0.01s (0.65%)&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N46&amp;#45;&amp;gt;N48 --&gt;
    &lt;g id=&#34;edge49&#34; class=&#34;edge&#34;&gt;
    &lt;title&gt;N46-&amp;gt;N48&lt;/title&gt;
    &lt;g id=&#34;a_edge49&#34;&gt;&lt;a xlink:title=&#34;runtime.(*mheap).alloc.func1 /Users/dfc/go/src/runtime/mheap.go -&gt; runtime.(*mheap).alloc_m /Users/dfc/go/src/runtime/mheap.go (0.01s)&#34;&gt;
    &lt;path fill=&#34;none&#34; stroke=&#34;#b2b1ac&#34; d=&#34;M615.7134,-1447.9083C615.5969,-1435.259 615.4612,-1420.5418 615.3397,-1407.3573&#34;&gt;&lt;/path&gt;
    &lt;polygon fill=&#34;#b2b1ac&#34; stroke=&#34;#b2b1ac&#34; points=&#34;618.838,-1407.1483 615.2459,-1397.181 611.8383,-1407.2129 618.838,-1407.1483&#34;&gt;&lt;/polygon&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;g id=&#34;a_edge49-label&#34;&gt;&lt;a xlink:title=&#34;runtime.(*mheap).alloc.func1 /Users/dfc/go/src/runtime/mheap.go -&gt; runtime.(*mheap).alloc_m /Users/dfc/go/src/runtime/mheap.go (0.01s)&#34;&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;628&#34; y=&#34;-1418.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 0.01s&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N47 --&gt;
    &lt;g id=&#34;node48&#34; class=&#34;node&#34;&gt;
    &lt;title&gt;N47&lt;/title&gt;
    &lt;g id=&#34;a_node48&#34;&gt;&lt;a xlink:title=&#34;runtime.(*mheap).allocSpanLocked /Users/dfc/go/src/runtime/mheap.go (0.01s)&#34;&gt;
    &lt;polygon fill=&#34;#edecec&#34; stroke=&#34;#b2b1ac&#34; points=&#34;643.5,-1293 582.5,-1293 582.5,-1240 643.5,-1240 643.5,-1293&#34;&gt;&lt;/polygon&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;613&#34; y=&#34;-1282.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;runtime&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;613&#34; y=&#34;-1273.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;(*mheap)&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;613&#34; y=&#34;-1264.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;allocSpanLocked&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;613&#34; y=&#34;-1255.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;mheap.go&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;613&#34; y=&#34;-1246.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 0.01s (0.65%)&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N49 --&gt;
    &lt;g id=&#34;node50&#34; class=&#34;node&#34;&gt;
    &lt;title&gt;N49&lt;/title&gt;
    &lt;g id=&#34;a_node50&#34;&gt;&lt;a xlink:title=&#34;runtime.(*mheap).grow /Users/dfc/go/src/runtime/mheap.go (0.01s)&#34;&gt;
    &lt;polygon fill=&#34;#edecec&#34; stroke=&#34;#b2b1ac&#34; points=&#34;634.5,-1189 573.5,-1189 573.5,-1136 634.5,-1136 634.5,-1189&#34;&gt;&lt;/polygon&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;604&#34; y=&#34;-1178.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;runtime&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;604&#34; y=&#34;-1169.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;(*mheap)&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;604&#34; y=&#34;-1160.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;grow&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;604&#34; y=&#34;-1151.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;mheap.go&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;604&#34; y=&#34;-1142.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 0.01s (0.65%)&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N47&amp;#45;&amp;gt;N49 --&gt;
    &lt;g id=&#34;edge50&#34; class=&#34;edge&#34;&gt;
    &lt;title&gt;N47-&amp;gt;N49&lt;/title&gt;
    &lt;g id=&#34;a_edge50&#34;&gt;&lt;a xlink:title=&#34;runtime.(*mheap).allocSpanLocked /Users/dfc/go/src/runtime/mheap.go -&gt; runtime.(*mheap).grow /Users/dfc/go/src/runtime/mheap.go (0.01s)&#34;&gt;
    &lt;path fill=&#34;none&#34; stroke=&#34;#b2b1ac&#34; d=&#34;M610.7056,-1239.9873C609.6454,-1227.7358 608.3682,-1212.9766 607.2141,-1199.6407&#34;&gt;&lt;/path&gt;
    &lt;polygon fill=&#34;#b2b1ac&#34; stroke=&#34;#b2b1ac&#34; points=&#34;610.6707,-1198.9869 606.3215,-1189.3259 603.6968,-1199.5904 610.6707,-1198.9869&#34;&gt;&lt;/polygon&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;g id=&#34;a_edge50-label&#34;&gt;&lt;a xlink:title=&#34;runtime.(*mheap).allocSpanLocked /Users/dfc/go/src/runtime/mheap.go -&gt; runtime.(*mheap).grow /Users/dfc/go/src/runtime/mheap.go (0.01s)&#34;&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;622&#34; y=&#34;-1210.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 0.01s&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N48&amp;#45;&amp;gt;N47 --&gt;
    &lt;g id=&#34;edge51&#34; class=&#34;edge&#34;&gt;
    &lt;title&gt;N48-&amp;gt;N47&lt;/title&gt;
    &lt;g id=&#34;a_edge51&#34;&gt;&lt;a xlink:title=&#34;runtime.(*mheap).alloc_m /Users/dfc/go/src/runtime/mheap.go -&gt; runtime.(*mheap).allocSpanLocked /Users/dfc/go/src/runtime/mheap.go (0.01s)&#34;&gt;
    &lt;path fill=&#34;none&#34; stroke=&#34;#b2b1ac&#34; d=&#34;M614.4901,-1343.9873C614.2545,-1331.7358 613.9707,-1316.9766 613.7142,-1303.6407&#34;&gt;&lt;/path&gt;
    &lt;polygon fill=&#34;#b2b1ac&#34; stroke=&#34;#b2b1ac&#34; points=&#34;617.2076,-1303.2567 613.5159,-1293.3259 610.2089,-1303.3914 617.2076,-1303.2567&#34;&gt;&lt;/polygon&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;g id=&#34;a_edge51-label&#34;&gt;&lt;a xlink:title=&#34;runtime.(*mheap).alloc_m /Users/dfc/go/src/runtime/mheap.go -&gt; runtime.(*mheap).allocSpanLocked /Users/dfc/go/src/runtime/mheap.go (0.01s)&#34;&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;627&#34; y=&#34;-1314.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 0.01s&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N50 --&gt;
    &lt;g id=&#34;node51&#34; class=&#34;node&#34;&gt;
    &lt;title&gt;N50&lt;/title&gt;
    &lt;g id=&#34;a_node51&#34;&gt;&lt;a xlink:title=&#34;runtime.(*mheap).sysAlloc /Users/dfc/go/src/runtime/malloc.go (0.01s)&#34;&gt;
    &lt;polygon fill=&#34;#edecec&#34; stroke=&#34;#b2b1ac&#34; points=&#34;633.5,-1085 572.5,-1085 572.5,-1032 633.5,-1032 633.5,-1085&#34;&gt;&lt;/polygon&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;603&#34; y=&#34;-1074.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;runtime&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;603&#34; y=&#34;-1065.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;(*mheap)&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;603&#34; y=&#34;-1056.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;sysAlloc&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;603&#34; y=&#34;-1047.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;malloc.go&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;603&#34; y=&#34;-1038.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 0.01s (0.65%)&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N49&amp;#45;&amp;gt;N50 --&gt;
    &lt;g id=&#34;edge52&#34; class=&#34;edge&#34;&gt;
    &lt;title&gt;N49-&amp;gt;N50&lt;/title&gt;
    &lt;g id=&#34;a_edge52&#34;&gt;&lt;a xlink:title=&#34;runtime.(*mheap).grow /Users/dfc/go/src/runtime/mheap.go -&gt; runtime.(*mheap).sysAlloc /Users/dfc/go/src/runtime/malloc.go (0.01s)&#34;&gt;
    &lt;path fill=&#34;none&#34; stroke=&#34;#b2b1ac&#34; d=&#34;M603.7451,-1135.9873C603.6273,-1123.7358 603.4854,-1108.9766 603.3571,-1095.6407&#34;&gt;&lt;/path&gt;
    &lt;polygon fill=&#34;#b2b1ac&#34; stroke=&#34;#b2b1ac&#34; points=&#34;606.854,-1095.2917 603.2579,-1085.3259 599.8543,-1095.3591 606.854,-1095.2917&#34;&gt;&lt;/polygon&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;g id=&#34;a_edge52-label&#34;&gt;&lt;a xlink:title=&#34;runtime.(*mheap).grow /Users/dfc/go/src/runtime/mheap.go -&gt; runtime.(*mheap).sysAlloc /Users/dfc/go/src/runtime/malloc.go (0.01s)&#34;&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;616&#34; y=&#34;-1106.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 0.01s&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N55 --&gt;
    &lt;g id=&#34;node56&#34; class=&#34;node&#34;&gt;
    &lt;title&gt;N55&lt;/title&gt;
    &lt;g id=&#34;a_node56&#34;&gt;&lt;a xlink:title=&#34;runtime.sysMap /Users/dfc/go/src/runtime/mem_darwin.go (0.01s)&#34;&gt;
    &lt;polygon fill=&#34;#edecec&#34; stroke=&#34;#b2b1ac&#34; points=&#34;632.5,-976.5 571.5,-976.5 571.5,-932.5 632.5,-932.5 632.5,-976.5&#34;&gt;&lt;/polygon&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;602&#34; y=&#34;-966.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;runtime&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;602&#34; y=&#34;-957.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;sysMap&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;602&#34; y=&#34;-948.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;mem_darwin.go&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;602&#34; y=&#34;-939.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 0.01s (0.65%)&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N50&amp;#45;&amp;gt;N55 --&gt;
    &lt;g id=&#34;edge53&#34; class=&#34;edge&#34;&gt;
    &lt;title&gt;N50-&amp;gt;N55&lt;/title&gt;
    &lt;g id=&#34;a_edge53&#34;&gt;&lt;a xlink:title=&#34;runtime.(*mheap).sysAlloc /Users/dfc/go/src/runtime/malloc.go -&gt; runtime.sysMap /Users/dfc/go/src/runtime/mem_darwin.go (0.01s)&#34;&gt;
    &lt;path fill=&#34;none&#34; stroke=&#34;#b2b1ac&#34; d=&#34;M602.7451,-1031.9873C602.6128,-1018.2341 602.4502,-1001.3207 602.3107,-986.8083&#34;&gt;&lt;/path&gt;
    &lt;polygon fill=&#34;#b2b1ac&#34; stroke=&#34;#b2b1ac&#34; points=&#34;605.81,-986.7107 602.2139,-976.7448 598.8103,-986.778 605.81,-986.7107&#34;&gt;&lt;/polygon&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;g id=&#34;a_edge53-label&#34;&gt;&lt;a xlink:title=&#34;runtime.(*mheap).sysAlloc /Users/dfc/go/src/runtime/malloc.go -&gt; runtime.sysMap /Users/dfc/go/src/runtime/mem_darwin.go (0.01s)&#34;&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;615&#34; y=&#34;-1002.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 0.01s&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N53 --&gt;
    &lt;g id=&#34;node54&#34; class=&#34;node&#34;&gt;
    &lt;title&gt;N53&lt;/title&gt;
    &lt;g id=&#34;a_node54&#34;&gt;&lt;a xlink:title=&#34;runtime.newMarkBits /Users/dfc/go/src/runtime/mheap.go (0.01s)&#34;&gt;
    &lt;polygon fill=&#34;#edecec&#34; stroke=&#34;#b2b1ac&#34; points=&#34;818.5,-976.5 757.5,-976.5 757.5,-932.5 818.5,-932.5 818.5,-976.5&#34;&gt;&lt;/polygon&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;788&#34; y=&#34;-966.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;runtime&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;788&#34; y=&#34;-957.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;newMarkBits&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;788&#34; y=&#34;-948.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;mheap.go&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;788&#34; y=&#34;-939.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 0.01s (0.65%)&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N51&amp;#45;&amp;gt;N53 --&gt;
    &lt;g id=&#34;edge54&#34; class=&#34;edge&#34;&gt;
    &lt;title&gt;N51-&amp;gt;N53&lt;/title&gt;
    &lt;g id=&#34;a_edge54&#34;&gt;&lt;a xlink:title=&#34;runtime.heapBits.initSpan /Users/dfc/go/src/runtime/mbitmap.go -&gt; runtime.newMarkBits /Users/dfc/go/src/runtime/mheap.go (0.01s)&#34;&gt;
    &lt;path fill=&#34;none&#34; stroke=&#34;#b2b1ac&#34; d=&#34;M782.7845,-1031.9873C783.7102,-1018.2341 784.8486,-1001.3207 785.8254,-986.8083&#34;&gt;&lt;/path&gt;
    &lt;polygon fill=&#34;#b2b1ac&#34; stroke=&#34;#b2b1ac&#34; points=&#34;789.3232,-986.9573 786.5028,-976.7448 782.339,-986.4872 789.3232,-986.9573&#34;&gt;&lt;/polygon&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;g id=&#34;a_edge54-label&#34;&gt;&lt;a xlink:title=&#34;runtime.heapBits.initSpan /Users/dfc/go/src/runtime/mbitmap.go -&gt; runtime.newMarkBits /Users/dfc/go/src/runtime/mheap.go (0.01s)&#34;&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;797&#34; y=&#34;-1002.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 0.01s&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N52 --&gt;
    &lt;g id=&#34;node53&#34; class=&#34;node&#34;&gt;
    &lt;title&gt;N52&lt;/title&gt;
    &lt;g id=&#34;a_node53&#34;&gt;&lt;a xlink:title=&#34;runtime.newArenaMayUnlock /Users/dfc/go/src/runtime/mheap.go (0.01s)&#34;&gt;
    &lt;polygon fill=&#34;#edecec&#34; stroke=&#34;#b2b1ac&#34; points=&#34;776,-872.5 706,-872.5 706,-828.5 776,-828.5 776,-872.5&#34;&gt;&lt;/polygon&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;741&#34; y=&#34;-862.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;runtime&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;741&#34; y=&#34;-853.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;newArenaMayUnlock&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;741&#34; y=&#34;-844.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;mheap.go&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;741&#34; y=&#34;-835.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 0.01s (0.65%)&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N54 --&gt;
    &lt;g id=&#34;node55&#34; class=&#34;node&#34;&gt;
    &lt;title&gt;N54&lt;/title&gt;
    &lt;g id=&#34;a_node55&#34;&gt;&lt;a xlink:title=&#34;runtime.sysAlloc /Users/dfc/go/src/runtime/mem_darwin.go (0.01s)&#34;&gt;
    &lt;polygon fill=&#34;#edecec&#34; stroke=&#34;#b2b1ac&#34; points=&#34;708.5,-768.5 647.5,-768.5 647.5,-724.5 708.5,-724.5 708.5,-768.5&#34;&gt;&lt;/polygon&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;678&#34; y=&#34;-758.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;runtime&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;678&#34; y=&#34;-749.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;sysAlloc&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;678&#34; y=&#34;-740.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;mem_darwin.go&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;678&#34; y=&#34;-731.1&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 0.01s (0.65%)&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N52&amp;#45;&amp;gt;N54 --&gt;
    &lt;g id=&#34;edge55&#34; class=&#34;edge&#34;&gt;
    &lt;title&gt;N52-&amp;gt;N54&lt;/title&gt;
    &lt;g id=&#34;a_edge55&#34;&gt;&lt;a xlink:title=&#34;runtime.newArenaMayUnlock /Users/dfc/go/src/runtime/mheap.go -&gt; runtime.sysAlloc /Users/dfc/go/src/runtime/mem_darwin.go (0.01s)&#34;&gt;
    &lt;path fill=&#34;none&#34; stroke=&#34;#b2b1ac&#34; d=&#34;M727.6393,-828.4443C718.6185,-813.5528 706.587,-793.6913 696.6284,-777.2517&#34;&gt;&lt;/path&gt;
    &lt;polygon fill=&#34;#b2b1ac&#34; stroke=&#34;#b2b1ac&#34; points=&#34;699.5162,-775.2636 691.3414,-768.5239 693.5291,-778.8905 699.5162,-775.2636&#34;&gt;&lt;/polygon&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;g id=&#34;a_edge55-label&#34;&gt;&lt;a xlink:title=&#34;runtime.newArenaMayUnlock /Users/dfc/go/src/runtime/mheap.go -&gt; runtime.sysAlloc /Users/dfc/go/src/runtime/mem_darwin.go (0.01s)&#34;&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;726&#34; y=&#34;-794.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 0.01s&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N53&amp;#45;&amp;gt;N52 --&gt;
    &lt;g id=&#34;edge56&#34; class=&#34;edge&#34;&gt;
    &lt;title&gt;N53-&amp;gt;N52&lt;/title&gt;
    &lt;g id=&#34;a_edge56&#34;&gt;&lt;a xlink:title=&#34;runtime.newMarkBits /Users/dfc/go/src/runtime/mheap.go -&gt; runtime.newArenaMayUnlock /Users/dfc/go/src/runtime/mheap.go (0.01s)&#34;&gt;
    &lt;path fill=&#34;none&#34; stroke=&#34;#b2b1ac&#34; d=&#34;M778.0325,-932.4443C771.365,-917.6907 762.4928,-898.0586 755.1042,-881.7092&#34;&gt;&lt;/path&gt;
    &lt;polygon fill=&#34;#b2b1ac&#34; stroke=&#34;#b2b1ac&#34; points=&#34;758.2608,-880.1952 750.9531,-872.5239 751.882,-883.078 758.2608,-880.1952&#34;&gt;&lt;/polygon&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;g id=&#34;a_edge56-label&#34;&gt;&lt;a xlink:title=&#34;runtime.newMarkBits /Users/dfc/go/src/runtime/mheap.go -&gt; runtime.newArenaMayUnlock /Users/dfc/go/src/runtime/mheap.go (0.01s)&#34;&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;780&#34; y=&#34;-898.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 0.01s&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N54&amp;#45;&amp;gt;N12 --&gt;
    &lt;g id=&#34;edge57&#34; class=&#34;edge&#34;&gt;
    &lt;title&gt;N54-&amp;gt;N12&lt;/title&gt;
    &lt;g id=&#34;a_edge57&#34;&gt;&lt;a xlink:title=&#34;runtime.sysAlloc /Users/dfc/go/src/runtime/mem_darwin.go -&gt; runtime.mmap /Users/dfc/go/src/runtime/sys_darwin_amd64.s (0.01s)&#34;&gt;
    &lt;path fill=&#34;none&#34; stroke=&#34;#b2b1ac&#34; d=&#34;M670.034,-724.3837C665.2851,-711.1995 659.129,-694.1081 653.6276,-678.8345&#34;&gt;&lt;/path&gt;
    &lt;polygon fill=&#34;#b2b1ac&#34; stroke=&#34;#b2b1ac&#34; points=&#34;656.8101,-677.3416 650.1283,-669.1194 650.2242,-679.7138 656.8101,-677.3416&#34;&gt;&lt;/polygon&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;g id=&#34;a_edge57-label&#34;&gt;&lt;a xlink:title=&#34;runtime.sysAlloc /Users/dfc/go/src/runtime/mem_darwin.go -&gt; runtime.mmap /Users/dfc/go/src/runtime/sys_darwin_amd64.s (0.01s)&#34;&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;674&#34; y=&#34;-690.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 0.01s&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N55&amp;#45;&amp;gt;N12 --&gt;
    &lt;g id=&#34;edge58&#34; class=&#34;edge&#34;&gt;
    &lt;title&gt;N55-&amp;gt;N12&lt;/title&gt;
    &lt;g id=&#34;a_edge58&#34;&gt;&lt;a xlink:title=&#34;runtime.sysMap /Users/dfc/go/src/runtime/mem_darwin.go -&gt; runtime.mmap /Users/dfc/go/src/runtime/sys_darwin_amd64.s (0.01s)&#34;&gt;
    &lt;path fill=&#34;none&#34; stroke=&#34;#b2b1ac&#34; d=&#34;M604.6721,-932.4553C611.0704,-879.6692 627.3338,-745.4958 635.3664,-679.2272&#34;&gt;&lt;/path&gt;
    &lt;polygon fill=&#34;#b2b1ac&#34; stroke=&#34;#b2b1ac&#34; points=&#34;638.8533,-679.546 636.5821,-669.1974 631.9042,-678.7036 638.8533,-679.546&#34;&gt;&lt;/polygon&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;g id=&#34;a_edge58-label&#34;&gt;&lt;a xlink:title=&#34;runtime.sysMap /Users/dfc/go/src/runtime/mem_darwin.go -&gt; runtime.mmap /Users/dfc/go/src/runtime/sys_darwin_amd64.s (0.01s)&#34;&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;634&#34; y=&#34;-794.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 0.01s&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N57 --&gt;
    &lt;g id=&#34;node58&#34; class=&#34;node&#34;&gt;
    &lt;title&gt;N57&lt;/title&gt;
    &lt;g id=&#34;a_node58&#34;&gt;&lt;a xlink:title=&#34;syscall.write /Users/dfc/go/src/syscall/zsyscall_darwin_amd64.go (0.05s)&#34;&gt;
    &lt;polygon fill=&#34;#edebe9&#34; stroke=&#34;#b2a895&#34; points=&#34;494,-155 412,-155 412,-111 494,-111 494,-155&#34;&gt;&lt;/polygon&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-144.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;syscall&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-135.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;write&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-126.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;zsyscall_darwin_amd64.go&lt;/text&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;453&#34; y=&#34;-117.6&#34; font-family=&#34;Times,serif&#34; font-size=&#34;8.00&#34; fill=&#34;#000000&#34;&gt;0 of 0.05s (3.27%)&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N56&amp;#45;&amp;gt;N57 --&gt;
    &lt;g id=&#34;edge30&#34; class=&#34;edge&#34;&gt;
    &lt;title&gt;N56-&amp;gt;N57&lt;/title&gt;
    &lt;g id=&#34;a_edge30&#34;&gt;&lt;a xlink:title=&#34;syscall.Write /Users/dfc/go/src/syscall/syscall_unix.go -&gt; syscall.write /Users/dfc/go/src/syscall/zsyscall_darwin_amd64.go (0.05s)&#34;&gt;
    &lt;path fill=&#34;none&#34; stroke=&#34;#b2a895&#34; d=&#34;M453,-205.9663C453,-193.9427 453,-178.8283 453,-165.4785&#34;&gt;&lt;/path&gt;
    &lt;polygon fill=&#34;#b2a895&#34; stroke=&#34;#b2a895&#34; points=&#34;456.5001,-165.2433 453,-155.2433 449.5001,-165.2433 456.5001,-165.2433&#34;&gt;&lt;/polygon&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;g id=&#34;a_edge30-label&#34;&gt;&lt;a xlink:title=&#34;syscall.Write /Users/dfc/go/src/syscall/syscall_unix.go -&gt; syscall.write /Users/dfc/go/src/syscall/zsyscall_darwin_amd64.go (0.05s)&#34;&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;466&#34; y=&#34;-176.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 0.05s&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;!-- N57&amp;#45;&amp;gt;N9 --&gt;
    &lt;g id=&#34;edge31&#34; class=&#34;edge&#34;&gt;
    &lt;title&gt;N57-&amp;gt;N9&lt;/title&gt;
    &lt;g id=&#34;a_edge31&#34;&gt;&lt;a xlink:title=&#34;syscall.write /Users/dfc/go/src/syscall/zsyscall_darwin_amd64.go -&gt; syscall.Syscall /Users/dfc/go/src/syscall/asm_darwin_amd64.s (0.05s)&#34;&gt;
    &lt;path fill=&#34;none&#34; stroke=&#34;#b2a895&#34; d=&#34;M453,-110.9039C453,-99.1279 453,-84.2673 453,-70.5053&#34;&gt;&lt;/path&gt;
    &lt;polygon fill=&#34;#b2a895&#34; stroke=&#34;#b2a895&#34; points=&#34;456.5001,-70.2649 453,-60.2649 449.5001,-70.265 456.5001,-70.2649&#34;&gt;&lt;/polygon&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;g id=&#34;a_edge31-label&#34;&gt;&lt;a xlink:title=&#34;syscall.write /Users/dfc/go/src/syscall/zsyscall_darwin_amd64.go -&gt; syscall.Syscall /Users/dfc/go/src/syscall/asm_darwin_amd64.s (0.05s)&#34;&gt;
    &lt;text text-anchor=&#34;middle&#34; x=&#34;466&#34; y=&#34;-81.8&#34; font-family=&#34;Times,serif&#34; font-size=&#34;14.00&#34; fill=&#34;#000000&#34;&gt; 0.05s&lt;/text&gt;
    &lt;/a&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;/g&gt;
    &lt;/g&gt;&lt;/svg&gt;
    &lt;/div&gt;
    

&lt;h2 id=&#34;5-4-트레이싱과-프로파일링&#34;&gt;5.4 트레이싱과 프로파일링&lt;/h2&gt;

&lt;p&gt;이 예제가 프로파일링의 한계를 보여주길 바랍니다. 프로파일링은 프로파일러가 본 내용을 알려줍니다. &lt;code&gt;fillPixel&lt;/code&gt;은 모든 작업을 수행했습니다. 프로파일링이 그에 대해 할 수 있는 일이 많지 않은 듯 보입니다.&lt;/p&gt;

&lt;p&gt;이제 동일한 프로그램에 대한 다른 관점을 제공하는 엑스큐션 트레이서 프로그램을 소개하는 것이 좋을 듯합니다.&lt;/p&gt;

&lt;h3 id=&#34;5-4-1-엑스큐션-트레이서-사용하기&#34;&gt;5.4.1 엑스큐션 트레이서 사용하기&lt;/h3&gt;

&lt;p&gt;트레이서를 사용하는 것은 &lt;profile.TraceProfile&gt;을 호출하는 것이 전부입니다. 바뀌는 게 없습니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-golang&#34; data-lang=&#34;golang&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;github.com/pkg/profile&amp;#34;&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;defer&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;profile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Start&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;profile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;TraceProfile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;profile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ProfilePath&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;.&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)).&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Stop&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;프로그램을 실행하면 현재 작업 디렉토리에 &lt;code&gt;trace.out&lt;/code&gt; 파일이 생성됩니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;% go build mandelbrot.go
% % &lt;span class=&#34;nb&#34;&gt;time&lt;/span&gt; ./mandelbrot
&lt;span class=&#34;m&#34;&gt;2017&lt;/span&gt;/09/17 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:19:10 profile: trace enabled, trace.out
&lt;span class=&#34;m&#34;&gt;2017&lt;/span&gt;/09/17 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:19:12 profile: trace disabled, trace.out

real    0m1.740s
user    0m1.707s
sys     0m0.020s&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;pprof와 마찬가지로 go 명령에는 트레이싱을 분석하는 도구가 있습니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;% go tool trace trace.out
&lt;span class=&#34;m&#34;&gt;2017&lt;/span&gt;/09/17 &lt;span class=&#34;m&#34;&gt;12&lt;/span&gt;:41:39 Parsing trace...
&lt;span class=&#34;m&#34;&gt;2017&lt;/span&gt;/09/17 &lt;span class=&#34;m&#34;&gt;12&lt;/span&gt;:41:40 Serializing trace...
&lt;span class=&#34;m&#34;&gt;2017&lt;/span&gt;/09/17 &lt;span class=&#34;m&#34;&gt;12&lt;/span&gt;:41:40 Splitting trace...
&lt;span class=&#34;m&#34;&gt;2017&lt;/span&gt;/09/17 &lt;span class=&#34;m&#34;&gt;12&lt;/span&gt;:41:40 Opening browser. Trace viewer s listening on http://127.0.0.1:57842&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이 도구는 &lt;code&gt;go tool pprof&lt;/code&gt;와 약간 다릅니다. 엑스큐션 트레이서 프로그램은 크롬에 내장된 많은 프로파일 시각화 인프라를 재사용하므로 &lt;code&gt;go tool trace&lt;/code&gt;은 서버로 작동하여 원시 실행 추적을 크롬이 기본적으로 표시 할 수있는 데이터로 변환합니다.&lt;/p&gt;

&lt;h3 id=&#34;5-4-2-트레이싱-분석하기&#34;&gt;5.4.2 트레이싱 분석하기&lt;/h3&gt;

&lt;p&gt;트레이싱에서 프로그램이 하나의 cpu만 사용하고 있다는 것을 알 수 있습니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-golang&#34; data-lang=&#34;golang&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;seqFillImg&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;img&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;row&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;range&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;j&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;range&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;row&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
			&lt;span class=&#34;nx&#34;&gt;fillPixel&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;j&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
		&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;기본적으로 &lt;code&gt;mandelbrot.go&lt;/code&gt;는 각 행의 각 픽셀에 대해 &lt;code&gt;fillPixel&lt;/code&gt;을 순서대로 호출합니다.&lt;/p&gt;

&lt;p&gt;이미지가 페인트되면 엑스큐션 스위치가 &lt;code&gt;.png&lt;/code&gt; 파일 쓰기로 전환되는 것을 참고하세요. 이는 힙에 가비지를 생성하여 해당 시점에서 트레이싱가 변경되므로 가비지 콜렉터 힙의 고전적인 톱니 패턴을 볼 수 있습니다.&lt;/p&gt;

&lt;p&gt;트레이싱 프로파일은 마이크로초 수준까지 타이밍 레졸루션을 제공합니다. 이는 외부 프로파일링으로는 얻을 수 없는 것입니다.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;go tool trace&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;계속하기 전에 추적 도구의 사용법에 대해 이야기해야 할 것이 있습니다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;이 도구는 크롬에 내장된 자바 스크립트 디버깅 지원을 사용합니다. 트레이싱 프로필은 크롬에서만 볼 수 있으며 Firefox, Safari, IE Edge에서는 작동하지 않습니다. 쏘리.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;이 제품은 Google 제품이므로 키보드 단축키를 지원합니다. &lt;code&gt;WASD&lt;/code&gt;를 사용하여 탐색하고, &lt;code&gt;?&lt;/code&gt; 사용해서 목록을 얻을 수 있습니다.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;트레이싱를 보려면 많은 메모리가 필요할 수 있습니다. 실제로 4Gb는 부족합니다. 8Gb가 아마 최소 수준일 것입니다.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Fedora와 같은 OS 배포판에서 Go를 설치한 경우 트레이싱 뷰어의 지원 파일이 기본 &lt;code&gt;golang&lt;/code&gt; deb/rpm의 일부가 아닌 어떤 &lt;code&gt;-extra&lt;/code&gt; 패키지에 있을 수 있습니다.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;

&lt;h2 id=&#34;5-5-하나-이상의-cpu-사용하기&#34;&gt;5.5 하나 이상의 CPU 사용하기&lt;/h2&gt;

&lt;p&gt;이전 트레이싱에서 프로그램이 순차적으로 실행되고 있으며, 이 시스템의 다른 CPU를 활용하지 않는 것으로 확인했습니다.&lt;/p&gt;

&lt;p&gt;만델브로트 생성은 &lt;code&gt;embarassingly_parallel&lt;/code&gt;로 알려져 있습니다. 각 픽셀은 다른 픽셀과 독립적이며 모두 병렬로 계산할 수 있습니다. 자, 그럼 한번 해보죠.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;% go build mandelbrot.go
% &lt;span class=&#34;nb&#34;&gt;time&lt;/span&gt; ./mandelbrot -mode px
&lt;span class=&#34;m&#34;&gt;2017&lt;/span&gt;/09/17 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:19:48 profile: trace enabled, trace.out
&lt;span class=&#34;m&#34;&gt;2017&lt;/span&gt;/09/17 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:19:50 profile: trace disabled, trace.out

real    0m1.764s
user    0m4.031s
sys     0m0.865s&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;실행 시간은 기본적으로 동일했습니다. 더 많은 &lt;code&gt;user&lt;/code&gt; 시간이 있었는데, 말이 됩니다. 모든 CPU를 사용하고 있었는데도, real (wall clock, 벽시계) 시간은 거의 똑같습니다.&lt;/p&gt;

&lt;p&gt;트레이싱를 한번 볼까요&lt;/p&gt;

&lt;p&gt;보시다시피, 이 추적은 훨씬 더 많은 데이터를 생성했습니다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;많은 작업이 완료된 것 같지만 확대하면 약간의 차이가 있습니다. 이것은 스케줄러로 여겨집니다.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;4개의 코어를 모두 사용하는 동안 각 &lt;code&gt;fillPixel&lt;/code&gt;은 상대적으로 적은 양의 작업이므로 오버헤드를 예약하는 데 많은 시간을 소비하고 있습니다.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;5-6-작업-배치하기&#34;&gt;5.6 작업 배치하기&lt;/h2&gt;

&lt;p&gt;픽셀 당 하나의 고루틴을 사용하는 것은 매우 세분화된 작업입니다. 고루틴 비용을 정당화할 수 있는 작업이 충분하지 않았습니다.&lt;/p&gt;

&lt;p&gt;대신에, 고루틴 한 개당 한 행씩 처리해 봅시다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;% go build mandelbrot.go
% &lt;span class=&#34;nb&#34;&gt;time&lt;/span&gt; ./mandelbrot -mode row
&lt;span class=&#34;m&#34;&gt;2017&lt;/span&gt;/09/17 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:41:55 profile: trace enabled, trace.out
&lt;span class=&#34;m&#34;&gt;2017&lt;/span&gt;/09/17 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:41:55 profile: trace disabled, trace.out

real    0m0.764s
user    0m1.907s
sys     0m0.025s&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;좋게 개선되었습니다. 프로그램의 실행 시간을 거의 절반으로 줄였습니다. 트레이싱를 봅시다.&lt;/p&gt;

&lt;p&gt;보시다시피 이제 트레이싱는 더 작고 작업하기가 더 쉽습니다. 우리는 전체 트레이싱를 볼 수 있는데, 이는 멋진 보너스입니다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;프로그램이 시작될 때 고루틴의 수가 최대 약 1,000 개로 증가하는 것을 볼 수 있습니다. 이것은 이전 트레이싱에서 보았던 1 &amp;lt;&amp;lt; 20에 비해 개선된 것입니다.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;확대하면 &lt;code&gt;onePerRowFillImg&lt;/code&gt;이 더 오래 실행되는 것을 볼 수 있으며 고루틴 생성 작업이 조기에 완료되므로 스케줄러는 나머지 실행 가능한 고루틴을 효율적으로 처리합니다.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;5-7-워커-사용하기&#34;&gt;5.7 워커 사용하기&lt;/h2&gt;

&lt;p&gt;&lt;code&gt;mandelbrot.go&lt;/code&gt;는 다른 모드를 지원하는데요, 해봅시다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;% go build mandelbrot.go
% &lt;span class=&#34;nb&#34;&gt;time&lt;/span&gt; ./mandelbrot -mode workers
&lt;span class=&#34;m&#34;&gt;2017&lt;/span&gt;/09/17 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:49:46 profile: trace enabled, trace.out
&lt;span class=&#34;m&#34;&gt;2017&lt;/span&gt;/09/17 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:49:50 profile: trace disabled, trace.out

real    0m4.207s
user    0m4.459s
sys     0m1.284s&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;자, 실행시간은 이전보다 훨씬 나쁩니다. 트레이싱를 보고 무슨 일이 있었는지 봅시다.&lt;/p&gt;

&lt;p&gt;트레이싱를 살펴보면 하나뿐인 워커 프로세스가, 프로듀서 하나와 컨슈머 하나가 있으므로, 프로듀서와 컨슈머를 교대하는 경향이 있다는 것을 알 수 있습니다. 워커 수를 늘려 봅시다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;% go build mandelbrot.go
% &lt;span class=&#34;nb&#34;&gt;time&lt;/span&gt; ./mandelbrot -mode workers -workers &lt;span class=&#34;m&#34;&gt;4&lt;/span&gt;
&lt;span class=&#34;m&#34;&gt;2017&lt;/span&gt;/09/17 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:52:51 profile: trace enabled, trace.out
&lt;span class=&#34;m&#34;&gt;2017&lt;/span&gt;/09/17 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:52:57 profile: trace disabled, trace.out

real    0m5.528s
user    0m7.307s
sys     0m4.311s&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;자, 더 나빠졌습니다! real 시간이 늘어났고, CPU 시간도 늘어났습니다. 무슨 일이 있었는지 트레이싱를 살펴 봅시다.&lt;/p&gt;

&lt;p&gt;트레이싱가 엉망입니다. 더 많은 워커들이 있지만, 그 일을 하려고 싸우는 데 모든 시간을 보내는 것처럼 보입니다.&lt;/p&gt;

&lt;p&gt;이는 채널이 언버퍼드(unbuffered)이기 때문입니다. 버퍼링되지 않은 채널은 수신할 준비가 된 사람이 있을 때까지 보낼 수 없습니다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;프로듀셔는 수신할 준비가 된 워커가 있을 때까지 작업을 보낼 수 없습니다.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;워커들은 누군가 보낼 준비가 될 때까지 작업을 받을 수 없기 때문에 기다릴 때 서로 경쟁합니다.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;송신자는 권한이 없으므로 이미 실행 중인 워커보다 우선 순위를 가질 수 없습니다.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;여기서 볼 수 있는 것은 버퍼되지 않은 채널에 의해 도입되는 많은 지연 시간입니다. 스케줄러 내부에는 많은 중지 및 시작이 있으며 작업을 기다리는 동안 잠재적으로 잠금 및 뮤텍스가 발생할 수 있으며, 이는 &lt;code&gt;sys&lt;/code&gt; 시간이 더 높은 이유입니다.&lt;/p&gt;

&lt;h2 id=&#34;5-8-버퍼드-채널-사용하기&#34;&gt;5.8 버퍼드 채널 사용하기&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-golang&#34; data-lang=&#34;golang&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;github.com/pkg/profile&amp;#34;&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;defer&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;profile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Start&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;profile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;TraceProfile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;profile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ProfilePath&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;.&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)).&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Stop&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;% go build mandelbrot.go
% &lt;span class=&#34;nb&#34;&gt;time&lt;/span&gt; ./mandelbrot -mode workers -workers &lt;span class=&#34;m&#34;&gt;4&lt;/span&gt;
&lt;span class=&#34;m&#34;&gt;2017&lt;/span&gt;/09/17 &lt;span class=&#34;m&#34;&gt;14&lt;/span&gt;:23:56 profile: trace enabled, trace.out
&lt;span class=&#34;m&#34;&gt;2017&lt;/span&gt;/09/17 &lt;span class=&#34;m&#34;&gt;14&lt;/span&gt;:23:57 profile: trace disabled, trace.out

real    0m0.905s
user    0m2.150s
sys     0m0.121s&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위의 row당 모드와 매우 유사합니다.&lt;/p&gt;

&lt;p&gt;버퍼드(buffered) 채널을 사용한 트레이싱 결과는 다음과 같습니다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;프로듀서는 워커가 도착할 때까지 기다릴 필요가 없고, 빠르게 채널을 채울 수 있습니다.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;프로듀서는 작업을 기다리지 않고 채널에서 다음 항목을 빠르게 가져올 수 있습니다.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;이 방법을 사용하면 이전에 row마다 고루틴을 스케쥴링했던 것보다 픽셀마다 작업을 전달하기 위해 채널을 사용하는 속도와 거의 같은 속도를 얻게 됩니다.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;행마다 동작하도록 &lt;code&gt;nWorkersFillImg&lt;/code&gt;를 수정하세요. 결과 시간을 측정하고 트레이싱을 분석해보세요.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&#34;5-9-만델브로트-마이크로-서비스&#34;&gt;5.9 만델브로트 마이크로 서비스&lt;/h2&gt;

&lt;p&gt;2019년입니다. 만델브로트를 서버리스 마이크로서비스로 인터넷에 배포하지 않고 생성하는 것은 큰 의미가 없죠. 따라서, 만델웹을 선물로 드릴게요.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;% go run examples/mandelweb/mandelweb.go
&lt;span class=&#34;m&#34;&gt;2017&lt;/span&gt;/09/17 &lt;span class=&#34;m&#34;&gt;15&lt;/span&gt;:29:21 listening on http://127.0.0.1:8080/&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&#34;http://127.0.0.1:8080/mandelbrot&#34; target=&#34;_blank&#34;&gt;http://127.0.0.1:8080/mandelbrot&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&#34;5-9-1-실행-중인-어플리케이션-트레이싱&#34;&gt;5.9.1 실행 중인 어플리케이션 트레이싱&lt;/h3&gt;

&lt;p&gt;이전 예제에서는 전체 프로그램에 대해 트레이싱을 실행했습니다.&lt;/p&gt;

&lt;p&gt;보시다시피, 소량이라도 트레이싱이 매우 클 수 있으므로 트레이싱 데이터를 지속적으로 수집하면 너무 많은 데이터가 생성됩니다. 또한 트레이싱은 프로그램 속도에 영향을 줄 수 있습니다. 특히 활동이 많은 경우에 그렇습니다.&lt;/p&gt;

&lt;p&gt;우리가 원하는 것은 실행중인 프로그램에서 짧은 트레이싱을 수집하는 방법입니다.&lt;/p&gt;

&lt;p&gt;다행히도 &lt;code&gt;net/http/pprof&lt;/code&gt; 패키지에는 이러한 기능이 있습니다.&lt;/p&gt;

&lt;h3 id=&#34;5-9-2-http를-통한-트레이싱-수집&#34;&gt;5.9.2 http를 통한 트레이싱 수집&lt;/h3&gt;

&lt;p&gt;모두가 &lt;code&gt;net/http/pprof&lt;/code&gt; 패키지에 대해 알고 있을 거라고 생각합니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-golang&#34; data-lang=&#34;golang&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;_&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;net/http/pprof&amp;#34;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;net/http/pprof&lt;/code&gt;를 임포트하면 &lt;code&gt;http.DefaultServeMux&lt;/code&gt;에 트레이싱 및 프로파일링 경로를 등록합니다. Go 1.5부터 트레이싱 프로파일러가 포함됩니다.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;code&gt;curl&lt;/code&gt; (또는 &lt;code&gt;wget&lt;/code&gt;)을 사용해서 mandelweb에서 5초 트레이싱을 확보할 수 있습니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;% curl -o trace.out http://127.0.0.1:8080/debug/pprof/trace?seconds&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;5&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&#34;5-9-3-부하-생성하기&#34;&gt;5.9.3 부하 생성하기&lt;/h3&gt;

&lt;p&gt;이전 예제는 흥미롭지만 유휴 상태인 웹 서버에는, 정의상, 성능 문제가 없습니다. 약간의 부하를 발생시켜야합니다. 이를 위해 &lt;a href=&#34;https://github.com/rakyll/hey&#34; target=&#34;_blank&#34;&gt;JBD&lt;/a&gt;가 개발하신 &lt;code&gt;hey&lt;/code&gt;를 사용할게요.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;% go get -u github.com/rakyll/hey&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;초당 1개의 요청으로 시작합니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;% hey -c &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; -n &lt;span class=&#34;m&#34;&gt;1000&lt;/span&gt; -q &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; http://127.0.0.1:8080/mandelbrot&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;실행시키며, 다른 창에서 트레이싱을 수집합니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;% curl -o trace.out http://127.0.0.1:8080/debug/pprof/trace?seconds&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;5&lt;/span&gt;
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
&lt;span class=&#34;m&#34;&gt;100&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;66169&lt;/span&gt;    &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;66169&lt;/span&gt;    &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;     &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;  &lt;span class=&#34;m&#34;&gt;13233&lt;/span&gt;      &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt; --:--:--  &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;:00:05 --:--:-- &lt;span class=&#34;m&#34;&gt;17390&lt;/span&gt;
% go tool trace trace.out
&lt;span class=&#34;m&#34;&gt;2017&lt;/span&gt;/09/17 &lt;span class=&#34;m&#34;&gt;16&lt;/span&gt;:09:30 Parsing trace...
&lt;span class=&#34;m&#34;&gt;2017&lt;/span&gt;/09/17 &lt;span class=&#34;m&#34;&gt;16&lt;/span&gt;:09:30 Serializing trace...
&lt;span class=&#34;m&#34;&gt;2017&lt;/span&gt;/09/17 &lt;span class=&#34;m&#34;&gt;16&lt;/span&gt;:09:30 Splitting trace...
&lt;span class=&#34;m&#34;&gt;2017&lt;/span&gt;/09/17 &lt;span class=&#34;m&#34;&gt;16&lt;/span&gt;:09:30 Opening browser.
Trace viewer is listening on http://127.0.0.1:60301&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&#34;5-9-4-과부하-생성하기&#34;&gt;5.9.4 과부하 생성하기&lt;/h3&gt;

&lt;p&gt;초당 5개의 요청으로 속도를 높이겠습니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;% hey -c &lt;span class=&#34;m&#34;&gt;5&lt;/span&gt; -n &lt;span class=&#34;m&#34;&gt;1000&lt;/span&gt; -q &lt;span class=&#34;m&#34;&gt;5&lt;/span&gt; http://127.0.0.1:8080/mandelbrot&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;실행시키며, 다른 창에서 트레이싱을 수집합니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;% curl -o trace.out http://127.0.0.1:8080/debug/pprof/trace?seconds&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;5&lt;/span&gt;
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                Dload  Upload   Total   Spent    Left  Speed
&lt;span class=&#34;m&#34;&gt;100&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;66169&lt;/span&gt;    &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;66169&lt;/span&gt;    &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;     &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;  &lt;span class=&#34;m&#34;&gt;13233&lt;/span&gt;      &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt; --:--:--  &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;:00:05 --:--:-- &lt;span class=&#34;m&#34;&gt;17390&lt;/span&gt;
% go tool trace trace.out
&lt;span class=&#34;m&#34;&gt;2017&lt;/span&gt;/09/17 &lt;span class=&#34;m&#34;&gt;16&lt;/span&gt;:09:30 Parsing trace...
&lt;span class=&#34;m&#34;&gt;2017&lt;/span&gt;/09/17 &lt;span class=&#34;m&#34;&gt;16&lt;/span&gt;:09:30 Serializing trace...
&lt;span class=&#34;m&#34;&gt;2017&lt;/span&gt;/09/17 &lt;span class=&#34;m&#34;&gt;16&lt;/span&gt;:09:30 Splitting trace...
&lt;span class=&#34;m&#34;&gt;2017&lt;/span&gt;/09/17 &lt;span class=&#34;m&#34;&gt;16&lt;/span&gt;:09:30 Opening browser. Trace viewer is listening on http://127.0.0.1:60301&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&#34;5-9-5-추가-작품-에라토스테네스의-체&#34;&gt;5.9.5 추가 작품, 에라토스테네스의 체&lt;/h3&gt;

&lt;p&gt;&lt;a href=&#34;https://github.com/golang/go/blob/master/doc/play/sieve.go&#34; target=&#34;_blank&#34;&gt;동시 프라임 체 (concurrent prime sieve)&lt;/a&gt;는 처음 작성된 Go 프로그램 중 하나입니다.&lt;/p&gt;

&lt;p&gt;이반 다닐루크 (Ivan Daniluk)는 이를 시각화하는 멋진 포스트를 작성했습니다.&lt;/p&gt;

&lt;p&gt;엑스큐션 트레이서를 사용한 동작 상황을 살펴보겠습니다.&lt;/p&gt;

&lt;h3 id=&#34;5-9-6-더-많은-자료들&#34;&gt;5.9.6 더 많은 자료들&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;Rhys Hiltner, &lt;a href=&#34;https://www.youtube.com/watch?v=mmqDlbWk_XA&#34; target=&#34;_blank&#34;&gt;Go’s execution tracer&lt;/a&gt; (dotGo 2016)&lt;/li&gt;
&lt;li&gt;Rhys Hiltner, &lt;a href=&#34;https://www.youtube.com/watch?v=V74JnrGTwKA&#34; target=&#34;_blank&#34;&gt;An Introduction to &amp;ldquo;go tool trace&amp;rdquo;&lt;/a&gt; (GopherCon 2017)&lt;/li&gt;
&lt;li&gt;Dave Cheney, &lt;a href=&#34;https://www.youtube.com/watch?v=2h_NFBFrciI&#34; target=&#34;_blank&#34;&gt;Seven ways to profile Go programs&lt;/a&gt; (GolangUK 2016)&lt;/li&gt;
&lt;li&gt;Dave Cheney, &lt;a href=&#34;https://dave.cheney.net/training#high-performance-go&#34; target=&#34;_blank&#34;&gt;High performance Go workshop&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Ivan Daniluk, &lt;a href=&#34;https://www.youtube.com/watch?v=KyuFeiG3Y60&#34; target=&#34;_blank&#34;&gt;Visualizing Concurrency in Go&lt;/a&gt; (GopherCon 2016)&lt;/li&gt;
&lt;li&gt;Kavya Joshi, &lt;a href=&#34;https://www.youtube.com/watch?v=KBZlN0izeiY&#34; target=&#34;_blank&#34;&gt;Understanding Channels&lt;/a&gt; (GopherCon 2017)&lt;/li&gt;
&lt;li&gt;Francesc Campoy, &lt;a href=&#34;https://www.youtube.com/watch?v=ySy3sR1LFCQ&#34; target=&#34;_blank&#34;&gt;Using the Go execution tracer&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&#34;6-메모리-및-가비지-콜렉터&#34;&gt;6.메모리 및 가비지 콜렉터&lt;/h1&gt;

&lt;p&gt;Go는 가비지 콜렉트되는 언어입니다. 이는 디자인 원칙이며 변치 않을 겁니다.&lt;/p&gt;

&lt;p&gt;가비지 콜렉트 언어인 Go 프로그램의 성능은 가비지 콜렉터와의 상호 작용에 의해 결정됩니다.&lt;/p&gt;

&lt;p&gt;선택한 알고리즘 다음으로는, 메모리 소비가 애플리케이션의 성능과 확장성을 결정하는 가장 중요한 요소입니다.&lt;/p&gt;

&lt;p&gt;이 섹션에서는 가비지 콜렉터의 작동, 프로그램의 메모리 사용량을 측정하는 방법 및 가비지 콜렉터 성능이 병목 지점일 경우 메모리 사용량을 낮추기 위한 전략에 대해 설명합니다.&lt;/p&gt;

&lt;h2 id=&#34;6-1-가비지-콜렉터-월드뷰&#34;&gt;6.1 가비지 콜렉터 월드뷰&lt;/h2&gt;

&lt;p&gt;가비지 콜렉터의 목적은 프로그램에서 사용할 수 있는 무한한 양의 메모리가 있다는 환상을 보여주는 것입니다.&lt;/p&gt;

&lt;p&gt;이 설명에 동의하지 않을 수도 있지만, 가비지 콜렉터 디자이너의 작동 방식에 대한 기본 가정이 이렇습니다.&lt;/p&gt;

&lt;p&gt;스탑-더-월드 (STW, stop the world)인 마크 스윕 GC는 전체 실행 시간 측면에서 가장 효율적이며 일괄 처리, 시뮬레이션 등에 적합합니다. 그러나 시간이 지남에 따라 Go GC는 순수 스탑-더-월드 콜렉터에서 동시성 비압축 컬렉터(concurrent, non compacting, collector)로 이동했습니다. 이는 Go GC가 레이턴시가 짧은 서버 및 대화형 애플리케이션을 위해 설계되었기 때문입니다.&lt;/p&gt;

&lt;p&gt;Go GC의 설계는 최대 처리량보다 짧은 레이턴시를 선호합니다. 즉, 이후의 정리 비용을 줄이기 위해 할당 비용의 일부를 mutator로 옮깁니다.&lt;/p&gt;

&lt;h2 id=&#34;6-2-가비지-콜렉터-디자인&#34;&gt;6.2 가비지 콜렉터 디자인&lt;/h2&gt;

&lt;p&gt;Go GC의 설계는 수년에 걸쳐 변경되었습니다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Go 1.0, tcmalloc에 크게 의존하는 스탑-더-월드 마크 스윕 콜렉터&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Go 1.3, 힙의 큰 숫자를 포인터로 오인하지 않아, 메모리 누수가 발생하는, 완전 정밀 콜렉터&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Go 1.5, 처리량보다 레이턴시에 중점을 둔 새로운 GC 설계&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Go 1.6, 레이턴시가 짧은 더 큰 힙을 처리하는 GC 개선&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Go 1.7, 리팩토링 위주의 작은 GC 개선&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Go 1.8, STW 시간을 줄이기 위한 추가 작업, 이제 100 마이크로초 범위로 내려감.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Go 1.10+, 전체 GC 사이클을 트리거할 때 레이턴시를 낮추기 위한 순수 협업 (pure cooperative) 고루틴에서 벗어남.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;6-3-가비지-콜렉터-모니터링&#34;&gt;6.3 가비지 콜렉터 모니터링&lt;/h2&gt;

&lt;p&gt;가비지 콜렉터가 얼마나 열심히 작동하는지 간단하게 알 수 있는 방법은 GC 로깅 출력을 활성화하는 것입니다.&lt;/p&gt;

&lt;p&gt;이 통계는 항상 수집되지만 일반적으로 억제되므로 GODEBUG 환경 변수를 설정하여 해당 통계를 표시할 수 있습니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;% env &lt;span class=&#34;nv&#34;&gt;GODEBUG&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;gctrace&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; godoc -http&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;:8080
gc &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; @0.012s &lt;span class=&#34;m&#34;&gt;2&lt;/span&gt;%: &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;.026+0.39+0.10 ms clock, &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;.21+0.88/0.52/0+0.84 ms cpu, &lt;span class=&#34;m&#34;&gt;4&lt;/span&gt;-&amp;gt;4-&amp;gt;0 MB, &lt;span class=&#34;m&#34;&gt;5&lt;/span&gt; MB goal, &lt;span class=&#34;m&#34;&gt;8&lt;/span&gt; P
gc &lt;span class=&#34;m&#34;&gt;2&lt;/span&gt; @0.016s &lt;span class=&#34;m&#34;&gt;3&lt;/span&gt;%: &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;.038+0.41+0.042 ms clock, &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;.30+1.2/0.59/0+0.33 ms cpu, &lt;span class=&#34;m&#34;&gt;4&lt;/span&gt;-&amp;gt;4-&amp;gt;1 MB, &lt;span class=&#34;m&#34;&gt;5&lt;/span&gt; MB goal, &lt;span class=&#34;m&#34;&gt;8&lt;/span&gt; P
gc &lt;span class=&#34;m&#34;&gt;3&lt;/span&gt; @0.020s &lt;span class=&#34;m&#34;&gt;4&lt;/span&gt;%: &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;.054+0.56+0.054 ms clock, &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;.43+1.0/0.59/0+0.43 ms cpu, &lt;span class=&#34;m&#34;&gt;4&lt;/span&gt;-&amp;gt;4-&amp;gt;1 MB, &lt;span class=&#34;m&#34;&gt;5&lt;/span&gt; MB goal, &lt;span class=&#34;m&#34;&gt;8&lt;/span&gt; P
gc &lt;span class=&#34;m&#34;&gt;4&lt;/span&gt; @0.025s &lt;span class=&#34;m&#34;&gt;4&lt;/span&gt;%: &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;.043+0.52+0.058 ms clock, &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;.34+1.3/0.64/0+0.46 ms cpu, &lt;span class=&#34;m&#34;&gt;4&lt;/span&gt;-&amp;gt;4-&amp;gt;1 MB, &lt;span class=&#34;m&#34;&gt;5&lt;/span&gt; MB goal, &lt;span class=&#34;m&#34;&gt;8&lt;/span&gt; P
gc &lt;span class=&#34;m&#34;&gt;5&lt;/span&gt; @0.029s &lt;span class=&#34;m&#34;&gt;5&lt;/span&gt;%: &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;.058+0.64+0.053 ms clock, &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;.46+1.3/0.89/0+0.42 ms cpu, &lt;span class=&#34;m&#34;&gt;4&lt;/span&gt;-&amp;gt;4-&amp;gt;1 MB, &lt;span class=&#34;m&#34;&gt;5&lt;/span&gt; MB goal, &lt;span class=&#34;m&#34;&gt;8&lt;/span&gt; P
gc &lt;span class=&#34;m&#34;&gt;6&lt;/span&gt; @0.034s &lt;span class=&#34;m&#34;&gt;5&lt;/span&gt;%: &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;.062+0.42+0.050 ms clock, &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;.50+1.2/0.63/0+0.40 ms cpu, &lt;span class=&#34;m&#34;&gt;4&lt;/span&gt;-&amp;gt;4-&amp;gt;1 MB, &lt;span class=&#34;m&#34;&gt;5&lt;/span&gt; MB goal, &lt;span class=&#34;m&#34;&gt;8&lt;/span&gt; P
gc &lt;span class=&#34;m&#34;&gt;7&lt;/span&gt; @0.038s &lt;span class=&#34;m&#34;&gt;6&lt;/span&gt;%: &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;.057+0.47+0.046 ms clock, &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;.46+1.2/0.67/0+0.37 ms cpu, &lt;span class=&#34;m&#34;&gt;4&lt;/span&gt;-&amp;gt;4-&amp;gt;1 MB, &lt;span class=&#34;m&#34;&gt;5&lt;/span&gt; MB goal, &lt;span class=&#34;m&#34;&gt;8&lt;/span&gt; P
gc &lt;span class=&#34;m&#34;&gt;8&lt;/span&gt; @0.041s &lt;span class=&#34;m&#34;&gt;6&lt;/span&gt;%: &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;.049+0.42+0.057 ms clock, &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;.39+1.1/0.57/0+0.46 ms cpu, &lt;span class=&#34;m&#34;&gt;4&lt;/span&gt;-&amp;gt;4-&amp;gt;1 MB, &lt;span class=&#34;m&#34;&gt;5&lt;/span&gt; MB goal, &lt;span class=&#34;m&#34;&gt;8&lt;/span&gt; P
gc &lt;span class=&#34;m&#34;&gt;9&lt;/span&gt; @0.045s &lt;span class=&#34;m&#34;&gt;6&lt;/span&gt;%: &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;.047+0.38+0.042 ms clock, &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;.37+0.94/0.61/0+0.33 ms cpu, &lt;span class=&#34;m&#34;&gt;4&lt;/span&gt;-&amp;gt;4-&amp;gt;1 MB, &lt;span class=&#34;m&#34;&gt;5&lt;/span&gt; MB goal, &lt;span class=&#34;m&#34;&gt;8&lt;/span&gt; P&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;트레이스 출력은 GC 활동의 일반적인 측정값을 제공합니다. &lt;code&gt;gctrace = 1&lt;/code&gt;의 출력 형식은 런타임 패키지 설명서에 설명되어 있습니다.&lt;/p&gt;

&lt;p&gt;DEMO: &lt;code&gt;GODEBUG=gctrace=1&lt;/code&gt;을 활성화하여 &lt;code&gt;godoc&lt;/code&gt;을 표시합니다.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;프러덕션 환경에서 이 환경 변수를 사용하세요. 성능에 영향을 미치지 않습니다.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;GODEBUG=gctrace=1&lt;/code&gt;은 문제가 있는 것을 알고 있을 때 사용하면 좋습니다. 그러나 Go 애플리케이션의 일반적인 원격 측정의 경우는 &lt;code&gt;net/http/pprof&lt;/code&gt; 인터페이스를 사용하는 것을 추천합니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-golang&#34; data-lang=&#34;golang&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;_&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;net/http/pprof&amp;#34;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;net/http/pprof&lt;/code&gt; 패키지를 임포트하면 &lt;code&gt;/debug/pprof&lt;/code&gt;에 핸들러를 다음과 같은 다양한 런타임 메트릭으로 등록합니다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;실행 중인 모든 고루틴의 목록, &lt;code&gt;/debug/pprof/heap?debug=1&lt;/code&gt;.&lt;/li&gt;

&lt;li&gt;&lt;p&gt;메모리 할당 통계 리포트, &lt;code&gt;/debug/pprof/heap?debug=1&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;net/http/pprof&lt;/code&gt;는 기본 &lt;code&gt;http.ServeMux&lt;/code&gt;에 등록됩니다.
&lt;code&gt;http.ListenAndServe(address, nil)&lt;/code&gt;을 사용하면 이것이 표시되므로 주의하세요.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;DEMO: &lt;code&gt;godoc -http=:8080&lt;/code&gt;, &lt;code&gt;/debug/pprof&lt;/code&gt;를 보여줍니다.&lt;/p&gt;

&lt;h3 id=&#34;6-3-1-가비지-콜렉터-튜닝&#34;&gt;6.3.1 가비지 콜렉터 튜닝&lt;/h3&gt;

&lt;p&gt;Go 런타임은 GC, &lt;code&gt;GOGC&lt;/code&gt;를 조정하기 위한 환경 변수를 제공합니다.&lt;/p&gt;

&lt;p&gt;GOGC의 공식은 다음과 같습니다.&lt;/p&gt;

&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;
  &lt;mstyle displaystyle=&#34;true&#34;&gt;
    &lt;mi&gt;g&lt;/mi&gt;
    &lt;mi&gt;o&lt;/mi&gt;
    &lt;mi&gt;a&lt;/mi&gt;
    &lt;mi&gt;l&lt;/mi&gt;
    &lt;mo&gt;=&lt;/mo&gt;
    &lt;mi&gt;r&lt;/mi&gt;
    &lt;mi&gt;e&lt;/mi&gt;
    &lt;mi&gt;a&lt;/mi&gt;
    &lt;mi&gt;c&lt;/mi&gt;
    &lt;mi&gt;h&lt;/mi&gt;
    &lt;mi&gt;a&lt;/mi&gt;
    &lt;mi&gt;b&lt;/mi&gt;
    &lt;mi&gt;l&lt;/mi&gt;
    &lt;mi&gt;e&lt;/mi&gt;
    &lt;mo&gt;&amp;#x22C5;&lt;/mo&gt;
    &lt;mrow&gt;
      &lt;mo&gt;(&lt;/mo&gt;
      &lt;mn&gt;1&lt;/mn&gt;
      &lt;mo&gt;+&lt;/mo&gt;
      &lt;mfrac&gt;
        &lt;mrow&gt;
          &lt;mi&gt;G&lt;/mi&gt;
          &lt;mi&gt;O&lt;/mi&gt;
          &lt;mi&gt;G&lt;/mi&gt;
          &lt;mi&gt;C&lt;/mi&gt;
        &lt;/mrow&gt;
        &lt;mn&gt;100&lt;/mn&gt;
      &lt;/mfrac&gt;
      &lt;mo&gt;)&lt;/mo&gt;
    &lt;/mrow&gt;
  &lt;/mstyle&gt;
&lt;/math&gt;

&lt;p&gt;예를 들어, 현재 256MB 힙이 있고 &lt;code&gt;GOGC = 100 (기본값)&lt;/code&gt; 인 경우 힙이 가득 차면 다음과 같이 증가합니다.&lt;/p&gt;

&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;
  &lt;mstyle displaystyle=&#34;true&#34;&gt;
    &lt;mn&gt;512&lt;/mn&gt;
    &lt;mi&gt;M&lt;/mi&gt;
    &lt;mi&gt;B&lt;/mi&gt;
    &lt;mo&gt;=&lt;/mo&gt;
    &lt;mn&gt;256&lt;/mn&gt;
    &lt;mi&gt;M&lt;/mi&gt;
    &lt;mi&gt;B&lt;/mi&gt;
    &lt;mo&gt;&amp;#x22C5;&lt;/mo&gt;
    &lt;mrow&gt;
      &lt;mo&gt;(&lt;/mo&gt;
      &lt;mn&gt;1&lt;/mn&gt;
      &lt;mo&gt;+&lt;/mo&gt;
      &lt;mfrac&gt;
        &lt;mn&gt;100&lt;/mn&gt;
        &lt;mn&gt;100&lt;/mn&gt;
      &lt;/mfrac&gt;
      &lt;mo&gt;)&lt;/mo&gt;
    &lt;/mrow&gt;
  &lt;/mstyle&gt;
&lt;/math&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;GOGC&lt;/code&gt; 값이 100보다 크면 힙이 더 빨리 커져서 GC에 대한 압력이 감소합니다.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;code&gt;GOGC&lt;/code&gt; 값이 100보다 작으면 힙이 느리게 커져 GC에 대한 압력이 증가합니다.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;기본값 100은 &lt;code&gt;just_a_guide&lt;/code&gt;입니다. 프로덕션 부하로 애플리케이션을 프로파일링한 후 고유한 값을 선택해야 합니다.&lt;/p&gt;

&lt;h2 id=&#34;6-5-string과-bytes&#34;&gt;6.5 string과 []bytes&lt;/h2&gt;

&lt;p&gt;Go에서, &lt;code&gt;string&lt;/code&gt; 값은 변경할 수 없으며 &lt;code&gt;[]byte&lt;/code&gt;는 변경할 수 있습니다.&lt;/p&gt;

&lt;p&gt;대부분의 프로그램은 &lt;code&gt;string&lt;/code&gt; 작업을 선호하지만 대부분의 IO는 &lt;code&gt;[]byte&lt;/code&gt;로 수행됩니다.&lt;/p&gt;

&lt;p&gt;가능하다면 &lt;code&gt;[]byte&lt;/code&gt;에서 &lt;code&gt;string&lt;/code&gt; 변환을 피하세요. 이는 일반적으로 값으로 &lt;code&gt;string&lt;/code&gt; 또는 &lt;code&gt;[]byte&lt;/code&gt; 중 한가지 표현을 선택함을 의미합니다. 네트워크나 디스크에서 데이터를 읽는 경우 종종 &lt;code&gt;[]byte&lt;/code&gt;가 됩니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;bytes&lt;/code&gt; 패키지에는 &lt;code&gt;strings&lt;/code&gt; 패키지와 동일한 작업 (&lt;code&gt;Split&lt;/code&gt;, &lt;code&gt;Compare&lt;/code&gt;, &lt;code&gt;HasPrefix&lt;/code&gt;, &lt;code&gt;Trim&lt;/code&gt; 등)이 많이 포함되어 있습니다.&lt;/p&gt;

&lt;p&gt;내부적으로, &lt;code&gt;strings&lt;/code&gt;은 &lt;code&gt;bytes&lt;/code&gt; 패키지와 동일한 어셈블리 프리미티브를 사용합니다.&lt;/p&gt;

&lt;h2 id=&#34;6-6-맵-키로-byte-사용&#34;&gt;6.6 맵 키로 []byte 사용&lt;/h2&gt;

&lt;p&gt;&lt;code&gt;string&lt;/code&gt;을 맵 키로 사용하는 것이 매우 일반적이지만, 종종 &lt;code&gt;[]byte&lt;/code&gt;를 사용합니다.&lt;/p&gt;

&lt;p&gt;컴파일러는 이 경우에 특별한 최적화를 구현합니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-golang&#34; data-lang=&#34;golang&#34;&gt;&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;
&lt;span class=&#34;nx&#34;&gt;v&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ok&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이렇게 하면 맵 룩업 시에 바이트 슬라이스를 문자열로 변환하지 않아도 됩니다. 다음과 같은 코딩할 경우 작동하지 않는데, 아주 특이하죠.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-golang&#34; data-lang=&#34;golang&#34;&gt;&lt;span class=&#34;nx&#34;&gt;key&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;nx&#34;&gt;val&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ok&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;m&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;이게 아직도 사실인지 확인해 봅시다. []byte를 string 맵 키로 사용하는 이 두 가지 방법을 비교하는 벤치마크를 작성해보세요.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&#34;6-7-문자열-연결-피하기&#34;&gt;6.7 문자열 연결 피하기&lt;/h2&gt;

&lt;p&gt;Go 문자열은 불변입니다. 두 개의 문자열을 결합하면 세 번째 문자열이 생성됩니다. 다음 중 가장 빠른 것은 무엇일까요?&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-golang&#34; data-lang=&#34;golang&#34;&gt;		&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ID&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34; &amp;#34;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;client&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Addr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34; &amp;#34;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Now&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-golang&#34; data-lang=&#34;golang&#34;&gt;		&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;bytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Buffer&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Fprintf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;%s %v %v&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ID&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;client&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Addr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Now&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-golang&#34; data-lang=&#34;golang&#34;&gt;		&lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Sprintf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;%s %v %v&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ID&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;client&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Addr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Now&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-golang&#34; data-lang=&#34;golang&#34;&gt;		&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;make&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;40&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;append&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;...&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;append&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;sc&#34;&gt;&amp;#39; &amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;append&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;client&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Addr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;...&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;append&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;sc&#34;&gt;&amp;#39; &amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Now&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;AppendFormat&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;2006-01-02 15:04:05.999999999 -0700 MST&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-golang&#34; data-lang=&#34;golang&#34;&gt;		&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;strings&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Builder&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;WriteString&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ID&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;WriteString&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34; &amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;WriteString&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;client&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Addr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;WriteString&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34; &amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;WriteString&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Now&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;DEMO: &lt;code&gt;go test -bench=. ./examples/concat&lt;/code&gt;&lt;/p&gt;

&lt;h2 id=&#34;6-8-길이가-알려진-경우-슬라이스를-미리-할당&#34;&gt;6.8 길이가 알려진 경우, 슬라이스를 미리 할당&lt;/h2&gt;

&lt;p&gt;&lt;code&gt;Append&lt;/code&gt;는 편리하지만, 낭비입니다.&lt;/p&gt;

&lt;p&gt;슬라이스는 최대 1024개의 요소를 두 배로 늘린 후 그 후 약 25% 증가합니다. 요소를 하나 더 추가한 후에 &lt;code&gt;b&lt;/code&gt;의 용량은 얼마일까요?&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-golang&#34; data-lang=&#34;golang&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;make&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1024&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;append&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;99&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;len:&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;cap:&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;cap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Append 패턴을 사용하면 많은 데이터를 복사하며 많은 가비지를 만들 수 있습니다.&lt;/p&gt;

&lt;p&gt;슬라이스의 길이를 미리 알고 있으면, 복사를 피하고, 대상이 정확히 맞는 크기인지 확인하기 위해 대상을 미리 할당합니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;이전&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-golang&#34; data-lang=&#34;golang&#34;&gt;&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;v&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;range&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;fn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;append&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;v&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;이후&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-golang&#34; data-lang=&#34;golang&#34;&gt;&lt;span class=&#34;nx&#34;&gt;vals&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;fn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;make&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;vals&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;v&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;range&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;vals&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;v&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&#34;6-9-sync-pool-사용&#34;&gt;6.9 sync.Pool 사용&lt;/h2&gt;

&lt;p&gt;동기화 패키지는 공통 객체를 재사용하는데 사용되는 &lt;code&gt;sync.Pool&lt;/code&gt; 타입과 함께 제공됩니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;sync.Pool&lt;/code&gt;에는 고정 크기 또는 최대 용량이 없습니다. GC가 발생할 때까지 추가하고 가져와 무조건 비웁니다. 이는 &lt;a href=&#34;https://groups.google.com/forum/#!searchin/golang-dev/gc-aware/golang-dev/kJ_R6vYVYHU/LjoGriFTYxMJ&#34; target=&#34;_blank&#34;&gt;설계를 따른 것&lt;/a&gt;입니다.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;가비지 콜렉션이 너무 빠르거나 가비지 콜렉션이 너무 늦으면 Pool을 비우기에 적절한 시간은 가비지 콜렉션 중이어야 합니다. 즉, Pool 타입의 세만틱스는 각 가비지 콜렉션에서 비어져야 한다는 것입니다. — 러스 콕스&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-golang&#34; data-lang=&#34;golang&#34;&gt;&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;pool&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;sync&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Pool&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;New&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;interface&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{}&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;make&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;4096&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;fn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;buf&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;pool&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().([]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// takes from pool or calls New
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;c1&#34;&gt;// do work
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;pool&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Put&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;buf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// returns buf to the pool
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&#34;6-10-연습문제&#34;&gt;6.10 연습문제&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;godoc&lt;/code&gt;(또는 다른 프로그램)을 사용해서 &lt;code&gt;GODEBUG=gctrace=1&lt;/code&gt;을 사용한 &lt;code&gt;GOGC&lt;/code&gt; 변경 내용을 관찰하세요.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;byte의 string(byte) 맵 키를 벤치마크해보세요.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;서로 다른 연결(concat) 방법의 메모리 할당을 벤치마크해보세요.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&#34;7-팁과-트립&#34;&gt;7. 팁과 트립&lt;/h1&gt;

&lt;p&gt;팁과 제안을 무작위로 살펴보겠습니다.&lt;/p&gt;

&lt;p&gt;이 마지막 섹션에는 Go 코드를 마이크로 최적화하기 위한 여러가지 팁이 포함되어 있습니다.&lt;/p&gt;

&lt;h2 id=&#34;7-1-고루틴&#34;&gt;7.1 고루틴&lt;/h2&gt;

&lt;p&gt;현대 하드웨어에 잘 어울리는 Go의 주요 기능은 고루틴입니다.&lt;/p&gt;

&lt;p&gt;고루틴은 사용하기 쉽고 만들기에도 저렴합니다. 고루틴을 거의 공짜라고 생각할 수 있습니다.&lt;/p&gt;

&lt;p&gt;Go 런타임은 일반적으로 수만 개의 고루틴이 있는 프로그램을 위해 작성되었으나 수십만 고루틴을 예상치 못한 것은 아닙니다.&lt;/p&gt;

&lt;p&gt;그러나 각 고루틴은 현재 최소 2k인 고루틴 스택에 대해 최소한의 메모리를 소비합니다.&lt;/p&gt;

&lt;p&gt;2048 * 백만 고루틴 == 2GB의 메모리이고, 아직 시작도 안했죠.&lt;/p&gt;

&lt;p&gt;어쩌면 이것이 많을 수도 있고, 어쩌면 애플리케이션의 다른 용도로 사용되지 않을 수도 있습니다.&lt;/p&gt;

&lt;h3 id=&#34;7-1-1-고루팁을-언제-멈추어야-하는지-알기&#34;&gt;7.1.1 고루팁을 언제 멈추어야 하는지 알기&lt;/h3&gt;

&lt;p&gt;고루틴은 시작 비용이 저렴하고 실행 비용이 저렴합니다. 하지만 메모리 사용 공간 측면에서 비용이 한정되어 있습니다. 무한히 많은 고루틴을 만들 수는 없습니다.&lt;/p&gt;

&lt;p&gt;여러분은 고루틴을 런칭시키기 위해 프로그램에서 Go 키워드를 사용할 때마다 고루틴이 어떻게 언제 종료되는지 알아야 합니다.&lt;/p&gt;

&lt;p&gt;여러분의 설계에서, 몇몇 고루틴은 프로그램이 끝날 때까지 실행될 수 있습니다. 이러한 고루틴은 예외적인 규칙이 아닐 정도로 희귀합니다.&lt;/p&gt;

&lt;p&gt;답을 모르신다면, 고루틴이 스택에서 접근할 수 있는 모든 힙 할당 변수뿐만 아니라 스택의 메모리를 힙에 고정하기 때문에 메모리 누수가 발생할 수 있습니다.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;고루틴을 어떻게 멈출 지 모른채로 시작하지 마세요.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&#34;7-1-2-더-읽을거리&#34;&gt;7.1.2 더 읽을거리&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://www.youtube.com/watch?v=yKQOunhhf4A&amp;amp;index=16&amp;amp;list=PLq2Nv-Sh8EbZEjZdPLaQt1qh_ohZFMDj8&#34; target=&#34;_blank&#34;&gt;Concurrency Made Easy&lt;/a&gt; (video)&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://dave.cheney.net/paste/concurrency-made-easy.pdf&#34; target=&#34;_blank&#34;&gt;Concurrency Made Easy&lt;/a&gt; (slides)&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://dave.cheney.net/practical-go/presentations/qcon-china.html#_never_start_a_goroutine_without_knowning_when_it_will_stop&#34; target=&#34;_blank&#34;&gt;Never start a goroutine without knowning when it will stop&lt;/a&gt; (Practical Go, QCon Shanghai 2018)&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;7-2-go는-일부-요청에-대해-효율적인-네트워크-폴링을-사용합니다&#34;&gt;7.2 Go는 일부 요청에 대해 효율적인 네트워크 폴링을 사용합니다.&lt;/h2&gt;

&lt;p&gt;Go 런타임은 효율적인 운영 체제 폴링 메커니즘 (kqueue, epoll, windows IOCP 등)을 사용하여 네트워크 IO를 처리합니다. 대기 중인 많은 고루틴은 단일 운영 체제 쓰레드로 서비스됩니다.&lt;/p&gt;

&lt;p&gt;그러나 로컬 파일 IO의 경우 Go는 IO 폴링을 구현하지 않습니다. &lt;code&gt;* os.File&lt;/code&gt;의 각 작업은 진행 중인 동안 운영 체제 쓰레드를 하나 사용합니다.&lt;/p&gt;

&lt;p&gt;로컬 파일 IO를 많이 사용하면 프로그램이 수백 또는 수천 개의 쓰레드를 생성할 수 있습니다. 운영 체제가 허용하는 것보다 더 많을 수도 있습니다.&lt;/p&gt;

&lt;p&gt;디스크 서브 시스템은 수백 또는 수천 개의 동시 IO 요청을 처리할 수 없을 것으로 예상됩니다.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;동시 차단 IO의 양을 제한하려면 작업자 고루틴 풀 또는 버퍼링된 채널을 세마포어로 사용하세요.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-golang&#34; data-lang=&#34;golang&#34;&gt;	&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;semaphore&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;make&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;chan&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{},&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	
	&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;processRequest&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;work&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Work&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;semaphore&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{}{}&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// acquire semaphore
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;		&lt;span class=&#34;c1&#34;&gt;// process request
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;		&lt;span class=&#34;o&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;semaphore&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// release semaphore
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&#34;7-3-애플리케이션에서-io-멀티-플라이어를-조심하세요&#34;&gt;7.3 애플리케이션에서 IO 멀티 플라이어를 조심하세요&lt;/h2&gt;

&lt;p&gt;서버 프로세스를 작성하는 경우 해당 서버의 주 작업은 네트워크를 통해 연결된 클라이언트와 애플리케이션에 저장된 데이터를 멀리플렉싱하는 것입니다.&lt;/p&gt;

&lt;p&gt;대부분의 서버 프로그램은 요청을 받고, 처리를 한 다음에, 결과를 반환합니다. 간단하게 들리지만 결과에 따라 클라이언트가 서버에서 많은 양의 리소소를 사용할 수 있습니다. 다음은 주의해야 할 몇 가지 사항입니다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;들어오는 요청당 IO 요청량, 즉 단일 클라이언트 요청이 얼마나 많은 IO 이벤트를 생성할까요? 캐시에서 많은 요청이 서비스되는 경우 평균적으로 1 또는 1 미만일 수 있습니다.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;쿼리를 처리하는 데 필요한 읽기량, 이는 고정적이며, N + 1 또는 선형입니다 (전체 테이블 읽어 마지막 결과 페이지를 생성).&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;메모리가 느리면, 상대적으로, IO가 너무 느리기 때문에 어떠한 비용도 들이지 않도록 해야합니다. 요청과 관련하여 IO를 수행하지 않는 것이 가장 중요합니다. 즉, 사용자가 디스크 서브 시스템이 디스크에 쓰기나 읽기 조차도 기다리게 하지 않도록 해야 합니다.&lt;/p&gt;

&lt;h2 id=&#34;7-4-스트리밍-io-인터페이스를-사용하세요&#34;&gt;7.4 스트리밍 IO 인터페이스를 사용하세요&lt;/h2&gt;

&lt;p&gt;가능하다면 &lt;code&gt;[]byte&lt;/code&gt;로 데이터를 읽고 전달하는 것을 피하세요.&lt;/p&gt;

&lt;p&gt;요청에 따라 메가 바이트 (또는 그 이상)의 데이터를 메모리로 읽을 수 있습니다. 이로 인해 GC에 큰 압박이 가해져 애플리케이션의 평균 레이턴시가 증가합니다.&lt;/p&gt;

&lt;p&gt;대신 &lt;code&gt;io.Reader&lt;/code&gt; 및 &lt;code&gt;io.Writer&lt;/code&gt;를 사용해서 프로세싱 파이프라인을 구성하고 요청당 사용 중인 메모리 양을 제한하세요.&lt;/p&gt;

&lt;p&gt;효율성을 높이기 위해, &lt;code&gt;io.Copy&lt;/code&gt;를 많이 사용하는 경우 &lt;code&gt;io.ReaderFrom&lt;/code&gt;/&lt;code&gt;io.WriterTo&lt;/code&gt;를 구현하는 것이 좋습니다. 이러한 인터페이스는 보다 효율적이며 메모리를 임시 버퍼에 복사하지 않습니다.&lt;/p&gt;

&lt;h2 id=&#34;7-5-타임아웃-타임아웃-타임아웃&#34;&gt;7.5 타임아웃, 타임아웃, 타임아웃&lt;/h2&gt;

&lt;p&gt;최대 소요 시간을 알지 못한 채로 IO를 시작해서는 안 됩니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;SetDeadline&lt;/code&gt;, &lt;code&gt;SetReadDeadline&lt;/code&gt;, &lt;code&gt;SetWriteDeadline&lt;/code&gt;을 사용하여 수행하는 모든 네트워크 요청에 대해 타임아웃을 설정해야 합니다.&lt;/p&gt;

&lt;h2 id=&#34;7-6-defer는-비쌉니다&#34;&gt;7.6 Defer는 비쌉니다.&lt;/h2&gt;

&lt;p&gt;&lt;code&gt;defer&lt;/code&gt;는 비용이 많이 듭니다. 왜냐하면 defer 인자에 대한 클로저(closure)를 기록해야 하기 때문입니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-golang&#34; data-lang=&#34;golang&#34;&gt;&lt;span class=&#34;k&#34;&gt;defer&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;mu&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Unlock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;는 아래와 동일합니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-golang&#34; data-lang=&#34;golang&#34;&gt;&lt;span class=&#34;k&#34;&gt;defer&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;nx&#34;&gt;mu&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Unlock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}()&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;수행되는 작업이 작으면 &lt;code&gt;defer&lt;/code&gt;는 비싸지만, 전형적인 예는 구조체 변수 또는 맵 조회 주위에 뮤텍스 잠금 해제를 defering하는 것입니다. 그러한 상황에서 &lt;code&gt;defer&lt;/code&gt;를 피하도록 선택할 수 있습니다.&lt;/p&gt;

&lt;p&gt;성능 향상을 위해 가독성과 유지 관리가 희생되는 경우입니다.&lt;/p&gt;

&lt;p&gt;이러한 결정을 항상 다시 방문하십시오.&lt;/p&gt;

&lt;h2 id=&#34;7-7-finaler를-피하세요&#34;&gt;7.7 Finaler를 피하세요&lt;/h2&gt;

&lt;p&gt;파이널리제이션(Finalization)는 가지비 콜렉션을 앞둔 객체를 동작(behaviour)를 부착하는 기술입니다.&lt;/p&gt;

&lt;p&gt;따라서, 파이널리제이션은 결정적이지 않습니다.&lt;/p&gt;

&lt;p&gt;파이널라이저를 실행하려면 어떤 것도 객체에 접근할 수 없어야 합니다. 맵에 있는 객체에 대한 참조를 실수로 보관하면 파이널리제이션이 수행되지 않습니다.&lt;/p&gt;

&lt;p&gt;파이널라이저는 gc 사이클의 일부로 실행되며, 이는 언제 실행할지 예측할 수 없으며 gc 작동을 줄인다는 목표에 상충합니다.&lt;/p&gt;

&lt;p&gt;힙이 크고, 가비지를 최소화하도록 애플리케이션을 조정한 경우,  파이널라이저가 오랫동안 실행되지 않을 수 있습니다.&lt;/p&gt;

&lt;h2 id=&#34;7-8-cgo를-최소화하세요&#34;&gt;7.8 cgo를 최소화하세요&lt;/h2&gt;

&lt;p&gt;cgo를 사용하면 Go 프로그램이 C 라이브러리를 호출할 수 있습니다.&lt;/p&gt;

&lt;p&gt;C 코드와 Go 코드는 서로 다른 두 우주에 살고 있으며, cgo는 두 우주 사이의 경계를 통과합니다.&lt;/p&gt;

&lt;p&gt;이 전환은 무료가 아니며 코드의 위치에 따라 비용이 많이 들 수 있습니다.&lt;/p&gt;

&lt;p&gt;cgo 호출은 IO 차단과 유사하며 작동 중에 쓰레드를 소비합니다.&lt;/p&gt;

&lt;p&gt;빡빡한 루프 중간에 C 코드를 호출하면 안됩니다.&lt;/p&gt;

&lt;h3 id=&#34;7-8-1-사실-cgo는-피하세요&#34;&gt;7.8.1 사실, cgo는 피하세요&lt;/h3&gt;

&lt;p&gt;cgo는 오버헤드가 높습니다.&lt;/p&gt;

&lt;p&gt;최상의 성능을 위해서는 애플리케이션에서 cgo를 피하는 것이 좋습니다.&lt;/p&gt;

&lt;p&gt;C코드에 시간이 오래 걸리면, cgo 오버헤드가 중요하지 않습니다.&lt;/p&gt;

&lt;p&gt;cgo를 사용해서 오버헤드가 가장 눈에 띄는 매우 짧은 C함수를 호출하는 경우, Go로 해당 코드를 다시 작성하세요. 원래 짧으니깐요.&lt;/p&gt;

&lt;p&gt;타이트한 루프(tight loop)내에 호출되는 비싼 C코드를 많이 사용하는 경우, 왜 Go를 사용하시나요?&lt;/p&gt;

&lt;p&gt;비싼 C코드를 자주 호출하기 위해, cgo를 사용하는 분이 있으신가요?&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;더 읽을 거리&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://dave.cheney.net/2016/01/18/cgo-is-not-go&#34; target=&#34;_blank&#34;&gt;cgo is not Go&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;7-9-항상-최신-릴리즈된-버전의-go를-사용하세요&#34;&gt;7.9 항상 최신 릴리즈된 버전의 Go를 사용하세요&lt;/h2&gt;

&lt;p&gt;이전 버전의 Go는 결코 나아지지 않을 것입니다. 버그 수정이나 최적화가 절대 이뤄지지 않을 겁니다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Go 1.4는 사용해서는 안 됩니다.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Go 1.5와 1.6은 컴파일러 속도가 느렸지만, 코드도 더 빠르고, GC는 더 빠릅니다.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Go 1.7은 1.6보다 컴파일 속도가 약 30% 향상 되었으며, 링크 속도가 2배 향상되었습니다 (이전 모든 버전의 Go보다 좋음)&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Go 1.8은 이 시점에서 컴파일 속도가 약간 향상되지만, 인텔 이외의 아키텍처에서는 코드 품질이 크게 향상됩니다.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Go 1.9-1.12는 지속적으로 생성된 코드의 성능을 개선하고, 버그를 수정하며, 인라인을 개선하고 디버깅을 개선합니다.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
&lt;p&gt;이전 버전의 Go에는 업데이트가 없습니다. 사용해서는 안됩니다. 최신버전을 사용하면 최상의 성능을 얻을 수 있습니다.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&#34;7-9-1-더-읽을거리&#34;&gt;7.9.1 더 읽을거리&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&#34;http://dave.cheney.net/2016/04/02/go-1-7-toolchain-improvements&#34; target=&#34;_blank&#34;&gt;Go 1.7 toolchain improvements&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;http://dave.cheney.net/2016/09/18/go-1-8-performance-improvements-one-month-in&#34; target=&#34;_blank&#34;&gt;Go 1.8 performance improvements&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;7-9-2-핫-필드를-구조체의-상단으로-이동&#34;&gt;7.9.2 핫 필드를 구조체의 상단으로 이동&lt;/h3&gt;

&lt;p&gt;(내용없음)&lt;/p&gt;

&lt;h2 id=&#34;7-10&#34;&gt;7.10&lt;/h2&gt;

&lt;p&gt;질문 있나요?&lt;/p&gt;

&lt;h1 id=&#34;마지막-질문과-결론&#34;&gt;마지막 질문과 결론&lt;/h1&gt;

&lt;blockquote&gt;
&lt;p&gt;읽기 쉽다는 것은 신뢰할 수 있다는 뜻입니다. — Rob Pike&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;가장 간단한 코드부터 시작하세요.&lt;/p&gt;

&lt;p&gt;측정하세요. 병목 현상을 확인하기 위해 코드를 프로파일링하세요.&lt;/p&gt;

&lt;p&gt;성능이 좋으면 멈추세요. 모든 것을 최적화할 필요는 없습니다. 코드에서 가장 중요한 부분만 다루세요.&lt;/p&gt;

&lt;p&gt;애플리케이션이 성장하거나 트래픽 패턴이 진화함에 따라 성능 핫 스팟이 변경될 것입니다.&lt;/p&gt;

&lt;p&gt;성능에 중요하지 않은 복잡한 코드를 그대로 두지 말고, 병목이 다른 곳으로 이동하면 더 간단한 동작으로 다시 작성하세요.&lt;/p&gt;

&lt;p&gt;항상 가장 간단한 코드를 작성하세요. 컴파일러는 일반코드에 맞게 최적화되어 있습니다.&lt;/p&gt;

&lt;p&gt;더 짧은 코드는 더 빠른 코드입니다. Go는 C++이 아닙니다. 컴파일러에서 복잡한 추상화를 풀 것으로 기대하지 마세요.&lt;/p&gt;

&lt;p&gt;더 짧은 코드는 더 작은 코드입니다. CPU 캐시에 중요합니다.&lt;/p&gt;

&lt;p&gt;할당에 매우 주의하세요. 가능한 경우 불필요한 할당을 피하세요.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;정확하지 않아도 된다면 전 아주 빠르게 만들 수 있습니다. — Russ Cox&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;성능과 신뢰성은 똑같이 중요합니다.&lt;/p&gt;

&lt;p&gt;저는 패닉, 교착 상태 또는 OOM의 기반 위에서 매우 빠른 서버를 만드는 것은 별로 가치가 없다고 봅니다.&lt;/p&gt;

&lt;p&gt;성능을 신뢰성과 바꾸지 마세요.&lt;/p&gt;
</content>
      
    </item>
    
    <item>
      <title>Cosmos란 무엇인가</title>
      <link>https://ziwon.github.io/post/cosmos-intro/</link>
      <pubDate>Thu, 07 Mar 2019 09:04:00 +0900</pubDate>
      <author>Aron Yoon</author>
      <guid>https://ziwon.github.io/post/cosmos-intro/</guid>
      <description></description>
      
      <content>

&lt;blockquote&gt;
&lt;p&gt;다음은 &lt;a href=&#34;https://cosmos.network/intro&#34; target=&#34;_blank&#34;&gt;What is Cosmos&lt;/a&gt;를 번역한 글입니다. 저작권은 코스모스에 있습니다.&lt;/p&gt;

&lt;p&gt;이전 문서의 한국어 번역은 다음과 같습니다.
- &lt;a href=&#34;https://blockinpress.com/archives/4919&#34; target=&#34;_blank&#34;&gt;코스모스의 가치에 대한 이해&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&#34;도입&#34;&gt;도입&lt;/h2&gt;

&lt;p&gt;엄밀히 말하면, Cosmos는 독립적인 병렬 블록 체인의 분산된 네트워크이며, 각각은 Tendermint 합의와 같은 BFT 합의 알고리즘을 기반으로 합니다.&lt;/p&gt;

&lt;p&gt;즉, 코스모스는 서로 확장 가능하고 상호 운용할 수 있는 블록체인 생태계입니다. Cosmos 이전에는 블록체인이 사일로화되어 서로 통신할 수 없었습니다. 구축하기 어려웠으며 초당 소량의 트랜잭션만 처리할 수 있었습니다. Cosmos는 새로운 기술적 비전으로 이러한 문제를 해결합니다. 이 비전을 이해하려면 블록체인 기술의 기본 원칙으로 돌아가야 합니다.&lt;/p&gt;

&lt;h2 id=&#34;블록체인이란&#34;&gt;블록체인이란?&lt;/h2&gt;

&lt;p&gt;블록체인은 일부 검증자(제3분의 1 미만)가 악의적인 경우에도 정확성을 유지하는 검증자 집합에 의해 유지되는 디지털 원장으로 설명할 수 있습니다. 각 당사자는 원장의 사본을 컴퓨터에 저장하고, 트랜잭션 블록을 수신할 때 프로토콜이 정한 규칙에 따라 갱신합니다. 블록체인 기술의 목표는 장부가 정확하게 복제되었는지 확인하는 것입니다. 즉, 각 정직한 당사자는 주어진 순간에 동일한 버전의 원장을 볼 수 있습니다.&lt;/p&gt;

&lt;p&gt;블록체인 기술의 주요 이점은 당사자들이 중앙 당국에 의존할 필요없이 원장을 공유할 수 있는 능력입니다. 블록체인은 분산되어 있습니다. 오늘날 블록체인 기술의 첫 번째 그리고 가장 유명한 적용은 분산 통화인 비트코인입니다.&lt;/p&gt;

&lt;p&gt;이제 높은 수준의 관점에서 블록체인이 무엇인지 더 잘 알게 되었으니, 보다 기술적인 면에서 블록체인의 정의를 살펴보겠습니다. 블록체인은 관리자의 3분의 1이 비잔틴 합의 안전을 유지하는 풀노드에서 복제되는 결정론적 상태 기계입니다. 하나씩 살펴보겠습니다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;상태 기계(state machine)는 상태를 유지하고 입력을 수신할 때 수정하는 프로그램의 화려한 단어일 뿐입니다. 애플리케이션에 따라 다른 것을 나타낼 수 있는 상태(예: 암호화에 대한 토큰 잔액)와 상태를 수정하는 트랜잭션(예: 한 계정에서 잔액을 뺀 후 다른 계정에 추가함으로써)이 있습니다.&lt;/li&gt;
&lt;li&gt;결정론적(Deterministic)이란 같은 최초 상태(genesis state)에서 같은 거래를 반복하면 항상 같은 결과 상태로 끝나는 것을 말합니다.&lt;/li&gt;
&lt;li&gt;합의 안전성(Consensus safety)은 상태 기계가 복제되는 모든 정직한 노드가 동일한 상태를 동시에 보아야 한다는 사실을 의미합니다. 노드들은 트랜잭션 블록을 수신할 때 유효성을 검증하는데, 이는 각 트랜잭션이 유효하고 블록 자체가 검증자(validator)라 불리는 관리자의 3분의 2 이상에서 검증되었다는 것을 의미합니다. 검증자의 3분의 1 미만이 비잔틴한 경우, 즉 악의적인 경우, 안전은 보장될 것입니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;상태 기계는 애플리케이션 계층과 동일합니다. 어플리케이션의 상태와 상태 전이 기능을 정의합니다. 다른 계층들은 네트워크에 접속하는 모든 노드에서 상태 기계를 복제하는 책임이 있다.&lt;/p&gt;

&lt;h2 id=&#34;코스모스는-어떻게-더-광범위한-블록체인-생태계에-적합할까&#34;&gt;코스모스는 어떻게 더 광범위한 블록체인 생태계에 적합할까?&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;비트코인 이야기 (BLOCKCHAIN 1.0)&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;center&gt;
&lt;img src=&#34;https://cosmos.network/images/intro/02-ecosystem-01.svg&#34;/&gt;
&lt;/center&gt;&lt;/p&gt;

&lt;p&gt;코스모스가 블록체인 생태계에 어떻게 들어맞는지 이해하기 위해서는 블록체인 이야기의 시작으로 돌아가야 합니다. 첫 번째 블록체인은 비트코인(Bitcoin)으로, 2008년에 만들어진 P2P 디지털 통화로, PoW(Proof-Work)라고 알려진 새로운 합의 메커니즘을 사용했습니다. 이는 블록체인에 대한 최초의 분산형 애플리케이션이었습니다. 곧 사람들은 분산 애플리케이션의 잠재력을 깨닫기 시작했고 커뮤니티에서는 새로운 애플리케이션을 만들고자 하는 욕구가 있었습니다.&lt;/p&gt;

&lt;p&gt;당시에는 두 가지 분산형 애플리케이션을 개발할 수 있는 옵션이 있었습니다. 비트코인 코드베이스를 포킹하거나 그 위에 빌드하는 것이었죠. 그러나 비트코인 코드베이스는 매우 모놀리식으로 되어 있어 네트워크, 합의, 애플리케이션 등 세 개의 계층가 모두 함께 섞여 있었습니다. 또한 비트코인 스크립팅 언어는 제한적이고 사용자 친화적이지 않았습니다. 더 나은 도구가 필요했죠.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;이더리움 이야기 (BLOCKCHAIN 2.0)&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;center&gt;
&lt;img src=&#34;https://cosmos.network/images/intro/02-ecosystem-02.svg&#34;/&gt;
&lt;/center&gt;&lt;/p&gt;

&lt;p&gt;2014년에 이더리움(Ethereum)은 분산형 애플리케이션을 구축하기 위한 새로운 제안을 했습니다. 사람들이 어떤 종류의 프로그램이든 배치할 수 있는 단일 블록체인이 있을 것입니다. 이더리움은 애플리케이션 계층를 Ethereum Virtual Machine(EVM)이라는 가상 머신으로 전환함으로써 이를 달성했습니다. 이 가상 머신은 개발자가 허가없이 이더리움 블록체인에 배포할 수 있는 스마트 컨트랙트라는 프로그램을 처리할 수 있었습니다. 이 새로운 접근 방식으로 인해 수천 명의 개발자들이 분산형 애플리케이션(dApp)을 만들 수 있었습니다. 그러나, 이러한 접근법에 대한 제약은 이내 분명해졌고 현재까지도 여전합니다.&lt;/p&gt;

&lt;p&gt;첫 번째 제약: 확장성 (Scalability)
첫 번째 제약은 확장성입니다. 즉, 이더리움 위에 구축된 분산 애플리케이션은 초당 15건의 트랜잭션으로 제한됩니다. 이는 이더리움이 여전히 Proof-Of-Work를 사용하고 있으며 이더리움 dApps이 단일 블록체인의 제한된 자원을 놓고 경쟁하고 있기 때문입니다.&lt;/p&gt;

&lt;p&gt;두 번째 제약: 사용성 (Usability)
두 번째 제한은 개발자들에게 주어지는 상대적으로 낮은 유연성입니다. EVM은 모든 유즈케이스를 수용해야 하는 샌드박스이기 때문에, 평균 유즈케이스를 최적화합니다. 즉, 개발자는 애플리케이션의 설계와 효율성에 타협해야 합니다(예를 들어, UTXO 모델이 선호될 수 있는 결제 플랫폼에서 어카운트 모델을 사용해야 하는 경우). 그 무엇보다도 몇 개의 프로그래밍 언어에 제한되어 있으며, 코드의 자동 실행을 구현할 수 없습니다.&lt;/p&gt;

&lt;p&gt;세 번째 제약: 주권 (Sovereignty)
세 번째 제한은 각 애플리케이션이 모두 동일한 기본 환경을 공유하기 때문에 주권이 제한된다는 것입니다. 기본적으로, 이것은 두 가지 관리 계층, 즉 애플리케이션의 계층과 하부 환경의 계층을 만듭니다. 전자는 후자에 의해 제한됩니다. 애플리케이션에 버그가 있는 경우, 이더리움 플랫폼 자체의 관리가 승인되지 않으면 아무것도 할 수 없습니다. 애플리케이션이 EVM의 새로운 기능이 필요한 애플리케이션의 경우, 이더리움 플랫폼의 통제에 전적으로 의존해야 합니다.&lt;/p&gt;

&lt;p&gt;이러한 제한은 이더리움에만 국한되지 않고 모든 유즈케이스에 맞추려는 단일 플랫폼을 만드는 모든 블록체인에 적용됩니다. 이 점이 코스모스가 중요해지는 부분입니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;코스모스의 비전 (BLOCKCHAIN 3.0)&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;center&gt;
&lt;img src=&#34;https://cosmos.network/images/intro/02-ecosystem-03.svg&#34;/&gt;
&lt;/center&gt;&lt;/p&gt;

&lt;p&gt;코스모스의 비전은 개발자들이 서로 트래잭션하게 함으로써 블록체인을 쉽게 만들고 블록체인 사이의 장벽을 깨도록 하는 것입니다. 최종 목표는 분권화된 방식으로 서로 소통할 수 있는 블록체인 네트워크인 블록체인 인터넷을 만드는 것입니다. 코스모스를 이용하면 블록체인이 주권을 유지하고 거래를 신속하게 처리하며 생태계의 다른 블록체인과 통신하여 다양한 유즈케이스에 최적으로 사용할 수 있습니다.&lt;/p&gt;

&lt;p&gt;이 비전은 Tendermint, Cosmos SDK 및 IBC와 같은 오픈 소스 도구 세트를 통해 달성되며, 사람들이 사용자 정의, 보안, 확장성 및 상호운용 가능한 블록체인 애플리케이션을 신속하게 구축할 수 있도록 합니다. 코스모스 네트워크의 기술 아키텍처뿐만 아니라 생태계에서 가장 중요한 도구 몇 가지를 자세히 살펴보겠습니다. 코스모스는 원래 Tendermint 팀이 구축한 오픈소스 커뮤니티 프로젝트라는 점입니다. 누구나 더욱 크고 풍요로운 개발자 생태계를 위해 추가적인 도구를 만들 수 있습니다.&lt;/p&gt;

&lt;h2 id=&#34;tendermint-core와-abci란&#34;&gt;Tendermint Core와 ABCI란?&lt;/h2&gt;

&lt;p&gt;최근까지 블록체인을 구축하려면 3가지 계층(네트워킹, 합의, 애플리케이션)을 모두 처음부터 구축해야 했습니다. 이더리움은 누구나 스마트 컨트랙트 형태로 커스터마이징 로직을 배포할 수 있는 가상 머신 블록체인을 제공함으로써 분산형 애플리케이션의 개발을 간소화했습니다. 그러나 블록체인 자체 개발을 단순화하는 것은 아니었습니다. 비트코인과 마찬가지로 Go-Ethereum도 포킹과 커스터마이징이 어려운 모놀리식 기술 스택으로 남아 있습니다. 이 점이 바로 2014년 Jae Kwon이 Tendermint를 만든 이유입니다.&lt;/p&gt;

&lt;p&gt;&lt;center&gt;
&lt;img src=&#34;https://cosmos.network/images/intro/03-tendermint.svg&#34;/&gt;
&lt;/center&gt;&lt;/p&gt;

&lt;p&gt;Tendermint Core는 블록체인의 네트워킹과 합의 계층을 일반적인 엔진으로 패키징하여 개발자들이 복잡한 기본 프로토콜이 아닌, 애플리케이션 개발에 집중할 수 있도록 하는 솔루션입니다. 결과적으로 Tendermint는 수백시간의 개발 시간을 절약합니다. Tendermint는 또한 Tendermint Core 엔진 내에서 사용되는 &lt;a href=&#34;https://github.com/tendermint/tendermint/wiki/Byzantine-Consensus-Algorithm&#34; target=&#34;_blank&#34;&gt;비잔틴 결험 허용(BFT)&lt;/a&gt; 합의 알고리즘을 지정할 수 있습니다. 합의 프로토콜과 BFT의 역사에 대한 자세한 내용은 Tendermint 공동창업자 Ethan Buchman의 멋진 &lt;a href=&#34;https://softwareengineeringdaily.com/2018/03/26/consensus-systems-with-ethan-buchman/&#34; target=&#34;_blank&#34;&gt;팟캐스트&lt;/a&gt;를 확인해보세요.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://github.com/tendermint/tendermint&#34; target=&#34;_blank&#34;&gt;Tendermint Core 엔진&lt;/a&gt;은 &lt;a href=&#34;https://github.com/tendermint/abci&#34; target=&#34;_blank&#34;&gt;ABCI(Application Blockchain Interface)&lt;/a&gt;라는 소켓 프로토콜에 의해 애플리케이션에 연결됩니다. 이 프로토콜은 어떤 프로그래밍 언어로도 래핑할 수 있으며, 개발자들은 자신의 필요에 맞는 언어를 선택할 수 있습니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;그러나 이게 끝이 아닙니다.&lt;/strong&gt; 다음은 Tendermint Core를 최첨단 블록체인 엔진으로 만드는 속성입니다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;퍼블릭 또는 프라이빗 블록체인 준비&lt;/strong&gt;: Tendermint Core는 블록체인에 대한 네트워킹과 합의만 처리합니다. 즉, 이는 노드들이 트랜잭션을 전파하고 검증자들이 블록체인에 추가하기 위한 일련의 트랜잭션에 합의하도록 돕는다는 것을 의미합니다. 검증자 집합이 구성되는 방법을 정의하는 것은 애플리케이션 계층의 역할입니다. 따라서 개발자들은 Tendermint Core 위에 퍼블릭 및 프라이빗 블록체인을 모두 구축할 수 있습니다. 애플리케이션에서 지분에 의한 토큰수를 기반으로 유효성 검증자(validator)를 선출한다고 정의한 경우, 블록체인은 PoS(Proof-of-Stake)로 특화될 수 있습니다. 그러나 애플리케이션에서 사전 승인된 엔티티의 제한된 집합만 검증자가 될 수 있다고 정의하는 경우, 블록체인은 퍼미션드(permissioned) 또는 프라이빗으로 특화될 수 있습니다. 개발자들은 블록체인의 검증자 집합이 어떻게 변화하는지 정의하는 규칙을 커스터마이징할 수 있습니다.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;고성능&lt;/strong&gt;: Tendermint Core는 1초 단위로 블록타임을 가질 수 있으며 초당 최대 수천 건의 트랜잭션을 처리할 수 있습니다.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;인스턴트 파이널리티(Instant finality)&lt;/strong&gt;: Tendermint 합의 알고리즘의 속성은 인스턴트 파이널리티입니다. 이는 검증자의 3분의 1 이상이 정직한 이상(비잔틴한 경우), 포크는 결코 만들어지지 않는다는 것을 의미합니다. 사용자는 블록이 생성되는 즉시, 거래가 완료되었는지 확인할 수 있습니다 (비트코인 및 이더리움과 같은 PoW 블록체인의 경우 그렇지 않습니다).&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;보안&lt;/strong&gt;: Tendermint 합의는 내결함성 뿐만 아니라 책임을 지도록 합니다. 만약 블록체인이 포크된다면, 법적 책임을 결정할 수 있는 방법이 있습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;cosmos-sdk와-다른-애플리케이션-계층-프레임워크&#34;&gt;Cosmos SDK와 다른 애플리케이션 계층 프레임워크&lt;/h2&gt;

&lt;p&gt;&lt;center&gt;
&lt;img src=&#34;https://cosmos.network/images/intro/04-sdk.svg&#34;&gt;
&lt;/center&gt;&lt;/p&gt;

&lt;p&gt;Tendermint Core는 블록체인의 개발 시간을 몇 년에서 몇 주 단위로 단축하지만, 처음부터 안전한 ABCI-app을 구축하는 것은 여전히 어려운 작업입니다. 이것이 Cosmos SDK가 존재하는 이유입니다.&lt;/p&gt;

&lt;p&gt;Cosmos SDK는 Tendermint Core 위에 안전한 블록체인 애플리케이션을 구축하는 과정을 단순화하는 일반화된 프레임워크입니다. 이는은 다음의 두 가지 주요 원칙에 기초합니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;모듈성&lt;/strong&gt;: Cosmos SDK의 목표는 개발자들이 애플리케이션의 각 기능을 처음부터 코딩하지 않고도, 애플리케이션별 블록체인을 쉽게 시작할 수 있는 모듈의 생태계를 만드는 것입니다. 누구나 Cosmos SDK 모듈을 만들 수 있으며 블록체인에 준비된 모듈을 사용하는 것은 어플리케이션으로 임포트하는 것만큼이나 간단합니다. 예를 들어, Tendermint 팀은 Cosmos 허브를 위해 필요한 &lt;a href=&#34;https://github.com/cosmos/cosmos-sdk/tree/develop/x&#34; target=&#34;_blank&#34;&gt;기본적인 모듈 세트&lt;/a&gt;를 만들고 있습니다. 이 모듈들은 자체 애플리케이션을 구축할 때 개발자가 사용할 수 있습니다. 또한 개발자는 새로운 모듈을 만들어 애플리케이션을 커스터마이징할 수 있습니다. Cosmos 네트워크가 발전함에 따라 SDK 모듈의 생태계가 확대되어 복잡한 블록체인 애플리케이션의 개발이 점점 쉬워질 것입니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;커패빌리티 기반 보안성 (Capabilities-based security)&lt;/strong&gt;: 커패빌리티는 모듈 간의 보안 경계를 제한하므로 개발자가 모듈의 가능한 구성에 대해 더 많이 추론하고 악의적이거나 예기치 못한 상호작용의 범위를 제한할 수 있습니다. 커패빌리티에 대한 자세히 내용은 여기를 &lt;a href=&#34;https://cosmos.network/docs/intro/ocap.html&#34; target=&#34;_blank&#34;&gt;클릭&lt;/a&gt;하세요.&lt;/p&gt;

&lt;p&gt;또한 Cosmos SDK에는 CLI, REST 서버 및 기타 일반적으로 사용되는 다양한 유틸리티 라이브러리를 구축하기 위한 유용한 도구가 함께 제공됩니다.&lt;/p&gt;

&lt;p&gt;마지막 한 마디: Cosmos SDK는 모든 Cosmos 도구와 마찬가지로 모듈식으로 설계되었습니다. 현재, 개발자는 Tendermint Core 위에 에 구축할 수 있습니다. 또한 ABCI를 구현한 다른 컨센서스 엔진과 함께 사용할 수 있습니다. 우리는 시간이 지날수록, 서로 다른 아키텍처 모델로 구축되고 여러 개의 합의 엔진과 호환 가능한 여러 개의 SDK가 단일 생태계인 코스모스 네트워크 내에 등장할 것으로 기대합니다.&lt;/p&gt;

&lt;p&gt;SDK 위에서 애플리케이션을 코딩하는 방법을 배우려면 &lt;a href=&#34;https://cosmos.network/docs/tutorial&#34; target=&#34;_blank&#34;&gt;이 튜토리얼&lt;/a&gt;을 확인하시면 됩니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ETHERMINT&lt;/strong&gt;
Cosmos SDK의 가장 큰 장점은 모듈화를 통해 개발자가 이미 Golang에 있는 기존의 블록체인 코드베이스를 이식할 수 있다는 것입니다. 예를 들어, Ethermint는 이더리움 가상 머신을 SDK 모듈에 포팅하는 프로젝트입니다. Ethermint는 Ethereum과 똑같이 작용하지만 또한 Tendermint Core의 모든 특성을 활용할 수도 있습니다. 기존의 모든 이더리움 도구(Truffle, Metamask 등)는 Ethermint와 호환되며 추가작업 없이 스마트 컨트랙트를 체결할 수 있습니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;가상 머신 블록체인 위에 분산된 애플리케이션을 배포할 수 있는데 왜 굳이 Cosmos SDK로 블록체인을 만드나요?&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;이 질문은 현재 대부분의 분산형 애플리케이션이 Ethereum과 같은 가상 머신 블록체인 위에 개발되었다는 점을 고려하면 당연합니다. 첫째, 이러한 현상의 원인은 지금까지 블록체인이 스마트 컨트랙트보다 훨씬 더 개발하기 어려웠다는 점입니다. Cosmos SDK 덕분에 이제는 그렇지 않습니다. 이제 개발자는 여러 가지 장점을 지는 애플리케이션별 블록체인을 쉽게 개발할 수 있습니다. 무엇보다도 유연성, 보안, 성능과 소버린티가 주어집니다. 애플리케이션별 블록 체인에 대한 자세한 내용은 이 &lt;a href=&#34;https://medium.com/@gautier_md/why-application-specific-blockchains-make-sense-32f2073bfb37&#34; target=&#34;_blank&#34;&gt;포스트&lt;/a&gt;를 참조하세요. 물론, 독자적인 블록체인을 구축하고 싶지 않은 경우, 스마트 계약을 Cosmos와 호환되게 &lt;a href=&#34;https://ethermint.zone/&#34; target=&#34;_blank&#34;&gt;Ethermint&lt;/a&gt;에 배포할 수 있습니다.&lt;/p&gt;

&lt;h2 id=&#34;블록체인-함께-연결하기-ibc&#34;&gt;블록체인 함께 연결하기 - IBC&lt;/h2&gt;

&lt;p&gt;개발자가 커스터마이징 블록체인을 신속하게 구축할 수 있게 되었으니, 이 블록체인들을 어떻게 연결하는지 살펴 보겠습니다. 블록체인 사이의 연결은 IBC(Inter-Blockchain Communication Protocol)라는 프로토콜을 통해 이루어집니다. IBC는 Tendermint 합의의 인스턴트 파이널리티(&amp;ldquo;빠른 파이널리티&amp;rdquo; 블록체인 엔진과 함께 작동할 수 있지만)을 활용하여 이기종 체인이 서로 가치(예: 토큰) 또는 데이터를 전송할 수 있게 합니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;이기종 체인(HETEROGENEO CHAINS)이란?&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;본질적으로 다음과 같이 두 가지로 분류합니다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;서로 다른 계층 (Different layers)&lt;/strong&gt;: 이기종 체인은 서로 다른 계층를 가집니다. 즉, 네트워킹, 합의 및 애플리케이션 파트를 구현하는 방법이 다를 수 있습니다. IBC와 호환되기 위해서, 블록체인은 몇 가지 요구 사항을 따르는 것만으로도 충분합니다. 주요 요구 사항은 합의 계층이 빠른 파이널리티를 가져야 한다는 것입니다. 비트코인과 이더리움과 같은 작업 증명 체인은 확률론적인 파이널리티를 가지고 있기 때문에 이 범주에 속하지 않습니다.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;strong&gt;주권 (Sovereignty)&lt;/strong&gt;: 모든 블록체인은 블록체인에 대한 다음 블록을 합의하는 일련의 검증자에 의해 유지됩니다. Proof-of-Work 블록체인에서는 이러한 검증자를 채굴자(마이너)라고 부릅니다. 소버린티 블록체인은 자체 검증자 세트를 지닌 블록체인입니다. 대부분의 경우에 검증자들이 궁극적으로 상태를 수정해야 하는 책임이 있기 때문에 블록체인이 주권을 가지는 것이 중요합니다. 이더리움에서 애플리케이션은 모두 동일한 검증자 집합에 의해 실행됩니다. 이 때문에 각각의 애플리케이션은 제한된 소버린만을 가지고 있습니다.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;IBC를 사용하면 이기종 블록체인이 토큰과 데이터이 서로 전송할 수 있습니다. 이는 애플리케이션과 검증자 집합이 서로 다른 블록체인이 상호 운용될 수 있음을 의미합니다. 예를 들어, 퍼블릭 블록체인과 프라이빗 블록체인이 서로 토큰을 전송할 수 있습니다. 현재 다른 블록체인 프레임워크는 이 정도의 상호 운용성을 지원하지 않습니다.&lt;/p&gt;

&lt;h3 id=&#34;ibc-동작방식&#34;&gt;IBC 동작방식&lt;/h3&gt;

&lt;p&gt;IBC의 원칙은 매우 간단합니다. 체인 A의 계정이 10개의 토큰을 체인 B에 보내고 싶은 경우를 예로 들어보겠습니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;추적&lt;/strong&gt;
이이서, 체인 B는 체인 A의 헤더를 받고, 그 반대의 경우도 있습니다. 이는 각 체인이 다른 체인의 검증자 세트를 추적할 수 있게 합니다. 본질적으로 각 체인은 다른 체인의 라이트 클라이언트를 실행합니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;본딩&lt;/strong&gt;
IBC 전송이 시작되면 아톰(코인)은 체인 A에 잠겨(본딩) 있습니다.&lt;/p&gt;

&lt;p&gt;&lt;center&gt;
&lt;img src=&#34;https://cosmos.network/images/intro/05-ibc-01.svg&#34;/&gt;
&lt;/center&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;증거 릴레이&lt;/strong&gt;
그런 다음 10개의 아톰이 잠겨있다는 증거가 체인 A에서 체인 B로 전달됩니다.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://cosmos.network/images/intro/05-ibc-02.svg&#34; target=&#34;_blank&#34;&gt;https://cosmos.network/images/intro/05-ibc-02.svg&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;검증&lt;/strong&gt;
증명은 체인 B에서 체인 A의 헤더에 대해 검증되고, 유효하다면 체인 B에 10개의 아톰 바우처가 생성됩니다.&lt;/p&gt;

&lt;p&gt;&lt;center&gt;
&lt;img src=&#34;https://cosmos.network/images/intro/05-ibc-04.svg&#34;/&gt;
&lt;/center&gt;&lt;/p&gt;

&lt;p&gt;아톰은 오직 체인 A에만 존재하기 때문에 체인 B에서 생성된 아톰은 실제 아톰이 아닙니다. 이 아톰들이 체인 A에서 동결되었다는 증거와 함께 체인 A에서 나온 아톰의 B에 대한 표시입니다.&lt;/p&gt;

&lt;p&gt;유사한 메커니즘은 원래 체인으로 돌아올 때 아톰을 잠금 해제하는 데 사용됩니다. IBC 프로토콜에 대한 보다 포괄적인 설명을 위해, 이 &lt;a href=&#34;https://github.com/cosmos/cosmos-sdk/tree/master/docs/spec/ibc&#34; target=&#34;_blank&#34;&gt;스펙&lt;/a&gt;을 참조할 수 있습니다.&lt;/p&gt;

&lt;h2 id=&#34;블록체인-인터넷의-설계&#34;&gt;블록체인 인터넷의 설계&lt;/h2&gt;

&lt;p&gt;&lt;center&gt;
&lt;img src=&#34;https://cosmos.network/images/intro/06-architecture.svg&#34;/&gt;
&lt;/center&gt;&lt;/p&gt;

&lt;p&gt;IBC는 2개의 이기종 블록체인이 서로 토큰을 전송할 수 있도록 하는 프로토콜입니다. 거기에서 블록체인 네트워크를 만드는 방법은 무엇일까요?&lt;/p&gt;

&lt;p&gt;하나의 아이디어는 직접 IBC 연결을 통해 네트워크의 각 블록체인을 다른 모든 블록체인에 연결하는 것입니다. 이 접근법의 주된 문제점은은 네트워크 연결의 수가 블록체인의 수와 함께 2차적으로 증가한다는 것입니다. 네트워크에 100개의 블록체인이 있고 각 블록체인이 서로 다른 IBC 연결을 유지할 필요가 있는 경우, 그것은 4950개를 연결하게 됩니다. 이는 금방 감당할 수 없게 됩니다.&lt;/p&gt;

&lt;p&gt;이를 해결하기 위해 Cosmos는 Hub와 Zone이라는 두 종류의 블록체인을 가진 모듈형 구조를 제안합니다. Zone은 보통의 이질적인 블록체인이고 Hub는 Zone을 서로 연결하기 위해 특별히 고안된 블록체인입니다. Zone이 Hub와 IBC 연결을 생성하면, Zone은 연결된 다른  Zone에 자동으로 접근(즉, 송수신)할 수 있습니다. 결과적으로, 각 Zone은 제한된 Hub 세트와 제한된 수의 연결만 설정하면 됩니다. Hub는 또한 Zone의 이중 지출을 방지합니다. 즉, Zone이 Hub로부터 토큰을 수신하면, 이 토큰과 Hub의 원래 Zone만 신뢰하면 됩니다.&lt;/p&gt;

&lt;p&gt;Cosmos 네트워크에서 출시할 첫 번째 Hub는 Cosmos Hub가 될 것입니다. Cosmos Hub는 아톰이라고 불리며, 거래 수수료가 여러 토큰으로 지불되는 퍼블릭 스테이크 블록체입니다. &lt;a href=&#34;https://cosmos.network/launch&#34; target=&#34;_blank&#34;&gt;Hub의 출시&lt;/a&gt;는 Cosmos 네트워크의 출시를 보여줄 것입니다.&lt;/p&gt;

&lt;h2 id=&#34;비-tendermint-체인-브리징&#34;&gt;비-Tendermint 체인 브리징&lt;/h2&gt;

&lt;p&gt;&lt;center&gt;
&lt;img src=&#34;https://cosmos.network/images/intro/07-peg.svg&#34;/&gt;
&lt;/center&gt;&lt;/p&gt;

&lt;p&gt;지금까지 우리가 제시한 Cosmos의 아키텍처는 Tendermint 기반의 체인이 어떻게 상호 운용될 수 있는지를 보여줍니다. 그러나 Cosmos는 Tendermint 체인에 국한되지 않습니다. 사실, 어떤 종류의 블록체인도 코스모스와 연결될 수 있습니다.&lt;/p&gt;

&lt;p&gt;우리는 구별해야할 빠른 파이널리티 체인과 확률론적 파이널리티 체인 두 가지 사례가 있습니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;빠른 파이널리티 체인&lt;/strong&gt;
어떤 고속의 합의 알고리즘을 이용하는 블록은 &lt;a href=&#34;https://cosmos.network/intro#connecting-blockchains-together-ibc&#34; target=&#34;_blank&#34;&gt;IBC&lt;/a&gt;를 적응시킴으로써 코스모스와 연결될 수 있다. 예를 들어 이더리움이 Casper FFG(Friendly Finality Gadget)로 전환한다면 IBC를 Casper와 함께 사용하여 Cosmos 생태계와 직접 연결될 수 있습니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;확률론적 파이널리티 체인&lt;/strong&gt;
Proof-of-Work 체인과 같이 빠른 파이널리티를 갖지 않는 블록체인의 경우 상황이 좀 더 까다로워집니다. 이 체인의 경우, &lt;a href=&#34;https://blog.cosmos.network/the-internet-of-blockchains-how-cosmos-does-interoperability-starting-with-the-ethereum-peg-zone-8744d4d2bc3f&#34; target=&#34;_blank&#34;&gt;페그존(Peg-Zone) 프록시 체인&lt;/a&gt;이라고 불리는 특별한 종류의 체인을 사용합니다.&lt;/p&gt;

&lt;p&gt;페그존은 다른 블록체인의 상태를 추적하는 블록체인입니다. 페그존 자체는 빠른 파이널리티를 가지고 있어 IBC와 호환이 됩니다. 그 역할은 브릿지에 대한 파이널리티를 확립하는 것입니다. 다음 예제를 살펴보겠습니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;예제: 이더리움 페그존&lt;/strong&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;우리는 Ethereum과 Cosmos 간에 토큰을 주고 받을 수 있도록  PoW 이더리움 블록체인을 연결하려고 합니다. PoW 이더리움은 빠른 파이널리티를 가지고 있지 않기 때문에, 둘 사이의 다리 역할을 할 페그존을 만들어야 합니다.&lt;/p&gt;

&lt;p&gt;첫째, 페그존은 원점 체인의 최종 임계값을 결정해야 합니다. 예를 들어, 원점 체인의 주어진 블록이 100개의 블록이 추가된 후,발신지 체인의 최종 블록이라고 간주할 수 있습니다.&lt;/p&gt;

&lt;p&gt;둘째, 메인 이더리움 블록체인에 컨트랙트가 배포됩니다. 사용자들은 이더리움에서 Cosmos로 토큰을 보내고 싶을 때, 이 컨트랙트에 토큰을 보내는 것으로 시작합니다. 그 후, 컨트랙트가 자산을 동결하고 100블록 후에, 이러한 자산의 표시가 Peg-Zone에서 해제됩니다. 유사한 메커니즘은 자산을 이더리움 체인으로 다시 전송하는데 사용됩니다.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;흥미롭게도, 페그존은 Cosmos에 사는 토큰을 이더리움 체인(Cosmos 토큰은 이더리움 체인에서 ERC20으로 표시됨)으로 보낼 수 있습니다. Tendermint 팀은 현재 &lt;a href=&#34;https://github.com/cosmos/peggy&#34; target=&#34;_blank&#34;&gt;Peggy&lt;/a&gt;라고 하는 이더리움 체인을 위한 페그존 구현을 위해 노력하고 있습니다.&lt;/p&gt;

&lt;p&gt;페그존은 그들이 연결하는 특정 체인에 맞게 커스터마이징될 필요가 있습니다. 이더리움 페그존을 구축하는 것은 비교적 간단합니다. 왜냐하면 이더리움은 어카운트 기반으로 하고 스마트 컨트랙트를 맺기 때문입니다. 하지만 비트코인 페그존을 만드는 것은 좀 더 어려운 일이다. 비트코인 같은 페그존을 만드는 방법을 설명하는 것은 이 소개에서 범위를 벗어나지만, 이론적으로 가능하다는 것을 기억하세요. 만약 페그존에 대해 더 알고 싶다면 이 &lt;a href=&#34;https://github.com/cosmos/peggy/tree/master/spec&#34; target=&#34;_blank&#34;&gt;스펙&lt;/a&gt;을 살펴보시길 바랍니다.&lt;/p&gt;

&lt;h2 id=&#34;확장성-해결하기&#34;&gt;확장성 해결하기&lt;/h2&gt;

&lt;p&gt;&lt;center&gt;
&lt;img src=&#34;https://cosmos.network/images/intro/08-scalability.svg&#34;/&gt;
&lt;/center&gt;&lt;/p&gt;

&lt;p&gt;블록체인을 쉽게 만들고 연결할 수 있게 되면, 마지막으로 해결해야 할 문제는 바로 확장성입니다. Cosmos는 두 가지 유형의 확장성을 활용합니다.&lt;/p&gt;

&lt;p&gt;수직 확장성: 이는 블록체인 자체를 확장하는 방법을 포함합니다. PoW에서 벗어나 컴포넌트를 최적화함으로써 Tendermint Core는 초당 수천 건의 거래에 도달할 수 있습니다. 병목 현상요소는 애플리케이션 자체입니다. 예를 들어, 가상 머신과 같은 애플리케이션(예: Ethereum Virtual Machine)은 트랜잭션 유형과 상태 전이 기능이 직접 내장된 애플리케이션(예: 표준 Cosmos SDK 애플리케이션)보다 트랜잭션 처리량에 훨씬 더 낮은 한계를 부과합니다. 이것이 애플리케이션별 블록체인이 이치에 맞는 이유 중 하나입니다(더 많은 이유에 대해서는 &lt;a href=&#34;https://medium.com/@gautier_md/why-application-specific-blockchains-make-sense-32f2073bfb37&#34; target=&#34;_blank&#34;&gt;여기&lt;/a&gt;를 읽어보세요).&lt;/p&gt;

&lt;p&gt;수평 확장성: 합의 엔진과 애플리케이션이 고도로 최적화된 경우라도, 어느 시점에서는 단일 체인의 거래 처리량이 불가피하게 넘을 수 없는 벽에 부딪칩니다. 수직 스케일링의 한계입니다. 이를 뛰어 넘는 해결책은 다중 체인 아키텍처로 이동하는 것입니다. 이 아이디어는 동일한 애플리케이션을 실행하고 공통 검증자 세트에 의해 작동되는 다중 병렬체인을 갖추어 이론적으로 블록체인을 무한히 확장 가능한 블록체인을 만듭니다. 수평적 확장성에 대한 세부사항은 이 소개에서 상당히 복잡하고 범위를 벗어납니다.&lt;/p&gt;

&lt;p&gt;Cosmos는 릴리즈 시점에 매우 우수한 수직 확장성을 제공할 것이며, 현재의 블록체인 솔루션보다 크게 개선될 것입니다. 나중에 IBC 모듈의 완성 후, 수평적 확장성 솔루션이 구현될 것입니다.&lt;/p&gt;

&lt;p&gt;그래서 결국 Cosmos는 무언인가요?&lt;/p&gt;

&lt;p&gt;&lt;center&gt;
&lt;img src=&#34;https://cosmos.network/images/intro/09-cosmos.svg&#34;/&gt;
&lt;/center&gt;&lt;/p&gt;

&lt;p&gt;이제 Cosmos 프로젝트에 대해 더 선명한 그림을 얻을 수 있기를 바랍니다. 코스모스의 세 가지 점에 대해 간략히 정리하면 다음과 같습니다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Cosmos는 Tendermint Core와 Cosmos SDK의 모듈화로 블록체인을 강력하고 쉽게 개발할 수 있습니다.&lt;/li&gt;
&lt;li&gt;Cosmos는 블록체인이 IBC와 페그존을 통해 서로 가치를 이전하는 동시에 자주권을 유지하도록 합니다.&lt;/li&gt;
&lt;li&gt;Cosmos는 블록체인 애플리케이션이 수평 및 수직 확장성 솔루션을 통해 수백만 명의 사용자로 확장될 수 있도록 합니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;무엇보다 Cosmos는 제품이 아니라 모듈식, 적응식, 상호교환이 가능한 도구들로 구성된 생태계입니다. 개발자 여러분들이 블록체인 기술에 대한 약속을 실현하기 위해 기존의 도구를 개선하고 새로운 도구를 만드는 노력에 동참하실 것을 권장합니다. 이러한 도구들은 분산된 인터넷과 미래의 글로벌 금융 시스템을 구축하는데 필요한 기반입니다.&lt;/p&gt;

&lt;h3 id=&#34;더-읽어보기&#34;&gt;더 읽어보기&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://cosmos.network/whitepaper&#34; target=&#34;_blank&#34;&gt;Cosmos 백서 (영문)&lt;/a&gt;, &lt;a href=&#34;https://docs.google.com/document/d/1b-oPY0SkgJCu_z818-P2j2me3B_ZNpggYAen7LHNxQ8&#34; target=&#34;_blank&#34;&gt;Cosmos 백서 (한글 번역)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://cosmos.network/developers&#34; target=&#34;_blank&#34;&gt;Cosmos 개발 시작하기&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
      
    </item>
    
    <item>
      <title>TGI Kubernetes 007: Controller 만들기</title>
      <link>https://ziwon.github.io/post/tgik-007/</link>
      <pubDate>Sun, 03 Mar 2019 13:25:00 +0900</pubDate>
      <author>Aron Yoon</author>
      <guid>https://ziwon.github.io/post/tgik-007/</guid>
      <description></description>
      
      <content>

&lt;p&gt;&lt;a href=&#34;https://github.com/heptio/tgik/blob/master/episodes/007/README.md&#34; target=&#34;_blank&#34;&gt;일곱 번째 에피소드&lt;/a&gt;는 간단하게 쿠버네티스 컨트롤러를 만들어 보는 데모이다.&lt;/p&gt;

&lt;p&gt;데모 리포지토리가 오래되고 API 패키지명이 다르기도 하고 하여, &lt;code&gt;go mod&lt;/code&gt; 기반으로 재작성하였다. 저장소에는 데모에 해당하는 컨트롤러의 소스가 각각 &lt;code&gt;pod-watcher&lt;/code&gt;와 &lt;code&gt;secret-controller&lt;/code&gt;의 두 가지로 태깅되어 있다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/ziwon/k8s-controller&#34; target=&#34;_blank&#34;&gt;ziwon/k8s-controller&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;쿠버네티스 클러스터는 &lt;a href=&#34;https://github.com/kubernetes-sigs/kind&#34; target=&#34;_blank&#34;&gt;kind&lt;/a&gt;를 사용하여 테스트하였다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/ziwon/yak8s&#34; target=&#34;_blank&#34;&gt;ziwon/yak8s&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;pod-컨트롤러&#34;&gt;Pod 컨트롤러&lt;/h2&gt;

&lt;p&gt;먼저, 적당한 디렉토리에 저장소를 클론한다. 그리고 &lt;code&gt;pod-watcher&lt;/code&gt;를 체크 아웃한다. (&lt;code&gt;go mod&lt;/code&gt;에 대한 자세한 설명은 여기서는 생략합니다.)&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;$ &lt;span class=&#34;nb&#34;&gt;export&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;GO111MODULE&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;auto
$ git clone git@github.com:ziwon/k8s-controller.git
$ git checkout pod-watcher&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;다음으로, 로컬 PC 환경에서 쿠버네티스 클러스터를 띄운다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;$ git clone https://github.com/ziwon/yak8s
$ make kind-cluster-up
Creating cluster &lt;span class=&#34;s1&#34;&gt;&amp;#39;kind-1&amp;#39;&lt;/span&gt; ...
 ✓ Ensuring node image &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;kindest/node:v1.13.2&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; 🖼
 ✓ &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;lb&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Creating node container 📦
 ✓ &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;lb&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Fixing mounts 🗻
 ✓ &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;lb&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Starting systemd 🖥
 ✓ &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;lb&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Waiting &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; docker to be ready 🐋
 ✓ &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;lb&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Pre-loading images 🐋
 ✓ &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;control-plane1&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Creating node container 📦
 ✓ &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;control-plane1&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Fixing mounts 🗻
 ✓ &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;control-plane1&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Starting systemd 🖥
 ✓ &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;control-plane1&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Waiting &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; docker to be ready 🐋
 ✓ &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;control-plane1&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Pre-loading images 🐋
 ...
 ✓ &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;lb&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Starting the external load balancer ⛵
 ✓ &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;control-plane1&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Creating the kubeadm config file ⛵
 ✓ &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;control-plane1&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Starting Kubernetes &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;this may take a minute&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; ☸
 ✓ &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;control-plane2&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Joining control-plane node to Kubernetes ☸
 ✓ &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;worker1&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Joining worker node to Kubernetes ☸
 ✓ &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;worker2&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Joining worker node to Kubernetes ☸
 ✓ &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;worker3&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Joining worker node to Kubernetes ☸
 ✓ &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;worker4&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Joining worker node to Kubernetes ☸
Cluster creation complete. You can now use the cluster with:

&lt;span class=&#34;nb&#34;&gt;export&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;KUBECONFIG&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;kind get kubeconfig-path --name&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;1&amp;#34;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;
kubectl cluster-info
/Library/Developer/CommandLineTools/usr/bin/make kind-cluster-info
Kubernetes master is running at https://localhost:63578
KubeDNS is running at https://localhost:63578/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;클러스터를 띄웠으니, 컨트롤러가 사용할 &lt;code&gt;KUBECONFIG&lt;/code&gt; 환경변수를 잡아준다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;$ &lt;span class=&#34;nb&#34;&gt;export&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;KUBECONFIG&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;kind get kubeconfig-path --name&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;1&amp;#34;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이제 컨트롤러를 실행시켜보자. 다음과 같이 클러스터 내의 Pod 컴포넌트 정보들이 컨트롤러 캐시에 싱크되고 있는 것을 확인할 수 있다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;$ &lt;span class=&#34;nb&#34;&gt;cd&lt;/span&gt; ziwon/k8s-controller
$ git checkout pod-watcher
$ go run *.go
Alias tip: gor *.go
&lt;span class=&#34;m&#34;&gt;2019&lt;/span&gt;/03/03 &lt;span class=&#34;m&#34;&gt;15&lt;/span&gt;:12:15 k8s-controller version UNKNOWN
&lt;span class=&#34;m&#34;&gt;2019&lt;/span&gt;/03/03 &lt;span class=&#34;m&#34;&gt;15&lt;/span&gt;:12:15 waiting &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; cache sync
&lt;span class=&#34;m&#34;&gt;2019&lt;/span&gt;/03/03 &lt;span class=&#34;m&#34;&gt;15&lt;/span&gt;:12:15 onAdd: kube-system/weave-net-ctjpn
&lt;span class=&#34;m&#34;&gt;2019&lt;/span&gt;/03/03 &lt;span class=&#34;m&#34;&gt;15&lt;/span&gt;:12:15 onAdd: kube-system/kube-apiserver-kind-1-control-plane1
&lt;span class=&#34;m&#34;&gt;2019&lt;/span&gt;/03/03 &lt;span class=&#34;m&#34;&gt;15&lt;/span&gt;:12:15 onAdd: kube-system/kube-proxy-mkvq5
&lt;span class=&#34;m&#34;&gt;2019&lt;/span&gt;/03/03 &lt;span class=&#34;m&#34;&gt;15&lt;/span&gt;:12:15 onAdd: kube-system/kube-scheduler-kind-1-control-plane2
&lt;span class=&#34;m&#34;&gt;2019&lt;/span&gt;/03/03 &lt;span class=&#34;m&#34;&gt;15&lt;/span&gt;:12:15 onAdd: kube-system/kube-proxy-r88qg
&lt;span class=&#34;m&#34;&gt;2019&lt;/span&gt;/03/03 &lt;span class=&#34;m&#34;&gt;15&lt;/span&gt;:12:15 onAdd: kube-system/kube-proxy-gs25r
&lt;span class=&#34;m&#34;&gt;2019&lt;/span&gt;/03/03 &lt;span class=&#34;m&#34;&gt;15&lt;/span&gt;:12:15 onAdd: kube-system/weave-net-x2jcn
&lt;span class=&#34;m&#34;&gt;2019&lt;/span&gt;/03/03 &lt;span class=&#34;m&#34;&gt;15&lt;/span&gt;:12:15 onAdd: kube-system/weave-net-qpw2p
&lt;span class=&#34;m&#34;&gt;2019&lt;/span&gt;/03/03 &lt;span class=&#34;m&#34;&gt;15&lt;/span&gt;:12:15 onAdd: kube-system/kube-proxy-qxct5
&lt;span class=&#34;m&#34;&gt;2019&lt;/span&gt;/03/03 &lt;span class=&#34;m&#34;&gt;15&lt;/span&gt;:12:15 onAdd: kube-system/etcd-kind-1-control-plane1
&lt;span class=&#34;m&#34;&gt;2019&lt;/span&gt;/03/03 &lt;span class=&#34;m&#34;&gt;15&lt;/span&gt;:12:15 onAdd: kube-system/coredns-86c58d9df4-w8s8q
&lt;span class=&#34;m&#34;&gt;2019&lt;/span&gt;/03/03 &lt;span class=&#34;m&#34;&gt;15&lt;/span&gt;:12:15 onAdd: kube-system/etcd-kind-1-control-plane2
&lt;span class=&#34;m&#34;&gt;2019&lt;/span&gt;/03/03 &lt;span class=&#34;m&#34;&gt;15&lt;/span&gt;:12:15 onAdd: kube-system/kube-apiserver-kind-1-control-plane2
&lt;span class=&#34;m&#34;&gt;2019&lt;/span&gt;/03/03 &lt;span class=&#34;m&#34;&gt;15&lt;/span&gt;:12:15 onAdd: kube-system/kube-scheduler-kind-1-control-plane1
&lt;span class=&#34;m&#34;&gt;2019&lt;/span&gt;/03/03 &lt;span class=&#34;m&#34;&gt;15&lt;/span&gt;:12:15 onAdd: kube-system/kube-controller-manager-kind-1-control-plane2
&lt;span class=&#34;m&#34;&gt;2019&lt;/span&gt;/03/03 &lt;span class=&#34;m&#34;&gt;15&lt;/span&gt;:12:15 onAdd: kube-system/kube-controller-manager-kind-1-control-plane1
&lt;span class=&#34;m&#34;&gt;2019&lt;/span&gt;/03/03 &lt;span class=&#34;m&#34;&gt;15&lt;/span&gt;:12:15 onAdd: kube-system/kube-proxy-lrjws
&lt;span class=&#34;m&#34;&gt;2019&lt;/span&gt;/03/03 &lt;span class=&#34;m&#34;&gt;15&lt;/span&gt;:12:15 onAdd: kube-system/weave-net-rpfnw
&lt;span class=&#34;m&#34;&gt;2019&lt;/span&gt;/03/03 &lt;span class=&#34;m&#34;&gt;15&lt;/span&gt;:12:15 onAdd: kube-system/coredns-86c58d9df4-8g2s2
&lt;span class=&#34;m&#34;&gt;2019&lt;/span&gt;/03/03 &lt;span class=&#34;m&#34;&gt;15&lt;/span&gt;:12:15 onAdd: kube-system/kube-proxy-tw8ld
&lt;span class=&#34;m&#34;&gt;2019&lt;/span&gt;/03/03 &lt;span class=&#34;m&#34;&gt;15&lt;/span&gt;:12:15 onAdd: kube-system/weave-net-ljdnm
&lt;span class=&#34;m&#34;&gt;2019&lt;/span&gt;/03/03 &lt;span class=&#34;m&#34;&gt;15&lt;/span&gt;:12:15 onAdd: kube-system/weave-net-vl2nw
&lt;span class=&#34;m&#34;&gt;2019&lt;/span&gt;/03/03 &lt;span class=&#34;m&#34;&gt;15&lt;/span&gt;:12:15 caches are synced
&lt;span class=&#34;m&#34;&gt;2019&lt;/span&gt;/03/03 &lt;span class=&#34;m&#34;&gt;15&lt;/span&gt;:12:15 waiting &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; stop signal&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;클러스터에 Pod를 하나 배포한다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;$ make run-kuard
kubectl run --restart&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;Never --image&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;gcr.io/kuar-demo/kuard-amd64:blue kuard
pod/kuard created&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;다음과 같이 컨트롤러에서 새로 배포된 Pod가 추가됨을 확인할 수 있다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span class=&#34;m&#34;&gt;2019&lt;/span&gt;/03/03 &lt;span class=&#34;m&#34;&gt;15&lt;/span&gt;:13:30 onAdd: default/kuard
&lt;span class=&#34;m&#34;&gt;2019&lt;/span&gt;/03/03 &lt;span class=&#34;m&#34;&gt;15&lt;/span&gt;:13:30 onUpdate: default/kuard
&lt;span class=&#34;m&#34;&gt;2019&lt;/span&gt;/03/03 &lt;span class=&#34;m&#34;&gt;15&lt;/span&gt;:13:30 onUpdate: default/kuard
&lt;span class=&#34;m&#34;&gt;2019&lt;/span&gt;/03/03 &lt;span class=&#34;m&#34;&gt;15&lt;/span&gt;:13:36 onUpdate: default/kuard&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이제 배포된 Pod을 클러스터에서 제거하면, 역시 삭제되었다는 이벤트를 컨트롤러를 통해 수신하게 된다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;$ kubectl delete po kuard&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span class=&#34;m&#34;&gt;2019&lt;/span&gt;/03/03 &lt;span class=&#34;m&#34;&gt;15&lt;/span&gt;:16:19 onUpdate: default/kuard
&lt;span class=&#34;m&#34;&gt;2019&lt;/span&gt;/03/03 &lt;span class=&#34;m&#34;&gt;15&lt;/span&gt;:16:19 onDelete: default/kuard&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이상, 컨트롤러의 동작을 간단히 확인해 보았다. 클러스터에는 여러 개의 컨트롤러를 붙일 수 있으며, 단지 각각의 컨트롤러가 동일한 작업을 하지 않으면 문제 없다고 한다. 또한 컨트롤러는 여러 언어로 된 라이브러리가 있기 때문에, 굳이 Go언어로 작성될 필요는 없다고 한다.&lt;/p&gt;

&lt;p&gt;반응형 컨트롤러를 작성하기 위한 여러가지 유틸리티와 라이브러리가 있으며, 한 가지 베스트 프랙티스 중 하나는 Queue를 사용하는 것이다. 클러스터 자체가 매우 bursty하고 여러 가지 변경이 매우 많기 때문에, 클러스터에 대한 모든 변경을 하나씩 일일히 처리하기 보다는 비슷한 종류의 변경들은 하나로 묶어서 큐를 통해 처리하게 되면, rate limit을 사용해서 클러스터 변경에 대해 서버가 얼마나 세게 치는지 알 수 있다고 한다. 이를 위해 쿠버네티스 클라이언트에서 &lt;strong&gt;&lt;a href=&#34;https://github.com/kubernetes/client-go/tree/master/examples/workqueue&#34; target=&#34;_blank&#34;&gt;Workqueue&lt;/a&gt;&lt;/strong&gt;를 제공하고 있다.&lt;/p&gt;

&lt;h3 id=&#34;pod-watcher-코드-설명&#34;&gt;Pod-Watcher 코드 설명&lt;/h3&gt;

&lt;p&gt;이제 코드를 간단히 살펴보자.&lt;/p&gt;

&lt;p&gt;다음은 &lt;code&gt;k8s-controller.go&lt;/code&gt; 파일에서 설정 파일을 잡아주는 부분으로,&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;kubeconfig&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;config&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;clientcmd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;BuildConfigFromFlags&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;kubeconfig&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;config&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;rest&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;InClusterConfig&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위 코드는 쿠버네티스 클라이언트를 &lt;code&gt;KUBECONFIG&lt;/code&gt; 환경변수 또는 &lt;code&gt;kubeconfig&lt;/code&gt; 플래그를 통해서 설정하거나 또는 만약 컨트롤러가 쿠버네티스 클러스터 내에 있다면, 기본값으로 restClient를 설정하게 된다.&lt;/p&gt;

&lt;p&gt;다음으로 설정된 환경변수에 대해 새로운 클라이언트를 생성한다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;nx&#34;&gt;client&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;kubernetes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;NewForConfigOrDie&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;config&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;그리고 &lt;code&gt;sharedInformer&lt;/code&gt;를 생성하는데, 쿠버네티스 오브젝트에 대한 미러를 캐시하다가 특정 오브젝트의 변경이 있으면 알려주는 주는 역할을 한다. 쿠버네티스 내에서는 각각 자신들만의 컨트롤러가 쿠버네티스 객체에 대해 미러를 유지하는데, 이는 매우 큰 클러스터의 경우 매우 메모리 집약적인 작업이다. 따라서 여러 컨트롤러가 공유해서 사용하는 뭔가가 필요한데, &lt;code&gt;SharedInformer&lt;/code&gt;가 그 역할을 한다고 볼 수 있다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;sharedInformers&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;informers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;NewSharedInformerFactory&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;client&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Minute&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;k8sController&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;NewK8SController&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;client&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;sharedInformers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Core&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;V1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Pods&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이제, &lt;code&gt;controller.go&lt;/code&gt;의 소스를 살펴보자.&lt;/p&gt;

&lt;p&gt;먼저 &lt;code&gt;podGetter&lt;/code&gt;는 쿠버네티스 클라이언트를 통해 해당 Pod 정보를 획득하고, &lt;code&gt;podLister&lt;/code&gt;는 &lt;code&gt;SharedInformer&lt;/code&gt;의 캐시를 통해 Pod 목록을 획득한다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;K8SController&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;podGetter&lt;/span&gt;       &lt;span class=&#34;nx&#34;&gt;corev1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;PodsGetter&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;podLister&lt;/span&gt;       &lt;span class=&#34;nx&#34;&gt;listercorev1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;PodLister&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;podListerSynced&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;cache&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;InformerSynced&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;다음으로 &lt;code&gt;SharedInformer&lt;/code&gt;에 이벤트 핸들러를 추가한다. 이 부분은 이벤트 옵저버 패턴의 일반적인 형식으로 볼 수 있다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;	&lt;span class=&#34;nx&#34;&gt;podInformer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Informer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;AddEventHandler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;cache&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ResourceEventHandlerFuncs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
			&lt;span class=&#34;nx&#34;&gt;AddFunc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;obj&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;interface&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{})&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
				&lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;onAdd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;obj&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
			&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
			&lt;span class=&#34;nx&#34;&gt;UpdateFunc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;oldObj&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;newObj&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;interface&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{})&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
				&lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;onUpdate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;oldObj&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;newObj&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
			&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
			&lt;span class=&#34;nx&#34;&gt;DeleteFunc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;obj&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;interface&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{})&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
				&lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;onDelete&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;obj&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
			&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
		&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;그리고, &lt;code&gt;onAdd&lt;/code&gt;, &lt;code&gt;onUpdate&lt;/code&gt;, &lt;code&gt;onDelete&lt;/code&gt; 등 각각의 이벤트 핸들러를 구현한다. &lt;code&gt;cache.MetaNamespaceKeyFunc&lt;/code&gt;는 &lt;code&gt;default/kuard&lt;/code&gt;에서처럼, 네임스페이스와 객체의 이름을 바인딩한 값을 캐쉬에 대한 키로 가져온다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;K8SController&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;onAdd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;obj&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;interface&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{})&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;onAdd: object: %#v: %v&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;obj&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;cache&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;MetaNamespaceKeyFunc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;obj&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;onAdd: error getting key for: %#v: %v&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;obj&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;runtime&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;HandleError&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;onAdd: %v&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;다음은 캐시 싱크를 수행하는 함수이다. 완료될 때까지 기다리고, 만약 큐를 이용한다면, 싱크 전에 큐를 로딩해주고 워커를 실행해야한다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;K8SController&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Run&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;stop&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;chan&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{})&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;waiting for cache sync&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;cache&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;WaitForCacheSync&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;stop&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;podListerSynced&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;timed out waiting for cache sync&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;caches are synced&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

	&lt;span class=&#34;c1&#34;&gt;// wait until we&amp;#39;re told to stop
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;waiting for stop signal&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;o&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;stop&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;received stop signal&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&#34;secret-copy-컨트롤러&#34;&gt;Secret Copy 컨트롤러&lt;/h2&gt;

&lt;p&gt;다음으로 작성해 볼 컨트롤러는 시크릿 컨트롤러이다.&lt;/p&gt;

&lt;p&gt;예를 들어, 여러 개발자가 사용하는 쿠버네티스 클러스터를 셋업했고, 네임스페이스마다 개발자를 할당하여 뭔가를 한다고 할 때, 공유 데이터베이스를 사용하지 않고 개발자들에게 쿠버네티스 시크릿을 모든 개발자들의 네임스페이스에 전파하는 것이 이슈가 될 수 있다. 이를 해결하기 위해 이를테면, 일종의 시크릿을 각 네임스페이스에 복사하는 컨트롤러를 만들 수 있을 것이다.&lt;/p&gt;

&lt;p&gt;자세한 소스 코드는 &lt;code&gt;secret-controller&lt;/code&gt; 태그를 참고한다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;$ git checkout secret-controller&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;소스를 보면, Secret 컴포넌트에 대한 이벤트를 핸들링하는 &lt;strong&gt;&lt;a href=&#34;https://github.com/ziwon/k8s-controller/blob/secret-controller/controller.go#L110&#34; target=&#34;_blank&#34;&gt;handleSecretChange(obj interface{})&lt;/a&gt;&lt;/strong&gt; 컨트롤러 메소드가 추가되었다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;K8SController&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;handleSecretChange&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;obj&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;interface&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{})&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;secret&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ok&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;obj&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;apicorev1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Secret&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ok&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;c1&#34;&gt;// TODO: this is probably a `DeletedFinalStateUnknown`.  Figure out what
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;		&lt;span class=&#34;c1&#34;&gt;// to do.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;secret&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ObjectMeta&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Namespace&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;secretSyncSourceNamespace&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Skipping secret in wrong namespace&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;secret&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Type&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;secretSyncType&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Skipping secret of wrong type&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

	&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Do something with this secret&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;nx&#34;&gt;nsList&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;namespaceGetter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Namespaces&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;List&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;metav1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ListOptions&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{})&lt;/span&gt;

	&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Error listeing namespaces: %v&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

	&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ns&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;range&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;nsList&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Items&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;nsName&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ns&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ObjectMeta&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Name&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ok&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;namespaceBlacklist&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;nsName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ok&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
			&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Skipping namespace on blacklist: %v&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;nsName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
			&lt;span class=&#34;k&#34;&gt;continue&lt;/span&gt;
		&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;We should copy %s to namespace %s&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;secret&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ObjectMeta&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;ns&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ObjectMeta&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
		&lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;copySecretToNamespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;secret&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;nsName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
	&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;시크릿을 복사할 때, &lt;code&gt;kube-public&lt;/code&gt;, &lt;code&gt;kube-system&lt;/code&gt; 네임스페이스는 제외한 다른 네임스페이스에 복사하는 작업을 수행하고 있다. 실제 시크릿을 복사하는 코드는 시간관계상 생략되었지만, 그 구현 내용은 다음과 같이 주석을 참고한다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;K8SController&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;copySecretToNamespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;secret&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;apicorev1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Secret&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;nsName&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;c1&#34;&gt;// TODO:
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;c1&#34;&gt;// 1. Make a deep copy of the secret
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;c1&#34;&gt;// 2. Remove things like object version that&amp;#39;ll prevent us from writing
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;c1&#34;&gt;// 3. Write in new namespace
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;	&lt;span class=&#34;c1&#34;&gt;// 4. Do a create or update for the new object
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이제, 클러스터에 &lt;code&gt;secretsync&lt;/code&gt;라는 네임스페이스를 만든다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;$ kubectl create namespace secretsync&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;시크릿을 만드는 방법과 관련된 옵션은 다음과 같이 확인할 수 있다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;$ kubectl create --namespace&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;secretsync secret generic --help
Create a secret based on a file, directory, or specified literal value.

A single secret may package one or more key/value pairs.

When creating a secret based on a file, the key will default to the basename of the file, and the
value will default to the file content. If the basename is an invalid key or you wish to chose your
own, you may specify an alternate key.

When creating a secret based on a directory, each file whose basename is a valid key in the
directory will be packaged into the secret. Any directory entries except regular files are ignored
&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;e.g. subdirectories, symlinks, devices, pipes, etc&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;.

Examples:
  &lt;span class=&#34;c1&#34;&gt;# Create a new secret named my-secret with keys for each file in folder bar
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  kubectl create secret generic my-secret --from-file&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;path/to/bar

  &lt;span class=&#34;c1&#34;&gt;# Create a new secret named my-secret with specified keys instead of names on disk
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  kubectl create secret generic my-secret --from-file&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;ssh-privatekey&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;~/.ssh/id_rsa
--from-file&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;ssh-publickey&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;~/.ssh/id_rsa.pub

  &lt;span class=&#34;c1&#34;&gt;# Create a new secret named my-secret with key1=supersecret and key2=topsecret
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  kubectl create secret generic my-secret --from-literal&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;key1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;supersecret
--from-literal&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;key2&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;topsecret

  &lt;span class=&#34;c1&#34;&gt;# Create a new secret named my-secret using a combination of a file and a literal
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  kubectl create secret generic my-secret --from-file&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;ssh-privatekey&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;~/.ssh/id_rsa
--from-literal&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;passphrase&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;topsecret

  &lt;span class=&#34;c1&#34;&gt;# Create a new secret named my-secret from an env file
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  kubectl create secret generic my-secret --from-env-file&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;path/to/bar.env&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위 가이드 메세지를 따라, , &lt;code&gt;--from-literal&lt;/code&gt; 옵션으로, &lt;code&gt;--type&lt;/code&gt;의 값은 &lt;code&gt;k8s.ziwon.dev/secretsync&lt;/code&gt;이고, 이름이 &lt;code&gt;supersecret&lt;/code&gt;인 시크릿을 생성한다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;$ kubectl create --namespace&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;secretsync secret generic supersecret --from-literal&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;ziwon&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;awesome --type&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;k8s.ziwon.dev/secretsync
secret/supersecret created&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;만들어진 시크릿은 다음과 같이 확인할 수 있다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;$ kubectl get secrets
NAME                  TYPE                                  DATA   AGE
default-token-vhc89   kubernetes.io/service-account-token   &lt;span class=&#34;m&#34;&gt;3&lt;/span&gt;      12m
supersecret           k8s.ziwon.dev/secretsync              &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;      11m&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;시크릿 컨트롤러를 실행하면, 다음과 같이 &lt;code&gt;secretsync/supersecret&lt;/code&gt;에 대해 핸들링하는 컨트롤러의 동작을 확인할 수 있다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;$ go run *.go
...
&lt;span class=&#34;m&#34;&gt;2019&lt;/span&gt;/03/03 &lt;span class=&#34;m&#34;&gt;18&lt;/span&gt;:09:22 onAdd: secretsync/supersecret
&lt;span class=&#34;m&#34;&gt;2019&lt;/span&gt;/03/03 &lt;span class=&#34;m&#34;&gt;18&lt;/span&gt;:09:22 Do something with this secret
&lt;span class=&#34;m&#34;&gt;2019&lt;/span&gt;/03/03 &lt;span class=&#34;m&#34;&gt;18&lt;/span&gt;:09:22 We should copy supersecret to namespace default&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이상, 간단하게 Pod Watcher 컨트롤러와 Secret Copy 컨트롤러를 만들어 보았다.&lt;/p&gt;

&lt;h2 id=&#34;기타&#34;&gt;기타&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://engineering.bitnami.com/articles/a-deep-dive-into-kubernetes-controllers.html&#34; target=&#34;_blank&#34;&gt;A Deep Dive Into Kubernetes Controllers&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
      
    </item>
    
    <item>
      <title>[번역] 도커 볼륨</title>
      <link>https://ziwon.github.io/post/docker-storage-volumes/</link>
      <pubDate>Sun, 24 Feb 2019 16:59:00 +0900</pubDate>
      <author>Aron Yoon</author>
      <guid>https://ziwon.github.io/post/docker-storage-volumes/</guid>
      <description></description>
      
      <content>

&lt;p&gt;도커 스토리지 목차는 다음과 같다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://ziwon.github.io/post/docker-storage-overview/&#34;&gt;스토리지 소개&lt;/a&gt; (&lt;a href=&#34;https://docs.docker.com/storage/&#34; target=&#34;_blank&#34;&gt;원문&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href=&#34;https://ziwon.github.io/post/docker-storage-volumes/&#34;&gt;* 볼륨 사용&lt;/a&gt; (&lt;a href=&#34;https://docs.docker.com/storage/volumes/&#34; target=&#34;_blank&#34;&gt;원문&lt;/a&gt;)&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;바인드 마운트&lt;/li&gt;
&lt;li&gt;tmp 마운트&lt;/li&gt;
&lt;li&gt;컨테이너에 데이터 저장하기

&lt;ul&gt;
&lt;li&gt;스토리지 드라이버에 대해&lt;/li&gt;
&lt;li&gt;스토리지 드라이버 선택&lt;/li&gt;
&lt;li&gt;AUFS 스토리지 드라이버 사용&lt;/li&gt;
&lt;li&gt;Btrfs 스토리지 드라이버 사용&lt;/li&gt;
&lt;li&gt;디바이스 맵퍼 스토리지 드라이버 사용&lt;/li&gt;
&lt;li&gt;OverlayFS 스토리지 드라이버 사용&lt;/li&gt;
&lt;li&gt;ZFS 스토리지 드라이버 사용&lt;/li&gt;
&lt;li&gt;VFS 스토리지 드라이버 사용&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;center&gt;•••&lt;/center&gt;&lt;/p&gt;

&lt;h1 id=&#34;볼륨-사용&#34;&gt;볼륨 사용&lt;/h1&gt;

&lt;p&gt;볼륨은 도커 컨테이너에 의해 생성되고 사용되는 데이터를 영속하기 위해 선호되는 메커니즘이다. 바인드 마운트는 호스트 머신의 디렉토리 구조에 따라 달라지지만, 볼륨은 도커에 의해 완전히 관리된다. 볼륨은 바인드 마운트에 비해 몇 가지 장점이 있다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;볼륨은 바인드 마운트보다 백업 또는 마이그레이션이 더 쉽다.&lt;/li&gt;
&lt;li&gt;Docker CLI 명령이나 Docker API를 사용하여 볼륨을 관리할 수 있다.&lt;/li&gt;
&lt;li&gt;볼륨은 Linux 컨테이너와 Windows 컨테이너 모두에서 작동한다.&lt;/li&gt;
&lt;li&gt;볼륨은 여러 컨테이너 사이에서 더 안전하게 공유될 수 있다.&lt;/li&gt;
&lt;li&gt;볼륨 드라이버는 원격 호스트나 클라우드 프로바이더에게 볼륨을 저장하거나, 볼륨의 내용을 암호화하거나, 다른 기능을 추가할 수 있게 해준다.&lt;/li&gt;
&lt;li&gt;새 볼륨은 컨테이너에 의해 그 내용물을 미리 채울 수 있다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;또한, 볼륨은 사용하는 컨테이너의 크기를 증가시키지 않고, 주어진 컨테이너의 라이프사이클 밖에 볼륨의 내용이 존재하기 때문에, 컨테이너의 쓰기 가능한 레이어에서 데이터를 영속하는 것보다 더 나은 선택이라고 할 수 있다.&lt;/p&gt;

&lt;p&gt;&lt;center&gt;&lt;img src=&#34;https://docs.docker.com/storage/images/types-of-mounts-volume.png&#34;/&gt;&lt;/center&gt;&lt;/p&gt;

&lt;p&gt;컨테이너가 비영속적인 상태 데이터를 생성하는 경우, &lt;code&gt;tmpfs&lt;/code&gt; 마운트를 사용하여 데이터를 어디에나 영속적으로 저장하지 않도록 하고, 컨테이너의 쓰기 가능한 레이어에 쓰기를 막아 컨테이너 성능을 향상시키는 것을 고려해볼 수 있다.&lt;/p&gt;

&lt;p&gt;볼륨은 &lt;code&gt;rprivate&lt;/code&gt; 바인드 전파를 사용하는데, 볼륨에 대한 바인드 전파는 설정할 수 없다.&lt;/p&gt;

&lt;h2 id=&#34;v-또는-mount-플래그-선택&#34;&gt;-v 또는 &amp;ndash;mount 플래그 선택&lt;/h2&gt;

&lt;p&gt;원래, &lt;code&gt;-v&lt;/code&gt; 또는 &lt;code&gt;--volume&lt;/code&gt; 플래그는 독립형 컨테이너에 사용되었고 &lt;code&gt;--mount&lt;/code&gt; 플래그는 스웜 서비스에 사용되었다. 그러나 도커 17.06부터 독립형 컨테이너와 함께 &lt;code&gt;--mount&lt;/code&gt;를 사용할 수도 있다. 일반적으로 &lt;code&gt;--mount&lt;/code&gt;가 더 명확하고 장황(verbose)하다. 가장 큰 차이점은 &lt;code&gt;-v&lt;/code&gt; 구문이 모든 옵션을 하나의 필드에 함께 결합하는 반면 &lt;code&gt;--mount&lt;/code&gt; 구문은 이들을 구분한다는 것이다. 다음은 각 플래그의 구문 비교이다.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;새 사용자들은 &lt;code&gt;--volume&lt;/code&gt; 구분보다 간단한 구문인 &lt;code&gt;--mount&lt;/code&gt; 구문을 사용해야 한다.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;볼륨 드라이버 옵션을 지정해야 한다면, &lt;code&gt;--mount&lt;/code&gt;를 사용해야 한다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-v&lt;/code&gt; 또는 &lt;code&gt;--volume&lt;/code&gt;: 콜론(:)으로 구분된 3개의 필드로 구성된다. 필드의 순서가 정확해야 하고, 각 필드의 의미는 한눈에 알기 어렵다.

&lt;ul&gt;
&lt;li&gt;이름을 지닌 볼륨의 경우, 첫 번째 필드는 볼륨의 이름이며, 지정된 호스트 머신에서 고유하다. 익명 볼륨의 경우, 첫 번째 필드는 생략한다.&lt;/li&gt;
&lt;li&gt;두 번째 필드는 파일이나 디렉토리가 컨테이너에 마운트되는 경로다.&lt;/li&gt;
&lt;li&gt;세 번째 필드는 선택사항이며, &lt;code&gt;ro&lt;/code&gt;와 같이 쉼표로 구분된 옵션 목록이다. 이러한 옵션은 아래에서 논의한다.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;--mount&lt;/code&gt;: 복수 키밸류 쌍으로 구성되고 쉼표로 구분되고 각각은 &lt;code&gt;&amp;lt;key&amp;gt;=&amp;lt;value&amp;gt;&lt;/code&gt; 튜퓰로 구성된다. &lt;code&gt;--mount&lt;/code&gt; 구문은 &lt;code&gt;-v&lt;/code&gt; 또는 &lt;code&gt;--volume&lt;/code&gt;보다 장황하지만, 키의 순서는 중요하지 않고, 플래그의 값도 알기 쉽다.

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;bind&lt;/code&gt;, &lt;code&gt;volume&lt;/code&gt; 또는 &lt;code&gt;tmpfs&lt;/code&gt;가 될 수 있는 마운트의 &lt;code&gt;type&lt;/code&gt;. 여기 논하는 주제는 볼륨이므로, &lt;code&gt;type&lt;/code&gt;은 항상 &lt;code&gt;volume&lt;/code&gt;이다.&lt;/li&gt;
&lt;li&gt;마운트의 &lt;code&gt;source&lt;/code&gt;. 이름을 지닌 볼륨의 경우, 이는 볼륨의 이름이다. 익명 볼륨의 경우 이 필드는 생략한다. &lt;code&gt;source&lt;/code&gt; 또는 &lt;code&gt;src&lt;/code&gt;로 지정할 수 있다.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;destination&lt;/code&gt;는 파일이나 디렉토리가 컨테이너에 마운트되는 경로를 값으로 취한다. &lt;code&gt;destination&lt;/code&gt;, &lt;code&gt;dst&lt;/code&gt; 또는 &lt;code&gt;target&lt;/code&gt;으로 지정할 수 있다.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;readonly&lt;/code&gt; 옵션이 있는 경우, &lt;a href=&#34;https://docs.docker.com/storage/volumes/#use-a-read-only-volume&#34; target=&#34;_blank&#34;&gt;바인드 마운트가 읽기 전용으로 컨테이너에 마운트&lt;/a&gt;된다.&lt;/li&gt;
&lt;li&gt;한 번 이상 지정할 수 있는 &lt;code&gt;volume-opt&lt;/code&gt; 옵션은 옵션 이름과 값으로 구성된 키밸류 쌍을 취한다.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;외부 CSV 파서에서 값을 이스케이프(escape)하기&lt;/strong&gt; &lt;br/&gt;
볼륨 드라이버가 쉼표로 구분된 목록을 옵션으로 받아들이는 경우, 외부 CSV 파서에서 값을 이스케이프해야 한다. &lt;code&gt;volume-opt&lt;/code&gt;에서 이스케이프하려면, 큰따옴표(&amp;ldquo;)로 묶고 전체 마운트 매개변수를 작은따옴표(&amp;lsquo;)로 묶는다.&lt;/p&gt;

&lt;p&gt;예를 들어, &lt;code&gt;local&lt;/code&gt; 드라이버는 마운트 옵션으로 &lt;code&gt;o&lt;/code&gt; 매개변수의 쉼표로 구분된 목록을 수용한다. 예제는 목록에서 이스케이프할 수 있는 올바른 방법을 보여준다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;$ docker service create &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    --mount &lt;span class=&#34;s1&#34;&gt;&amp;#39;type=volume,src=&amp;lt;VOLUME-NAME&amp;gt;,dst=&amp;lt;CONTAINER-PATH&amp;gt;,volume-driver=local,volume-opt=type=nfs,volume-opt=device=&amp;lt;nfs-server&amp;gt;:&amp;lt;nfs-path&amp;gt;,&amp;#34;volume-opt=o=addr=&amp;lt;nfs-address&amp;gt;,vers=4,soft,timeo=180,bg,tcp,rw&amp;#34;&amp;#39;&lt;/span&gt;
    --name myservice &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    &amp;lt;IMAGE&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/blockquote&gt;

&lt;p&gt;아래 예제는 가능한 경우 &lt;code&gt;--mount&lt;/code&gt; 및 &lt;code&gt;-v&lt;/code&gt; 구문을 모두 표시하고 &lt;code&gt;--mount&lt;/code&gt;가 먼저 제시된다.&lt;/p&gt;

&lt;h3 id=&#34;v와-mount-양식의-차이&#34;&gt;-v와 &amp;ndash;mount 양식의 차이&lt;/h3&gt;

&lt;p&gt;바인드 마운트와 달리, 볼륨의 모든 옵션은 &lt;code&gt;--mount&lt;/code&gt;와 &lt;code&gt;-v&lt;/code&gt; 플래그 모두에 대해 사용할 수 있다.&lt;/p&gt;

&lt;p&gt;서비스가 포함된 볼륨을 사용할 때는 &lt;code&gt;--mount&lt;/code&gt;만 지원된다.&lt;/p&gt;

&lt;h2 id=&#34;볼륨-생성과-관리&#34;&gt;볼륨 생성과 관리&lt;/h2&gt;

&lt;p&gt;바인드 마운트와 달리 컨테이너 스코프를 벗어난 볼륨을 생성하고 관리할 수 ​​있다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;볼륨 생성&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;$ docker volume create my-vol&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;볼륨 목록&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;$ docker volume ls

&lt;span class=&#34;nb&#34;&gt;local&lt;/span&gt;               my-vol&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;볼륨 조사&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;$ docker volume inspect my-vol
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;Driver&amp;#34;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;local&amp;#34;&lt;/span&gt;,
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;Labels&amp;#34;&lt;/span&gt;: &lt;span class=&#34;o&#34;&gt;{}&lt;/span&gt;,
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;Mountpoint&amp;#34;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;/var/lib/docker/volumes/my-vol/_data&amp;#34;&lt;/span&gt;,
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;Name&amp;#34;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;my-vol&amp;#34;&lt;/span&gt;,
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;Options&amp;#34;&lt;/span&gt;: &lt;span class=&#34;o&#34;&gt;{}&lt;/span&gt;,
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;Scope&amp;#34;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;local&amp;#34;&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;볼륨 삭제&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;$ docker volume rm my-vol&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&#34;볼륨이-있는-컨테이너-시작&#34;&gt;볼륨이 있는 컨테이너 시작&lt;/h2&gt;

&lt;p&gt;아직 존재하지 않는 볼륨으로 컨테이너를 시작하면, 도커가 볼륨을 생성한다. 다음 예제는 볼륨 &lt;code&gt;myvol2&lt;/code&gt;를 컨테이너의 &lt;code&gt;/app/&lt;/code&gt;에 마운트한다.&lt;/p&gt;

&lt;p&gt;아래의 &lt;code&gt;-v&lt;/code&gt;와 &lt;code&gt;--mount&lt;/code&gt; 예는 동일한 결과를 나타낸다. 첫 번째 컨테이너를 실행한 후 &lt;code&gt;devtest&lt;/code&gt; 컨테이너와 &lt;code&gt;myvol2&lt;/code&gt; 볼륨을 제거하지 않으면 둘 다 실행할 수 없다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&amp;ndash;mount&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;$ docker run -d &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  --name devtest &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  --mount &lt;span class=&#34;nv&#34;&gt;source&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;myvol2,target&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;/app &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  nginx:latest&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;-v&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;$ docker run -d &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  --name devtest &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  -v myvol2:/app &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  nginx:latest&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;docker inspect devtest&lt;/code&gt;를 사용해서 볼륨이 생성되고 정확하게 마운트되었는지 확인한다. &lt;code&gt;Mounts&lt;/code&gt; 섹션을 찾아보라.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;Mounts&amp;#34;&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;nt&#34;&gt;&amp;#34;Type&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;volume&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;nt&#34;&gt;&amp;#34;Name&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;myvol2&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;nt&#34;&gt;&amp;#34;Source&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;/var/lib/docker/volumes/myvol2/_data&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;nt&#34;&gt;&amp;#34;Destination&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;/app&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;nt&#34;&gt;&amp;#34;Driver&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;local&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;nt&#34;&gt;&amp;#34;Mode&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;nt&#34;&gt;&amp;#34;RW&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;nt&#34;&gt;&amp;#34;Propagation&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;,&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위에서 마운트가 볼륨이고, 정확한 소스와 목적지를 확인할 수 있고, 마운트가 읽기-쓰기임을 알 수 있다.&lt;/p&gt;

&lt;p&gt;컨테이너를 멈추고 볼륨을 제거한다. 볼륨 제거는 별도의 단계임을 유의하라.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;$ docker container stop devtest

$ docker container rm devtest

$ docker volume rm myvol2&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&#34;볼륨이-있는-서비스-시작&#34;&gt;볼륨이 있는 서비스 시작&lt;/h2&gt;

&lt;p&gt;서비스를 시작하고 볼륨을 정의할 때 각 서비스 컨테이너는 자체 로컬 볼륨을 사용한다. 로컬 볼륨 드라이버를 사용한다면 어떤 컨테이너도 이 데이터를 공유할 수 없지만, 일부 볼륨 드라이버는 공유 스토리지를 지원한다. Docker for AWS와 Docker for Azure는 모두 Cloudstor 플러그인을 사용하는 영구 스토리지(persistent storage)를 지원한다.&lt;/p&gt;

&lt;p&gt;다음 예는 각각 &lt;code&gt;mysvol2&lt;/code&gt;라는 로컬 볼륨을 사용하는 네 개의 복제본으로 &lt;code&gt;nginx&lt;/code&gt; 서비스를 시작한다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;$ docker service create -d &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  --replicas&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;4&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  --name devtest-service &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  --mount &lt;span class=&#34;nv&#34;&gt;source&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;myvol2,target&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;/app &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  nginx:latest&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;docker service ps devtest-service&lt;/code&gt;를 사용해서 서비스가 실행 중인지 확인하라.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;$ docker service ps devtest-service

ID                  NAME                IMAGE               NODE                DESIRED STATE       CURRENT STATE            ERROR               PORTS
4d7oz1j85wwn        devtest-service.1   nginx:latest        moby                Running             Running &lt;span class=&#34;m&#34;&gt;14&lt;/span&gt; seconds ago&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;서비스를 제거하면 모든 작업이 중지된다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;$ docker service rm devtest-service&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;서비스를 제거해도 서비스가 생성한 볼륨은 제거되지 않는다. 볼륨 제거는 별도의 단계이다.&lt;/p&gt;

&lt;h3 id=&#34;서비스에-대한-구문-차이&#34;&gt;서비스에 대한 구문 차이&lt;/h3&gt;

&lt;p&gt;&lt;code&gt;docker service create&lt;/code&gt; 명령은 &lt;code&gt;-v&lt;/code&gt; 또는 &lt;code&gt;--volume&lt;/code&gt; 플래그를 지원하지 않는다. 볼륨을 서비스의 컨테이너에 마운트 할 때 &lt;code&gt;--mount&lt;/code&gt; 플래그를 사용해야 한다.&lt;/p&gt;

&lt;h3 id=&#34;컨테이너를-사용하여-볼륨-채우기&#34;&gt;컨테이너를 사용하여 볼륨 채우기&lt;/h3&gt;

&lt;p&gt;위와 같이 새 볼륨을 만드는 컨테이너를 시작하고 컨테이너에 마운트할 디렉토리 (예: 위 &lt;code&gt;/app/&lt;/code&gt;)에 파일 또는 디렉토리가 있으면 해당 디렉토리의 내용이 볼륨에 복사된다. 그런 다음 컨테이너가 볼륨을 마운트하고 사용하며, 볼륨을 사용하는 다른 컨테이너도 미리 채워진 컨텐츠에 액세스할 수 있다.&lt;/p&gt;

&lt;p&gt;이를 설명하기 위해 예제는 &lt;code&gt;nginx&lt;/code&gt; 컨테이너를 시작하고 컨테이너의 &lt;code&gt;/usr/share/nginx/html&lt;/code&gt; 디렉토리의 내용으로 새 볼륨 &lt;code&gt;nginx-vol&lt;/code&gt;를 채운다. 이 디렉토리는 &lt;code&gt;nginx&lt;/code&gt;가 기본 HTML 컨텐츠를 저장하는 곳이다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&amp;ndash;mount&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;$ docker run -d &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  --name&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;nginxtest &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  --mount &lt;span class=&#34;nv&#34;&gt;source&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;nginx-vol,destination&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;/usr/share/nginx/html &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  nginx:latest&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;-v&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;$ docker run -d &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  --name&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;nginxtest &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  -v nginx-vol:/usr/share/nginx/html &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  nginx:latest&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이 예제 중 하나를 실행한 후 다음 명령을 실행하여 컨테이너와 볼륨을 정리한다. 볼륨 제거는 별도의 단계이다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;$ docker container stop nginxtest

$ docker container rm nginxtest

$ docker volume rm nginx-vol&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&#34;읽기-전용-볼륨-사용&#34;&gt;읽기 전용 볼륨 사용&lt;/h2&gt;

&lt;p&gt;일부 개발 애플리케이션의 경우, 컨테이너가 바인드 마운트에 쓰기 작업을 수행해야 변경 사항이 다시 도커 호스트에 전파된다. 다른 경우에는 컨테이너가 데이터에 대한 읽기 액세스만 요구한다. 여러 컨테이너가 동일한 볼륨을 마운트할 수 있으며 일부 컨테이너는 읽기/ 쓰기로 마운트하고 다른 컨테이너는 읽기 전용으로 마운트 할 수 있음을 기억하라.&lt;/p&gt;

&lt;p&gt;이 예제는 위의 것을 수정하지만 컨테이너의 마운트 지점 다음에 옵션 목록 (기본값은 비어 있음)에 &lt;code&gt;ro&lt;/code&gt;를 추가하여 디렉토리를 읽기 전용 볼륨으로 마운트한다. 여러 옵션이 있는 경우 쉼표로 구분한다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;--mount&lt;/code&gt; 및 &lt;code&gt;-v&lt;/code&gt; 예제의 결과는 동일하다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&amp;ndash;mount&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;$ docker run -d &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  --name&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;nginxtest &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  --mount &lt;span class=&#34;nv&#34;&gt;source&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;nginx-vol,destination&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;/usr/share/nginx/html,readonly &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  nginx:latest&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;-v&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;$ docker run -d &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  --name&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;nginxtest &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  -v nginx-vol:/usr/share/nginx/html:ro &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  nginx:latest&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;docker inspect nginxtest&lt;/code&gt;를 사용해서 읽기전용 마운트가 정확하게 생성되었는지 확인한다. &lt;code&gt;Mounts&lt;/code&gt; 섹션을 찾아보라.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;Mounts&amp;#34;&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;nt&#34;&gt;&amp;#34;Type&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;volume&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;nt&#34;&gt;&amp;#34;Name&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;nginx-vol&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;nt&#34;&gt;&amp;#34;Source&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;/var/lib/docker/volumes/nginx-vol/_data&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;nt&#34;&gt;&amp;#34;Destination&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;/usr/share/nginx/html&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;nt&#34;&gt;&amp;#34;Driver&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;local&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;nt&#34;&gt;&amp;#34;Mode&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;nt&#34;&gt;&amp;#34;RW&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;false&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;nt&#34;&gt;&amp;#34;Propagation&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;,&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;컨테이너를 멈추고 제거한 다음 볼륨을 제거하라. 볼륨 제거는 별도의 단계이다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;$ docker container stop nginxtest

$ docker container rm nginxtest

$ docker volume rm nginx-vol&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&#34;머신-간에-데이터-공유&#34;&gt;머신 간에 데이터 공유&lt;/h2&gt;

&lt;p&gt;내결함성(fault-tolerant) 어플리케이션을 빌드할 때 같은 파일에 액세 할 수 있도록 동일한 서비스의 여러 복제본을 구성해야할 수도 있다.&lt;/p&gt;

&lt;p&gt;&lt;center&gt;&lt;img src=&#34;https://docs.docker.com/storage/images/volumes-shared-storage.svg&#34;/&gt;&lt;/center&gt;&lt;/p&gt;

&lt;p&gt;애플리케이션을 개발할 때 이를 수행 할 수 있는 몇 가지 방법이 있다. 하나는 애플리케이션에 로직을 추가하여 Amazon S3와 같은 클라우드 객체 저장소 시스템에 파일을 저장하는 것이다. 다른 하나는 NFS 또는 Amazon S3와 같은 외부 스토리지 시스템에 파일 쓰기를 지원하는 드라이버로 볼륨을 생성하는 것이다.&lt;/p&gt;

&lt;p&gt;볼륨 드라이버를 사용하면 애플리케이션 로직에서 기본 저장소 시스템을 추상화할 수 있다. 예를 들어, 서비스에서 NFS 드라이버와 함께 볼륨을 사용하는 경우, 애플리케이션 로직을 변경하지 않고 클라우드에 데이터를 저장하는 예와 같이 다른 드라이버를 사용하도록 서비스를 업데이트할 수 있다.&lt;/p&gt;

&lt;h2 id=&#34;볼륨-드라이버-사용&#34;&gt;볼륨 드라이버 사용&lt;/h2&gt;

&lt;p&gt;&lt;code&gt;docker volume create&lt;/code&gt;를 사용하여 볼륨을 만들거나 아직 생성되지 않은 볼륨을 사용하는 컨테이너를 시작할 때 볼륨 드라이버를 지정할 수 있다. 다음 예제는 독립형 볼륨을 만들 때 처음 &lt;code&gt;vieux/sshfs&lt;/code&gt; 볼륨 드라이버를 사용하고 새 볼륨을 만드는 컨테이너를 시작할 때 사용한다.&lt;/p&gt;

&lt;h3 id=&#34;초기-셋업&#34;&gt;초기 셋업&lt;/h3&gt;

&lt;p&gt;이 예제에서는 두 개의 노드가 있다고 가정한다. 첫 번째 노드는 도커 호스트이고 두 번째 노드는 SSH를 사용하여 연결할 수 있다. 도커 호스트에서 &lt;code&gt;vieux/sshfs&lt;/code&gt; 플러그인을 설치한다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;$ docker plugin install --grant-all-permissions vieux/sshfs&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&#34;볼륨-드라이버를-사용해서-볼륨-생성&#34;&gt;볼륨 드라이버를 사용해서 볼륨 생성&lt;/h3&gt;

&lt;p&gt;이 예제는 SSH 암호를 지정하지만 두 호스트에 공유 키가 설정된 경우, 암호를 생략할 수 있다. 각 볼륨 드라이버는 0개 이상의 설정 가능한 옵션이 있을 수 있고, 각 옵션은 &lt;code&gt;-o&lt;/code&gt; 플래그를 사용하여 지정된다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;$ docker volume create --driver vieux/sshfs &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  -o &lt;span class=&#34;nv&#34;&gt;sshcmd&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;test@node2:/home/test &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  -o &lt;span class=&#34;nv&#34;&gt;password&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;testpassword &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  sshvolume&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&#34;볼륨-드라이버를-사용하여-볼륨을-생성하는-컨테이너-시작&#34;&gt;볼륨 드라이버를 사용하여 볼륨을 생성하는 컨테이너 시작&lt;/h3&gt;

&lt;p&gt;이 예제는 SSH 암호를 지정하지만 두 호스트에 공유 키가 설정된 경우, 암호를 생략할 수 있다. 각 볼륨 드라이버에는 0개 이상의 설정 가능한 옵션이 있을 수 있다. 볼륨 드라이버에서 옵션을 전달해야하는 경우, &lt;code&gt;-v&lt;/code&gt; 대신 &lt;code&gt;-mount&lt;/code&gt; 플래그를 사용하여 볼륨을 마운트해야 한다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;$ docker run -d &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  --name sshfs-container &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  --volume-driver vieux/sshfs &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  --mount &lt;span class=&#34;nv&#34;&gt;src&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;sshvolume,target&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;/app,volume-opt&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;sshcmd&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;test@node2:/home/test,volume-opt&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;password&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;testpassword &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  nginx:latest&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&#34;데이터-볼륨-백업-복원-마이그레이션&#34;&gt;데이터 볼륨 백업, 복원, 마이그레이션&lt;/h2&gt;

&lt;p&gt;볼륨은 백업, 복원 및 마이그레이션에 유용하다. 해당 볼륨을 마운트하는 새 컨테이너를 작성하려면 &lt;code&gt;--volumes-from&lt;/code&gt; 플래그를 사용하라.&lt;/p&gt;

&lt;h3 id=&#34;컨테이너-백업&#34;&gt;컨테이너 백업&lt;/h3&gt;

&lt;p&gt;예를 들어, 다음 명령에서 우리는&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;새 컨테이너를 시작하고 &lt;code&gt;dbstore&lt;/code&gt; 컨테이너에서 볼륨을 마운트한다.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;/backup&lt;/code&gt;으로 로컬 호스트 디렉토리 마운트한다.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;dbdata&lt;/code&gt; 볼륨의 내용을 &lt;code&gt;/backup&lt;/code&gt; 디렉토리의 &lt;code&gt;backup.tar&lt;/code&gt; 파일로 압축하는 명령을 전달한다.&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;$ docker run --rm --volumes-from dbstore -v &lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;pwd&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt;:/backup ubuntu tar cvf /backup/backup.tar /dbdata&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;명령이 끝나고 컨테이너가 정지되면, &lt;code&gt;dbdata&lt;/code&gt; 볼륨의 백업이 남겨진다.&lt;/p&gt;

&lt;h3 id=&#34;백업으로부터-데이터-복원&#34;&gt;백업으로부터 데이터 복원&lt;/h3&gt;

&lt;p&gt;방금 생성된 백업을 동일한 컨테이너 또는 다른 곳에 만든 백업으로 복원할 수 있다. 예를 들어 &lt;code&gt;dbstore2&lt;/code&gt;라는 새 컨테이너를 만든다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;docker run -v /dbdata --name dbstore2 ubuntu /bin/bash&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;그런 다음 새 컨테이너의 데이터 볼륨에서 백업 파일의 압축을 푼다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;$ docker run --rm --volumes-from dbstore2 -v &lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;pwd&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt;:/backup ubuntu bash -c &lt;span class=&#34;s2&#34;&gt;&amp;#34;cd /dbdata &amp;amp;&amp;amp; tar xvf /backup/backup.tar --strip 1&amp;#34;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위의 기술을 사용하여 원하는 도구로 백업, 마이그레이션 및 복원 테스트를 자동화할 수 있다.&lt;/p&gt;

&lt;h2 id=&#34;볼륨-제거&#34;&gt;볼륨 제거&lt;/h2&gt;

&lt;p&gt;도커 데이터 볼륨은 컨테이너가 삭제된 후에도 유지된다. 다음은 고려해 보아야할 두 가지 유형의 볼륨이다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;네임드 볼륨(named volume)&lt;/strong&gt;에는 컨테이너 외부의 특정 소스 양식이 있다. (예: &lt;code&gt;awesome:/bar&lt;/code&gt;).&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;익명 볼륨&lt;/strong&gt;에는 특정 소스가 없으므로 컨테이너를 삭제할 때 도커 엔진 데몬에 제거하도록 지시한다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;익명-볼륨-제거&#34;&gt;익명 볼륨 제거&lt;/h3&gt;

&lt;p&gt;익명 볼륨을 자동으로 제거하려면 &lt;code&gt;--rm&lt;/code&gt; 옵션을 사용하라. 예를 들어, 이 명령은 익명 &lt;code&gt;/foo&lt;/code&gt; 볼륨을 작성한다. 컨테이너가 제거되면 도커 엔진은 &lt;code&gt;/foo&lt;/code&gt; 볼륨을 제거하지만 &lt;code&gt;awesome&lt;/code&gt; 볼륨은 제거하지 않는다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;$ docker run --rm -v /foo -v awesome:/bar busybox top&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;다음 명령은 사용하지 않는 볼륨을 모두 제거하고 공간을 확보한다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;$ docker volume prune&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content>
      
    </item>
    
    <item>
      <title>TGI Kubernetes 006: kubeadm</title>
      <link>https://ziwon.github.io/post/tgik-006/</link>
      <pubDate>Fri, 22 Feb 2019 10:25:00 +0900</pubDate>
      <author>Aron Yoon</author>
      <guid>https://ziwon.github.io/post/tgik-006/</guid>
      <description></description>
      
      <content>

&lt;p&gt;&lt;a href=&#34;https://github.com/heptio/tgik/blob/master/episodes/006/README.md&#34; target=&#34;_blank&#34;&gt;여섯 번째 에피소드&lt;/a&gt;는 &lt;code&gt;kubeadm&lt;/code&gt;을 이용해서 싱글 마스터 쿠버네티스 클러스터를 설치하는 내용이다. 말할 필요도 없이, 실제 프로덕션 수준의 고가용성 쿠버네티스 클러스터 셋업은 아래처럼 단순하지 않으니 어디까지나 참고만 하도록 한다.&lt;/p&gt;

&lt;p&gt;&lt;center&gt;•••&lt;/center&gt;&lt;/p&gt;

&lt;h2 id=&#34;오픈소스-릴리즈-velero-aka-ark-sonobuoy&#34;&gt;오픈소스 릴리즈 - Velero (aka. Ark) &amp;amp; Sonobuoy&lt;/h2&gt;

&lt;p&gt;앞서, Heptio가 릴리즈한 오픈소스에 대해 간략히 설명하는데, 해당 깃헙 저장소의 README 파일을 내용을 요약하면 아래와 같다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;&lt;a href=&#34;https://github.com/heptio/velero&#34; target=&#34;_blank&#34;&gt;Velero&lt;/a&gt;&lt;/strong&gt;: 클러스터 리소스 및 영구 볼륨을 백업하고 복원하는 도구&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;클러스터의 백업본을 가져오고 손실된 경우 복원&lt;/li&gt;
&lt;li&gt;클러스터 자원을 다른 클러스터에 복사,&lt;/li&gt;
&lt;li&gt;개발 환경 및 테스트 환경을 위해 프로덕션 환경을 복제&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;strong&gt;&lt;a href=&#34;https://github.com/heptio/sonobuoy&#34; target=&#34;_blank&#34;&gt;Sonobuoy&lt;/a&gt;&lt;/strong&gt;: 비파괴적인 방식으로 Kubernetes 적합성 테스트 셋을 실행하는 진단 도구&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;클러스터에 대한 명확한 이해를 위한 보고서 생성&lt;/li&gt;
&lt;li&gt;통합 end-to-end 적합성 테스트&lt;/li&gt;
&lt;li&gt;사용자 정의 가능하고 확장 가능한 플러그인을 통해 사용자 정의 데이터 수집&lt;/li&gt;
&lt;li&gt;Kubernetes 버전 1.11, 1.12 및 1.13을 지원&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;kubeadm으로-클러스터-설치&#34;&gt;kubeadm으로 클러스터 설치&lt;/h2&gt;

&lt;h3 id=&#34;vm-인스턴스-준비&#34;&gt;VM 인스턴스 준비&lt;/h3&gt;

&lt;p&gt;먼저, ssh 접속이 가능한 VM 인스턴스를 2~3개 정도 준비한다. &lt;a href=&#34;https://kubernetes.io/docs/setup/independent/create-cluster-kubeadm/#before-you-begin&#34; target=&#34;_blank&#34;&gt;설치 문서&lt;/a&gt;에서도 다음과 같이 명시하였지만, &lt;code&gt;kubeadm&lt;/code&gt;의 경우 cpu 개수가 2개 이하일 경우 마스터 노드 초기화가 되지 않는다.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;One or more machines running a deb/rpm-compatible OS, for example Ubuntu or CentOS
2 GB or more of RAM per machine. Any less leaves little room for your apps.
2 CPUs or more on the master
Full network connectivity among all machines in the cluster. A public or private network is fine.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;IAM 롤은 인스턴스 생성 후에 추가 또는 변경할 수 있는데, 이 단계에서는 생략한다. 시큐리티 설정 화면에서 모든 VM들이 서로 연결될 수 있도록 AWS 기본 시큐리티 그룹과 SSH 접속을 위한 시큐리티 그룹을 각각 생성하여 추가한다. 이상, AWS 상에서 일반적인 EC2 인스턴스를 셋업하는 과정이다.&lt;/p&gt;

&lt;h2 id=&#34;마스터-노드-셋업&#34;&gt;마스터 노드 셋업&lt;/h2&gt;

&lt;p&gt;생성된 인스턴스 하나를 마스터 노드로 셋업하고, 나머지는 워커 노드로 셋업한다. 마스터 노드의 셋업 과정은 다음과 같다.&lt;/p&gt;

&lt;h3 id=&#34;ssh-접속&#34;&gt;SSH 접속&lt;/h3&gt;

&lt;p&gt;마스터 노드로 사용할 인스턴스에 ssh 접속한다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;ssh -i ~/.ssh/id_rsa ubuntu@ec2-52-78-150-83.ap-northeast-2.compute.amazonaws.com&lt;/code&gt;&lt;/p&gt;

&lt;h3 id=&#34;도커-설치&#34;&gt;도커 설치&lt;/h3&gt;

&lt;p&gt;다음으로 사용자 (&lt;code&gt;ubuntu&lt;/code&gt;) 계정으로 도커를 설치한다. (참고로 도커 버전이 &lt;code&gt;18.06&lt;/code&gt;이 아닌 최신 버전일 경우, &lt;code&gt;kubeadm init&lt;/code&gt; 실행 시에 경고 메세지를 볼 수 있는데, 단순 테스트 클러스터이므로 무시하고 넘어간다.)&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt; sudo apt update
 sudo apt install -y apt-transport-https ca-certificates software-properties-common curl
 curl -fsSL https://download.docker.com/linux/ubuntu/gpg &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; sudo apt-key add -
 sudo add-apt-repository &lt;span class=&#34;s2&#34;&gt;&amp;#34;deb [arch=amd64] https://download.docker.com/linux/ubuntu &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;lsb_release -cs&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt; stable&amp;#34;&lt;/span&gt;
 sudo apt update
 sudo apt install -y linux-image-extra-&lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;uname -r&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt;
 sudo apt purge lxc-docker docker-engine docker.io
 sudo rm -rf /etc/default/docker
 sudo apt install -y docker-ce
 sudo service docker start
 sudo usermod -aG docker &lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;USER&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;설치된 도커가 정상적으로 구동 중인지 확인해본다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;$ sudo systemctl status docker
● docker.service - Docker Application Container Engine
   Loaded: loaded &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;/lib/systemd/system/docker.service&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; enabled&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; vendor preset: enabled&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
   Active: active &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;running&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; since Thu &lt;span class=&#34;m&#34;&gt;2019&lt;/span&gt;-02-21 &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;:59:36 UTC&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; 9min ago
     Docs: https://docs.docker.com
 Main PID: &lt;span class=&#34;m&#34;&gt;3967&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;dockerd&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    Tasks: &lt;span class=&#34;m&#34;&gt;8&lt;/span&gt;
   CGroup: /system.slice/docker.service
           └─3967 /usr/bin/dockerd -H fd://

Feb &lt;span class=&#34;m&#34;&gt;21&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;:59:36 ip-172-31-12-57 dockerd&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;3967&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: &lt;span class=&#34;nv&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;2019-02-21T10:59:36.367726467Z&amp;#34;&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;level&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;warning &lt;span class=&#34;nv&#34;&gt;msg&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;Your kernel does not support swap memory limit&amp;#34;&lt;/span&gt;
Feb &lt;span class=&#34;m&#34;&gt;21&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;:59:36 ip-172-31-12-57 dockerd&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;3967&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: &lt;span class=&#34;nv&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;2019-02-21T10:59:36.367918689Z&amp;#34;&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;level&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;warning &lt;span class=&#34;nv&#34;&gt;msg&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;Your kernel does not support cgroup rt period&amp;#34;&lt;/span&gt;
Feb &lt;span class=&#34;m&#34;&gt;21&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;:59:36 ip-172-31-12-57 dockerd&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;3967&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: &lt;span class=&#34;nv&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;2019-02-21T10:59:36.368057290Z&amp;#34;&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;level&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;warning &lt;span class=&#34;nv&#34;&gt;msg&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;Your kernel does not support cgroup rt runtime&amp;#34;&lt;/span&gt;
Feb &lt;span class=&#34;m&#34;&gt;21&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;:59:36 ip-172-31-12-57 dockerd&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;3967&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: &lt;span class=&#34;nv&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;2019-02-21T10:59:36.373962370Z&amp;#34;&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;level&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;info &lt;span class=&#34;nv&#34;&gt;msg&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;Loading containers: start.&amp;#34;&lt;/span&gt;
Feb &lt;span class=&#34;m&#34;&gt;21&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;:59:36 ip-172-31-12-57 dockerd&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;3967&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: &lt;span class=&#34;nv&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;2019-02-21T10:59:36.495068635Z&amp;#34;&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;level&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;info &lt;span class=&#34;nv&#34;&gt;msg&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;Default bridge (docker0) is assigned with an IP address 172.17.0.0/16. Daemon option --bip can be used to set a preferred IP address&amp;#34;&lt;/span&gt;
Feb &lt;span class=&#34;m&#34;&gt;21&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;:59:36 ip-172-31-12-57 dockerd&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;3967&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: &lt;span class=&#34;nv&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;2019-02-21T10:59:36.550642079Z&amp;#34;&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;level&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;info &lt;span class=&#34;nv&#34;&gt;msg&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;Loading containers: done.&amp;#34;&lt;/span&gt;
Feb &lt;span class=&#34;m&#34;&gt;21&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;:59:36 ip-172-31-12-57 dockerd&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;3967&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: &lt;span class=&#34;nv&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;2019-02-21T10:59:36.617021161Z&amp;#34;&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;level&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;info &lt;span class=&#34;nv&#34;&gt;msg&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;Docker daemon&amp;#34;&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;commit&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;6247962&lt;/span&gt; graphdriver&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;s&lt;span class=&#34;o&#34;&gt;)=&lt;/span&gt;overlay2 &lt;span class=&#34;nv&#34;&gt;version&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;18&lt;/span&gt;.09.2
Feb &lt;span class=&#34;m&#34;&gt;21&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;:59:36 ip-172-31-12-57 dockerd&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;3967&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: &lt;span class=&#34;nv&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;2019-02-21T10:59:36.617452962Z&amp;#34;&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;level&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;info &lt;span class=&#34;nv&#34;&gt;msg&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;Daemon has completed initialization&amp;#34;&lt;/span&gt;
Feb &lt;span class=&#34;m&#34;&gt;21&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;:59:36 ip-172-31-12-57 systemd&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: Started Docker Application Container Engine.
Feb &lt;span class=&#34;m&#34;&gt;21&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;:59:36 ip-172-31-12-57 dockerd&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;3967&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: &lt;span class=&#34;nv&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;2019-02-21T10:59:36.647031257Z&amp;#34;&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;level&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;info &lt;span class=&#34;nv&#34;&gt;msg&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;API listen on /var/run/docker.sock&amp;#34;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&#34;kubeadm-kubectl-설치&#34;&gt;kubeadm, kubectl 설치&lt;/h3&gt;

&lt;p&gt;다음으로 &lt;code&gt;root&lt;/code&gt; 계정으로 전환하여, &lt;code&gt;kubeadm&lt;/code&gt;과 &lt;code&gt;kubectl&lt;/code&gt;을 설치한다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;$ apt-get update &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; apt-get install -y apt-transport-https curl
$ curl -s https://packages.cloud.google.com/apt/doc/apt-key.gpg &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; apt-key add -
$ cat &lt;span class=&#34;s&#34;&gt;&amp;lt;&amp;lt;EOF &amp;gt;/etc/apt/sources.list.d/kubernetes.list
&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;deb https://apt.kubernetes.io/ kubernetes-xenial main
&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;EOF&lt;/span&gt;
$ apt-get update
$ apt-get install -y kubelet kubeadm kubectl
$ apt-mark hold kubelet kubeadm kubectl&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;그리고 설치된 &lt;code&gt;kubelet&lt;/code&gt; 서비스의 상태를 확인해보자.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;$ systemctl status kubelet.service
● kubelet.service - kubelet: The Kubernetes Node Agent
   Loaded: loaded &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;/lib/systemd/system/kubelet.service&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; enabled&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; vendor preset: enabled&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
  Drop-In: /etc/systemd/system/kubelet.service.d
           └─10-kubeadm.conf
   Active: active &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;running&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; since Thu &lt;span class=&#34;m&#34;&gt;2019&lt;/span&gt;-02-21 &lt;span class=&#34;m&#34;&gt;11&lt;/span&gt;:25:38 UTC&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; 6min ago
     Docs: https://kubernetes.io/docs/home/
 Main PID: &lt;span class=&#34;m&#34;&gt;8119&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;kubelet&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
    Tasks: &lt;span class=&#34;m&#34;&gt;16&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;limit: &lt;span class=&#34;m&#34;&gt;4704&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
   CGroup: /system.slice/kubelet.service
           └─8119 /usr/bin/kubelet --bootstrap-kubeconfig&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;/etc/kubernetes/bootstrap-kubelet.conf --kubeconfig&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;/etc/kubernetes/kubelet.conf --config&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;/var/lib/kubelet/config.yaml --cgroup-driver&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;cgroupfs --network-plugin&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;cni --pod-infra-con

Feb &lt;span class=&#34;m&#34;&gt;21&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;11&lt;/span&gt;:31:49 ip-172-31-31-2 kubelet&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;8119&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: W0221 &lt;span class=&#34;m&#34;&gt;11&lt;/span&gt;:31:49.001095    &lt;span class=&#34;m&#34;&gt;8119&lt;/span&gt; cni.go:203&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Unable to update cni config: No networks found in /etc/cni/net.d
Feb &lt;span class=&#34;m&#34;&gt;21&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;11&lt;/span&gt;:31:49 ip-172-31-31-2 kubelet&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;8119&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: E0221 &lt;span class=&#34;m&#34;&gt;11&lt;/span&gt;:31:49.001212    &lt;span class=&#34;m&#34;&gt;8119&lt;/span&gt; kubelet.go:2192&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Container runtime network not ready: &lt;span class=&#34;nv&#34;&gt;NetworkReady&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;false&lt;/span&gt; reason:NetworkPluginNotReady message:docker: network plugin is not ready: cni config unin
Feb &lt;span class=&#34;m&#34;&gt;21&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;11&lt;/span&gt;:31:54 ip-172-31-31-2 kubelet&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;8119&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: W0221 &lt;span class=&#34;m&#34;&gt;11&lt;/span&gt;:31:54.002280    &lt;span class=&#34;m&#34;&gt;8119&lt;/span&gt; cni.go:203&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Unable to update cni config: No networks found in /etc/cni/net.d
Feb &lt;span class=&#34;m&#34;&gt;21&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;11&lt;/span&gt;:31:54 ip-172-31-31-2 kubelet&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;8119&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: E0221 &lt;span class=&#34;m&#34;&gt;11&lt;/span&gt;:31:54.002852    &lt;span class=&#34;m&#34;&gt;8119&lt;/span&gt; kubelet.go:2192&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Container runtime network not ready: &lt;span class=&#34;nv&#34;&gt;NetworkReady&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;false&lt;/span&gt; reason:NetworkPluginNotReady message:docker: network plugin is not ready: cni config unin
Feb &lt;span class=&#34;m&#34;&gt;21&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;11&lt;/span&gt;:31:59 ip-172-31-31-2 kubelet&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;8119&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: W0221 &lt;span class=&#34;m&#34;&gt;11&lt;/span&gt;:31:59.003915    &lt;span class=&#34;m&#34;&gt;8119&lt;/span&gt; cni.go:203&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Unable to update cni config: No networks found in /etc/cni/net.d
Feb &lt;span class=&#34;m&#34;&gt;21&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;11&lt;/span&gt;:31:59 ip-172-31-31-2 kubelet&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;8119&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: E0221 &lt;span class=&#34;m&#34;&gt;11&lt;/span&gt;:31:59.004424    &lt;span class=&#34;m&#34;&gt;8119&lt;/span&gt; kubelet.go:2192&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Container runtime network not ready: &lt;span class=&#34;nv&#34;&gt;NetworkReady&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;false&lt;/span&gt; reason:NetworkPluginNotReady message:docker: network plugin is not ready: cni config unin
Feb &lt;span class=&#34;m&#34;&gt;21&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;11&lt;/span&gt;:32:04 ip-172-31-31-2 kubelet&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;8119&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: W0221 &lt;span class=&#34;m&#34;&gt;11&lt;/span&gt;:32:04.005500    &lt;span class=&#34;m&#34;&gt;8119&lt;/span&gt; cni.go:203&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Unable to update cni config: No networks found in /etc/cni/net.d
Feb &lt;span class=&#34;m&#34;&gt;21&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;11&lt;/span&gt;:32:04 ip-172-31-31-2 kubelet&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;8119&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: E0221 &lt;span class=&#34;m&#34;&gt;11&lt;/span&gt;:32:04.005984    &lt;span class=&#34;m&#34;&gt;8119&lt;/span&gt; kubelet.go:2192&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Container runtime network not ready: &lt;span class=&#34;nv&#34;&gt;NetworkReady&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;false&lt;/span&gt; reason:NetworkPluginNotReady message:docker: network plugin is not ready: cni config unin
Feb &lt;span class=&#34;m&#34;&gt;21&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;11&lt;/span&gt;:32:09 ip-172-31-31-2 kubelet&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;8119&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: W0221 &lt;span class=&#34;m&#34;&gt;11&lt;/span&gt;:32:09.007029    &lt;span class=&#34;m&#34;&gt;8119&lt;/span&gt; cni.go:203&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Unable to update cni config: No networks found in /etc/cni/net.d&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&#34;kubeadm-초기화&#34;&gt;kubeadm 초기화&lt;/h3&gt;

&lt;p&gt;정상적으로 설치가 되었으면, &lt;code&gt;kubeadm init&lt;/code&gt; 명령을 이용해 현재 노드를 마스터 노드로 초기화한다. 이 때, 호스트 네트워크와 Pod 네트워크가 중복되는 경우 &lt;code&gt;--pod-network-cidr&lt;/code&gt; 옵션으로 Pod 네트워크를 위한 별도의 CIDR 값 (예. &lt;code&gt;10.10.0.0/16&lt;/code&gt;) 등을 지정할 수 있다. &lt;code&gt;kubeadm init&lt;/code&gt; 외에 다른 명령어들은 &lt;a href=&#34;https://kubernetes.io/docs/reference/setup-tools/kubeadm/kubeadm/&#34; target=&#34;_blank&#34;&gt;여기&lt;/a&gt;를 참고한다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;$ kubeadm init 
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;init&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Using Kubernetes version: v1.13.3
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;preflight&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Running pre-flight checks
        &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;WARNING SystemVerification&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: this Docker version is not on the list of validated versions: &lt;span class=&#34;m&#34;&gt;18&lt;/span&gt;.09.2. Latest validated version: &lt;span class=&#34;m&#34;&gt;18&lt;/span&gt;.06
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;preflight&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Pulling images required &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; setting up a Kubernetes cluster
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;preflight&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; This might take a minute or two, depending on the speed of your internet connection
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;preflight&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; You can also perform this action in beforehand using &lt;span class=&#34;s1&#34;&gt;&amp;#39;kubeadm config images pull&amp;#39;&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;kubelet-start&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Writing kubelet environment file with flags to file &lt;span class=&#34;s2&#34;&gt;&amp;#34;/var/lib/kubelet/kubeadm-flags.env&amp;#34;&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;kubelet-start&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Writing kubelet configuration to file &lt;span class=&#34;s2&#34;&gt;&amp;#34;/var/lib/kubelet/config.yaml&amp;#34;&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;kubelet-start&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Activating the kubelet service
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;certs&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Using certificateDir folder &lt;span class=&#34;s2&#34;&gt;&amp;#34;/etc/kubernetes/pki&amp;#34;&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;certs&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Generating &lt;span class=&#34;s2&#34;&gt;&amp;#34;etcd/ca&amp;#34;&lt;/span&gt; certificate and key
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;certs&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Generating &lt;span class=&#34;s2&#34;&gt;&amp;#34;etcd/healthcheck-client&amp;#34;&lt;/span&gt; certificate and key
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;certs&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Generating &lt;span class=&#34;s2&#34;&gt;&amp;#34;apiserver-etcd-client&amp;#34;&lt;/span&gt; certificate and key
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;certs&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Generating &lt;span class=&#34;s2&#34;&gt;&amp;#34;etcd/server&amp;#34;&lt;/span&gt; certificate and key
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;certs&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; etcd/server serving cert is signed &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; DNS names &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;ip-172-31-31-2 localhost&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; and IPs &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;172&lt;/span&gt;.31.31.2 &lt;span class=&#34;m&#34;&gt;127&lt;/span&gt;.0.0.1 ::1&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;certs&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Generating &lt;span class=&#34;s2&#34;&gt;&amp;#34;etcd/peer&amp;#34;&lt;/span&gt; certificate and key
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;certs&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; etcd/peer serving cert is signed &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; DNS names &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;ip-172-31-31-2 localhost&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; and IPs &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;172&lt;/span&gt;.31.31.2 &lt;span class=&#34;m&#34;&gt;127&lt;/span&gt;.0.0.1 ::1&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;certs&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Generating &lt;span class=&#34;s2&#34;&gt;&amp;#34;ca&amp;#34;&lt;/span&gt; certificate and key
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;certs&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Generating &lt;span class=&#34;s2&#34;&gt;&amp;#34;apiserver&amp;#34;&lt;/span&gt; certificate and key
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;certs&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; apiserver serving cert is signed &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; DNS names &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;ip-172-31-31-2 kubernetes kubernetes.default kubernetes.default.svc kubernetes.default.svc.cluster.local&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; and IPs &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;.96.0.1 &lt;span class=&#34;m&#34;&gt;172&lt;/span&gt;.31.31.2&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;certs&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Generating &lt;span class=&#34;s2&#34;&gt;&amp;#34;apiserver-kubelet-client&amp;#34;&lt;/span&gt; certificate and key
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;certs&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Generating &lt;span class=&#34;s2&#34;&gt;&amp;#34;front-proxy-ca&amp;#34;&lt;/span&gt; certificate and key
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;certs&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Generating &lt;span class=&#34;s2&#34;&gt;&amp;#34;front-proxy-client&amp;#34;&lt;/span&gt; certificate and key
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;certs&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Generating &lt;span class=&#34;s2&#34;&gt;&amp;#34;sa&amp;#34;&lt;/span&gt; key and public key
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;kubeconfig&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Using kubeconfig folder &lt;span class=&#34;s2&#34;&gt;&amp;#34;/etc/kubernetes&amp;#34;&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;kubeconfig&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Writing &lt;span class=&#34;s2&#34;&gt;&amp;#34;admin.conf&amp;#34;&lt;/span&gt; kubeconfig file
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;kubeconfig&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Writing &lt;span class=&#34;s2&#34;&gt;&amp;#34;kubelet.conf&amp;#34;&lt;/span&gt; kubeconfig file
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;kubeconfig&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Writing &lt;span class=&#34;s2&#34;&gt;&amp;#34;controller-manager.conf&amp;#34;&lt;/span&gt; kubeconfig file
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;kubeconfig&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Writing &lt;span class=&#34;s2&#34;&gt;&amp;#34;scheduler.conf&amp;#34;&lt;/span&gt; kubeconfig file
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;control-plane&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Using manifest folder &lt;span class=&#34;s2&#34;&gt;&amp;#34;/etc/kubernetes/manifests&amp;#34;&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;control-plane&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Creating static Pod manifest &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;kube-apiserver&amp;#34;&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;control-plane&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Creating static Pod manifest &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;kube-controller-manager&amp;#34;&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;control-plane&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Creating static Pod manifest &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;kube-scheduler&amp;#34;&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;etcd&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Creating static Pod manifest &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;local&lt;/span&gt; etcd in &lt;span class=&#34;s2&#34;&gt;&amp;#34;/etc/kubernetes/manifests&amp;#34;&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;wait-control-plane&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Waiting &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; the kubelet to boot up the control plane as static Pods from directory &lt;span class=&#34;s2&#34;&gt;&amp;#34;/etc/kubernetes/manifests&amp;#34;&lt;/span&gt;. This can take up to 4m0s
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;apiclient&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; All control plane components are healthy after &lt;span class=&#34;m&#34;&gt;23&lt;/span&gt;.502070 seconds
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;uploadconfig&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; storing the configuration used in ConfigMap &lt;span class=&#34;s2&#34;&gt;&amp;#34;kubeadm-config&amp;#34;&lt;/span&gt; in the &lt;span class=&#34;s2&#34;&gt;&amp;#34;kube-system&amp;#34;&lt;/span&gt; Namespace
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;kubelet&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Creating a ConfigMap &lt;span class=&#34;s2&#34;&gt;&amp;#34;kubelet-config-1.13&amp;#34;&lt;/span&gt; in namespace kube-system with the configuration &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; the kubelets in the cluster
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;patchnode&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Uploading the CRI Socket information &lt;span class=&#34;s2&#34;&gt;&amp;#34;/var/run/dockershim.sock&amp;#34;&lt;/span&gt; to the Node API object &lt;span class=&#34;s2&#34;&gt;&amp;#34;ip-172-31-31-2&amp;#34;&lt;/span&gt; as an annotation
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;mark-control-plane&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Marking the node ip-172-31-31-2 as control-plane by adding the label &lt;span class=&#34;s2&#34;&gt;&amp;#34;node-role.kubernetes.io/master=&amp;#39;&amp;#39;&amp;#34;&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;mark-control-plane&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Marking the node ip-172-31-31-2 as control-plane by adding the taints &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;node-role.kubernetes.io/master:NoSchedule&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;bootstrap-token&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Using token: 0kgx7r.fd4z6rmq6me24e5f
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;bootstrap-token&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Configuring bootstrap tokens, cluster-info ConfigMap, RBAC Roles
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;bootstraptoken&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; configured RBAC rules to allow Node Bootstrap tokens to post CSRs in order &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; nodes to get long term certificate credentials
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;bootstraptoken&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; configured RBAC rules to allow the csrapprover controller automatically approve CSRs from a Node Bootstrap Token
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;bootstraptoken&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; configured RBAC rules to allow certificate rotation &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; all node client certificates in the cluster
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;bootstraptoken&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; creating the &lt;span class=&#34;s2&#34;&gt;&amp;#34;cluster-info&amp;#34;&lt;/span&gt; ConfigMap in the &lt;span class=&#34;s2&#34;&gt;&amp;#34;kube-public&amp;#34;&lt;/span&gt; namespace
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;addons&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Applied essential addon: CoreDNS
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;addons&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Applied essential addon: kube-proxy

Your Kubernetes master has initialized successfully!

To start using your cluster, you need to run the following as a regular user:

  mkdir -p &lt;span class=&#34;nv&#34;&gt;$HOME&lt;/span&gt;/.kube
  sudo cp -i /etc/kubernetes/admin.conf &lt;span class=&#34;nv&#34;&gt;$HOME&lt;/span&gt;/.kube/config
  sudo chown &lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;id -u&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt;:&lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;id -g&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$HOME&lt;/span&gt;/.kube/config

You should now deploy a pod network to the cluster.
Run &lt;span class=&#34;s2&#34;&gt;&amp;#34;kubectl apply -f [podnetwork].yaml&amp;#34;&lt;/span&gt; with one of the options listed at:
  https://kubernetes.io/docs/concepts/cluster-administration/addons/

You can now join any number of machines by running the following on each node
as root:

  kubeadm join &lt;span class=&#34;m&#34;&gt;172&lt;/span&gt;.31.31.2:6443 --token 0kgx7r.fd4z6rmq6me24e5f --discovery-token-ca-cert-hash sha256:d7b433408e75b50b0722e7b0cdef9d0199fa8079de51e6def9c2effb763c72bb&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;초기화 과정의 로그 메세지들을 간략히 살펴보자.&lt;/p&gt;

&lt;h4 id=&#34;쿠버네티스-버전&#34;&gt;쿠버네티스 버전&lt;/h4&gt;

&lt;p&gt;먼저 설치되는 쿠버네티스의 버전은 &lt;code&gt;v1.13.3&lt;/code&gt;이다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;init&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Using Kubernetes version: v1.13.3&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id=&#34;도커-버전&#34;&gt;도커 버전&lt;/h4&gt;

&lt;p&gt;유효한 도커 버전은 &lt;code&gt;18.06&lt;/code&gt; 인데, 버전이 맞지 않다는 경고 메세지를 볼 수 있다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;preflight&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Running pre-flight checks
        &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;WARNING SystemVerification&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: this Docker version is not on the list of validated versions: &lt;span class=&#34;m&#34;&gt;18&lt;/span&gt;.09.2. Latest validated version: &lt;span class=&#34;m&#34;&gt;18&lt;/span&gt;.06&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id=&#34;kubelet-서비스-활성화&#34;&gt;kubelet 서비스 활성화&lt;/h4&gt;

&lt;p&gt;&lt;code&gt;kubelet&lt;/code&gt; 환경변수와 설정파일을 기록하고 &lt;code&gt;kubelet&lt;/code&gt; 서비스를 시작한다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;kubelet-start&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Writing kubelet environment file with flags to file &lt;span class=&#34;s2&#34;&gt;&amp;#34;/var/lib/kubelet/kubeadm-flags.env&amp;#34;&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;kubelet-start&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Writing kubelet configuration to file &lt;span class=&#34;s2&#34;&gt;&amp;#34;/var/lib/kubelet/config.yaml&amp;#34;&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;kubelet-start&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Activating the kubelet service&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id=&#34;인증서-생성&#34;&gt;인증서 생성&lt;/h4&gt;

&lt;p&gt;다음으로 쿠버네티스 컴포넌트들이 시큐한 방식으로 통신하기 위한 인증서를 만든다. 보다시피, &lt;a href=&#34;https://github.com/kelseyhightower/kubernetes-the-hard-way&#34; target=&#34;_blank&#34;&gt;Kubernetes the Hardway&lt;/a&gt;에서는 컴포넌트마다 일일히 인증서를 만들어주고 등록해줘야 하는 번거로운 작업이 &lt;code&gt;kubeadm&lt;/code&gt;에서는 간단하게 완료된다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;certs&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Using certificateDir folder &lt;span class=&#34;s2&#34;&gt;&amp;#34;/etc/kubernetes/pki&amp;#34;&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;certs&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Generating &lt;span class=&#34;s2&#34;&gt;&amp;#34;etcd/ca&amp;#34;&lt;/span&gt; certificate and key
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;certs&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Generating &lt;span class=&#34;s2&#34;&gt;&amp;#34;etcd/healthcheck-client&amp;#34;&lt;/span&gt; certificate and key
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;certs&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Generating &lt;span class=&#34;s2&#34;&gt;&amp;#34;apiserver-etcd-client&amp;#34;&lt;/span&gt; certificate and key
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;certs&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Generating &lt;span class=&#34;s2&#34;&gt;&amp;#34;etcd/server&amp;#34;&lt;/span&gt; certificate and key
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;certs&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; etcd/server serving cert is signed &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; DNS names &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;ip-172-31-31-2 localhost&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; and IPs &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;172&lt;/span&gt;.31.31.2 &lt;span class=&#34;m&#34;&gt;127&lt;/span&gt;.0.0.1 ::1&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;certs&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Generating &lt;span class=&#34;s2&#34;&gt;&amp;#34;etcd/peer&amp;#34;&lt;/span&gt; certificate and key
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;certs&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; etcd/peer serving cert is signed &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; DNS names &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;ip-172-31-31-2 localhost&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; and IPs &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;172&lt;/span&gt;.31.31.2 &lt;span class=&#34;m&#34;&gt;127&lt;/span&gt;.0.0.1 ::1&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;certs&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Generating &lt;span class=&#34;s2&#34;&gt;&amp;#34;ca&amp;#34;&lt;/span&gt; certificate and key
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;certs&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Generating &lt;span class=&#34;s2&#34;&gt;&amp;#34;apiserver&amp;#34;&lt;/span&gt; certificate and key
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;certs&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; apiserver serving cert is signed &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; DNS names &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;ip-172-31-31-2 kubernetes kubernetes.default kubernetes.default.svc kubernetes.default.svc.cluster.local&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; and IPs &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;.96.0.1 &lt;span class=&#34;m&#34;&gt;172&lt;/span&gt;.31.31.2&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;certs&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Generating &lt;span class=&#34;s2&#34;&gt;&amp;#34;apiserver-kubelet-client&amp;#34;&lt;/span&gt; certificate and key
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;certs&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Generating &lt;span class=&#34;s2&#34;&gt;&amp;#34;front-proxy-ca&amp;#34;&lt;/span&gt; certificate and key
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;certs&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Generating &lt;span class=&#34;s2&#34;&gt;&amp;#34;front-proxy-client&amp;#34;&lt;/span&gt; certificate and key
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;certs&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Generating &lt;span class=&#34;s2&#34;&gt;&amp;#34;sa&amp;#34;&lt;/span&gt; key and public key&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id=&#34;kubeconfig-생성&#34;&gt;kubeconfig 생성&lt;/h4&gt;

&lt;p&gt;그리고 API 서버와 통신하기 위한 &lt;code&gt;kubeconfig&lt;/code&gt; 들을 생성한다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;kubeconfig&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Using kubeconfig folder &lt;span class=&#34;s2&#34;&gt;&amp;#34;/etc/kubernetes&amp;#34;&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;kubeconfig&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Writing &lt;span class=&#34;s2&#34;&gt;&amp;#34;admin.conf&amp;#34;&lt;/span&gt; kubeconfig file
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;kubeconfig&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Writing &lt;span class=&#34;s2&#34;&gt;&amp;#34;kubelet.conf&amp;#34;&lt;/span&gt; kubeconfig file
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;kubeconfig&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Writing &lt;span class=&#34;s2&#34;&gt;&amp;#34;controller-manager.conf&amp;#34;&lt;/span&gt; kubeconfig file
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;kubeconfig&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Writing &lt;span class=&#34;s2&#34;&gt;&amp;#34;scheduler.conf&amp;#34;&lt;/span&gt; kubeconfig file&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id=&#34;정적-pod-실행&#34;&gt;정적 Pod 실행&lt;/h4&gt;

&lt;p&gt;컨트롤 플레인의 모든 컴포넌트들의 시작점인 &lt;code&gt;/etc/kubernetes/manifests&lt;/code&gt;를 기준으로 정적 Pod를 실행한다. &lt;code&gt;kubectl&lt;/code&gt; 은 두 가지 모드로 동작하는데, 한 가지는 Kubernetes API 서버에 대한 원격 에이전트 모드이고, 다른 하나는 정적 Pod 모드로 다른 원격 서버의 파일 시스템이 아닌 로컬디스크의 파일시스템으로 정비된 Pod을 실행되는 모드이다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;control-plane&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Using manifest folder &lt;span class=&#34;s2&#34;&gt;&amp;#34;/etc/kubernetes/manifests&amp;#34;&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;control-plane&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Creating static Pod manifest &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;kube-apiserver&amp;#34;&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;control-plane&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Creating static Pod manifest &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;kube-controller-manager&amp;#34;&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;control-plane&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Creating static Pod manifest &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;kube-scheduler&amp;#34;&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;etcd&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Creating static Pod manifest &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;local&lt;/span&gt; etcd in &lt;span class=&#34;s2&#34;&gt;&amp;#34;/etc/kubernetes/manifests&amp;#34;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;참고로 &lt;code&gt;kube-apiserver&lt;/code&gt;의 yaml 파일의 내용은 다음과 같이 단순한 하나의 Pod로 구성되어 있다. 즉, 쿠버네티스 컨트롤 플레인 역시도 일반 애플리케이션들처럼 쿠버네티스 컴포넌트로 생성되고 관리되고 있다는 점을 알 수 있다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;apiVersion&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;v1&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;kind&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;Pod&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;metadata&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;annotations&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;scheduler.alpha.kubernetes.io/critical-pod&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;creationTimestamp&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;null&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;labels&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;component&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;kube-apiserver&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;tier&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;control-plane&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;kube-apiserver&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;namespace&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;kube-system&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;spec&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;containers&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;command&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;kube-apiserver&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;--authorization-mode=Node&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;RBAC&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;--advertise-address=&lt;span class=&#34;m&#34;&gt;172.31&lt;/span&gt;.&lt;span class=&#34;m&#34;&gt;31.2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;--allow-privileged=&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;--client-ca-file=/etc/kubernetes/pki/ca.crt&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;--enable-admission-plugins=NodeRestriction&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;--enable-bootstrap-token-auth=&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;--etcd-cafile=/etc/kubernetes/pki/etcd/ca.crt&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;--etcd-certfile=/etc/kubernetes/pki/apiserver-etcd-client.crt&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;--etcd-keyfile=/etc/kubernetes/pki/apiserver-etcd-client.key&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;--etcd-servers=https&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;//&lt;span class=&#34;m&#34;&gt;127.0&lt;/span&gt;.&lt;span class=&#34;m&#34;&gt;0.1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;2379&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;--insecure-port=&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;--kubelet-client-certificate=/etc/kubernetes/pki/apiserver-kubelet-client.crt&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;--kubelet-client-key=/etc/kubernetes/pki/apiserver-kubelet-client.key&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;--kubelet-preferred-address-types=InternalIP&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;ExternalIP&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;Hostname&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;--proxy-client-cert-file=/etc/kubernetes/pki/front-proxy-client.crt&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;--proxy-client-key-file=/etc/kubernetes/pki/front-proxy-client.key&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;--requestheader-allowed-names=front-proxy-client&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;--requestheader-client-ca-file=/etc/kubernetes/pki/front-proxy-ca.crt&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;--requestheader-extra-headers-prefix=X-Remote-Extra-&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;--requestheader-group-headers=X-Remote-Group&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;--requestheader-username-headers=X-Remote-User&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;--secure-port=&lt;span class=&#34;m&#34;&gt;6443&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;--service-account-key-file=/etc/kubernetes/pki/sa.pub&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;--service-cluster-ip-range=&lt;span class=&#34;m&#34;&gt;10.96&lt;/span&gt;.&lt;span class=&#34;m&#34;&gt;0.0&lt;/span&gt;/&lt;span class=&#34;m&#34;&gt;12&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;--tls-cert-file=/etc/kubernetes/pki/apiserver.crt&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;--tls-private-key-file=/etc/kubernetes/pki/apiserver.key&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;image&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;k8s.gcr.io/kube-apiserver&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;v1.&lt;span class=&#34;m&#34;&gt;13.3&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;imagePullPolicy&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;IfNotPresent&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;livenessProbe&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;failureThreshold&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;8&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;httpGet&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;host&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;172.31&lt;/span&gt;.&lt;span class=&#34;m&#34;&gt;31.2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;path&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;/healthz&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;port&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;6443&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;scheme&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;HTTPS&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;initialDelaySeconds&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;15&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;timeoutSeconds&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;15&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;kube-apiserver&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;resources&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;requests&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;cpu&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;250m&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;volumeMounts&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;mountPath&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;/etc/ssl/certs&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;ca-certs&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;readOnly&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;mountPath&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;/etc/ca-certificates&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;etc-ca-certificates&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;readOnly&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;mountPath&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;/etc/kubernetes/pki&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;k8s-certs&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;readOnly&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;mountPath&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;/usr/local/share/ca-certificates&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;usr-local-share-ca-certificates&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;readOnly&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;mountPath&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;/usr/share/ca-certificates&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;usr-share-ca-certificates&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;readOnly&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;hostNetwork&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;priorityClassName&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;system-cluster-critical&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;volumes&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;hostPath&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;path&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;/etc/ssl/certs&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;type&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;DirectoryOrCreate&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;ca-certs&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;hostPath&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;path&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;/etc/ca-certificates&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;type&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;DirectoryOrCreate&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;etc-ca-certificates&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;hostPath&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;path&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;/etc/kubernetes/pki&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;type&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;DirectoryOrCreate&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;k8s-certs&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;hostPath&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;path&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;/usr/local/share/ca-certificates&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;type&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;DirectoryOrCreate&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;usr-local-share-ca-certificates&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;hostPath&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;path&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;/usr/share/ca-certificates&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;type&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;DirectoryOrCreate&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;usr-share-ca-certificates&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;status&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;{}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&#34;컨트롤-플레인-셋업-완료&#34;&gt;컨트롤 플레인 셋업 완료&lt;/h3&gt;

&lt;p&gt;컨트롤 플레인의 헬스체크가 끝나고, 클러스터 설정 정보인 &lt;code&gt;kubeadm-config&lt;/code&gt; ConfigMap을 &lt;code&gt;kube-system&lt;/code&gt; 네임스페이스에 저장한다. &lt;code&gt;/var/run/dockershim.sock&lt;/code&gt; CRI 소켓 정보를 주석으로 등록하고 컨트롤 플레인 노드를 마킹하여 마스터 노드 셋업을 완료된다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;apiclient&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; All control plane components are healthy after &lt;span class=&#34;m&#34;&gt;23&lt;/span&gt;.502070 seconds
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;uploadconfig&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; storing the configuration used in ConfigMap &lt;span class=&#34;s2&#34;&gt;&amp;#34;kubeadm-config&amp;#34;&lt;/span&gt; in the &lt;span class=&#34;s2&#34;&gt;&amp;#34;kube-system&amp;#34;&lt;/span&gt; Namespace
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;kubelet&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Creating a ConfigMap &lt;span class=&#34;s2&#34;&gt;&amp;#34;kubelet-config-1.13&amp;#34;&lt;/span&gt; in namespace kube-system with the configuration &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; the kubelets in the cluster
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;patchnode&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Uploading the CRI Socket information &lt;span class=&#34;s2&#34;&gt;&amp;#34;/var/run/dockershim.sock&amp;#34;&lt;/span&gt; to the Node API object &lt;span class=&#34;s2&#34;&gt;&amp;#34;ip-172-31-31-2&amp;#34;&lt;/span&gt; as an annotation
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;mark-control-plane&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Marking the node ip-172-31-31-2 as control-plane by adding the label &lt;span class=&#34;s2&#34;&gt;&amp;#34;node-role.kubernetes.io/master=&amp;#39;&amp;#39;&amp;#34;&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;mark-control-plane&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Marking the node ip-172-31-31-2 as control-plane by adding the taints &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;node-role.kubernetes.io/master:NoSchedule&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&#34;rbac-및-기타&#34;&gt;RBAC 및 기타&lt;/h3&gt;

&lt;p&gt;그리고 부트스트랩 토큰을 생성하고, 생성된 토큰으로 RBAC 룰을 구성한다. 그리고 클러스터 정보를 &lt;code&gt;kube-public&lt;/code&gt; 네임스페이스에 ConfigMap 컴포넌트로 등록한다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;bootstrap-token&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Using token: 0kgx7r.fd4z6rmq6me24e5f
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;bootstrap-token&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Configuring bootstrap tokens, cluster-info ConfigMap, RBAC Roles
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;bootstraptoken&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; configured RBAC rules to allow Node Bootstrap tokens to post CSRs in order &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; nodes to get long term certificate credentials
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;bootstraptoken&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; configured RBAC rules to allow the csrapprover controller automatically approve CSRs from a Node Bootstrap Token
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;bootstraptoken&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; configured RBAC rules to allow certificate rotation &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; all node client certificates in the cluster
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;bootstraptoken&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; creating the &lt;span class=&#34;s2&#34;&gt;&amp;#34;cluster-info&amp;#34;&lt;/span&gt; ConfigMap in the &lt;span class=&#34;s2&#34;&gt;&amp;#34;kube-public&amp;#34;&lt;/span&gt; namespace&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이후, EC2 다른 워커 노드에서 위 ConfigMap의 컴포넌트를 다음과 같이 확인할 수 있다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;$ curl --insecure  https://172.31.31.2:6443/api/v1/namespaces/kube-public/configmaps/cluster-info
&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;s2&#34;&gt;&amp;#34;kind&amp;#34;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;ConfigMap&amp;#34;&lt;/span&gt;,
  &lt;span class=&#34;s2&#34;&gt;&amp;#34;apiVersion&amp;#34;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;v1&amp;#34;&lt;/span&gt;,
  &lt;span class=&#34;s2&#34;&gt;&amp;#34;metadata&amp;#34;&lt;/span&gt;: &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;s2&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;cluster-info&amp;#34;&lt;/span&gt;,
    &lt;span class=&#34;s2&#34;&gt;&amp;#34;namespace&amp;#34;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;kube-public&amp;#34;&lt;/span&gt;,
    &lt;span class=&#34;s2&#34;&gt;&amp;#34;selfLink&amp;#34;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;/api/v1/namespaces/kube-public/configmaps/cluster-info&amp;#34;&lt;/span&gt;,
    &lt;span class=&#34;s2&#34;&gt;&amp;#34;uid&amp;#34;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;74cce7cf-35cb-11e9-b7a0-0a1483891ff6&amp;#34;&lt;/span&gt;,
    &lt;span class=&#34;s2&#34;&gt;&amp;#34;resourceVersion&amp;#34;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;324&amp;#34;&lt;/span&gt;,
    &lt;span class=&#34;s2&#34;&gt;&amp;#34;creationTimestamp&amp;#34;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;2019-02-21T11:25:56Z&amp;#34;&lt;/span&gt;
  &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;,
  &lt;span class=&#34;s2&#34;&gt;&amp;#34;data&amp;#34;&lt;/span&gt;: &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;s2&#34;&gt;&amp;#34;jws-kubeconfig-0kgx7r&amp;#34;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;eyJhbGciOiJIUzI1NiIsImtpZCI6IjBrZ3g3ciJ9..K6bdmWXxnjfxLXzzRpWMCGdYxmJAyP9fYEfHCDm8N7E&amp;#34;&lt;/span&gt;,
    &lt;span class=&#34;s2&#34;&gt;&amp;#34;kubeconfig&amp;#34;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;apiVersion: v1\nclusters:\n- cluster:\n    certificate-authority-data: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUN5RENDQWJDZ0F3SUJBZ0lCQURBTkJna3Foa2lHOXcwQkFRc0ZBREFWTVJNd0VRWURWUVFERXdwcmRXSmwKY201bGRHVnpNQjRYRFRFNU1ESXlNVEV4TWpVeU9Wb1hEVEk1TURJeE9ERXhNalV5T1Zvd0ZURVRNQkVHQTFVRQpBeE1LYTNWaVpYSnVaWFJsY3pDQ0FTSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUJBS1RjCjJmSWVYS1pyMEJhbS9mUnVRdWpyQ3FUOXlRRTJGckRNcGNvK3pyNi9ZaGJkU3hYM3A4OE1tZUduK2hZVUluOGEKamhEejJ0VTlHMldaQm5PTFd6dmFjZkhqYUw4ZGJya2FUYUo5NjM4SHVuVkhxQmNMR3lySnFLY203Z2xYdm5rRApxazVES1l2NFJObzJHRnRuelFTNEdXdGhhbXk1QlBadiszQzdRWVlsRDRKWWpYaWdhak5GNFpHOU1INENwNlRICnhrbDRJZ1FqTzJ3aTJOeEE5TDNpV2VZRnZEMk0zUmppNzhKSkFuN3lKREZlR0NtRHYycGE3ZHprcUJhdFAzTWEKWUozbWpUcndaOGF1eDNDa0FNNDltamM2ZEJ5WkpkSFY4a2xTSUNtb2NUK0g5REtnUWdTZXV5bitXZm8wNkg0cQpZT3FqOVYvam9peXMzcHZaTXE4Q0F3RUFBYU1qTUNFd0RnWURWUjBQQVFIL0JBUURBZ0trTUE4R0ExVWRFd0VCCi93UUZNQU1CQWY4d0RRWUpLb1pJaHZjTkFRRUxCUUFEZ2dFQkFERmJlbXV1NXhZNVVMNi9EU0VrK1UyU1V0SWwKQ3JLVEJDc2ZiVkFaNVlGQUdHYi96RFFNb0RTc1pQSVJ5aGdHNGhYMVdnZWV1YWo3aXBSNEt1VHNXc2V0Q2ZpeQpiMjZVMjl6SHFsUlZEN2JtYVk0OENpbURLTGdvbWZKczZmY20xTWdSL1FvemM4QUFlUUZOWEpoaG13V2g5alVXCkpBem85eFVRQWwxSW0rNldXcllrRzk3TkNwMkYxdFFGMGZtcEFjTWQ1cXErdXEwcmdQVmt0QkRkMUNieHdidFcKK25Ea1FjZW4wbGZSNUo3U0NkME45SUFWc2l6RTNYYmxiNmRsMTU2S1NNaEZRb1lZTm8xR0djSkpvd3RxL1FXTgpGcHovaDRLSGdxQnhPVjBVb0ZXYThCaHJFcTduRCtlaUhNYU9ycmgxNTdqS01rME94eXZMcDBLWC9FUT0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=\n    server: https://172.31.31.2:6443\n  name: \&amp;#34;\&amp;#34;\ncontexts: []\ncurrent-context: \&amp;#34;\&amp;#34;\nkind: Config\npreferences: {}\nusers: []\n&amp;#34;&lt;/span&gt;
  &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id=&#34;필수-addon-설치&#34;&gt;필수 Addon 설치&lt;/h4&gt;

&lt;p&gt;마지막으로 필수 애드온인 &lt;code&gt;CoreDNS&lt;/code&gt;와 &lt;code&gt;kube-proxy&lt;/code&gt;를 설치한다. 참고로 Pod 네트워크가 셋업되기 전이므로 &lt;code&gt;CoreDNS&lt;/code&gt; 서비스 등 클러스터 네트워킹 서비스가 정상적으로 시작되지는 않는다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;addons&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Applied essential addon: CoreDNS
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;addons&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Applied essential addon: kube-proxy&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id=&#34;노드-조인-명령&#34;&gt;노드 조인 명령&lt;/h4&gt;

&lt;p&gt;그리고 마스터 노드 초기화 완료시에 최종 출력된, 토큰값과 명령어를 기억해 둔다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;You can now join any number of machines by running the following on each node
as root:
  kubeadm join &lt;span class=&#34;m&#34;&gt;172&lt;/span&gt;.31.31.2:6443 --token 0kgx7r.fd4z6rmq6me24e5f --discovery-token-ca-cert-hash sha256:d7b433408e75b50b0722e7b0cdef9d0199fa8079de51e6def9c2effb763c72bb&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&#34;cluster-조회&#34;&gt;cluster 조회&lt;/h3&gt;

&lt;p&gt;마스터 노드가 생성되었으므로, &lt;code&gt;ubuntu&lt;/code&gt; 사용자 계정으로 전환해서 &lt;code&gt;kubelet&lt;/code&gt;을 실행해보자. 이를 위해선 사용자 홈디렉토리에 &lt;code&gt;kubeconfig&lt;/code&gt; 파일을 다음과 같이 셋업해주어야 한다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt; $ mkdir -p &lt;span class=&#34;nv&#34;&gt;$HOME&lt;/span&gt;/.kube
 $ sudo cp -i /etc/kubernetes/admin.conf &lt;span class=&#34;nv&#34;&gt;$HOME&lt;/span&gt;/.kube/config
 $ sudo chown &lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;id -u&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt;:&lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;id -g&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$HOME&lt;/span&gt;/.kube/config&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;또는 사용자 계정에서 단순히 &lt;code&gt;KUBECONFIG&lt;/code&gt; 환경변수를 설정해주어도 무방하다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;$ &lt;span class=&#34;nb&#34;&gt;export&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;KUBECONFIG&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;/etc/kubernetes/admin.conf&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이제 클러스터 노드 정보를 조회해보자. &lt;code&gt;kubelet&lt;/code&gt;이 정상적으로 실행되고 있고, 마스터 노드가 &lt;code&gt;NotReady&lt;/code&gt; 상태임을 알 수 있다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;$ kubectl get node
NAME             STATUS     ROLES    AGE     VERSION
ip-172-31-31-2   NotReady   master   9m48s   v1.13.3&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&#34;워커-노드-추가&#34;&gt;워커 노드 추가&lt;/h2&gt;

&lt;h3 id=&#34;토큰-확인&#34;&gt;토큰 확인&lt;/h3&gt;

&lt;p&gt;워커 노드를 추가하기 이전에, 마스터 노드에서 토큰 목록을 확인해보자. 보다시피 생성된 &lt;code&gt;0kgx7r.fd4z6rmq6me24e5f&lt;/code&gt; 토큰의 만료시간은 24시간이다. 이 토큰을 이용해 워커 노드를 구성할 수 있다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;root@ip-172-31-31-2:~# kubeadm token list
TOKEN                     TTL       EXPIRES                USAGES                   DESCRIPTION                                                EXTRA GROUPS
0kgx7r.fd4z6rmq6me24e5f   23h       &lt;span class=&#34;m&#34;&gt;2019&lt;/span&gt;-02-22T11:25:56Z   authentication,signing   The default bootstrap token generated by &lt;span class=&#34;s1&#34;&gt;&amp;#39;kubeadm init&amp;#39;&lt;/span&gt;.   system:bootstrappers:kubeadm:default-node-token&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&#34;도커-및-kubeadm-kubelet-설치&#34;&gt;도커 및 kubeadm, kubelet 설치&lt;/h3&gt;

&lt;p&gt;먼저, 워커 노드로 사용할 EC2 인스턴스에 ssh 로그인하여 마스터 노드와 동일하게 도커 및 kubeadm, kubelet을 설치해준다. (동일한 과정이므로 생략)&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;$ ssh -i ~/.ssh/path/to/pem ubuntu@ec2-54-180-103-119.ap-northeast-2.compute.amazonaws.com&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;그리고 워커 노드에 kubeadm 설치가 완료되었으면, 마스터 노드 생성시에 출력된 토큰값과 명령어를 이용해 워커 노드에서 마스터 노드로 조인한다. 보다시피, 명령어 자체는 &lt;code&gt;swarn join&lt;/code&gt;과 유사하다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;root@ip-172-31-22-155:~# kubeadm join &lt;span class=&#34;m&#34;&gt;172&lt;/span&gt;.31.31.2:6443 --token 0kgx7r.fd4z6rmq6me24e5f --discovery-token-ca-cert-hash sha256:d7b433408e75b50b0722e7b0cdef9d0199fa8079de51e6def9c2effb763c72bb
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;preflight&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Running pre-flight checks
        &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;WARNING SystemVerification&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;: this Docker version is not on the list of validated versions: &lt;span class=&#34;m&#34;&gt;18&lt;/span&gt;.09.2. Latest validated version: &lt;span class=&#34;m&#34;&gt;18&lt;/span&gt;.06
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;discovery&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Trying to connect to API Server &lt;span class=&#34;s2&#34;&gt;&amp;#34;172.31.31.2:6443&amp;#34;&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;discovery&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Created cluster-info discovery client, requesting info from &lt;span class=&#34;s2&#34;&gt;&amp;#34;https://172.31.31.2:6443&amp;#34;&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;discovery&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Requesting info from &lt;span class=&#34;s2&#34;&gt;&amp;#34;https://172.31.31.2:6443&amp;#34;&lt;/span&gt; again to validate TLS against the pinned public key
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;discovery&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Cluster info signature and contents are valid and TLS certificate validates against pinned roots, will use API Server &lt;span class=&#34;s2&#34;&gt;&amp;#34;172.31.31.2:6443&amp;#34;&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;discovery&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Successfully established connection with API Server &lt;span class=&#34;s2&#34;&gt;&amp;#34;172.31.31.2:6443&amp;#34;&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;join&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Reading configuration from the cluster...
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;join&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; FYI: You can look at this config file with &lt;span class=&#34;s1&#34;&gt;&amp;#39;kubectl -n kube-system get cm kubeadm-config -oyaml&amp;#39;&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;kubelet&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Downloading configuration &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; the kubelet from the &lt;span class=&#34;s2&#34;&gt;&amp;#34;kubelet-config-1.13&amp;#34;&lt;/span&gt; ConfigMap in the kube-system namespace
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;kubelet-start&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Writing kubelet configuration to file &lt;span class=&#34;s2&#34;&gt;&amp;#34;/var/lib/kubelet/config.yaml&amp;#34;&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;kubelet-start&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Writing kubelet environment file with flags to file &lt;span class=&#34;s2&#34;&gt;&amp;#34;/var/lib/kubelet/kubeadm-flags.env&amp;#34;&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;kubelet-start&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Activating the kubelet service
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;tlsbootstrap&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Waiting &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; the kubelet to perform the TLS Bootstrap...
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;patchnode&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Uploading the CRI Socket information &lt;span class=&#34;s2&#34;&gt;&amp;#34;/var/run/dockershim.sock&amp;#34;&lt;/span&gt; to the Node API object &lt;span class=&#34;s2&#34;&gt;&amp;#34;ip-172-31-22-155&amp;#34;&lt;/span&gt; as an annotation

This node has joined the cluster:
* Certificate signing request was sent to apiserver and a response was received.
* The Kubelet was informed of the new secure connection details.

Run &lt;span class=&#34;s1&#34;&gt;&amp;#39;kubectl get nodes&amp;#39;&lt;/span&gt; on the master to see this node join the cluster.&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&#34;마스터-노드-확인&#34;&gt;마스터 노드 확인&lt;/h3&gt;

&lt;p&gt;마스터 노드 쉘에서 클러스터 노드 정보를 조회하면 다음과 같이 &lt;code&gt;ip-172-31-22-155&lt;/code&gt; 노드 하나가 추가된 것을 확인할 수 있다. 그러나 네트워킹이 셋업되지 않았기 때문에, Pod과 다른 컴포넌트들간의 통신이 불가능한 &lt;code&gt;NotReady&lt;/code&gt; 상태이다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;ubuntu@ip-172-31-31-2:~$ kubectl get node
NAME               STATUS     ROLES    AGE     VERSION
ip-172-31-22-155   NotReady   &amp;lt;none&amp;gt;   3m36s   v1.13.3
ip-172-31-31-2     NotReady   master   18m     v1.13.3&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&#34;pod-network-설정&#34;&gt;Pod Network 설정&lt;/h3&gt;

&lt;p&gt;이제 Pod Network 애드온을 설치해서 Pod가 서로 통신할 수 있도록 한다. 참고로 &lt;code&gt;kubeadm&lt;/code&gt;은 CNI (Container Network Interface) 기반 네트워크만 지원하며 kubenet을 지원하지 않는다. &lt;a href=&#34;https://kubernetes.io/docs/setup/independent/create-cluster-kubeadm/#pod-network&#34; target=&#34;_blank&#34;&gt;여기&lt;/a&gt;를 참조해서 &lt;code&gt;weave-net&lt;/code&gt; 데몬셋을 설치한다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt; ubuntu@ip-172-31-31-2:~$ kubectl apply -f &lt;span class=&#34;s2&#34;&gt;&amp;#34;https://cloud.weave.works/k8s/net?k8s-version=&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;kubectl version &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; base64 &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; tr -d &lt;span class=&#34;s1&#34;&gt;&amp;#39;\n&amp;#39;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;
serviceaccount/weave-net created
clusterrole.rbac.authorization.k8s.io/weave-net created
clusterrolebinding.rbac.authorization.k8s.io/weave-net created
role.rbac.authorization.k8s.io/weave-net created
rolebinding.rbac.authorization.k8s.io/weave-net created
daemonset.extensions/weave-net created&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;설치가 되고 나면, 마스트 노드 쉘에서 다음과 같이 모든 노드가 &lt;code&gt;Ready&lt;/code&gt; 상태로 전환됨을 확인할 수 있다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;ubuntu@ip-172-31-31-2:~$ kubectl get node
NAME               STATUS   ROLES    AGE   VERSION
ip-172-31-22-155   Ready    &amp;lt;none&amp;gt;   11m   v1.13.3
ip-172-31-31-2     Ready    master   26m   v1.13.3&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;참고로, &lt;code&gt;weave-net&lt;/code&gt;의 데몬셋 yaml 파일은 다음과 같다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;ubuntu@ip-&lt;span class=&#34;m&#34;&gt;172&lt;/span&gt;-&lt;span class=&#34;m&#34;&gt;31&lt;/span&gt;-&lt;span class=&#34;m&#34;&gt;31&lt;/span&gt;-&lt;span class=&#34;m&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;~$&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;kubectl&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;get&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;ds&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;weave-net&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;-n&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;kube-system&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;--export&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;-o&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;yaml&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;apiVersion&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;extensions/v1beta1&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;kind&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;DaemonSet&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;metadata&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;annotations&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;cloud.weave.works/launcher-info&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;|-&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;{&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;original-request&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;{&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;url&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;/k8s/v1.10/net.yaml?k8s-version=Q2xpZW50IFZlcnNpb246IHZlcnNpb24uSW5mb3tNYWpvcjoiMSIsIE1pbm9yOiIxMyIsIEdpdFZlcnNpb246InYxLjEzLjMiLCBHaXRDb21taXQ6IjcyMWJmYTc1MTkyNGRhOGQxNjgwNzg3NDkwYzU0YjkxNzliMWZlZDAiLCBHaXRUcmVlU3RhdGU6ImNsZWFuIiwgQnVpbGREYXRlOiIyMDE5LTAyLTAxVDIwOjA4OjEyWiIsIEdvVmVyc2lvbjoiZ28xLjExLjUiLCBDb21waWxlcjoiZ2MiLCBQbGF0Zm9ybToibGludXgvYW1kNjQifQpTZXJ2ZXIgVmVyc2lvbjogdmVyc2lvbi5JbmZve01ham9yOiIxIiwgTWlub3I6IjEzIiwgR2l0VmVyc2lvbjoidjEuMTMuMyIsIEdpdENvbW1pdDoiNzIxYmZhNzUxOTI0ZGE4ZDE2ODA3ODc0OTBjNTRiOTE3OWIxZmVkMCIsIEdpdFRyZWVTdGF0ZToiY2xlYW4iLCBCdWlsZERhdGU6IjIwMTktMDItMDFUMjA6MDA6NTdaIiwgR29WZXJzaW9uOiJnbzEuMTEuNSIsIENvbXBpbGVyOiJnYyIsIFBsYXRmb3JtOiJsaW51eC9hbWQ2NCJ9Cg==&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;date&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;Thu Feb 21 2019 11:51:45 GMT+0000 (UTC)&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;}&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;email-address&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;support@weave.works&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;}&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;kubectl.kubernetes.io/last-applied-configuration&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;|
&lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;      {&amp;#34;apiVersion&amp;#34;:&amp;#34;extensions/v1beta1&amp;#34;,&amp;#34;kind&amp;#34;:&amp;#34;DaemonSet&amp;#34;,&amp;#34;metadata&amp;#34;:{&amp;#34;annotations&amp;#34;:{&amp;#34;cloud.weave.works/launcher-info&amp;#34;:&amp;#34;{\n  \&amp;#34;original-request\&amp;#34;: {\n    \&amp;#34;url\&amp;#34;: \&amp;#34;/k8s/v1.10/net.yaml?k8s-version=Q2xpZW50IFZlcnNpb246IHZlcnNpb24uSW5mb3tNYWpvcjoiMSIsIE1pbm9yOiIxMyIsIEdpdFZlcnNpb246InYxLjEzLjMiLCBHaXRDb21taXQ6IjcyMWJmYTc1MTkyNGRhOGQxNjgwNzg3NDkwYzU0YjkxNzliMWZlZDAiLCBHaXRUcmVlU3RhdGU6ImNsZWFuIiwgQnVpbGREYXRlOiIyMDE5LTAyLTAxVDIwOjA4OjEyWiIsIEdvVmVyc2lvbjoiZ28xLjExLjUiLCBDb21waWxlcjoiZ2MiLCBQbGF0Zm9ybToibGludXgvYW1kNjQifQpTZXJ2ZXIgVmVyc2lvbjogdmVyc2lvbi5JbmZve01ham9yOiIxIiwgTWlub3I6IjEzIiwgR2l0VmVyc2lvbjoidjEuMTMuMyIsIEdpdENvbW1pdDoiNzIxYmZhNzUxOTI0ZGE4ZDE2ODA3ODc0OTBjNTRiOTE3OWIxZmVkMCIsIEdpdFRyZWVTdGF0ZToiY2xlYW4iLCBCdWlsZERhdGU6IjIwMTktMDItMDFUMjA6MDA6NTdaIiwgR29WZXJzaW9uOiJnbzEuMTEuNSIsIENvbXBpbGVyOiJnYyIsIFBsYXRmb3JtOiJsaW51eC9hbWQ2NCJ9Cg==\&amp;#34;,\n    \&amp;#34;date\&amp;#34;: \&amp;#34;Thu Feb 21 2019 11:51:45 GMT+0000 (UTC)\&amp;#34;\n  },\n  \&amp;#34;email-address\&amp;#34;: \&amp;#34;support@weave.works\&amp;#34;\n}&amp;#34;},&amp;#34;labels&amp;#34;:{&amp;#34;name&amp;#34;:&amp;#34;weave-net&amp;#34;},&amp;#34;name&amp;#34;:&amp;#34;weave-net&amp;#34;,&amp;#34;namespace&amp;#34;:&amp;#34;kube-system&amp;#34;},&amp;#34;spec&amp;#34;:{&amp;#34;minReadySeconds&amp;#34;:5,&amp;#34;template&amp;#34;:{&amp;#34;metadata&amp;#34;:{&amp;#34;labels&amp;#34;:{&amp;#34;name&amp;#34;:&amp;#34;weave-net&amp;#34;}},&amp;#34;spec&amp;#34;:{&amp;#34;containers&amp;#34;:[{&amp;#34;command&amp;#34;:[&amp;#34;/home/weave/launch.sh&amp;#34;],&amp;#34;env&amp;#34;:[{&amp;#34;name&amp;#34;:&amp;#34;HOSTNAME&amp;#34;,&amp;#34;valueFrom&amp;#34;:{&amp;#34;fieldRef&amp;#34;:{&amp;#34;apiVersion&amp;#34;:&amp;#34;v1&amp;#34;,&amp;#34;fieldPath&amp;#34;:&amp;#34;spec.nodeName&amp;#34;}}}],&amp;#34;image&amp;#34;:&amp;#34;docker.io/weaveworks/weave-kube:2.5.1&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;weave&amp;#34;,&amp;#34;readinessProbe&amp;#34;:{&amp;#34;httpGet&amp;#34;:{&amp;#34;host&amp;#34;:&amp;#34;127.0.0.1&amp;#34;,&amp;#34;path&amp;#34;:&amp;#34;/status&amp;#34;,&amp;#34;port&amp;#34;:6784}},&amp;#34;resources&amp;#34;:{&amp;#34;requests&amp;#34;:{&amp;#34;cpu&amp;#34;:&amp;#34;10m&amp;#34;}},&amp;#34;securityContext&amp;#34;:{&amp;#34;privileged&amp;#34;:true},&amp;#34;volumeMounts&amp;#34;:[{&amp;#34;mountPath&amp;#34;:&amp;#34;/weavedb&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;weavedb&amp;#34;},{&amp;#34;mountPath&amp;#34;:&amp;#34;/host/opt&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;cni-bin&amp;#34;},{&amp;#34;mountPath&amp;#34;:&amp;#34;/host/home&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;cni-bin2&amp;#34;},{&amp;#34;mountPath&amp;#34;:&amp;#34;/host/etc&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;cni-conf&amp;#34;},{&amp;#34;mountPath&amp;#34;:&amp;#34;/host/var/lib/dbus&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;dbus&amp;#34;},{&amp;#34;mountPath&amp;#34;:&amp;#34;/lib/modules&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;lib-modules&amp;#34;},{&amp;#34;mountPath&amp;#34;:&amp;#34;/run/xtables.lock&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;xtables-lock&amp;#34;}]},{&amp;#34;env&amp;#34;:[{&amp;#34;name&amp;#34;:&amp;#34;HOSTNAME&amp;#34;,&amp;#34;valueFrom&amp;#34;:{&amp;#34;fieldRef&amp;#34;:{&amp;#34;apiVersion&amp;#34;:&amp;#34;v1&amp;#34;,&amp;#34;fieldPath&amp;#34;:&amp;#34;spec.nodeName&amp;#34;}}}],&amp;#34;image&amp;#34;:&amp;#34;docker.io/weaveworks/weave-npc:2.5.1&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;weave-npc&amp;#34;,&amp;#34;resources&amp;#34;:{&amp;#34;requests&amp;#34;:{&amp;#34;cpu&amp;#34;:&amp;#34;10m&amp;#34;}},&amp;#34;securityContext&amp;#34;:{&amp;#34;privileged&amp;#34;:true},&amp;#34;volumeMounts&amp;#34;:[{&amp;#34;mountPath&amp;#34;:&amp;#34;/run/xtables.lock&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;xtables-lock&amp;#34;}]}],&amp;#34;hostNetwork&amp;#34;:true,&amp;#34;hostPID&amp;#34;:true,&amp;#34;restartPolicy&amp;#34;:&amp;#34;Always&amp;#34;,&amp;#34;securityContext&amp;#34;:{&amp;#34;seLinuxOptions&amp;#34;:{}},&amp;#34;serviceAccountName&amp;#34;:&amp;#34;weave-net&amp;#34;,&amp;#34;tolerations&amp;#34;:[{&amp;#34;effect&amp;#34;:&amp;#34;NoSchedule&amp;#34;,&amp;#34;operator&amp;#34;:&amp;#34;Exists&amp;#34;}],&amp;#34;volumes&amp;#34;:[{&amp;#34;hostPath&amp;#34;:{&amp;#34;path&amp;#34;:&amp;#34;/var/lib/weave&amp;#34;},&amp;#34;name&amp;#34;:&amp;#34;weavedb&amp;#34;},{&amp;#34;hostPath&amp;#34;:{&amp;#34;path&amp;#34;:&amp;#34;/opt&amp;#34;},&amp;#34;name&amp;#34;:&amp;#34;cni-bin&amp;#34;},{&amp;#34;hostPath&amp;#34;:{&amp;#34;path&amp;#34;:&amp;#34;/home&amp;#34;},&amp;#34;name&amp;#34;:&amp;#34;cni-bin2&amp;#34;},{&amp;#34;hostPath&amp;#34;:{&amp;#34;path&amp;#34;:&amp;#34;/etc&amp;#34;},&amp;#34;name&amp;#34;:&amp;#34;cni-conf&amp;#34;},{&amp;#34;hostPath&amp;#34;:{&amp;#34;path&amp;#34;:&amp;#34;/var/lib/dbus&amp;#34;},&amp;#34;name&amp;#34;:&amp;#34;dbus&amp;#34;},{&amp;#34;hostPath&amp;#34;:{&amp;#34;path&amp;#34;:&amp;#34;/lib/modules&amp;#34;},&amp;#34;name&amp;#34;:&amp;#34;lib-modules&amp;#34;},{&amp;#34;hostPath&amp;#34;:{&amp;#34;path&amp;#34;:&amp;#34;/run/xtables.lock&amp;#34;,&amp;#34;type&amp;#34;:&amp;#34;FileOrCreate&amp;#34;},&amp;#34;name&amp;#34;:&amp;#34;xtables-lock&amp;#34;}]}},&amp;#34;updateStrategy&amp;#34;:{&amp;#34;type&amp;#34;:&amp;#34;RollingUpdate&amp;#34;}}}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;creationTimestamp&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;null&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;generation&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;labels&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;weave-net&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;weave-net&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;selfLink&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;/apis/extensions/v1beta1/namespaces/kube-system/daemonsets/weave-net&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;spec&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;minReadySeconds&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;revisionHistoryLimit&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;selector&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;matchLabels&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;weave-net&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;template&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;metadata&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;creationTimestamp&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;null&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;labels&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;weave-net&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;spec&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;containers&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;command&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;/home/weave/launch.sh&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;env&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;HOSTNAME&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;valueFrom&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;fieldRef&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;apiVersion&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;v1&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;fieldPath&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;spec.nodeName&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;image&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;docker.io/weaveworks/weave-kube&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;2.5&lt;/span&gt;.&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;imagePullPolicy&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;IfNotPresent&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;weave&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;readinessProbe&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;failureThreshold&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;httpGet&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;host&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;127.0&lt;/span&gt;.&lt;span class=&#34;m&#34;&gt;0.1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;path&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;/status&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;port&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;6784&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;scheme&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;HTTP&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;periodSeconds&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;successThreshold&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;timeoutSeconds&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;resources&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;requests&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;cpu&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;10m&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;securityContext&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;privileged&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;procMount&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;Default&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;terminationMessagePath&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;/dev/termination-log&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;terminationMessagePolicy&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;File&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;volumeMounts&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;mountPath&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;/weavedb&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;weavedb&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;mountPath&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;/host/opt&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;cni-bin&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;mountPath&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;/host/home&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;cni-bin2&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;mountPath&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;/host/etc&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;cni-conf&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;mountPath&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;/host/var/lib/dbus&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;dbus&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;mountPath&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;/lib/modules&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;lib-modules&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;mountPath&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;/run/xtables.lock&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;xtables-lock&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;env&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;HOSTNAME&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;valueFrom&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;fieldRef&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;apiVersion&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;v1&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;fieldPath&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;spec.nodeName&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;image&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;docker.io/weaveworks/weave-npc&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;2.5&lt;/span&gt;.&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;imagePullPolicy&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;IfNotPresent&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;weave-npc&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;resources&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;requests&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;cpu&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;10m&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;securityContext&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;privileged&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;procMount&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;Default&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;terminationMessagePath&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;/dev/termination-log&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;terminationMessagePolicy&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;File&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;volumeMounts&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;mountPath&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;/run/xtables.lock&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;xtables-lock&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;dnsPolicy&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;ClusterFirst&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;hostNetwork&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;hostPID&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;restartPolicy&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;Always&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;schedulerName&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;default-scheduler&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;securityContext&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;seLinuxOptions&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;{}&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;serviceAccount&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;weave-net&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;serviceAccountName&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;weave-net&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;terminationGracePeriodSeconds&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;30&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;tolerations&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;effect&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;NoSchedule&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;operator&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;Exists&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;volumes&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;hostPath&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;path&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;/var/lib/weave&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;type&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;weavedb&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;hostPath&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;path&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;/opt&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;type&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;cni-bin&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;hostPath&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;path&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;/home&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;type&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;cni-bin2&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;hostPath&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;path&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;/etc&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;type&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;cni-conf&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;hostPath&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;path&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;/var/lib/dbus&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;type&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;dbus&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;hostPath&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;path&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;/lib/modules&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;type&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;lib-modules&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;hostPath&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;path&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;/run/xtables.lock&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;type&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;FileOrCreate&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;xtables-lock&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;templateGeneration&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;updateStrategy&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;rollingUpdate&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;maxUnavailable&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;type&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;RollingUpdate&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;status&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;currentNumberScheduled&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;desiredNumberScheduled&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;numberMisscheduled&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;numberReady&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&#34;로컬-kubeconfig-셋업&#34;&gt;로컬 kubeconfig 셋업&lt;/h3&gt;

&lt;p&gt;싱글 마스터 노드와 싱글 워커 노드로 구성된 쿠버네티스 클러스터가 준비되었다. 이제 로컬 PC에서 위 클러스터를 사용해보자. 이를 위해서 마스터 노드의 &lt;code&gt;kubeconfig&lt;/code&gt; 파일을 로컬에 캐시한다.&lt;/p&gt;

&lt;h4 id=&#34;kubeconfig-로컬-복사&#34;&gt;kubeconfig 로컬 복사&lt;/h4&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;$ scp -i ~/.ssh/path/to/pem ubuntu@ec2-13-209-88-210.ap-northeast-2.compute.amazonaws.com:/home/ubuntu/.kube/config kubeconfig
$ &lt;span class=&#34;nb&#34;&gt;export&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;KUBECONFIG&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;kubeconfig&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;다음으로 &lt;code&gt;kubeconfig&lt;/code&gt; 파일을 열어서 마스터 API 서버의 주소인 &lt;code&gt;https://172.31.31.2:6443&lt;/code&gt;를 &lt;code&gt;https://kubernetes:6443&lt;/code&gt;로 변경한다.&lt;/p&gt;

&lt;h4 id=&#34;kubernetes-호스트-등록&#34;&gt;kubernetes 호스트 등록&lt;/h4&gt;

&lt;p&gt;그리고 다음과 같이 &lt;code&gt;/etc/hosts&lt;/code&gt; 파일을 열어서 kubernetes를 로컬 주소로 등록한다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span class=&#34;c1&#34;&gt;##
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;# Host Database
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;#
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;# localhost is used to configure the loopback interface
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;# when the system is booting.  Do not change this entry.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;##
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;127&lt;/span&gt;.0.0.1	localhost
&lt;span class=&#34;m&#34;&gt;127&lt;/span&gt;.0.0.1 kubernetes
&lt;span class=&#34;m&#34;&gt;255&lt;/span&gt;.255.255.255	broadcasthost
::1             localhost&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id=&#34;6443-로컬-바인딩&#34;&gt;6443 로컬 바인딩&lt;/h4&gt;

&lt;p&gt;마스터 API 서버의 시큐어 포트 6443을 로컬 포트 6443에 바인딩한다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;ssh ubuntu@ec2-13-209-88-210.ap-northeast-2.compute.amazonaws.com -L &lt;span class=&#34;m&#34;&gt;6443&lt;/span&gt;:localhost:6443&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id=&#34;로컬에서-kubelet-실행&#34;&gt;로컬에서 kubelet 실행&lt;/h4&gt;

&lt;p&gt;그리면, 다음과 같이 로컬 PC에서도 동일하게 클러스터 노드 조회 정보를 확인할 수 있다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;$ kubectl get node
NAME               STATUS   ROLES    AGE   VERSION
ip-172-31-22-155   Ready    &amp;lt;none&amp;gt;   31m   v1.13.3
ip-172-31-31-2     Ready    master   36m   v1.13.3&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&#34;ha-구성&#34;&gt;HA 구성&lt;/h2&gt;

&lt;p&gt;&lt;code&gt;kubeadm&lt;/code&gt;을 이용한 고가용성 컨트롤 플레인 HA 구성에 대한 문서와 오픈 소스 예제는 다음을 참고한다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://kubernetes.io/docs/setup/independent/ha-topology/&#34; target=&#34;_blank&#34;&gt;https://kubernetes.io/docs/setup/independent/ha-topology/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kubernetes.io/docs/setup/independent/setup-ha-etcd-with-kubeadm/&#34; target=&#34;_blank&#34;&gt;https://kubernetes.io/docs/setup/independent/setup-ha-etcd-with-kubeadm/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/cookeem/kubeadm-ha&#34; target=&#34;_blank&#34;&gt;https://github.com/cookeem/kubeadm-ha&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/Lentil1016/kubeadm-ha&#34; target=&#34;_blank&#34;&gt;https://github.com/Lentil1016/kubeadm-ha&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/scholzj/terraform-aws-kubernetes&#34; target=&#34;_blank&#34;&gt;https://github.com/scholzj/terraform-aws-kubernetes&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;center&gt;&lt;img src=&#34;https://d33wubrfki0l68.cloudfront.net/d1411cded83856552f37911eb4522d9887ca4e83/b94b2/images/kubeadm/kubeadm-ha-topology-stacked-etcd.svg&#34;/&gt;&lt;/center&gt;&lt;/p&gt;
</content>
      
    </item>
    
    <item>
      <title>[번역] 도커 스토리지 소개</title>
      <link>https://ziwon.github.io/post/docker-storage-overview/</link>
      <pubDate>Wed, 20 Feb 2019 11:55:00 +0900</pubDate>
      <author>Aron Yoon</author>
      <guid>https://ziwon.github.io/post/docker-storage-overview/</guid>
      <description></description>
      
      <content>

&lt;blockquote&gt;
&lt;p&gt;도커상에서 어플리케이션 데이터관리는 중요한 주제이므로 도커 공식 문서를 하나씩 번역해가며 그 내용을 자세히 살펴보고자 한다.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;도커 스토리지 전체 목차는 다음과 같다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href=&#34;https://ziwon.github.io/post/docker-storage-overview/&#34;&gt;* 스토리지 소개&lt;/a&gt; (&lt;a href=&#34;https://docs.docker.com/storage/&#34; target=&#34;_blank&#34;&gt;원문&lt;/a&gt;)&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://ziwon.github.io/post/docker-storage-volumes/&#34;&gt;볼륨 사용&lt;/a&gt; (&lt;a href=&#34;https://docs.docker.com/storage/volumes/&#34; target=&#34;_blank&#34;&gt;원문&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;바인드 마운트&lt;/li&gt;
&lt;li&gt;tmp 마운트&lt;/li&gt;
&lt;li&gt;컨테이너에 데이터 저장하기

&lt;ul&gt;
&lt;li&gt;스토리지 드라이버에 대해&lt;/li&gt;
&lt;li&gt;스토리지 드라이버 선택&lt;/li&gt;
&lt;li&gt;AUFS 스토리지 드라이버 사용&lt;/li&gt;
&lt;li&gt;Btrfs 스토리지 드라이버 사용&lt;/li&gt;
&lt;li&gt;디바이스 맵퍼 스토리지 드라이버 사용&lt;/li&gt;
&lt;li&gt;OverlayFS 스토리지 드라이버 사용&lt;/li&gt;
&lt;li&gt;ZFS 스토리지 드라이버 사용&lt;/li&gt;
&lt;li&gt;VFS 스토리지 드라이버 사용&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;center&gt;•••&lt;/center&gt;&lt;/p&gt;

&lt;h1 id=&#34;도커에서-데이터-관리&#34;&gt;도커에서 데이터 관리&lt;/h1&gt;

&lt;p&gt;기본적으로 컨테이너 내부에서 생성된 모든 파일은 쓰기 가능한 컨테이너 레이어에 저장된다. 이는 다음을 의미한다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;데이터는 컨테이너가 더 이상 존재하지 않을 때 지속되지 않으며, 다른 프로세스가 필요할 때에 컨테이너에서 데이터를 꺼내는 것이 어려울 수 있다.&lt;/li&gt;
&lt;li&gt;컨테이너의 쓰기 가능한 레이어는 컨테이너가 실행 중인 호스트 머신과 밀접하게 결합된다. 다른 곳으로 쉽게 자료를 옮길 수 없다.&lt;/li&gt;
&lt;li&gt;컨테이너의 쓰기 가능한 레이어에 쓰려면 파일 시스템을 관리하는 스토리지 드라이버가 필요하다. 스토리지 드라이버는 리눅스 커널을 사용하여 유니언 파일 시스템을 제공한다. 이런 추가적인 추상화는 호스트 파일 시스템에 직접 쓰는 데이터 볼륨을 사용하는 것에 비해 성능을 떨어뜨린다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;도커에는 호스트 머신에 파일을 저장하는 컨테이너에 대한 두 가지 옵션이 있어 컨테이너가 정지한 후에도 파일이 유지될 수 있는데, 볼륨과 바인딩 마운트. 만약 Linux에서 도커를 실행하고 있다면 &lt;code&gt;tmpfs&lt;/code&gt; 마운트를 사용할 수 있다.&lt;/p&gt;

&lt;p&gt;데이터를 영속(persisting)하는 이러한 두 가지 방법에 대한 자세한 내용은 계속 읽어보자.&lt;/p&gt;

&lt;h2 id=&#34;적합한-마운트-유형-선택&#34;&gt;적합한 마운트 유형 선택&lt;/h2&gt;

&lt;p&gt;어떤 종류의 마운트를 사용하든 컨테이너 내에서 데이터는 동일하게 보인다. 디렉토리나 또는 개별 파일로 컨테이너의 파일 시스템에 노출된다.&lt;/p&gt;

&lt;p&gt;볼륨, 바인딩 마운트 및 &lt;code&gt;tmpfs&lt;/code&gt; 마운트 간의 차이를 시각화하는 쉬운 방법은 도커 호스트에서 데이터가 어디에 상주하는지에 대해 생각해보는 것이다.&lt;/p&gt;

&lt;p&gt;&lt;center&gt;&lt;img src=&#34;https://docs.docker.com/storage/images/types-of-mounts.png&#34;/&gt;&lt;/center&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;볼륨(Volumes)&lt;/strong&gt;은 도커에 의해 관리되는 호스트 파일 시스템의 일부(/var/lib/docker/volumes/ on Linux)에 저장된다. 도커가 아닌 프로세스는 파일 시스템의 이 부분을 수정하지 않아야 한다. 도커에서 데이터를 유지하는 가장 좋은 방법은 볼륨이다.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;바인드 마운트(Bind mounts)&lt;/strong&gt;는 호스트 시스템의 어느 곳이든 저장될 수 있다. 이들 자체가 중요한 시스템 파일이나 디렉토리일 수도 있다. 도커 호스트의 비도커 프로세스나 도커 컨테이너는 원한다면 이들을 수정할 수 있다.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;tmpfs&lt;/strong&gt; 마운트는 호스트 시스템의 메모리에만 저장되며 호스트 시스템의 파일 시스템에 절대 기록되지 않는다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;마운트-유형에-대한-자세한-정보&#34;&gt;마운트 유형에 대한 자세한 정보&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;볼륨(Volumes)&lt;/strong&gt;: 도커에 의해 만들어지고 관리된다. &lt;code&gt;docker volume create&lt;/code&gt; 명령을 사용하여 명시적으로 볼륨을 생성할 수 있으며, 도커는 컨테이너 또는 서비스 생성 중에 볼륨을 생성할 수 있다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;볼륨을 생성하면 도커 호스트의 디렉토리 내에 저장된다. 볼륨을 컨테이너로 마운트할 때, 이 디렉토리는 컨테이너에 마운트되는 것이다. 이는 도커에 의해 볼륨이 관리되고 호스트 머신의 핵심 기능에서 분리된다는 점을 제외하면 바인드 마운트가 작동하는 방식과 유사하다.&lt;/p&gt;

&lt;p&gt;제공된 볼륨은 여러 개의 컨테이너에 동시에 마운트될 수 있다. 실행 중인 컨테이너가 볼륨을 사용하고 있지 않을 때, 그 볼륨을 도커가 사용할 수 있으며 자동으로 제거되지 않는다. &lt;code&gt;docker volume prune&lt;/code&gt;을 사용하여 미사용 볼륨을 제거할 수 있다.&lt;/p&gt;

&lt;p&gt;볼륨을 마운트할 때, 이름이 주어지거나 익명이 될 수 있다. 익명의 볼륨은 컨테이너에 처음 마운트될 때 명시적인 이름이 주어지지 않기 때문에 도커는 주어진 도커 호스트 내에서 고유함을 보장하는 임의의 이름을 부여한다. 이름 외에도, 이름과 익명의 볼륨도 같은 방식으로 취급된다.&lt;/p&gt;

&lt;p&gt;볼륨은 데이터를 저장 가능케 하는 원격 호스트나 클라우드 제공자 또는 다른 시도할만 것들의 볼륨 드라이버를 사용할 수 있다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;바인드 마운트(Bind mounts)&lt;/strong&gt;: 도커 초기부터 사용 가능. 바인드 마운트는 볼륨에 비해 기능이 제한되어 있다. 바인드 마운트를 사용할 때, 호스트 머신의 파일이나 디렉토리가 컨테이너에 마운트된다. 파일이나 디렉토리는 호스트 머신의 전체 경로에 의해 참조된다. 파일이나 디렉토리는 도커 호스트에 미리 존재할 필요가 없다. 만약 아직 존재하지 않는다면 요청에 따라 생성된다. 바인드 마운트는 성능이 매우 뛰어나지만, 사용 가능한 특정 디렉토리 구조를 가진 호스트 머신의 파일 시스템에 의존한다. 새로운 도커 애플리케이션을 개발하는 경우 명명된 볼륨을 사용하는 것을 고려하라. 바인드 마운트를 직접 관리하기 위해 도커 CLI 명령을 사용할 수 없다.&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
&lt;p&gt;바인드 마운트는 민감한 파일에 대한 액세스를 허용한다.&lt;/p&gt;

&lt;p&gt;좋건 나쁘건 바인드 마운트를 사용하는 한 가지 부작용은 &lt;strong&gt;컨테이너&lt;/strong&gt;에서 실행 중인 &lt;strong&gt;프로세스&lt;/strong&gt;를 통해 호스트 파일 시스템을 변경할 수 있다는 것이다. 여기에는 중요한 시스템 파일이나 디렉토리의 생성, 수정 또는 삭제가 포함된다. 이는 도커가 아닌 프로세스가 호스트 시스템에 영향을 주는 것을 포함, 보안 이슈를 지닌 파워풀한 기능이다.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;tmpfs 마운트&lt;/strong&gt;: &lt;code&gt;tmpfs&lt;/code&gt; 마운트는 도커 호스트나 컨테이너 안에 있는 디스크에서 영속되지 않는다. 이는 컨테이너의 생명주기 동안에 컨테이너가 비영속적인 상태나 민감한 정보를 저장하기 위해 사용할 수 있다. 예를 들어, 내부적으로, 스웜 서비스는 &lt;code&gt;tmpfs&lt;/code&gt; 마운트를 사용하여 서비스 컨테이너에 &lt;a href=&#34;https://docs.docker.com/engine/swarm/secrets/&#34; target=&#34;_blank&#34;&gt;시크릿&lt;/a&gt;을 마운트한다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;바인딩 마운트 및 볼륨은 모두 &lt;code&gt;-v&lt;/code&gt; 또는 &lt;code&gt;--volume&lt;/code&gt; 플래그를 사용하여 컨테이너에 탑재할 수 있지만 각각의 구문은 약간 다르다. &lt;code&gt;tmpfs&lt;/code&gt; 마운트의 경우 &lt;code&gt;--tmpfs&lt;/code&gt; 플래그를 사용할 수 있다. 단, 도커 17.06 이상에서는 bind mount, volumes 또는 &lt;code&gt;tmpfs&lt;/code&gt; 마운트를 위해 컨테이너와 서비스 모두에 &lt;code&gt;--mount&lt;/code&gt; 플래그를 사용할 것을 권장한다.&lt;/p&gt;

&lt;h2 id=&#34;볼륨의-적합한-유즈케이스&#34;&gt;볼륨의 적합한 유즈케이스&lt;/h2&gt;

&lt;p&gt;볼륨은 도커 컨테이너와 서비스의 데이터를 유지하는 가장 선호되는 방법이다. 볼륨의 일부 사용 사례는 다음과 같다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;실행 중인 여러 개의 컨테이너 간에 데이터 공유. 명시적으로 생성하지 않으면, 처음에 컨테이너에 마운트할 때 볼륨이 생성된다. 그 컨테이너가 멈추거나 제거될 때, 볼륨은 여전히 존재한다. 여러 개의 컨테이너가 읽기-쓰기 또는 읽기 전용으로 동일한 볼륨을 동시에 마운트할 수 있다. 볼륨은 명시적으로 제거할 때만 제거된다.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;도커 호스트가 주어진 디렉토리 또는 파일 구조를 가지고 있다고 보장되지 않을 때. 볼륨은 컨테이너 런타임과 도커 호스트의 구성을 분리하는 데 도움이 된다.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;컨테이너의 데이터를 로컬이 아닌, 원격 호스트나 클라우드 제공자에 저장하려는 경우&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;도커 호스트 간에 데이터를 백업, 복원 또는 마이그레이션해야 할 경우 볼륨이 더 나은 선택이다. 볼륨을 사용하여 컨테이너를 정지한 다음, 볼륨의 디렉토리(예: &lt;code&gt;/var/lib/docker/volumes/&amp;lt;volumes-name&amp;gt;&lt;/code&gt;)를 백업할 수 있다.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;바인드-마운트의-적합한-유즈케이스&#34;&gt;바인드 마운트의 적합한 유즈케이스&lt;/h2&gt;

&lt;p&gt;일반적으로, 볼륨은 가능한 곳에 사용해야 한다. 바인드 마운트는 다음과 같은 유형의 유즈케이스에 적합하다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;호스트 머신에서 컨테이너로 설정 파일을 공유. 도커는 기본적으로 호스트 머신에서 &lt;code&gt;/etc/resolv.conf&lt;/code&gt;를 각 컨테이너에 장착하여 컨테이너에 DNS 레졸루션을 제공하는 방식이다.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;도커 호스트 상의 개발 환경과 컨테이너 사이에 소스 코드나 빌드 아티팩트를 공유. 예를 들어, 메이븐 (Maven) &lt;code&gt;target/&lt;/code&gt; 디렉토리를 컨테이너에 마운트할 수 있으며, 도커 호스트에 메이븐 (Maven) 프로젝트를 만들 때마다, 컨테이너는 새로 빌드된 아티팩트에 접근할 수 있다. 도커를 이런 방식으로 개발에 사용한다면, 프로덕션 Dockerfile은 바인드 마운트에 의존하기 보다는 프로덕션 레디의 아티팩트를 이미지에 바로 복사할 것이다.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;도커 호스트의 파일 또는 디렉토리 구조가 컨테이너가 요구하는 바인드 마운트와 일관성이 보장될 때.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;tmpfs-마운트의-적합한-유즈케이스&#34;&gt;tmpfs 마운트의 적합한 유즈케이스&lt;/h2&gt;

&lt;p&gt;&lt;code&gt;tmpfs&lt;/code&gt; 마운트는 데이터가 호스트 머신이나 컨테이너 내에서 영속되는 것을 원하지 않는 경우에 가장 많이 사용된다. 이는 보안상의 이유 또는 애플리케이션이 많은 양의 비영구 상태 데이터를 써야 할 때 컨테이너의 성능을 보호하기 위한 것일 수 있다.&lt;/p&gt;

&lt;h2 id=&#34;바인드-마운트-또는-볼륨-사용에-대한-팁&#34;&gt;바인드 마운트 또는 볼륨 사용에 대한 팁&lt;/h2&gt;

&lt;p&gt;바인드 마운트 또는 볼륨을 사용할 경우 다음 사항을 유의하라.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;비어있는 볼륨을 파일이나 디렉토리가 존재하는 컨테이너의 디렉토리에 마운트하면, 이 파일이나 디렉토리가 볼륨으로 전파(복사)된다. 마찬가지로, 컨테이너를 시작하고, 아직 존재하지 않는 볼륨을 지정하면, 빈 볼륨이 생성된다. 이는 다른 컨테이너가 필요로 하는 데이터를 미리 채울 수 있는 좋은 방법이다.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;바인드 마운트나 비어 있지 않은 볼륨을 일부 파일이나 디렉토리가 존재하는 컨테이너의 디렉토리에 마운트하면, Linux 호스트의 &lt;code&gt;/mnt&lt;/code&gt;에 파일을 저장한 후 USB 드라이브를 &lt;code&gt;/mnt&lt;/code&gt;에 마운트한 것처럼, 이들 파일이나 디렉토리가 마운트에 의해 가려진다(obscured). &lt;code&gt;/mnt&lt;/code&gt;의 내용은 USB 드라이브가 마운트 해제될 때까지 USB 드라이브의 내용에 의해 가려진다. 가려진 파일은 제거하거나 변경하지 않고, 바인드 마운트나 볼륨이 마운트하는 동안에는 접근할 수 없다.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
      
    </item>
    
    <item>
      <title>TGI Kubernetes 005: Pod Params and Probes</title>
      <link>https://ziwon.github.io/post/tgik-005/</link>
      <pubDate>Mon, 11 Feb 2019 11:55:00 +0900</pubDate>
      <author>Aron Yoon</author>
      <guid>https://ziwon.github.io/post/tgik-005/</guid>
      <description></description>
      
      <content>

&lt;blockquote&gt;
&lt;p&gt;다섯 번 째 TGIK 에피소드는 특별한 내용이 없는 것 같네요. TGIK 진행된 분량이 많은 관계로 핵심만 추려서 빨리빨리 정리해야되지 않을까 싶네요.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;a href=&#34;https://github.com/heptio/tgik/tree/master/episodes/005&#34; target=&#34;_blank&#34;&gt;다섯 번 째 에피소드&lt;/a&gt;는 Pod을 실행하는 모든 매개변수에 대해 설명한다. 구체적으로 readinessProbe, livenessProve,  restart 등 매개변수에 대해 설명한다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;kubectl run --help&lt;/code&gt;는 스위스 군용 칼처럼 주어지는 매개변수에 따라 여러 가지 일을 한다. 사람들이 잘 모르는 한 가지 살펴볼만한 매개변수는 &lt;a href=&#34;https://kubernetes.io/docs/reference/kubectl/conventions/#generators&#34; target=&#34;_blank&#34;&gt;&lt;code&gt;--generator&lt;/code&gt;&lt;/a&gt;이다. &lt;code&gt;generator&lt;/code&gt; 변수에 따라 여러가지 객체를 생성할 수 있다. 또한 다소 복잡해보이지만, &lt;code&gt;restart&lt;/code&gt; 매개변수에 따라 생성되는 리소스가 달라진다.&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Generated&lt;br/&gt; Resource&lt;/th&gt;
&lt;th&gt;Cluster v1.4과 그 이후&lt;/th&gt;
&lt;th&gt;Cluster v1.3&lt;/th&gt;
&lt;th&gt;Cluster v1.2&lt;/th&gt;
&lt;th&gt;Cluster v1.1 그 이전&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Pod&lt;/td&gt;
&lt;td&gt;&lt;code&gt;--restart=Never&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;--restart=Never&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;--generator=run-pod/v1&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;--restart=OnFailure&lt;/code&gt; 또는 &lt;code&gt;--restart=Never&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;Replication&lt;br/&gt;Controller&lt;/td&gt;
&lt;td&gt;&lt;code&gt;--generator=run/v1&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;--generator=run/v1&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;--generator=run/v1&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;--restart=Always&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;Deployment&lt;/td&gt;
&lt;td&gt;&lt;code&gt;--restart=Always&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;--restart=Always&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;--restart=Always&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;N/A&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;Job&lt;/td&gt;
&lt;td&gt;&lt;code&gt;--restart=OnFailure&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;--restart=OnFailure&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;--restart=OnFailure&lt;/code&gt; OR &lt;code&gt;--restart=Never&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;N/A&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;Cron Job&lt;/td&gt;
&lt;td&gt;&lt;code&gt;--schedule=&amp;lt;cron&amp;gt;&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;N/A&lt;/td&gt;
&lt;td&gt;N/A&lt;/td&gt;
&lt;td&gt;N/A&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&#34;쿠버네티스-오브젝트를-yaml파일로-추출하는-방법&#34;&gt;쿠버네티스 오브젝트를 yaml파일로 추출하는 방법&lt;/h2&gt;

&lt;p&gt;kubectl 에 많은 옵션들이 있지만, 원하는 모든 것들을 kubectl로 할 수 있는 것은 아니다. Pop을 설정하는 다양한 값들을 커맨드 라인에 구겨넣는 게 쉽지 않은 일이며 kubectl은 제한된 뷰만을 보여줄 뿐이다.&lt;/p&gt;

&lt;p&gt;실행 중인 Pod이 있고, 모킹을 해서 뭔가 다른 작업을 하고 싶을 경우 명령적인 모드에서 Pop을 실행하고 선억적인 모드로 전환하여 구체적인 다른 작업을 설정할 수 있다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;kubectl get po kuard -o yaml &amp;gt; kurad.yaml&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;apiVersion&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;v1&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;kind&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;Pod&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;metadata&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;creationTimestamp&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;2019-02-11T06:43:45Z&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;labels&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;run&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;kuard&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;kuard&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;namespace&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;default&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;resourceVersion&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;4582&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;selfLink&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;/api/v1/namespaces/default/pods/kuard&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;uid&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;60b510d5-2dc8-&lt;span class=&#34;m&#34;&gt;11e9&lt;/span&gt;-&lt;span class=&#34;m&#34;&gt;82e8&lt;/span&gt;-0242cfd2ed41&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;spec&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;containers&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;image&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;gcr.io/kuar-demo/kuard-amd64&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;blue&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;imagePullPolicy&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;IfNotPresent&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;kuard&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;resources&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;{}&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;terminationMessagePath&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;/dev/termination-log&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;terminationMessagePolicy&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;File&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;volumeMounts&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;mountPath&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;/var/run/secrets/kubernetes.io/serviceaccount&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;default-token-g95gt&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;readOnly&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;dnsPolicy&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;ClusterFirst&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;enableServiceLinks&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;nodeName&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;kind-&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;-worker2&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;priority&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;restartPolicy&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;Never&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;schedulerName&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;default-scheduler&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;securityContext&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;{}&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;serviceAccount&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;default&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;serviceAccountName&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;default&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;terminationGracePeriodSeconds&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;30&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;tolerations&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;effect&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;NoExecute&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;key&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;node.kubernetes.io/not-ready&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;operator&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;Exists&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;tolerationSeconds&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;300&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;effect&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;NoExecute&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;key&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;node.kubernetes.io/unreachable&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;operator&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;Exists&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;tolerationSeconds&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;300&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;volumes&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;default-token-g95gt&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;secret&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;defaultMode&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;420&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;secretName&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;default-token-g95gt&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;status&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;conditions&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;lastProbeTime&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;null&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;lastTransitionTime&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;2019-02-11T06:43:45Z&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;status&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;True&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;type&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;Initialized&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;lastProbeTime&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;null&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;lastTransitionTime&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;2019-02-11T06:43:52Z&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;status&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;True&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;type&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;Ready&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;lastProbeTime&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;null&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;lastTransitionTime&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;2019-02-11T06:43:52Z&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;status&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;True&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;type&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;ContainersReady&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;lastProbeTime&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;null&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;lastTransitionTime&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;2019-02-11T06:43:45Z&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;status&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;True&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;type&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;PodScheduled&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;containerStatuses&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;containerID&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;docker&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;//74ff093a0684537893e20c67d789142c68fa2c8d1ead84909e9aec2c4d7d0985&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;image&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;gcr.io/kuar-demo/kuard-amd64&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;blue&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;imageID&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;docker-pullable&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;//gcr.io/kuar-demo/kuard-amd64@sha256&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;c9996fc6b5c26d537e47dffd1b9a724682721883bfc9340d5cf94767ba76f103&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;lastState&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;{}&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;kuard&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;ready&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;restartCount&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;state&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;running&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;startedAt&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;2019-02-11T06:43:51Z&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;hostIP&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;172.17&lt;/span&gt;.&lt;span class=&#34;m&#34;&gt;0.6&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;phase&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;Running&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;podIP&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;10.42&lt;/span&gt;.&lt;span class=&#34;m&#34;&gt;0.1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;qosClass&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;BestEffort&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;startTime&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;2019-02-11T06:43:45Z&amp;#34;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위 파일을 편집기로 열면 보게 되는 것 중에 하나가 &lt;code&gt;resourceVersion&lt;/code&gt;이다. 이는 리소스를 변경할 때 기준이 되는 특정 리소스의 버전이다. 이를 기본 Yaml 파일을 사용해서 Pod을 실행하고자 한다면 동작하지 않는다.&lt;/p&gt;

&lt;p&gt;그래서 다음과 같이 &lt;code&gt;--export&lt;/code&gt; 옵션을 사용하면 서버가 추가한 모든 것들을 제거해낼 수 있다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;kubectl get po kuard -o yaml --export &amp;gt; kuard.yaml&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;apiVersion&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;v1&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;kind&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;Pod&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;metadata&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;annotations&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;kubectl.kubernetes.io/last-applied-configuration&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;|
&lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;      {&amp;#34;apiVersion&amp;#34;:&amp;#34;v1&amp;#34;,&amp;#34;kind&amp;#34;:&amp;#34;Pod&amp;#34;,&amp;#34;metadata&amp;#34;:{&amp;#34;annotations&amp;#34;:{},&amp;#34;creationTimestamp&amp;#34;:&amp;#34;2019-02-11T06:43:45Z&amp;#34;,&amp;#34;labels&amp;#34;:{&amp;#34;run&amp;#34;:&amp;#34;kuard&amp;#34;},&amp;#34;name&amp;#34;:&amp;#34;kuard&amp;#34;,&amp;#34;namespace&amp;#34;:&amp;#34;default&amp;#34;,&amp;#34;resourceVersion&amp;#34;:&amp;#34;4582&amp;#34;,&amp;#34;selfLink&amp;#34;:&amp;#34;/api/v1/namespaces/default/pods/kuard&amp;#34;,&amp;#34;uid&amp;#34;:&amp;#34;60b510d5-2dc8-11e9-82e8-0242cfd2ed41&amp;#34;},&amp;#34;spec&amp;#34;:{&amp;#34;containers&amp;#34;:[{&amp;#34;image&amp;#34;:&amp;#34;gcr.io/kuar-demo/kuard-amd64:blue&amp;#34;,&amp;#34;imagePullPolicy&amp;#34;:&amp;#34;IfNotPresent&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;kuard&amp;#34;,&amp;#34;resources&amp;#34;:{},&amp;#34;terminationMessagePath&amp;#34;:&amp;#34;/dev/termination-log&amp;#34;,&amp;#34;terminationMessagePolicy&amp;#34;:&amp;#34;File&amp;#34;,&amp;#34;volumeMounts&amp;#34;:[{&amp;#34;mountPath&amp;#34;:&amp;#34;/var/run/secrets/kubernetes.io/serviceaccount&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;default-token-g95gt&amp;#34;,&amp;#34;readOnly&amp;#34;:true}]}],&amp;#34;dnsPolicy&amp;#34;:&amp;#34;ClusterFirst&amp;#34;,&amp;#34;enableServiceLinks&amp;#34;:true,&amp;#34;nodeName&amp;#34;:&amp;#34;kind-1-worker2&amp;#34;,&amp;#34;priority&amp;#34;:0,&amp;#34;restartPolicy&amp;#34;:&amp;#34;Never&amp;#34;,&amp;#34;schedulerName&amp;#34;:&amp;#34;default-scheduler&amp;#34;,&amp;#34;securityContext&amp;#34;:{},&amp;#34;serviceAccount&amp;#34;:&amp;#34;default&amp;#34;,&amp;#34;serviceAccountName&amp;#34;:&amp;#34;default&amp;#34;,&amp;#34;terminationGracePeriodSeconds&amp;#34;:30,&amp;#34;tolerations&amp;#34;:[{&amp;#34;effect&amp;#34;:&amp;#34;NoExecute&amp;#34;,&amp;#34;key&amp;#34;:&amp;#34;node.kubernetes.io/not-ready&amp;#34;,&amp;#34;operator&amp;#34;:&amp;#34;Exists&amp;#34;,&amp;#34;tolerationSeconds&amp;#34;:300},{&amp;#34;effect&amp;#34;:&amp;#34;NoExecute&amp;#34;,&amp;#34;key&amp;#34;:&amp;#34;node.kubernetes.io/unreachable&amp;#34;,&amp;#34;operator&amp;#34;:&amp;#34;Exists&amp;#34;,&amp;#34;tolerationSeconds&amp;#34;:300}],&amp;#34;volumes&amp;#34;:[{&amp;#34;name&amp;#34;:&amp;#34;default-token-g95gt&amp;#34;,&amp;#34;secret&amp;#34;:{&amp;#34;defaultMode&amp;#34;:420,&amp;#34;secretName&amp;#34;:&amp;#34;default-token-g95gt&amp;#34;}}]},&amp;#34;status&amp;#34;:{&amp;#34;conditions&amp;#34;:[{&amp;#34;lastProbeTime&amp;#34;:null,&amp;#34;lastTransitionTime&amp;#34;:&amp;#34;2019-02-11T06:43:45Z&amp;#34;,&amp;#34;status&amp;#34;:&amp;#34;True&amp;#34;,&amp;#34;type&amp;#34;:&amp;#34;Initialized&amp;#34;},{&amp;#34;lastProbeTime&amp;#34;:null,&amp;#34;lastTransitionTime&amp;#34;:&amp;#34;2019-02-11T06:43:52Z&amp;#34;,&amp;#34;status&amp;#34;:&amp;#34;True&amp;#34;,&amp;#34;type&amp;#34;:&amp;#34;Ready&amp;#34;},{&amp;#34;lastProbeTime&amp;#34;:null,&amp;#34;lastTransitionTime&amp;#34;:&amp;#34;2019-02-11T06:43:52Z&amp;#34;,&amp;#34;status&amp;#34;:&amp;#34;True&amp;#34;,&amp;#34;type&amp;#34;:&amp;#34;ContainersReady&amp;#34;},{&amp;#34;lastProbeTime&amp;#34;:null,&amp;#34;lastTransitionTime&amp;#34;:&amp;#34;2019-02-11T06:43:45Z&amp;#34;,&amp;#34;status&amp;#34;:&amp;#34;True&amp;#34;,&amp;#34;type&amp;#34;:&amp;#34;PodScheduled&amp;#34;}],&amp;#34;containerStatuses&amp;#34;:[{&amp;#34;containerID&amp;#34;:&amp;#34;docker://74ff093a0684537893e20c67d789142c68fa2c8d1ead84909e9aec2c4d7d0985&amp;#34;,&amp;#34;image&amp;#34;:&amp;#34;gcr.io/kuar-demo/kuard-amd64:blue&amp;#34;,&amp;#34;imageID&amp;#34;:&amp;#34;docker-pullable://gcr.io/kuar-demo/kuard-amd64@sha256:c9996fc6b5c26d537e47dffd1b9a724682721883bfc9340d5cf94767ba76f103&amp;#34;,&amp;#34;lastState&amp;#34;:{},&amp;#34;name&amp;#34;:&amp;#34;kuard&amp;#34;,&amp;#34;ready&amp;#34;:true,&amp;#34;restartCount&amp;#34;:0,&amp;#34;state&amp;#34;:{&amp;#34;running&amp;#34;:{&amp;#34;startedAt&amp;#34;:&amp;#34;2019-02-11T06:43:51Z&amp;#34;}}}],&amp;#34;hostIP&amp;#34;:&amp;#34;172.17.0.6&amp;#34;,&amp;#34;phase&amp;#34;:&amp;#34;Running&amp;#34;,&amp;#34;podIP&amp;#34;:&amp;#34;10.42.0.1&amp;#34;,&amp;#34;qosClass&amp;#34;:&amp;#34;BestEffort&amp;#34;,&amp;#34;startTime&amp;#34;:&amp;#34;2019-02-11T06:43:45Z&amp;#34;}}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;creationTimestamp&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;null&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;labels&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;run&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;kuard&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;kuard&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;selfLink&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;/api/v1/namespaces/default/pods/kuard&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;spec&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;containers&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;image&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;gcr.io/kuar-demo/kuard-amd64&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;blue&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;imagePullPolicy&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;IfNotPresent&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;kuard&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;resources&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;{}&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;terminationMessagePath&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;/dev/termination-log&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;terminationMessagePolicy&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;File&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;volumeMounts&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;mountPath&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;/var/run/secrets/kubernetes.io/serviceaccount&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;default-token-g95gt&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;readOnly&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;dnsPolicy&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;ClusterFirst&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;enableServiceLinks&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;nodeName&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;kind-&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;-worker3&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;priority&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;restartPolicy&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;Never&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;schedulerName&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;default-scheduler&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;securityContext&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;{}&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;serviceAccount&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;default&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;serviceAccountName&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;default&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;terminationGracePeriodSeconds&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;30&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;tolerations&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;effect&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;NoExecute&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;key&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;node.kubernetes.io/not-ready&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;operator&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;Exists&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;tolerationSeconds&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;300&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;effect&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;NoExecute&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;key&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;node.kubernetes.io/unreachable&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;operator&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;Exists&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;tolerationSeconds&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;300&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;volumes&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;default-token-g95gt&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;secret&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;defaultMode&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;420&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;secretName&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;default-token-g95gt&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;status&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;phase&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;Pending&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;qosClass&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;BestEffort&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;그러나 Pod의 표준적인 정의(canonical definition) 등 제거해야할 요소가 여전히 있다. 선언적 방식으로 Pod를 배포하는데에 사용할 수는 있지만, 처음부터 선언적 방식으로 하고자 한다면 다음과 같이 &lt;code&gt;--dry-run&lt;/code&gt; 옵션을 사용한다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;kubectl run --generator&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;run-pod/v1 --image&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;gcr.io/kuar-demo/kuard-amd64:blue kuard -o yaml --dry-run &amp;gt; kuard.yaml&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;apiVersion&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;v1&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;kind&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;Pod&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;metadata&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;creationTimestamp&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;null&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;labels&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;run&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;kuard&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;kuard&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;spec&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;containers&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;image&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;gcr.io/kuar-demo/kuard-amd64&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;blue&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;kuard&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;resources&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;{}&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;dnsPolicy&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;ClusterFirst&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;restartPolicy&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;Always&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;status&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;{}&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;여기서 살펴볼 것은 &lt;code&gt;restartPolicy&lt;/code&gt;이다. 데모에서는 우분투 노드에 접속하여 docker를 죽여도 restartPolicy에 의해 Pod이 재시작되는 것을 보여준다. 다음으로 노드를 삭제(AWS에서는 Terminated) 시켰을 때, 즉 clean shutdown 시켰을 때, AWS 오토스케일링 그룹에 의해 새로운 노드가 부팅이 되지만, Pod은 사라진다. 그러나 &lt;code&gt;ReplicaSet&lt;/code&gt;으로 선언하면 노드가 사라져도 다른 노드에서 새로 만든다. 보통 이를 Rescheduling이라고 알고 있는데, 실제로는 다른 노드에서 다른 이름으로 새로 생성하는 Recreating이라고 한다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;apiVersion&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;apps/v1&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;kind&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;ReplicaSet&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;metadata&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;labels&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;run&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;kuard&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;kuard&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;spec&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;replicas&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;selector&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;matchLabels&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;run&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;kuard&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;template&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;metadata&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;labels&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;run&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;kuard&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;spec&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;containers&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;image&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;gcr.io/kuar-demo/kuard-amd64&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;blue&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;kuard&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;resources&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;{}&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;dnsPolicy&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;ClusterFirst&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;restartPolicy&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;Never&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;참고로, Joe Beda님은 동의를 못하겠다고 하지만 ReplicaSet의 경우 다음과 같이 restartPolicy가 Never로 설정이 되지 않는다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;The ReplicaSet &lt;span class=&#34;s2&#34;&gt;&amp;#34;kuard&amp;#34;&lt;/span&gt; is invalid: spec.template.spec.restartPolicy: Unsupported value: &lt;span class=&#34;s2&#34;&gt;&amp;#34;Never&amp;#34;&lt;/span&gt;: supported values: &lt;span class=&#34;s2&#34;&gt;&amp;#34;Always&amp;#34;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&#34;probe&#34;&gt;Probe&lt;/h2&gt;

&lt;p&gt;이제 Probe에 대해 설명한다. 가장 미니멀한 Deployment는 다음 명령으로 생성할 수 있다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;$ kubectl run  --image&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;gcr.io/kuar-demo/kuard-amd64:blue kuard -o yaml --dry-run &amp;gt; kuard.yaml&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;apiVersion&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;apps/v1&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;kind&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;Deployment&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;metadata&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;creationTimestamp&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;null&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;labels&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;run&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;kuard&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;kuard&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;spec&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;replicas&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;selector&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;matchLabels&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;run&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;kuard&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;strategy&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;{}&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;template&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;metadata&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;creationTimestamp&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;null&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;labels&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;run&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;kuard&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;spec&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;containers&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;image&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;gcr.io/kuar-demo/kuard-amd64&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;blue&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;kuard&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;resources&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;{}&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;status&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;{}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위에서 &lt;code&gt;replicas&lt;/code&gt;의 값을 5로 설정하였는데, Deployment는 ReplicaSet를 생성하고, ReplicaSet은 Pod을 생성한다. 알다시피, Probe에는 두 가지가 있는데, Readiness Probe는 트래픽을 받을 준비가 된 것이고, Liveness Probe는 서버가 정상적인지  기술힌다. 서버가 초기화 중이거나 또는 셧다운 중일 때는 Live이지만, Ready가 아닌 상태가 될 수 있다. Liveness Probe가 깨지면 그 Pod은 재시작된다. (예를 들어, 디비 커넥션 풀이 한도가 차서 서버에 더 이상 접속이 되지 않는 초보적인 오류의 경우, 해당 서버에 접속하여 수동으로 재시작하곤 하는데, Kubernetes에서는 자동으로 재시작되게 할 수 있다.) 그리고 Service에서 Readiness Probe에서 실패가 되고 있는 Pod들은 Endpoint 집합에서 축출하게 된다. 질문에서 잠깐 언급된 것처럼 Readiness Probe 상태가 실패인 것들을 오토스케일링 그룹 관점에서 축출하는 용도로는 사용하지 않는다고 한다.&lt;/p&gt;

&lt;p&gt;다음은 Probe 설정에 관한 몇 가지 필드들이다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;initialDelaySeconds&lt;/code&gt;: liveness 또는 readiness 상태 프로브가 시작되기 전에 컨테이너가 시작된 후의 시간 (초)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;periodSeconds&lt;/code&gt;: 프로브 수행 빈도 (초). 기본값은 10초. 최소값은 1초&lt;/li&gt;
&lt;li&gt;&lt;code&gt;timeoutSeconds&lt;/code&gt;: 프로브가 초과되는 시간 (초). 기본값은 1초. 최소값은 1초&lt;/li&gt;
&lt;li&gt;&lt;code&gt;successThreshod&lt;/code&gt;: 실패 후 프로브가 성공한 것으로 간주되는 프로브의 최소 연속적인 성공 횟수. 기본값은 1. liveness는 1이어야 함. 최소값은 1.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;failureThreshold&lt;/code&gt;: Pod가 시작되고 프로브가 실패하면, 쿠버네티스는 failureThreshold 횟수 동안 실패를 시도한다. liveness 프로브의 경우, 포기는 포드를 다시 시작하는 것을 의미. 준비 상태 검사의 경우 포드는 Unready로 표시.&lt;br /&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;a href=&#34;https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.13/#httpgetaction-v1-core&#34; target=&#34;_blank&#34;&gt;HTTP probes&lt;/a&gt;에는 추가적인 필드가 있다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;host&lt;/code&gt;: 연결할 호스트 이름. 기본적으로 포드 IP로 설정.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;scheme&lt;/code&gt;: 호스트 연결에 사용할 스킴. 기본값은 HTTP&lt;/li&gt;
&lt;li&gt;&lt;code&gt;path&lt;/code&gt;: HTTP 서버에 액세스하기 위한 경로&lt;/li&gt;
&lt;li&gt;&lt;code&gt;httpHeaders&lt;/code&gt;: 요청에 설정할 사용자 지정 헤더. HTTP는 반복 헤더를 사용할 수 있음.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;port&lt;/code&gt;: 컨테이너에 억세스하는 포트의 번호 또는 이름. 1 ~ 65535 사이의 값&lt;/li&gt;
&lt;/ul&gt;
</content>
      
    </item>
    
    <item>
      <title>TGI Kubernetes 004: RBAC</title>
      <link>https://ziwon.github.io/post/tgik-004/</link>
      <pubDate>Tue, 05 Feb 2019 11:55:00 +0900</pubDate>
      <author>Aron Yoon</author>
      <guid>https://ziwon.github.io/post/tgik-004/</guid>
      <description></description>
      
      <content>

&lt;p&gt;&lt;a href=&#34;https://github.com/heptio/tgik/tree/master/episodes/004&#34; target=&#34;_blank&#34;&gt;네번째 에피소드&lt;/a&gt;는 쿠버네티스의 RBAC을 중심으로 인증(Authorization)과 권한(Authentication)에 대해 설명하고 있다. 영상에서도 &lt;a href=&#34;https://www.linkedin.com/pulse/adding-users-quick-start-kubernetes-aws-jakub-scholz&#34; target=&#34;_blank&#34;&gt;Adding users on &amp;ldquo;Quick Start for Kubernetes on AWS&amp;rdquo;&lt;/a&gt; 블로그 내용을 참고해서 사용자 계정을 추가하고 있기 때문에, RBAC에 대해 충분한 이해가 있다면 해당 아티클만 보아도 좋을 듯 하다.  RBAC에 대한 기본적인 개념과 쿠버네티스에서의 RBAC 정책에 대해 좀 더 알고자 한다면 CNCF의 &lt;a href=&#34;https://www.youtube.com/watch?v=CnHTCTP8d48&#34; target=&#34;_blank&#34;&gt;Role based access control (RBAC) policies in Kubernetes&lt;/a&gt; 웨비나를 추천한다.&lt;/p&gt;

&lt;p&gt;&lt;center&gt;•••&lt;/center&gt;&lt;/p&gt;

&lt;h2 id=&#34;kubeconfig&#34;&gt;KubeConfig&lt;/h2&gt;

&lt;p&gt;&lt;code&gt;kubeconfig&lt;/code&gt; 파일의 기본 위치는 &lt;code&gt;$HOME/.kube/config&lt;/code&gt;이며, &lt;code&gt;KUBECONFIG&lt;/code&gt; 환경변수 또는 &lt;code&gt;--kubeconfig&lt;/code&gt; 옵션으로 지정할 수 있다.&lt;/p&gt;

&lt;p&gt;앞선 TGIK 데모에서는 Heptio의 QuickStart를 사용해 쿠버네티스 클러스터를 생성할 때, 클러스터 작업을 실행하기 위해 다음과 같은 방법으로 마스터 노드에서 복사한 &lt;code&gt;kubeconfig&lt;/code&gt; 파일을 로컬에 복사하였다.&lt;/p&gt;

&lt;p&gt;QuickStart에서 CloudFormation으로 프로비저닝할 때, 로컬 복사를 위한 커맨드가 다음과 같이 자동으로 생성되는데, 보다시피 &lt;code&gt;nc&lt;/code&gt; 명령을 이용해 netcat 링크를 만들어 내부 마스터 서버에 접속하고 있다. (&lt;code&gt;netcat&lt;/code&gt;을 이용하지 않고, &lt;code&gt;-W&lt;/code&gt; 옵션으로도 클라이언트의 입출력을 마스터 호스트로 전달할 수 있다.)&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;nv&#34;&gt;SSH_KEY&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;path/to/laptop.pem&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; scp -i &lt;span class=&#34;nv&#34;&gt;$SSH_KEY&lt;/span&gt; -o &lt;span class=&#34;nv&#34;&gt;ProxyCommand&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;ssh -i \&amp;#34;&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;SSH_KEY&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;\&amp;#34; ubuntu@13.209.9.190 nc %h %p&amp;#34;&lt;/span&gt; ubuntu@10.0.21.21:~/kubeconfig ./kubeconfig&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;다음은 복사된 &lt;code&gt;kubeconfig&lt;/code&gt; 파일의 내용이다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;apiVersion&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;v1&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;clusters&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;cluster&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;certificate-authority-data&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&amp;lt;base64-encoded-ca-cert&lt;span class=&#34;sd&#34;&gt;&amp;gt;
&lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;    server: https://13.125.59.233:6443&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;kubernetes&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;contexts&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;context&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;cluster&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;kubernetes&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;user&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;admin&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;admin@kubernetes&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;current-context&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;admin@kubernetes&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;kind&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;Config&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;preferences&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;{}&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;users&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;admin&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;user&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  	&lt;/span&gt;client-certificate-data&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&amp;lt;base64-encoded-csr&lt;span class=&#34;sd&#34;&gt;&amp;gt;
&lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;  	client-key-data: &amp;lt;base64-encoded-private-key&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;보다시피, yaml 파일 형식이며, &lt;code&gt;certificate-authority-data&lt;/code&gt;, &lt;code&gt;client-certificate-data&lt;/code&gt;, &lt;code&gt;client-key-data&lt;/code&gt;처럼 인증서 및 개인키는 base64로 인코딩되어 있다.&lt;/p&gt;

&lt;h3 id=&#34;certificate-authority-data&#34;&gt;certificate-authority-data&lt;/h3&gt;

&lt;p&gt;첫 번째 base64로 인코딩된 데이터는 API 서버의 TLS 인증서를 발급한 CA(certificate authority, 인증 기관)이다. 대부분의 TLS 연결은 기본적으로 &lt;code&gt;/etc/ssl&lt;/code&gt;에서 신뢰하는 CA를 찾는데, 쿠버네티스의 경우 &lt;code&gt;kubeconfig&lt;/code&gt; 파일의 &lt;code&gt;certificate-authority-data&lt;/code&gt; 에 API 서버의 TLS 인증서를 발급한 Root CA을 기술하고 있다.&lt;/p&gt;

&lt;p&gt;Root CA외에 API 서버에서 인자로 전달되는 인증서, 공개키, 개인키 데이터는 다음과 같다. (쿠버네티스 1.13.x 기준)&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;$ kube-apiserver 
    --authorization-mode&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;Node,RBAC 
    --advertise-address&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;172&lt;/span&gt;.17.0.3 
    --allow-privileged&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt; 
    --client-ca-file&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;/etc/kubernetes/pki/ca.crt 
    --enable-admission-plugins&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;NodeRestriction 
    --enable-bootstrap-token-auth&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt; 
    --etcd-cafile&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;/etc/kubernetes/pki/etcd/ca.crt 
    --etcd-certfile&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;/etc/kubernetes/pki/apiserver-etcd-client.crt 
    --etcd-keyfile&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;/etc/kubernetes/pki/apiserver-etcd-client.key 
    --etcd-servers&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;https://127.0.0.1:2379 
    --insecure-port&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt; 
    --kubelet-client-certificate&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;/etc/kubernetes/pki/apiserver-kubelet-client.crt 
    --kubelet-client-key&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;/etc/kubernetes/pki/apiserver-kubelet-client.key 
    --kubelet-preferred-address-types&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;InternalIP,ExternalIP,Hostname 
    --proxy-client-cert-file&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;/etc/kubernetes/pki/front-proxy-client.crt 
    --proxy-client-key-file&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;/etc/kubernetes/pki/front-proxy-client.key 
    --requestheader-allowed-names&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;front-proxy-client 
    --requestheader-client-ca-file&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;/etc/kubernetes/pki/front-proxy-ca.crt 
    --requestheader-extra-headers-prefix&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;X-Remote-Extra- 
    --requestheader-group-headers&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;X-Remote-Group 
    --requestheader-username-headers&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;X-Remote-User 
    --secure-port&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;6443&lt;/span&gt; 
    --service-account-key-file&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;/etc/kubernetes/pki/sa.pub 
    --service-cluster-ip-range&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;.96.0.0/12 
    --tls-cert-file&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;/etc/kubernetes/pki/apiserver.crt 
    --tls-private-key-file&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;/etc/kubernetes/pki/apiserver.key&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;보다시피 API 서버의 경우, TLS 연결을 위한 인증서와 개인키는 각각 &lt;code&gt;--tls-cert-file&lt;/code&gt;, &lt;code&gt;--tls-private-key-file&lt;/code&gt; 인자를 통해 전달되고 있다. 그리고 API 서버의 &lt;code&gt;--client-ca-file&lt;/code&gt; 인자는 &lt;code&gt;/etc/kubernetes/pki/ca.crt&lt;/code&gt; 파일로 전달되고 있는데, 이는 쿠버네티스의 Root CA이며, 이는 앞서 살펴본 &lt;code&gt;kubeconfig&lt;/code&gt;의 &lt;code&gt;certificate-authority-data&lt;/code&gt;와 동일하다.&lt;/p&gt;

&lt;p&gt;모든 쿠버네티스 클러스터에는 쿠버네티스 컨트롤 플레인 또는 사용자에게 인증서를 제공하는데 사용할 수 있는 클러스터 내장 인증 기관(certificate authority)이 있다. CA는 API 컴포넌트에서 API 서버의 인증서를 확인하고, API 서버가 kubelet 클라이언트 인증서를 확인하는데 사용한다. 이를 지원하기 위해 CA 인증서 번들은 클러스터의 모든 노드에 분산되며 &lt;code&gt;default&lt;/code&gt; 서비스 계정에 연결된 시크릿으로서 배포된다. 쿠버네티스에는 기본적으로 세 가지 Root CA가 필요하다. 이들은 &lt;code&gt;/etc/kubernetes/pki&lt;/code&gt;에 저장된다.&lt;/p&gt;

&lt;p&gt;&lt;center&gt;&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;path&lt;/th&gt;
&lt;th&gt;CN&lt;/th&gt;
&lt;th&gt;description&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;ca.crt,key&lt;/td&gt;
&lt;td&gt;kubernetes-ca&lt;/td&gt;
&lt;td&gt;Kubernetes general CA&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;etcd/ca.crt,key&lt;/td&gt;
&lt;td&gt;etcd-ca&lt;/td&gt;
&lt;td&gt;For all etcd-related function&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;front-proxy-ca.crt,key&lt;/td&gt;
&lt;td&gt;kubernetes-front-proxy-ca&lt;/td&gt;
&lt;td&gt;For the front-end proxy&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;(참고 - &lt;a href=&#34;https://kubernetes.io/docs/setup/certificates/&#34; target=&#34;_blank&#34;&gt;PKI Certificates and Requirements&lt;/a&gt;)
&lt;/center&gt;&lt;/p&gt;

&lt;p&gt;이외에도 API 서버는 다음과 같이 인증과 관련된 다른 커맨드라인 인자를 지정할 수 있다. (참고 - &lt;a href=&#34;https://kubernetes.io/docs/reference/command-line-tools-reference/kube-apiserver/&#34; target=&#34;_blank&#34;&gt;kube-apiserver
&lt;/a&gt;)&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-txt&#34; data-lang=&#34;txt&#34;&gt;--cert-dir string                           The directory where the TLS certs are located. If --tls-cert-file and --tls-private-key-file are provided, this flag will be ignored. (default &amp;#34;/var/run/kubernetes&amp;#34;)
--client-ca-file string                     If set, any request presenting a client certificate signed by one of the authorities in the client-ca-file is authenticated with an identity corresponding to the CommonName of the client certificate.
--etcd-certfile string                      SSL certification file used to secure etcd communication.
--etcd-keyfile string                       SSL key file used to secure etcd communication.
--etcd-cafile string                        SSL Certificate Authority file used to secure etcd communication.
--kubelet-certificate-authority string      Path to a cert file for the certificate authority.
--kubelet-client-certificate string         Path to a client cert file for TLS.
--kubelet-client-key string                 Path to a client key file for TLS.
--proxy-client-cert-file string             Client certificate used to prove the identity of the aggregator or kube-apiserver when it must call out during a request. This includes proxying requests to a user api-server and calling out to webhook admission plugins. It is expected that this cert includes a signature from the CA in the --requestheader-client-ca-file flag. That CA is published in the &amp;#39;extension-apiserver-authentication&amp;#39; configmap in the kube-system namespace. Components recieving calls from kube-aggregator should use that CA to perform their half of the mutual TLS verification.
--proxy-client-key-file string              Private key for the client certificate used to prove the identity of the aggregator or kube-apiserver when it must call out during a request. This includes proxying requests to a user api-server and calling out to webhook admission plugins.
--requestheader-allowed-names stringSlice   List of client certificate common names to allow to provide usernames in headers specified by --requestheader-username-headers. If empty, any client certificate validated by the authorities in --requestheader-client-ca-file is allowed.
--requestheader-client-ca-file string       Root certificate bundle to use to verify client certificates on incoming requests before trusting usernames in headers specified by --requestheader-username-headers
--service-account-key-file stringArray      File containing PEM-encoded x509 RSA or ECDSA private or public keys, used to verify ServiceAccount tokens. If unspecified, --tls-private-key-file is used. The specified file can contain multiple keys, and the flag can be specified multiple times with different files.
--ssh-keyfile string                        If non-empty, use secure SSH proxy to the nodes, using this user keyfile
--tls-ca-file string                        If set, this certificate authority will used for secure access from Admission Controllers. This must be a valid PEM-encoded CA bundle. Alternatively, the certificate authority can be appended to the certificate provided by --tls-cert-file.
--tls-cert-file string                      File containing the default x509 Certificate for HTTPS. (CA cert, if any, concatenated after server cert). If HTTPS serving is enabled, and --tls-cert-file and --tls-private-key-file are not provided, a self-signed certificate and key are generated for the public address and saved to /var/run/kubernetes.
--tls-private-key-file string               File containing the default x509 private key matching --tls-cert-file.
--tls-sni-cert-key namedCertKey             A pair of x509 certificate and private key file paths, optionally suffixed with a list of domain patterns which are fully qualified domain names, possibly with prefixed wildcard segments. If no domain patterns are provided, the names of the certificate are extracted. Non-wildcard matches trump over wildcard matches, explicit domain patterns trump over extracted names. For multiple key/certificate pairs, use the --tls-sni-cert-key multiple times. Examples: &amp;#34;example.crt,example.key&amp;#34; or &amp;#34;foo.crt,foo.key:*.foo.com,foo.com&amp;#34;. (default [])&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;다음과 같이, &lt;code&gt;kubectl&lt;/code&gt;에서 클러스터 노드 정보를 조회할 때 디버그 레벨 &lt;code&gt;--v=10&lt;/code&gt;을 지정해보자.&lt;/p&gt;

&lt;p&gt;&lt;details&gt;
&lt;summary&gt;kubectl get nodes &amp;ndash;v=10&lt;/summary&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;$ kubectl get nodes --v&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.390541   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; loader.go:359&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Config loaded from file /Users/luno/Workspace/GitHub/ziwon/quickstart-heptio/kubeconfig
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.391193   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; loader.go:359&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Config loaded from file /Users/luno/Workspace/GitHub/ziwon/quickstart-heptio/kubeconfig
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.392557   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:104&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/servergroups.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.393214   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/batch/v1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.393495   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/autoscaling/v2beta1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.393529   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/certificates.k8s.io/v1beta1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.393559   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/batch/v1beta1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.393583   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/apiregistration.k8s.io/v1beta1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.393599   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/policy/v1beta1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.393613   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/storage.k8s.io/v1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.393622   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/admissionregistration.k8s.io/v1beta1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.393638   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/storage.k8s.io/v1beta1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.393657   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/apps/v1beta2/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.393653   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/scheduling.k8s.io/v1beta1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.393707   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/apiextensions.k8s.io/v1beta1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.393740   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/networking.k8s.io/v1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.393750   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/v1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.393771   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/autoscaling/v1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.393787   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/rbac.authorization.k8s.io/v1beta1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.393802   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/rbac.authorization.k8s.io/v1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.393816   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/apiregistration.k8s.io/v1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.393845   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/authentication.k8s.io/v1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.393899   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/events.k8s.io/v1beta1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.393912   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/authentication.k8s.io/v1beta1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.393922   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/authorization.k8s.io/v1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.393941   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/apps/v1beta1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.393946   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/extensions/v1beta1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.393966   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/authorization.k8s.io/v1beta1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.393984   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/apps/v1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.394926   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; loader.go:359&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Config loaded from file /Users/luno/Workspace/GitHub/ziwon/quickstart-heptio/kubeconfig
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.395217   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:104&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/servergroups.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.395311   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/scheduling.k8s.io/v1beta1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.395382   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/autoscaling/v1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.395421   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/rbac.authorization.k8s.io/v1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.395452   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/policy/v1beta1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.395477   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/batch/v1beta1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.395521   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/batch/v1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.395529   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/autoscaling/v2beta1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.395547   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/networking.k8s.io/v1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.395550   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/admissionregistration.k8s.io/v1beta1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.395559   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/authentication.k8s.io/v1beta1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.395550   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/storage.k8s.io/v1beta1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.395551   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/certificates.k8s.io/v1beta1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.395592   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/authorization.k8s.io/v1beta1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.395599   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/authorization.k8s.io/v1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.395620   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/extensions/v1beta1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.395625   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/apiextensions.k8s.io/v1beta1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.395639   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/events.k8s.io/v1beta1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.395651   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/storage.k8s.io/v1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.395677   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/apiregistration.k8s.io/v1beta1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.395651   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/authentication.k8s.io/v1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.395652   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/v1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.395660   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/apiregistration.k8s.io/v1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.395660   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/rbac.authorization.k8s.io/v1beta1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.395743   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/apps/v1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.395722   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/apps/v1beta1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.395753   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/apps/v1beta2/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.395900   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:104&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/servergroups.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.396066   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/v1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.396129   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/apiregistration.k8s.io/v1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.396186   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/apiregistration.k8s.io/v1beta1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.396276   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/extensions/v1beta1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.396383   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/apps/v1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.396474   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/apps/v1beta2/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.396549   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/apps/v1beta1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.396602   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/events.k8s.io/v1beta1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.396649   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/authentication.k8s.io/v1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.396705   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/authentication.k8s.io/v1beta1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.396761   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/authorization.k8s.io/v1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.396821   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/authorization.k8s.io/v1beta1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.396873   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/autoscaling/v1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.396934   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/autoscaling/v2beta1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.396988   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/batch/v1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.397045   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/batch/v1beta1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.397103   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/certificates.k8s.io/v1beta1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.397157   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/networking.k8s.io/v1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.397221   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/policy/v1beta1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.397285   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/rbac.authorization.k8s.io/v1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.397350   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/rbac.authorization.k8s.io/v1beta1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.397403   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/storage.k8s.io/v1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.397458   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/storage.k8s.io/v1beta1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.397515   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/admissionregistration.k8s.io/v1beta1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.397572   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/apiextensions.k8s.io/v1beta1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.397625   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; cached_discovery.go:70&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; returning cached discovery info from /Users/luno/.kube/cache/discovery/13.125.59.233_6443/scheduling.k8s.io/v1beta1/serverresources.json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.398497   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; loader.go:359&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Config loaded from file /Users/luno/Workspace/GitHub/ziwon/quickstart-heptio/kubeconfig
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.398751   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; round_trippers.go:386&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; curl -k -v -XGET  -H &lt;span class=&#34;s2&#34;&gt;&amp;#34;Accept: application/json;as=Table;v=v1beta1;g=meta.k8s.io, application/json&amp;#34;&lt;/span&gt; -H &lt;span class=&#34;s2&#34;&gt;&amp;#34;User-Agent: kubectl/v1.12.3 (darwin/amd64) kubernetes/435f92c&amp;#34;&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;https://13.125.59.233:6443/api/v1/nodes?limit=500&amp;#39;&lt;/span&gt;
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.435293   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; round_trippers.go:405&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; GET https://13.125.59.233:6443/api/v1/nodes?limit&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;500&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;200&lt;/span&gt; OK in &lt;span class=&#34;m&#34;&gt;36&lt;/span&gt; milliseconds
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.435313   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; round_trippers.go:411&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Response Headers:
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.435318   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; round_trippers.go:414&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;     Content-Type: application/json
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.435324   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; round_trippers.go:414&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;     Date: Mon, &lt;span class=&#34;m&#34;&gt;04&lt;/span&gt; Feb &lt;span class=&#34;m&#34;&gt;2019&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;04&lt;/span&gt;:05:46 GMT
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.437396   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; request.go:942&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Response Body: &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;kind&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;Table&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;apiVersion&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;meta.k8s.io/v1beta1&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;metadata&amp;#34;&lt;/span&gt;:&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;selfLink&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;/api/v1/nodes&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;resourceVersion&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;7633&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;columnDefinitions&amp;#34;&lt;/span&gt;:&lt;span class=&#34;o&#34;&gt;[{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;Name&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;string&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;format&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;description&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;Name must be unique within a namespace. Is required when creating resources, although some resources may allow a client to request the generation of an appropriate name automatically. Name is primarily intended for creation idempotence and configuration definition. Cannot be updated. More info: http://kubernetes.io/docs/user-guide/identifiers#names&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;priority&amp;#34;&lt;/span&gt;:0&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;,&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;Status&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;string&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;format&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;description&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;The status of the node&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;priority&amp;#34;&lt;/span&gt;:0&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;,&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;Roles&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;string&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;format&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;description&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;The roles of the node&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;priority&amp;#34;&lt;/span&gt;:0&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;,&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;Age&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;string&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;format&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;description&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;CreationTimestamp is a timestamp representing the server time when this object was created. It is not guaranteed to be set in happens-before order across separate operations. Clients may not set this value. It is represented in RFC3339 form and is in UTC.\n\nPopulated by the system. Read-only. Null for lists. More info: https://git.k8s.io/community/contributors/devel/api-conventions.md#metadata&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;priority&amp;#34;&lt;/span&gt;:0&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;,&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;Version&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;string&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;format&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;description&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;Kubelet Version reported by the node.&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;priority&amp;#34;&lt;/span&gt;:0&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;,&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;Internal-IP&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;string&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;format&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;description&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;List of addresses reachable to the node. Queried from cloud provider, if available. More info: https://kubernetes.io/docs/concepts/nodes/node/#addresses&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;priority&amp;#34;&lt;/span&gt;:1&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;,&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;External-IP&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;string&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;format&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;description&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;List of addresses reachable to the node. Queried from cloud provider, if available. More info: https://kubernetes.io/docs/concepts/nodes/node/#addresses&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;priority&amp;#34;&lt;/span&gt;:1&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;,&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;OS-Image&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;string&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;format&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;description&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;OS Image reported by the node from /etc/os-release (e.g. Debian GNU/Linux 7 (wheezy)).&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;priority&amp;#34;&lt;/span&gt;:1&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;,&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;Kernel-Version&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;string&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;format&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;description&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;Kernel Version reported by the node from &amp;#39;uname -r&amp;#39; (e.g. 3.16.0-0.bpo.4-amd64).&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;priority&amp;#34;&lt;/span&gt;:1&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;,&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;Container-Runtime&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;string&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;format&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;description&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;ContainerRuntime Version reported by the node through runtime remote API (e.g. docker://1.5.0).&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;priority&amp;#34;&lt;/span&gt;:1&lt;span class=&#34;o&#34;&gt;}]&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;rows&amp;#34;&lt;/span&gt;:&lt;span class=&#34;o&#34;&gt;[{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;cells&amp;#34;&lt;/span&gt;:&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;ip-10-0-11-90.ap-northeast-2.compute.internal&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;Ready&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;\u003cnone\u003e&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;1h&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;v1.11.5&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;10.0.11.90&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;\u003cnone\u003e&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;Ubuntu 16.04.5 LTS&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;4.4.0-1072-aws&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;docker://17.3.2&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;object&amp;#34;&lt;/span&gt;:&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;kind&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;PartialObjectMetadata&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;apiVersion&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;meta.k8s.io/v1beta1&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;metadata&amp;#34;&lt;/span&gt;:&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;ip-10-0-11-90.ap-northeast-2.compute.internal&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;selfLink&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;/api/v1/nodes/ip-10-0-11-90.ap-northeast-2.compute.internal&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;uid&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;208bde9f-2829-11e9-a2c8-02015048da6c&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;resourceVersion&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;7622&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;creationTimestamp&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;2019-02-04T03:01:11Z&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;labels&amp;#34;&lt;/span&gt;:&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;beta.kubernetes.io/arch&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;amd64&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;beta.kubernetes.io/instance-type&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;t2.small&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;beta.kubernetes.io/os&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;linux&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;failure-domain.beta.kubernetes.io/region&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;ap-northeast-2&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;failure-domain.beta.kubernetes.io/zone&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;ap-northeast-2a&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;kubernetes.io/hostname&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;ip-10-0-11-90.ap-northeast-2.compute.internal&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;annotations&amp;#34;&lt;/span&gt;:&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;kubeadm.alpha.kubernetes.io/cri-socket&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;/var/run/dockershim.sock&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;node.alpha.kubernetes.io/ttl&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;0&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;volumes.kubernetes.io/controller-managed-attach-detach&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;true&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;}}}}&lt;/span&gt;,&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;cells&amp;#34;&lt;/span&gt;:&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;ip-10-0-15-49.ap-northeast-2.compute.internal&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;Ready&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;\u003cnone\u003e&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;1h&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;v1.11.5&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;10.0.15.49&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;\u003cnone\u003e&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;Ubuntu 16.04.5 LTS&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;4.4.0-1072-aws&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;docker://17.3.2&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;object&amp;#34;&lt;/span&gt;:&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;kind&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;PartialObjectMetadata&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;apiVersion&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;meta.k8s.io/v1beta1&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;metadata&amp;#34;&lt;/span&gt;:&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;ip-10-0-15-49.ap-northeast-2.compute.internal&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;selfLink&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;/api/v1/nodes/ip-10-0-15-49.ap-northeast-2.compute.internal&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;uid&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;208d8cb1-2829-11e9-a2c8-02015048da6c&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;resourceVersion&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;7619&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;creationTimestamp&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;2019-02-04T03:01:11Z&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;labels&amp;#34;&lt;/span&gt;:&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;beta.kubernetes.io/arch&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;amd64&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;beta.kubernetes.io/instance-type&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;t2.small&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;beta.kubernetes.io/os&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;linux&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;failure-domain.beta.kubernetes.io/region&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;ap-northeast-2&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;failure-domain.beta.kubernetes.io/zone&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;ap-northeast-2a&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;kubernetes.io/hostname&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;ip-10-0-15-49.ap-northeast-2.compute.internal&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;annotations&amp;#34;&lt;/span&gt;:&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;kubeadm.alpha.kubernetes.io/cri-socket&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;/var/run/dockershim.sock&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;node.alpha.kubernetes.io/ttl&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;0&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;volumes.kubernetes.io/controller-managed-attach-detach&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;true&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;}}}}&lt;/span&gt;,&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;cells&amp;#34;&lt;/span&gt;:&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;ip-10-0-21-21.ap-northeast-2.compute.internal&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;Ready&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;master&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;1h&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;v1.11.5&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;10.0.21.21&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;\u003cnone\u003e&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;Ubuntu 16.04.5 LTS&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;4.4.0-1072-aws&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;docker://17.3.2&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;object&amp;#34;&lt;/span&gt;:&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;kind&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;PartialObjectMetadata&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;apiVersion&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;meta.k8s.io/v1beta1&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;metadata&amp;#34;&lt;/span&gt;:&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;ip-10-0-21-21.ap-northeast-2.compute.internal&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;selfLink&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;/api/v1/nodes/ip-10-0-21-21.ap-northeast-2.compute.internal&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;uid&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;af849c71-2828-11e9-a2c8-02015048da6c&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;resourceVersion&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;7626&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;creationTimestamp&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;2019-02-04T02:58:02Z&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;labels&amp;#34;&lt;/span&gt;:&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;beta.kubernetes.io/arch&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;amd64&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;beta.kubernetes.io/instance-type&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;t2.small&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;beta.kubernetes.io/os&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;linux&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;failure-domain.beta.kubernetes.io/region&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;ap-northeast-2&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;failure-domain.beta.kubernetes.io/zone&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;ap-northeast-2a&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;kubernetes.io/hostname&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;ip-10-0-21-21.ap-northeast-2.compute.internal&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;node-role.kubernetes.io/master&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;annotations&amp;#34;&lt;/span&gt;:&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;kubeadm.alpha.kubernetes.io/cri-socket&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;/var/run/dockershim.sock&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;node.alpha.kubernetes.io/ttl&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;0&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;volumes.kubernetes.io/controller-managed-attach-detach&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;true&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;}}}}&lt;/span&gt;,&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;cells&amp;#34;&lt;/span&gt;:&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;ip-10-0-23-205.ap-northeast-2.compute.internal&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;Ready&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;\u003cnone\u003e&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;1h&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;v1.11.5&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;10.0.23.205&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;\u003cnone\u003e&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;Ubuntu 16.04.5 LTS&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;4.4.0-1072-aws&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;docker://17.3.2&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;object&amp;#34;&lt;/span&gt;:&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;kind&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;PartialObjectMetadata&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;apiVersion&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;meta.k8s.io/v1beta1&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;metadata&amp;#34;&lt;/span&gt;:&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;ip-10-0-23-205.ap-northeast-2.compute.internal&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;selfLink&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;/api/v1/nodes/ip-10-0-23-205.ap-northeast-2.compute.internal&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;uid&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;22442c26-2829-11e9-a2c8-02015048da6c&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;resourceVersion&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;7628&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;creationTimestamp&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;2019-02-04T03:01:14Z&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;labels&amp;#34;&lt;/span&gt;:&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;beta.kubernetes.io/arch&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;amd64&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;beta.kubernetes.io/instance-type&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;t2.small&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;beta.kubernetes.io/os&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;linux&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;failure-domain.beta.kubernetes.io/region&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;ap-northeast-2&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;failure-domain.beta.kubernetes.io/zone&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;ap-northeast-2a&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;kubernetes.io/hostname&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;ip-10-0-23-205.ap-northeast-2.compute.internal&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;annotations&amp;#34;&lt;/span&gt;:&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;kubeadm.alpha.kubernetes.io/cri-socket&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;/var/run/dockershim.sock&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;node.alpha.kubernetes.io/ttl&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;0&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;volumes.kubernetes.io/controller-managed-attach-detach&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;true&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;}}}}&lt;/span&gt;,&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;cells&amp;#34;&lt;/span&gt;:&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;ip-10-0-30-16.ap-northeast-2.compute.internal&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;Ready&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;\u003cnone\u003e&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;1h&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;v1.11.5&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;10.0.30.16&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;\u003cnone\u003e&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;Ubuntu 16.04.5 LTS&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;4.4.0-1072-aws&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;docker://17.3.2&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;object&amp;#34;&lt;/span&gt;:&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;kind&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;PartialObjectMetadata&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;apiVersion&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;meta.k8s.io/v1beta1&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;metadata&amp;#34;&lt;/span&gt;:&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;ip-10-0-30-16.ap-northeast-2.compute.internal&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;selfLink&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;/api/v1/nodes/ip-10-0-30-16.ap-northeast-2.compute.internal&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;uid&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;1c7ce276-2829-11e9-a2c8-02015048da6c&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;resourceVersion&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;7627&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;creationTimestamp&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;2019-02-04T03:01:04Z&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;labels&amp;#34;&lt;/span&gt;:&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;beta.kubernetes.io/arch&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;amd64&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;beta.kubernetes.io/instance-type&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;t2.small&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;beta.kubernetes.io/os&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;linux&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;failure-domain.beta.kubernetes.io/region&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;ap-northeast-2&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;failure-domain.beta.kubernetes.io/zone&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;ap-northeast-2a&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;kubernetes.io/hostname&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;ip-10-0-30-16.ap-northeast-2.compute.internal&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;annotations&amp;#34;&lt;/span&gt;:&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;kubeadm.alpha.kubernetes.io/cri-socket&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;/var/run/dockershim.sock&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;node.alpha.kubernetes.io/ttl&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;0&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;volumes.kubernetes.io/controller-managed-attach-detach&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;true&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;}}}}&lt;/span&gt;,&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;cells&amp;#34;&lt;/span&gt;:&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;ip-10-0-7-175.ap-northeast-2.compute.internal&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;Ready&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;\u003cnone\u003e&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;1h&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;v1.11.5&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;10.0.7.175&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;\u003cnone\u003e&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;Ubuntu 16.04.5 LTS&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;4.4.0-1072-aws&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;docker://17.3.2&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;object&amp;#34;&lt;/span&gt;:&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;kind&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;PartialObjectMetadata&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;apiVersion&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;meta.k8s.io/v1beta1&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;metadata&amp;#34;&lt;/span&gt;:&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;ip-10-0-7-175.ap-northeast-2.compute.internal&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;selfLink&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;/api/v1/nodes/ip-10-0-7-175.ap-northeast-2.compute.internal&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;uid&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;3f3c5d27-2829-11e9-a2c8-02015048da6c&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;resourceVersion&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;7623&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;creationTimestamp&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;2019-02-04T03:02:03Z&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;labels&amp;#34;&lt;/span&gt;:&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;beta.kubernetes.io/arch&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;amd64&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;beta.kubernetes.io/instance-type&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;t2.small&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;beta.kubernetes.io/os&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;linux&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;failure-domain.beta.kubernetes.io/region&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;ap-northeast-2&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;failure-domain.beta.kubernetes.io/zone&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;ap-northeast-2a&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;kubernetes.io/hostname&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;ip-10-0-7-175.ap-northeast-2.compute.internal&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;annotations&amp;#34;&lt;/span&gt;:&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;kubeadm.alpha.kubernetes.io/cri-socket&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;/var/run/dockershim.sock&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;node.alpha.kubernetes.io/ttl&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;0&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;volumes.kubernetes.io/controller-managed-attach-detach&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;true&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;}}}}]}&lt;/span&gt;
I0204 &lt;span class=&#34;m&#34;&gt;13&lt;/span&gt;:05:46.438816   &lt;span class=&#34;m&#34;&gt;15326&lt;/span&gt; get.go:558&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; no kind is registered &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; the &lt;span class=&#34;nb&#34;&gt;type&lt;/span&gt; v1beta1.Table in scheme &lt;span class=&#34;s2&#34;&gt;&amp;#34;k8s.io/kubernetes/pkg/api/legacyscheme/scheme.go:29&amp;#34;&lt;/span&gt;
NAME                                             STATUS   ROLES    AGE   VERSION
ip-10-0-11-90.ap-northeast-2.compute.internal    Ready    &amp;lt;none&amp;gt;   1h    v1.11.5
ip-10-0-15-49.ap-northeast-2.compute.internal    Ready    &amp;lt;none&amp;gt;   1h    v1.11.5
ip-10-0-21-21.ap-northeast-2.compute.internal    Ready    master   1h    v1.11.5
ip-10-0-23-205.ap-northeast-2.compute.internal   Ready    &amp;lt;none&amp;gt;   1h    v1.11.5
ip-10-0-30-16.ap-northeast-2.compute.internal    Ready    &amp;lt;none&amp;gt;   1h    v1.11.5
ip-10-0-7-175.ap-northeast-2.compute.internal    Ready    &amp;lt;none&amp;gt;   1h    v1.11.5&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;/details&gt;&lt;/p&gt;

&lt;p&gt;그러면 위 상세 로그에서 다음과 같은 &lt;code&gt;kubectl get node&lt;/code&gt;에 대응하는 &lt;code&gt;curl&lt;/code&gt; 명령어를 확인할 수 있다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;$ curl -k -v -XGET  -H &lt;span class=&#34;s2&#34;&gt;&amp;#34;Accept: application/json;as=Table;v=v1beta1;g=meta.k8s.io, application/json&amp;#34;&lt;/span&gt; -H &lt;span class=&#34;s2&#34;&gt;&amp;#34;User-Agent: kubectl/v1.12.3 (darwin/amd64) kubernetes/435f92c&amp;#34;&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;https://13.125.59.233:6443/api/v1/nodes?limit=500&amp;#39;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위 &lt;code&gt;kubectl&lt;/code&gt;을 통해서 호출되는 API 서버의 응답은 다음과 같다.&lt;/p&gt;

&lt;p&gt;&lt;details&gt;
&lt;summary&gt;&lt;code&gt;kubectl get node&lt;/code&gt; json 응답&lt;/summary&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;nt&#34;&gt;&amp;#34;kind&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;Table&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
  &lt;span class=&#34;nt&#34;&gt;&amp;#34;apiVersion&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;meta.k8s.io/v1beta1&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
  &lt;span class=&#34;nt&#34;&gt;&amp;#34;metadata&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;nt&#34;&gt;&amp;#34;selfLink&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;/api/v1/nodes&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
    &lt;span class=&#34;nt&#34;&gt;&amp;#34;resourceVersion&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;7633&amp;#34;&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
  &lt;span class=&#34;nt&#34;&gt;&amp;#34;columnDefinitions&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;Name&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;string&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;format&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;description&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;Name must be unique within a namespace. Is required when creating resources, although some resources may allow a client to request the generation of an appropriate name automatically. Name is primarily intended for creation idempotence and configuration definition. Cannot be updated. More info: http://kubernetes.io/docs/user-guide/identifiers#names&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;priority&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;Status&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;string&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;format&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;description&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;The status of the node&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;priority&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;Roles&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;string&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;format&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;description&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;The roles of the node&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;priority&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;Age&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;string&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;format&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;description&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;CreationTimestamp is a timestamp representing the server time when this object was created. It is not guaranteed to be set in happens-before order across separate operations. Clients may not set this value. It is represented in RFC3339 form and is in UTC.\n\nPopulated by the system. Read-only. Null for lists. More info: https://git.k8s.io/community/contributors/devel/api-conventions.md#metadata&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;priority&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;Version&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;string&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;format&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;description&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;Kubelet Version reported by the node.&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;priority&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;Internal-IP&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;string&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;format&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;description&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;List of addresses reachable to the node. Queried from cloud provider, if available. More info: https://kubernetes.io/docs/concepts/nodes/node/#addresses&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;priority&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;External-IP&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;string&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;format&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;description&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;List of addresses reachable to the node. Queried from cloud provider, if available. More info: https://kubernetes.io/docs/concepts/nodes/node/#addresses&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;priority&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;OS-Image&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;string&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;format&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;description&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;OS Image reported by the node from /etc/os-release (e.g. Debian GNU/Linux 7 (wheezy)).&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;priority&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;Kernel-Version&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;string&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;format&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;description&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;Kernel Version reported by the node from &amp;#39;uname -r&amp;#39; (e.g. 3.16.0-0.bpo.4-amd64).&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;priority&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;Container-Runtime&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;string&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;format&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;description&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;ContainerRuntime Version reported by the node through runtime remote API (e.g. docker://1.5.0).&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;priority&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;],&lt;/span&gt;
  &lt;span class=&#34;nt&#34;&gt;&amp;#34;rows&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;cells&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;ip-10-0-11-90.ap-northeast-2.compute.internal&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;Ready&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;lt;none&amp;gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;1h&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;v1.11.5&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;10.0.11.90&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;lt;none&amp;gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;Ubuntu 16.04.5 LTS&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;4.4.0-1072-aws&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;docker://17.3.2&amp;#34;&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;],&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;object&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;nt&#34;&gt;&amp;#34;kind&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;PartialObjectMetadata&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;nt&#34;&gt;&amp;#34;apiVersion&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;meta.k8s.io/v1beta1&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;nt&#34;&gt;&amp;#34;metadata&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
          &lt;span class=&#34;nt&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;ip-10-0-11-90.ap-northeast-2.compute.internal&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
          &lt;span class=&#34;nt&#34;&gt;&amp;#34;selfLink&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;/api/v1/nodes/ip-10-0-11-90.ap-northeast-2.compute.internal&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
          &lt;span class=&#34;nt&#34;&gt;&amp;#34;uid&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;208bde9f-2829-11e9-a2c8-02015048da6c&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
          &lt;span class=&#34;nt&#34;&gt;&amp;#34;resourceVersion&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;7622&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
          &lt;span class=&#34;nt&#34;&gt;&amp;#34;creationTimestamp&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;2019-02-04T03:01:11Z&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
          &lt;span class=&#34;nt&#34;&gt;&amp;#34;labels&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;nt&#34;&gt;&amp;#34;beta.kubernetes.io/arch&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;amd64&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;nt&#34;&gt;&amp;#34;beta.kubernetes.io/instance-type&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;t2.small&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;nt&#34;&gt;&amp;#34;beta.kubernetes.io/os&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;linux&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;nt&#34;&gt;&amp;#34;failure-domain.beta.kubernetes.io/region&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;ap-northeast-2&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;nt&#34;&gt;&amp;#34;failure-domain.beta.kubernetes.io/zone&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;ap-northeast-2a&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;nt&#34;&gt;&amp;#34;kubernetes.io/hostname&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;ip-10-0-11-90.ap-northeast-2.compute.internal&amp;#34;&lt;/span&gt;
          &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
          &lt;span class=&#34;nt&#34;&gt;&amp;#34;annotations&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;nt&#34;&gt;&amp;#34;kubeadm.alpha.kubernetes.io/cri-socket&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;/var/run/dockershim.sock&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;nt&#34;&gt;&amp;#34;node.alpha.kubernetes.io/ttl&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;0&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;nt&#34;&gt;&amp;#34;volumes.kubernetes.io/controller-managed-attach-detach&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;true&amp;#34;&lt;/span&gt;
          &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;cells&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;ip-10-0-15-49.ap-northeast-2.compute.internal&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;Ready&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;lt;none&amp;gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;1h&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;v1.11.5&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;10.0.15.49&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;lt;none&amp;gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;Ubuntu 16.04.5 LTS&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;4.4.0-1072-aws&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;docker://17.3.2&amp;#34;&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;],&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;object&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;nt&#34;&gt;&amp;#34;kind&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;PartialObjectMetadata&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;nt&#34;&gt;&amp;#34;apiVersion&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;meta.k8s.io/v1beta1&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;nt&#34;&gt;&amp;#34;metadata&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
          &lt;span class=&#34;nt&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;ip-10-0-15-49.ap-northeast-2.compute.internal&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
          &lt;span class=&#34;nt&#34;&gt;&amp;#34;selfLink&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;/api/v1/nodes/ip-10-0-15-49.ap-northeast-2.compute.internal&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
          &lt;span class=&#34;nt&#34;&gt;&amp;#34;uid&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;208d8cb1-2829-11e9-a2c8-02015048da6c&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
          &lt;span class=&#34;nt&#34;&gt;&amp;#34;resourceVersion&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;7619&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
          &lt;span class=&#34;nt&#34;&gt;&amp;#34;creationTimestamp&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;2019-02-04T03:01:11Z&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
          &lt;span class=&#34;nt&#34;&gt;&amp;#34;labels&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;nt&#34;&gt;&amp;#34;beta.kubernetes.io/arch&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;amd64&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;nt&#34;&gt;&amp;#34;beta.kubernetes.io/instance-type&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;t2.small&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;nt&#34;&gt;&amp;#34;beta.kubernetes.io/os&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;linux&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;nt&#34;&gt;&amp;#34;failure-domain.beta.kubernetes.io/region&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;ap-northeast-2&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;nt&#34;&gt;&amp;#34;failure-domain.beta.kubernetes.io/zone&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;ap-northeast-2a&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;nt&#34;&gt;&amp;#34;kubernetes.io/hostname&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;ip-10-0-15-49.ap-northeast-2.compute.internal&amp;#34;&lt;/span&gt;
          &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
          &lt;span class=&#34;nt&#34;&gt;&amp;#34;annotations&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;nt&#34;&gt;&amp;#34;kubeadm.alpha.kubernetes.io/cri-socket&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;/var/run/dockershim.sock&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;nt&#34;&gt;&amp;#34;node.alpha.kubernetes.io/ttl&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;0&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;nt&#34;&gt;&amp;#34;volumes.kubernetes.io/controller-managed-attach-detach&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;true&amp;#34;&lt;/span&gt;
          &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;cells&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;ip-10-0-21-21.ap-northeast-2.compute.internal&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;Ready&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;master&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;1h&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;v1.11.5&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;10.0.21.21&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;lt;none&amp;gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;Ubuntu 16.04.5 LTS&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;4.4.0-1072-aws&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;docker://17.3.2&amp;#34;&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;],&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;object&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;nt&#34;&gt;&amp;#34;kind&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;PartialObjectMetadata&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;nt&#34;&gt;&amp;#34;apiVersion&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;meta.k8s.io/v1beta1&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;nt&#34;&gt;&amp;#34;metadata&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
          &lt;span class=&#34;nt&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;ip-10-0-21-21.ap-northeast-2.compute.internal&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
          &lt;span class=&#34;nt&#34;&gt;&amp;#34;selfLink&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;/api/v1/nodes/ip-10-0-21-21.ap-northeast-2.compute.internal&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
          &lt;span class=&#34;nt&#34;&gt;&amp;#34;uid&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;af849c71-2828-11e9-a2c8-02015048da6c&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
          &lt;span class=&#34;nt&#34;&gt;&amp;#34;resourceVersion&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;7626&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
          &lt;span class=&#34;nt&#34;&gt;&amp;#34;creationTimestamp&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;2019-02-04T02:58:02Z&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
          &lt;span class=&#34;nt&#34;&gt;&amp;#34;labels&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;nt&#34;&gt;&amp;#34;beta.kubernetes.io/arch&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;amd64&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;nt&#34;&gt;&amp;#34;beta.kubernetes.io/instance-type&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;t2.small&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;nt&#34;&gt;&amp;#34;beta.kubernetes.io/os&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;linux&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;nt&#34;&gt;&amp;#34;failure-domain.beta.kubernetes.io/region&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;ap-northeast-2&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;nt&#34;&gt;&amp;#34;failure-domain.beta.kubernetes.io/zone&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;ap-northeast-2a&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;nt&#34;&gt;&amp;#34;kubernetes.io/hostname&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;ip-10-0-21-21.ap-northeast-2.compute.internal&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;nt&#34;&gt;&amp;#34;node-role.kubernetes.io/master&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;
          &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
          &lt;span class=&#34;nt&#34;&gt;&amp;#34;annotations&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;nt&#34;&gt;&amp;#34;kubeadm.alpha.kubernetes.io/cri-socket&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;/var/run/dockershim.sock&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;nt&#34;&gt;&amp;#34;node.alpha.kubernetes.io/ttl&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;0&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;nt&#34;&gt;&amp;#34;volumes.kubernetes.io/controller-managed-attach-detach&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;true&amp;#34;&lt;/span&gt;
          &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;cells&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;ip-10-0-23-205.ap-northeast-2.compute.internal&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;Ready&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;lt;none&amp;gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;1h&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;v1.11.5&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;10.0.23.205&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;lt;none&amp;gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;Ubuntu 16.04.5 LTS&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;4.4.0-1072-aws&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;docker://17.3.2&amp;#34;&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;],&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;object&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;nt&#34;&gt;&amp;#34;kind&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;PartialObjectMetadata&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;nt&#34;&gt;&amp;#34;apiVersion&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;meta.k8s.io/v1beta1&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;nt&#34;&gt;&amp;#34;metadata&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
          &lt;span class=&#34;nt&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;ip-10-0-23-205.ap-northeast-2.compute.internal&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
          &lt;span class=&#34;nt&#34;&gt;&amp;#34;selfLink&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;/api/v1/nodes/ip-10-0-23-205.ap-northeast-2.compute.internal&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
          &lt;span class=&#34;nt&#34;&gt;&amp;#34;uid&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;22442c26-2829-11e9-a2c8-02015048da6c&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
          &lt;span class=&#34;nt&#34;&gt;&amp;#34;resourceVersion&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;7628&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
          &lt;span class=&#34;nt&#34;&gt;&amp;#34;creationTimestamp&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;2019-02-04T03:01:14Z&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
          &lt;span class=&#34;nt&#34;&gt;&amp;#34;labels&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;nt&#34;&gt;&amp;#34;beta.kubernetes.io/arch&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;amd64&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;nt&#34;&gt;&amp;#34;beta.kubernetes.io/instance-type&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;t2.small&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;nt&#34;&gt;&amp;#34;beta.kubernetes.io/os&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;linux&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;nt&#34;&gt;&amp;#34;failure-domain.beta.kubernetes.io/region&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;ap-northeast-2&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;nt&#34;&gt;&amp;#34;failure-domain.beta.kubernetes.io/zone&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;ap-northeast-2a&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;nt&#34;&gt;&amp;#34;kubernetes.io/hostname&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;ip-10-0-23-205.ap-northeast-2.compute.internal&amp;#34;&lt;/span&gt;
          &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
          &lt;span class=&#34;nt&#34;&gt;&amp;#34;annotations&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;nt&#34;&gt;&amp;#34;kubeadm.alpha.kubernetes.io/cri-socket&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;/var/run/dockershim.sock&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;nt&#34;&gt;&amp;#34;node.alpha.kubernetes.io/ttl&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;0&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;nt&#34;&gt;&amp;#34;volumes.kubernetes.io/controller-managed-attach-detach&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;true&amp;#34;&lt;/span&gt;
          &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;cells&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;ip-10-0-30-16.ap-northeast-2.compute.internal&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;Ready&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;lt;none&amp;gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;1h&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;v1.11.5&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;10.0.30.16&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;lt;none&amp;gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;Ubuntu 16.04.5 LTS&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;4.4.0-1072-aws&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;docker://17.3.2&amp;#34;&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;],&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;object&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;nt&#34;&gt;&amp;#34;kind&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;PartialObjectMetadata&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;nt&#34;&gt;&amp;#34;apiVersion&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;meta.k8s.io/v1beta1&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;nt&#34;&gt;&amp;#34;metadata&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
          &lt;span class=&#34;nt&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;ip-10-0-30-16.ap-northeast-2.compute.internal&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
          &lt;span class=&#34;nt&#34;&gt;&amp;#34;selfLink&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;/api/v1/nodes/ip-10-0-30-16.ap-northeast-2.compute.internal&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
          &lt;span class=&#34;nt&#34;&gt;&amp;#34;uid&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;1c7ce276-2829-11e9-a2c8-02015048da6c&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
          &lt;span class=&#34;nt&#34;&gt;&amp;#34;resourceVersion&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;7627&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
          &lt;span class=&#34;nt&#34;&gt;&amp;#34;creationTimestamp&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;2019-02-04T03:01:04Z&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
          &lt;span class=&#34;nt&#34;&gt;&amp;#34;labels&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;nt&#34;&gt;&amp;#34;beta.kubernetes.io/arch&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;amd64&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;nt&#34;&gt;&amp;#34;beta.kubernetes.io/instance-type&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;t2.small&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;nt&#34;&gt;&amp;#34;beta.kubernetes.io/os&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;linux&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;nt&#34;&gt;&amp;#34;failure-domain.beta.kubernetes.io/region&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;ap-northeast-2&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;nt&#34;&gt;&amp;#34;failure-domain.beta.kubernetes.io/zone&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;ap-northeast-2a&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;nt&#34;&gt;&amp;#34;kubernetes.io/hostname&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;ip-10-0-30-16.ap-northeast-2.compute.internal&amp;#34;&lt;/span&gt;
          &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
          &lt;span class=&#34;nt&#34;&gt;&amp;#34;annotations&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;nt&#34;&gt;&amp;#34;kubeadm.alpha.kubernetes.io/cri-socket&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;/var/run/dockershim.sock&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;nt&#34;&gt;&amp;#34;node.alpha.kubernetes.io/ttl&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;0&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;nt&#34;&gt;&amp;#34;volumes.kubernetes.io/controller-managed-attach-detach&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;true&amp;#34;&lt;/span&gt;
          &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;cells&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;ip-10-0-7-175.ap-northeast-2.compute.internal&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;Ready&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;lt;none&amp;gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;1h&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;v1.11.5&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;10.0.7.175&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;lt;none&amp;gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;Ubuntu 16.04.5 LTS&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;4.4.0-1072-aws&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;s2&#34;&gt;&amp;#34;docker://17.3.2&amp;#34;&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;],&lt;/span&gt;
      &lt;span class=&#34;nt&#34;&gt;&amp;#34;object&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;nt&#34;&gt;&amp;#34;kind&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;PartialObjectMetadata&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;nt&#34;&gt;&amp;#34;apiVersion&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;meta.k8s.io/v1beta1&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
        &lt;span class=&#34;nt&#34;&gt;&amp;#34;metadata&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
          &lt;span class=&#34;nt&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;ip-10-0-7-175.ap-northeast-2.compute.internal&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
          &lt;span class=&#34;nt&#34;&gt;&amp;#34;selfLink&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;/api/v1/nodes/ip-10-0-7-175.ap-northeast-2.compute.internal&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
          &lt;span class=&#34;nt&#34;&gt;&amp;#34;uid&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;3f3c5d27-2829-11e9-a2c8-02015048da6c&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
          &lt;span class=&#34;nt&#34;&gt;&amp;#34;resourceVersion&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;7623&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
          &lt;span class=&#34;nt&#34;&gt;&amp;#34;creationTimestamp&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;2019-02-04T03:02:03Z&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
          &lt;span class=&#34;nt&#34;&gt;&amp;#34;labels&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;nt&#34;&gt;&amp;#34;beta.kubernetes.io/arch&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;amd64&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;nt&#34;&gt;&amp;#34;beta.kubernetes.io/instance-type&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;t2.small&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;nt&#34;&gt;&amp;#34;beta.kubernetes.io/os&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;linux&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;nt&#34;&gt;&amp;#34;failure-domain.beta.kubernetes.io/region&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;ap-northeast-2&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;nt&#34;&gt;&amp;#34;failure-domain.beta.kubernetes.io/zone&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;ap-northeast-2a&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;nt&#34;&gt;&amp;#34;kubernetes.io/hostname&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;ip-10-0-7-175.ap-northeast-2.compute.internal&amp;#34;&lt;/span&gt;
          &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
          &lt;span class=&#34;nt&#34;&gt;&amp;#34;annotations&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;nt&#34;&gt;&amp;#34;kubeadm.alpha.kubernetes.io/cri-socket&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;/var/run/dockershim.sock&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;nt&#34;&gt;&amp;#34;node.alpha.kubernetes.io/ttl&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;0&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
            &lt;span class=&#34;nt&#34;&gt;&amp;#34;volumes.kubernetes.io/controller-managed-attach-detach&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;true&amp;#34;&lt;/span&gt;
          &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;/details&gt;&lt;/p&gt;

&lt;p&gt;위 &lt;code&gt;curl&lt;/code&gt; 명령을 &lt;code&gt;kubeconfig&lt;/code&gt;에 인증서없이 그대로 호출하게 되면, 다음과 같이 API 서버로부터 &lt;code&gt;403&lt;/code&gt; 인증 오류가 반환된다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;nt&#34;&gt;&amp;#34;kind&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;Status&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
  &lt;span class=&#34;nt&#34;&gt;&amp;#34;apiVersion&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;v1&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
  &lt;span class=&#34;nt&#34;&gt;&amp;#34;metadata&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{},&lt;/span&gt;
  &lt;span class=&#34;nt&#34;&gt;&amp;#34;status&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;Failure&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
  &lt;span class=&#34;nt&#34;&gt;&amp;#34;message&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;nodes is forbidden: User \&amp;#34;system:anonymous\&amp;#34; cannot list nodes at the cluster scope&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
  &lt;span class=&#34;nt&#34;&gt;&amp;#34;reason&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;Forbidden&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
  &lt;span class=&#34;nt&#34;&gt;&amp;#34;details&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;nt&#34;&gt;&amp;#34;kind&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;nodes&amp;#34;&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
  &lt;span class=&#34;nt&#34;&gt;&amp;#34;code&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;403&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&#34;client-certificate-data-client-key-data&#34;&gt;client-certificate-data, client-key-data&lt;/h3&gt;

&lt;p&gt;쿠버네티스는 서버와 클라이언트가 각각 상호 인증(mutual authentication)한다.&lt;/p&gt;

&lt;p&gt;만약, &lt;code&gt;kubeconfig&lt;/code&gt; 파일의 &lt;code&gt;certificate-authority-data&lt;/code&gt;에 데이터가 잘못되거나 값이 삭제될 경우에는 다음과 같이 서버 연결이 사이닝되지 않았다는 오류를 볼 수 있다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;$ kubectl get node
Unable to connect to the server: x509: certificate signed by unknown authority&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;API 서버에 대해 보안 연결이 맺어져도 클라이언트 인증이 되어야 제한된 리소스에 접근이 가능하다. 이 때 클라이언트 인증시에 필요한 CSR과 프라이빗 키의 데이터가 각각 &lt;code&gt;client-certificate-data&lt;/code&gt;, &lt;code&gt;client-key-data&lt;/code&gt;에 기록된다.&lt;/p&gt;

&lt;h2 id=&#34;인증-authentication&#34;&gt;인증 (Authentication)&lt;/h2&gt;

&lt;p&gt;쿠버네티스 클라이언트 컴포넌트가 API 서버에 연결을 맺을 때, 쿠버네티스가 사용자 ID를 할당하는 여러 가지 방법이 있을 수 있는데, 쿠버네티스에는 다음과 같은 인증 방법이 있다. (참고 - &lt;a href=&#34;https://kubernetes.io/docs/reference/access-authn-authz/authentication/#authentication-strategies&#34; target=&#34;_blank&#34;&gt;Authentication strategies&lt;/a&gt;)&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;X509 Client Certs: 괜찮은 인증 방법이지만, 정기적으로 클라이언트 인증서 갱신 및 재배포를 처리해야 한다.&lt;/li&gt;
&lt;li&gt;Static Token File: 일시적이지 않은 특성 때문에 추천하지 않는다.&lt;/li&gt;
&lt;li&gt;Bootstrap Tokens: 위의 정적 토큰과 동일하다.&lt;/li&gt;
&lt;li&gt;Static Password File: API 서버를 재시작하지 않으면 패스워드를 변경할 수 없기 때문에 추천하지 않는다.&lt;/li&gt;
&lt;li&gt;Service Account Tokens: 최종 사용자가 쿠버네티스 클러스터와 상호 작용하려는 경우 사용해서는 안되나, 쿠버네티스에서 실행되는 응용 프로그램 및 작업 부하에 대해서는 추천할 수 있는 인증 방법이다.&lt;/li&gt;
&lt;li&gt;OpenID Connect Tokens: OIDC가 AWS IAM 등 ID 제공 업체와 통합되므로 최종 사용자를 위한 최상의 인증 방법이다.&lt;/li&gt;
&lt;li&gt;Webhook Token Authentication: OIDC와 마찬가지로 Webhook으로 GitHub 개인 토큰을 통합하여 최종 사용자가 사용할 수 있는 인증 방법이다.&lt;/li&gt;
&lt;li&gt;Authentication Proxy: &lt;code&gt;X-Remote-User&lt;/code&gt;와 같은 요청 헤더의 값을 설정하는 인증 프락시와 통합시에 사용하는 인증 방법이다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;클라이언트 인증서를 생성하는 방법은 다음과 같다. (참고 - &lt;a href=&#34;https://kubernetes.io/docs/tasks/tls/managing-tls-in-a-cluster/&#34; target=&#34;_blank&#34;&gt;Manage TLS Certificates in a Cluster&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;영상에서는 클라이언트 인증을 위한 임의의 사용자 계정(예, &lt;code&gt;users:ziwon&lt;/code&gt;)을 추가하는 예제를 보이고 있다.&lt;/p&gt;

&lt;p&gt;먼저 개인키를 생성한다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;$ openssl genrsa -out ziwon.pem &lt;span class=&#34;m&#34;&gt;2048&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;다음으로 인증서 발급에 필요한 CSR(Certificate Signing Request, 인증서 서명 요청)을 생성한다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;$ openssl req -new -key ziwon.pem -out ziwon.csr -subj &lt;span class=&#34;s2&#34;&gt;&amp;#34;/CN=users:ziwon/O=cloud-native&amp;#34;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;그리고 생성된 CSR을 쿠버테스트에 등록하기 위해 base64로 인코딩한 값을 추출한다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;$ cat ziwon.csr &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; base64 &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; tr -d &lt;span class=&#34;s1&#34;&gt;&amp;#39;\n&amp;#39;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;생성된 쿠버네티스 csr을 등록한다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;$ cat &lt;span class=&#34;s&#34;&gt;&amp;lt;&amp;lt; EOF | kubectl apply -f -
&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;apiVersion: certificates.k8s.io/v1beta1
&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;kind: CertificateSigningRequest
&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;metadata:
&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;  name: user-request-ziwon
&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;spec:
&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;  groups:
&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;  - system:authenticated
&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;  request: &amp;lt;base64-encoded-csr&amp;gt;
&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;  usages:
&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;  - digital signature
&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;  - key encipherment
&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;  - client auth
&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;EOF&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;등록 후, &lt;code&gt;pending&lt;/code&gt; 상태에 있는 &lt;code&gt;user-request-ziwon&lt;/code&gt;의 값을 승인한다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;$ kubectl certificate approve user-request-ziwon&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;승인된 &lt;code&gt;user-request-ziwon&lt;/code&gt; CSR로부터 공개키를 생성한다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;$ kubectl get csr user-request-ziwon -o &lt;span class=&#34;nv&#34;&gt;jsonpath&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;{.status.certificate}&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; base64 -d &amp;gt; ziwon.crt&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;쿠버네티스 API 서버의 Root CA, 그리고 클라이언트의 공개키와 개인키를 이용해, 클라이언트 &lt;code&gt;kubeconfig&lt;/code&gt; 파일을 생성한다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;$ cat ziwon.crt &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; base64 &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; tr -d &lt;span class=&#34;s1&#34;&gt;&amp;#39;\n&amp;#39;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;apiVersion&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;v1&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;clusters&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;cluster&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;certificate-authority-data&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&amp;lt;base64-encoded-ca-cert&lt;span class=&#34;sd&#34;&gt;&amp;gt;
&lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;    server: https://localhost:53079&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;kubernetes&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;contexts&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;context&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;cluster&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;kubernetes&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;user&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;ziwon&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;ziwon@kubernetes&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;current-context&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;ziwon@kubernetes&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;kind&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;Config&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;preferences&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;{}&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;users&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;ziwon&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;user&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;client-certificate-data&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&amp;lt;base64-encoded-crt&lt;span class=&#34;sd&#34;&gt;&amp;gt;
&lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;    client-key-data: &amp;lt;base64-encoded-key-data&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;그러면 다음과 같이 API 서버에 대해 클라이언트 ID &lt;code&gt;users:ziwon&lt;/code&gt; 로 접근이 되는 것을 볼 수 있다. 그러나 접근이 되더라도 권한(Authoriztion)을 부여받은 Role이 지정되지 않았다. 따라서, 클러스터 리소스 및 네임스페이스 리소스 접근시 각각 오류 응답을 받게 된다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;클러스터 객체 접근시&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;$ kubectl get node
Error from server &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;Forbidden&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;: nodes is forbidden: User &lt;span class=&#34;s2&#34;&gt;&amp;#34;users:ziwon&amp;#34;&lt;/span&gt; cannot list resource &lt;span class=&#34;s2&#34;&gt;&amp;#34;nodes&amp;#34;&lt;/span&gt; in API group &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt; at the cluster scope&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;네임스페이스 객체 접근시&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;$ kubectl get pod
Error from server &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;Forbidden&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;: pods is forbidden: User &lt;span class=&#34;s2&#34;&gt;&amp;#34;users:ziwon&amp;#34;&lt;/span&gt; cannot list resource &lt;span class=&#34;s2&#34;&gt;&amp;#34;pods&amp;#34;&lt;/span&gt; in API group &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt; in the namespace &lt;span class=&#34;s2&#34;&gt;&amp;#34;default&amp;#34;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&#34;권한-authorization&#34;&gt;권한 (Authorization)&lt;/h2&gt;

&lt;p&gt;모든 쿠버네티스트 리소스는 다음과 같이 클러스터 객체와 네임스페이스 객체로 구분할 수 있다.&lt;/p&gt;

&lt;h3 id=&#34;클러스터-객체&#34;&gt;클러스터 객체&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;$ kubectl api-resources --namespaced&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;false&lt;/span&gt;
NAME                              SHORTNAMES   APIGROUP                       NAMESPACED   KIND
componentstatuses                 cs                                          &lt;span class=&#34;nb&#34;&gt;false&lt;/span&gt;        ComponentStatus
namespaces                        ns                                          &lt;span class=&#34;nb&#34;&gt;false&lt;/span&gt;        Namespace
nodes                             no                                          &lt;span class=&#34;nb&#34;&gt;false&lt;/span&gt;        Node
persistentvolumes                 pv                                          &lt;span class=&#34;nb&#34;&gt;false&lt;/span&gt;        PersistentVolume
mutatingwebhookconfigurations                  admissionregistration.k8s.io   &lt;span class=&#34;nb&#34;&gt;false&lt;/span&gt;        MutatingWebhookConfiguration
validatingwebhookconfigurations                admissionregistration.k8s.io   &lt;span class=&#34;nb&#34;&gt;false&lt;/span&gt;        ValidatingWebhookConfiguration
customresourcedefinitions         crd,crds     apiextensions.k8s.io           &lt;span class=&#34;nb&#34;&gt;false&lt;/span&gt;        CustomResourceDefinition
apiservices                                    apiregistration.k8s.io         &lt;span class=&#34;nb&#34;&gt;false&lt;/span&gt;        APIService
tokenreviews                                   authentication.k8s.io          &lt;span class=&#34;nb&#34;&gt;false&lt;/span&gt;        TokenReview
selfsubjectaccessreviews                       authorization.k8s.io           &lt;span class=&#34;nb&#34;&gt;false&lt;/span&gt;        SelfSubjectAccessReview
selfsubjectrulesreviews                        authorization.k8s.io           &lt;span class=&#34;nb&#34;&gt;false&lt;/span&gt;        SelfSubjectRulesReview
subjectaccessreviews                           authorization.k8s.io           &lt;span class=&#34;nb&#34;&gt;false&lt;/span&gt;        SubjectAccessReview
certificatesigningrequests        csr          certificates.k8s.io            &lt;span class=&#34;nb&#34;&gt;false&lt;/span&gt;        CertificateSigningRequest
podsecuritypolicies               psp          extensions                     &lt;span class=&#34;nb&#34;&gt;false&lt;/span&gt;        PodSecurityPolicy
podsecuritypolicies               psp          policy                         &lt;span class=&#34;nb&#34;&gt;false&lt;/span&gt;        PodSecurityPolicy
clusterrolebindings                            rbac.authorization.k8s.io      &lt;span class=&#34;nb&#34;&gt;false&lt;/span&gt;        ClusterRoleBinding
clusterroles                                   rbac.authorization.k8s.io      &lt;span class=&#34;nb&#34;&gt;false&lt;/span&gt;        ClusterRole
priorityclasses                   pc           scheduling.k8s.io              &lt;span class=&#34;nb&#34;&gt;false&lt;/span&gt;        PriorityClass
storageclasses                    sc           storage.k8s.io                 &lt;span class=&#34;nb&#34;&gt;false&lt;/span&gt;        StorageClass
volumeattachments                              storage.k8s.io                 &lt;span class=&#34;nb&#34;&gt;false&lt;/span&gt;        VolumeAttachment&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&#34;네임스페이스-객체&#34;&gt;네임스페이스 객체&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;$ kubectl api-resources --namespaced
NAME                        SHORTNAMES   APIGROUP                    NAMESPACED   KIND
bindings                                                             &lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt;         Binding
configmaps                  cm                                       &lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt;         ConfigMap
endpoints                   ep                                       &lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt;         Endpoints
events                      ev                                       &lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt;         Event
limitranges                 limits                                   &lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt;         LimitRange
persistentvolumeclaims      pvc                                      &lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt;         PersistentVolumeClaim
pods                        po                                       &lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt;         Pod
podtemplates                                                         &lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt;         PodTemplate
replicationcontrollers      rc                                       &lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt;         ReplicationController
resourcequotas              quota                                    &lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt;         ResourceQuota
secrets                                                              &lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt;         Secret
serviceaccounts             sa                                       &lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt;         ServiceAccount
services                    svc                                      &lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt;         Service
controllerrevisions                      apps                        &lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt;         ControllerRevision
daemonsets                  ds           apps                        &lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt;         DaemonSet
deployments                 deploy       apps                        &lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt;         Deployment
replicasets                 rs           apps                        &lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt;         ReplicaSet
statefulsets                sts          apps                        &lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt;         StatefulSet
localsubjectaccessreviews                authorization.k8s.io        &lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt;         LocalSubjectAccessReview
horizontalpodautoscalers    hpa          autoscaling                 &lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt;         HorizontalPodAutoscaler
cronjobs                    cj           batch                       &lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt;         CronJob
&lt;span class=&#34;nb&#34;&gt;jobs&lt;/span&gt;                                     batch                       &lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt;         Job
leases                                   coordination.k8s.io         &lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt;         Lease
events                      ev           events.k8s.io               &lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt;         Event
daemonsets                  ds           extensions                  &lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt;         DaemonSet
deployments                 deploy       extensions                  &lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt;         Deployment
ingresses                   ing          extensions                  &lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt;         Ingress
networkpolicies             netpol       extensions                  &lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt;         NetworkPolicy
replicasets                 rs           extensions                  &lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt;         ReplicaSet
networkpolicies             netpol       networking.k8s.io           &lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt;         NetworkPolicy
poddisruptionbudgets        pdb          policy                      &lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt;         PodDisruptionBudget
rolebindings                             rbac.authorization.k8s.io   &lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt;         RoleBinding
roles                                    rbac.authorization.k8s.io   &lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt;         Role&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;다음과 같이 RBAC에 의한 리소스 접근시에 권한과 관련된 네임스페이스 객체와 클러스터 객체가 있다.&lt;/p&gt;

&lt;h3 id=&#34;네임스페이스-role-rolebinding&#34;&gt;네임스페이스 Role &amp;amp; RoleBinding&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;Role&lt;/li&gt;
&lt;li&gt;RoleBinding&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;쿠버네티스의 네임스페이스에 정의된 기본적인 &lt;code&gt;role&lt;/code&gt; 목록은 다음과 같다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;$ kubectl get role --all-namespaces
NAMESPACE     NAME                                             AGE
kube-public   kubeadm:bootstrap-signer-clusterinfo             8h
kube-public   system:controller:bootstrap-signer               8h
kube-system   extension-apiserver-authentication-reader        8h
kube-system   kube-proxy                                       8h
kube-system   kubeadm:kubelet-config-1.13                      8h
kube-system   kubeadm:nodes-kubeadm-config                     8h
kube-system   system::leader-locking-kube-controller-manager   8h
kube-system   system::leader-locking-kube-scheduler            8h
kube-system   system:controller:bootstrap-signer               8h
kube-system   system:controller:cloud-provider                 8h
kube-system   system:controller:token-cleaner                  8h
kube-system   weave-net                                        8h&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&#34;클러스터-role-rolebinding&#34;&gt;클러스터 Role &amp;amp; RoleBinding&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;ClusterRole&lt;/li&gt;
&lt;li&gt;ClusterRoleBinding&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;쿠버네티스의 클러스터에 정의된 기본적인 &lt;code&gt;clusterrole&lt;/code&gt; 목록은 다음과 같다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;$ kubectl get clusterrole
NAME                                                                   AGE
admin                                                                  8h
cluster-admin                                                          8h
edit                                                                   8h
system:aggregate-to-admin                                              8h
system:aggregate-to-edit                                               8h
system:aggregate-to-view                                               8h
system:auth-delegator                                                  8h
system:aws-cloud-provider                                              8h
system:basic-user                                                      8h
system:certificates.k8s.io:certificatesigningrequests:nodeclient       8h
system:certificates.k8s.io:certificatesigningrequests:selfnodeclient   8h
system:controller:attachdetach-controller                              8h
system:controller:certificate-controller                               8h
system:controller:clusterrole-aggregation-controller                   8h
system:controller:cronjob-controller                                   8h
system:controller:daemon-set-controller                                8h
system:controller:deployment-controller                                8h
system:controller:disruption-controller                                8h
system:controller:endpoint-controller                                  8h
system:controller:expand-controller                                    8h
system:controller:generic-garbage-collector                            8h
system:controller:horizontal-pod-autoscaler                            8h
system:controller:job-controller                                       8h
system:controller:namespace-controller                                 8h
system:controller:node-controller                                      8h
system:controller:persistent-volume-binder                             8h
system:controller:pod-garbage-collector                                8h
system:controller:pv-protection-controller                             8h
system:controller:pvc-protection-controller                            8h
system:controller:replicaset-controller                                8h
system:controller:replication-controller                               8h
system:controller:resourcequota-controller                             8h
system:controller:route-controller                                     8h
system:controller:service-account-controller                           8h
system:controller:service-controller                                   8h
system:controller:statefulset-controller                               8h
system:controller:ttl-controller                                       8h
system:coredns                                                         8h
system:csi-external-attacher                                           8h
system:csi-external-provisioner                                        8h
system:discovery                                                       8h
system:heapster                                                        8h
system:kube-aggregator                                                 8h
system:kube-controller-manager                                         8h
system:kube-dns                                                        8h
system:kube-scheduler                                                  8h
system:kubelet-api-admin                                               8h
system:node                                                            8h
system:node-bootstrapper                                               8h
system:node-problem-detector                                           8h
system:node-proxier                                                    8h
system:persistent-volume-provisioner                                   8h
system:volume-scheduler                                                8h
view                                                                   8h
weave-net                                                              8h&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;먼저, 클러스터 전체에 대해 정의된 기본 사용자 &lt;code&gt;system:basic-user&lt;/code&gt;의 RBAC을 확인해보자.&lt;/p&gt;

&lt;p&gt;&lt;details&gt;
&lt;summary&gt;$ kubectl get clusterrole system:basic-user -o yaml&lt;/summary&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;apiVersion&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;rbac.authorization.k8s.io/v1&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;kind&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;ClusterRole&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;metadata&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;annotations&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;rbac.authorization.kubernetes.io/autoupdate&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;true&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;creationTimestamp&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;ld&#34;&gt;2019-02-04T05:11:12Z&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;labels&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;kubernetes.io/bootstrapping&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;rbac-defaults&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;system&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;basic-user&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;resourceVersion&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;43&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;selfLink&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;/apis/rbac.authorization.k8s.io/v1/clusterroles/system%3Abasic-user&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;uid&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;49fa84df-283b-&lt;span class=&#34;m&#34;&gt;11e9&lt;/span&gt;-9ac2-0242c86ffe48&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;rules&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;apiGroups&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;authorization.k8s.io&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;resources&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;selfsubjectaccessreviews&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;selfsubjectrulesreviews&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;verbs&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;create&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;/details&gt;&lt;/p&gt;

&lt;p&gt;다음으로 클러스터 전체를 관리하는 관리자 &lt;code&gt;admin&lt;/code&gt;의 RBAC을 확인해보자.&lt;/p&gt;

&lt;p&gt;&lt;details&gt;
&lt;summary&gt;$ kubectl get clusterrole admin -o yaml&lt;/summary&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;aggregationRule&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;clusterRoleSelectors&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;matchLabels&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;rbac.authorization.k8s.io/aggregate-to-admin&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;true&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;apiVersion&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;rbac.authorization.k8s.io/v1&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;kind&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;ClusterRole&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;metadata&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;annotations&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;rbac.authorization.kubernetes.io/autoupdate&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;true&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;creationTimestamp&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;ld&#34;&gt;2019-02-04T05:11:12Z&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;labels&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;kubernetes.io/bootstrapping&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;rbac-defaults&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;admin&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;resourceVersion&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;350&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;selfLink&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;/apis/rbac.authorization.k8s.io/v1/clusterroles/admin&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;uid&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;49faedb8-283b-&lt;span class=&#34;m&#34;&gt;11e9&lt;/span&gt;-9ac2-0242c86ffe48&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;rules&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;apiGroups&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;resources&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;pods/attach&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;pods/exec&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;pods/portforward&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;pods/proxy&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;secrets&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;services/proxy&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;verbs&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;get&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;list&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;watch&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;apiGroups&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;resources&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;serviceaccounts&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;verbs&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;impersonate&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;apiGroups&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;resources&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;pods&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;pods/attach&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;pods/exec&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;pods/portforward&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;pods/proxy&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;verbs&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;create&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;delete&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;deletecollection&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;patch&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;update&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;apiGroups&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;resources&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;configmaps&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;endpoints&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;persistentvolumeclaims&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;replicationcontrollers&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;replicationcontrollers/scale&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;secrets&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;serviceaccounts&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;services&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;services/proxy&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;verbs&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;create&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;delete&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;deletecollection&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;patch&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;update&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;apiGroups&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;apps&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;resources&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;daemonsets&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;deployments&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;deployments/rollback&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;deployments/scale&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;replicasets&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;replicasets/scale&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;statefulsets&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;statefulsets/scale&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;verbs&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;create&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;delete&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;deletecollection&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;patch&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;update&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;apiGroups&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;autoscaling&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;resources&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;horizontalpodautoscalers&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;verbs&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;create&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;delete&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;deletecollection&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;patch&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;update&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;apiGroups&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;batch&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;resources&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;cronjobs&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;jobs&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;verbs&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;create&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;delete&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;deletecollection&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;patch&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;update&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;apiGroups&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;extensions&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;resources&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;daemonsets&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;deployments&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;deployments/rollback&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;deployments/scale&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;ingresses&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;networkpolicies&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;replicasets&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;replicasets/scale&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;replicationcontrollers/scale&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;verbs&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;create&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;delete&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;deletecollection&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;patch&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;update&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;apiGroups&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;policy&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;resources&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;poddisruptionbudgets&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;verbs&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;create&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;delete&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;deletecollection&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;patch&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;update&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;apiGroups&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;networking.k8s.io&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;resources&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;networkpolicies&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;verbs&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;create&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;delete&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;deletecollection&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;patch&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;update&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;apiGroups&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;resources&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;configmaps&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;endpoints&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;persistentvolumeclaims&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;pods&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;replicationcontrollers&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;replicationcontrollers/scale&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;serviceaccounts&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;services&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;verbs&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;get&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;list&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;watch&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;apiGroups&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;resources&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;bindings&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;events&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;limitranges&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;namespaces/status&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;pods/log&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;pods/status&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;replicationcontrollers/status&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;resourcequotas&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;resourcequotas/status&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;verbs&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;get&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;list&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;watch&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;apiGroups&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;resources&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;namespaces&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;verbs&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;get&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;list&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;watch&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;apiGroups&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;apps&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;resources&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;controllerrevisions&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;daemonsets&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;deployments&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;deployments/scale&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;replicasets&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;replicasets/scale&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;statefulsets&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;statefulsets/scale&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;verbs&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;get&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;list&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;watch&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;apiGroups&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;autoscaling&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;resources&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;horizontalpodautoscalers&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;verbs&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;get&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;list&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;watch&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;apiGroups&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;batch&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;resources&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;cronjobs&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;jobs&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;verbs&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;get&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;list&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;watch&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;apiGroups&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;extensions&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;resources&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;daemonsets&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;deployments&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;deployments/scale&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;ingresses&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;networkpolicies&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;replicasets&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;replicasets/scale&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;replicationcontrollers/scale&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;verbs&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;get&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;list&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;watch&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;apiGroups&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;policy&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;resources&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;poddisruptionbudgets&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;verbs&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;get&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;list&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;watch&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;apiGroups&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;networking.k8s.io&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;resources&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;networkpolicies&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;verbs&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;get&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;list&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;watch&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;apiGroups&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;authorization.k8s.io&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;resources&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;localsubjectaccessreviews&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;verbs&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;create&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;apiGroups&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;rbac.authorization.k8s.io&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;resources&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;rolebindings&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;roles&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;verbs&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;create&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;delete&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;deletecollection&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;get&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;list&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;patch&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;update&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;watch&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;$ kubectl create rolebinding ziwon --clusterrole&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;admin --user&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;users:ziwon --dry-run -o yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  creationTimestamp: null
  name: ziwon
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: admin
subjects:
- apiGroup: rbac.authorization.k8s.io
  kind: User
  name: users:ziwon&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;/details&gt;&lt;/p&gt;

&lt;p&gt;먼저, &lt;code&gt;foo&lt;/code&gt;라는 네임스페이스를 만든다. 이때 기본 &lt;code&gt;~/.kube/config&lt;/code&gt;를 사용한다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;$ kubectl run --restart&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;Never --image&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;gcr.io/kuar-demo/kuard-amd64:blue kuard&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;그리고 새로운 쉘에서 새로 추가된 사용자 &lt;code&gt;users:ziwon&lt;/code&gt;의 &lt;code&gt;kubeconfig-ziwon&lt;/code&gt;를 이용해 Pod을 하나 배포해본다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;$ &lt;span class=&#34;nb&#34;&gt;export&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;KUBECONFIG&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;/path/to/kubeconfig-ziwon
$ kubectl config set-context &lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;kubectl config current-context&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt; --namespace&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;foo
$ kubectl run --restart&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;Never --image&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;gcr.io/kuar-demo/kuard-amd64:blue kuard

Error from server &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;Forbidden&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;: pods is forbidden: User &lt;span class=&#34;s2&#34;&gt;&amp;#34;users:ziwon&amp;#34;&lt;/span&gt; cannot create resource &lt;span class=&#34;s2&#34;&gt;&amp;#34;pods&amp;#34;&lt;/span&gt; in API group &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt; in the namespace &lt;span class=&#34;s2&#34;&gt;&amp;#34;foo&amp;#34;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;배포가 되지 않는 것을 확인할 수 있다. 이에, 다시 어드민 계정으로 사용자 &lt;code&gt;users:ziwon&lt;/code&gt;에 대한 &lt;code&gt;Pod&lt;/code&gt; 등의 네임스페이스 객체 접근을 위한 &lt;code&gt;rolebinding&lt;/code&gt;과 클러스터 객체 접근을 위한 &lt;code&gt;clusterrolebinding&lt;/code&gt;을 만든다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;$ &lt;span class=&#34;nb&#34;&gt;export&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;KUBECONFIG&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;~/.kube/config
$ kubectl create rolebinding ziwon-role --clusterrole&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;admin --user&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;users:ziwon
$ kubectl create clusterrolebinding ziwon-clusterrole --clusterrole&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;view --user&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;users:ziwon&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;그러면 다음과 같이 정상적으로 배포가 되고, 네임스페이스 Pod 객체 목록을 정상적으로 확인할 수 있다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;$ kubectl run --restart&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;Never --image&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;gcr.io/kuar-demo/kuard-amd64:blue kuard
$ kubectl get pod -n foo
NAME    READY   STATUS    RESTARTS   AGE
kuard   &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1     Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          17s&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;또한 다음과 같이, &lt;code&gt;clusterrolebinding&lt;/code&gt;이 부여되었기 때문에 클러스터 전체 Pod 목록도 확인할 수 있다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;$ kubectl get pod --all-namespaces
NAMESPACE     NAME                                            READY   STATUS    RESTARTS   AGE
default       kuard                                           &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1     Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          10m
foo           kuard                                           &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1     Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          2m14s
kube-system   coredns-86c58d9df4-98rkf                        &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1     Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          9h
kube-system   coredns-86c58d9df4-zt4l8                        &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1     Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          9h
kube-system   etcd-kind-1-control-plane1                      &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1     Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          9h
kube-system   etcd-kind-1-control-plane2                      &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1     Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          9h
kube-system   kube-apiserver-kind-1-control-plane1            &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1     Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          9h
kube-system   kube-apiserver-kind-1-control-plane2            &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1     Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          9h
kube-system   kube-controller-manager-kind-1-control-plane1   &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1     Running   &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;          9h
kube-system   kube-controller-manager-kind-1-control-plane2   &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1     Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          9h
kube-system   kube-proxy-6cmkr                                &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1     Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          9h
kube-system   kube-proxy-bzbwk                                &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1     Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          9h
kube-system   kube-proxy-hlq4l                                &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1     Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          9h
kube-system   kube-proxy-jl9sg                                &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1     Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          9h
kube-system   kube-proxy-mw2rt                                &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1     Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          9h
kube-system   kube-proxy-p9pzv                                &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1     Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          9h
kube-system   kube-proxy-tjs8r                                &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1     Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          9h
kube-system   kube-proxy-tvgz7                                &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1     Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          9h
kube-system   kube-scheduler-kind-1-control-plane1            &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1     Running   &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;          9h
kube-system   kube-scheduler-kind-1-control-plane2            &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1     Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          9h
kube-system   weave-net-52l8x                                 &lt;span class=&#34;m&#34;&gt;2&lt;/span&gt;/2     Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          9h
kube-system   weave-net-5f4lb                                 &lt;span class=&#34;m&#34;&gt;2&lt;/span&gt;/2     Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          9h
kube-system   weave-net-6d9dx                                 &lt;span class=&#34;m&#34;&gt;2&lt;/span&gt;/2     Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          9h
kube-system   weave-net-6nhns                                 &lt;span class=&#34;m&#34;&gt;2&lt;/span&gt;/2     Running   &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;          9h
kube-system   weave-net-6t7tw                                 &lt;span class=&#34;m&#34;&gt;2&lt;/span&gt;/2     Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          9h
kube-system   weave-net-hqlw6                                 &lt;span class=&#34;m&#34;&gt;2&lt;/span&gt;/2     Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          9h
kube-system   weave-net-m2dn4                                 &lt;span class=&#34;m&#34;&gt;2&lt;/span&gt;/2     Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          9h
kube-system   weave-net-nrsvs                                 &lt;span class=&#34;m&#34;&gt;2&lt;/span&gt;/2     Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          9h&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&#34;service-account&#34;&gt;Service Account&lt;/h2&gt;

&lt;p&gt;다음과 같이 모든 네임스페이스에는 기본적으로 &lt;code&gt;default&lt;/code&gt; 서비스 계정이 존재한다. 쿠버네티스에 RBAC이 있기 전에 클러스터에 접근하는 방법이 Service Account였기 때문이다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;$ kubectl get sa --all-namespaces
NAMESPACE     NAME                                 SECRETS   AGE
default       default                              &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;         2d1h
foo           default                              &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;         39h
kube-public   default                              &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;         2d1h
kube-system   default                              &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;         2d1h
...&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;즉, 어플리케이션을 실행시키고 싶으면, 일종의 봇 아이텐티티를 지닌 어플리케이션 고유의 개별 서비스 계정을 주어서 클러스터의 다른 리소스들과 통신하게 할 수 있었다. 그러나 RBAC이 추가되고 베스트 프랙티스로써 알려지게 되면서 문제가 되는 것이, RBAC 측면에서 기존의 &lt;code&gt;default&lt;/code&gt; 계정은 zero 인증과 권한을 가지게 된다는 것이다. 그 대표적인 예가 helm이다. 설치한 후에 RBAC 인증으로 인해 제대로 동작하지 않아 다음과 같은 서비스 계정을 만들고 RBAC 정책을 설정해주어야 한다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;kubectl create serviceaccount --namespace kube-system tiller
kubectl create clusterrolebinding tiller-cluster-rule --clusterrole&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;cluster-admin --serviceaccount&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;kube-system:tiller
kubectl patch deploy --namespace kube-system tiller-deploy -p &lt;span class=&#34;s1&#34;&gt;&amp;#39;{&amp;#34;spec&amp;#34;:{&amp;#34;template&amp;#34;:{&amp;#34;spec&amp;#34;:{&amp;#34;serviceAccount&amp;#34;:&amp;#34;tiller&amp;#34;}}}}&amp;#39;&lt;/span&gt;
helm init --service-account tiller --upgrade&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;그래서 기존의 &lt;code&gt;default&lt;/code&gt; 서비스 계정 등 서비스 계정에 관한 RBAC 정책이 이슈가 될 수 있는데, 다음 문서는 서비스 계정에 대한 &lt;a href=&#34;[How to: RBAC best practices and workarounds](http://docs.heptio.com/content/tutorials/rbac.html)&#34; target=&#34;_blank&#34;&gt;Heptio사의 RBAC 베스트 프랙티스&lt;/a&gt;에서는 개별 서비스 계정을 만들어 권한을 부여하는 것을 좀 더 안전한 프랙티스로 권하고 있다.&lt;/p&gt;

&lt;h2 id=&#34;관련-링크&#34;&gt;관련 링크&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://rsec.kr/?p=426&#34; target=&#34;_blank&#34;&gt;RSA 인증서 (Certification) 와 전자서명 (Digital Sign)의 원리&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kubernetes.io/docs/reference/access-authn-authz/rbac/&#34; target=&#34;_blank&#34;&gt;Using RBAC Authorization&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.linkedin.com/pulse/adding-users-quick-start-kubernetes-aws-jakub-scholz&#34; target=&#34;_blank&#34;&gt;Adding users on &amp;ldquo;Quick Start for Kubernetes on AWS&amp;rdquo;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://docs.heptio.com/content/tutorials/rbac.html&#34; target=&#34;_blank&#34;&gt;How to: RBAC best practices and workarounds&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://jvns.ca/blog/2017/08/05/how-kubernetes-certificates-work/&#34; target=&#34;_blank&#34;&gt;How Kubernetes certificate authorities work&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://dev.to/petermbenjamin/kubernetes-security-best-practices-hlk#authentication&#34; target=&#34;_blank&#34;&gt;Kubernetes Security Best-Practices&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
      
    </item>
    
    <item>
      <title>TGI Kubernetes 003: Istio</title>
      <link>https://ziwon.github.io/post/tgik-003/</link>
      <pubDate>Sun, 27 Jan 2019 01:12:00 +0900</pubDate>
      <author>Aron Yoon</author>
      <guid>https://ziwon.github.io/post/tgik-003/</guid>
      <description></description>
      
      <content>

&lt;h1 id=&#34;tgik-003-istio&#34;&gt;TGIK 003: Istio&lt;/h1&gt;

&lt;p&gt;&lt;a href=&#34;https://github.com/heptio/tgik/tree/master/episodes/003&#34; target=&#34;_blank&#34;&gt;세번째 에피소드&lt;/a&gt;는 Istio에 다루고 있다. Istio를 돌려본 적은 없기 때문에 같이 배울 것이라고 한다.&lt;/p&gt;

&lt;p&gt;&lt;center&gt;•••&lt;/center&gt;&lt;/p&gt;

&lt;h1 id=&#34;service-network&#34;&gt;Service Network&lt;/h1&gt;

&lt;p&gt;앞서 자신이 발표한 자료를 참고하여, 서비스 네트워크에 대해 간략히 언급한다. 해당 슬라이드는 &lt;a href=&#34;http://slides.eightypercent.net/linuxcon-ops-dividend/index.html&#34; target=&#34;_blank&#34;&gt;The Operations Dividend - Joe Beda (LinuxCon North America 2016)&lt;/a&gt;를 참고한다.&lt;/p&gt;

&lt;p&gt;여러 가지 타입의 마이크로 서비스가 있을 수 있다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Implementation Detail&lt;/strong&gt; (어플리케이션의 세부 구현, 모놀리틱 서비스가 나뉘어 각각의 모듈로 세부 구현된 서비스 )&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Shared Artificat, Priavete Instance&lt;/strong&gt; (MySQL 데이터베이스처럼 개인 인스턴스를 하나씩 가지고 개발)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Shared Instance&lt;/strong&gt; (큰 조직의 공유 인스턴스, 다른 곳의 여러 팀과 팀이 사용하는 단일 서비스)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Big-S Servie&lt;/strong&gt; (회사 외부로 확장된 완전히 구현된 Saas 모델, 예. SendGrid)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;이러한 것들을 서비스 네트워크라고 부를 수 있고, &lt;strong&gt;Istio&lt;/strong&gt;가 등장한 배경이라고 볼 수 있다. 서비스 네트워크 또는 서비스 메쉬에서는 서비스 과부하 발생 시에 다른 서비스나 네트워크로 처리하는 것도 중요하지만, 사용자를 가장한 공격자나 침입 탐지 등의 누가 이 서비스를 호출했는지에 대한 보안이나 신원확인도 중요하다고 한다.&lt;/p&gt;

&lt;h1 id=&#34;demo&#34;&gt;Demo&lt;/h1&gt;

&lt;p&gt;데모 영상은 Istio 설치와 배포 과정 중에 발생한 서비스 계정과 관련된 오류의 원인을 파악하고 수정하는데 많은 시간을 할애하고 있고, 또한 2017년도의 지난 내용이라 아래와 같이, Istio 공식 문서를 참고하며 따로 정리하였다. (그러나 크게 바뀌진 않고 세부 내용만 조금 다를 뿐이다.)&lt;/p&gt;

&lt;h2 id=&#34;istio-demo&#34;&gt;Istio Demo&lt;/h2&gt;

&lt;p&gt;&lt;code&gt;QuickStart Heptio&lt;/code&gt;를 사용해서 쿠버네티스 클러스터를 준비한다.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;개인적인 학습을 목적으로 기존 템플릿을 조금 수정하였다. 5대의 워커 노드(t2.small) 등 사소한 몇 가지를 변경하였다. (참고로, 원래 저장소의 CloudFormation 템플릿은 burstable EC2 인스턴스 타입을 지원하지 않는다.) - &lt;a href=&#34;https://github.com/ziwon/quickstart-heptio&#34; target=&#34;_blank&#34;&gt;https://github.com/ziwon/quickstart-heptio&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;최신 설치 방법 및 가이드는 다음 문서를 참조한다. (공식 문서가 워낙 잘되어 있어서 사실 따로 정리하는 게 큰 의미가 없어 보인다.)&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://istio.io/docs/setup/&#34; target=&#34;_blank&#34;&gt;https://istio.io/docs/setup/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://istio.io/docs/setup/kubernetes/quick-start/&#34; target=&#34;_blank&#34;&gt;https://istio.io/docs/setup/kubernetes/quick-start/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Istio를 적당한 디렉토리에 다운 받는다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;$ mkdir -p ~/Workspace/TGIK/003
$ &lt;span class=&#34;nb&#34;&gt;cd&lt;/span&gt; ~/Workspace/TGIK/003
$ curl -L https://git.io/getLatestIstio &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; sh -&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;다운 받은 후에는 Path를 잡아줘야 하는데, &lt;code&gt;kubectl&lt;/code&gt;, &lt;code&gt;helm&lt;/code&gt; 등과 마찬가지로 다음과 같이 그냥 &lt;code&gt;/usr/local/bin&lt;/code&gt;에 복사한다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;$ cp ./bin/istioctl /usr/local/bin&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;먼저, Istio의 CRD(Custom Resource Definition)을 생성한다.&lt;/p&gt;

&lt;p&gt;&lt;details&gt;
&lt;summary&gt;
    &lt;code&gt;shell
    kubectl apply -f install/kubernetes/helm/istio/templates/crds.yaml
&lt;/code&gt;
&lt;/summary&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;$ kubectl apply -f install/kubernetes/helm/istio/templates/crds.yaml
customresourcedefinition.apiextensions.k8s.io/virtualservices.networking.istio.io created
customresourcedefinition.apiextensions.k8s.io/destinationrules.networking.istio.io created
customresourcedefinition.apiextensions.k8s.io/serviceentries.networking.istio.io created
customresourcedefinition.apiextensions.k8s.io/gateways.networking.istio.io created
customresourcedefinition.apiextensions.k8s.io/envoyfilters.networking.istio.io created
customresourcedefinition.apiextensions.k8s.io/policies.authentication.istio.io created
customresourcedefinition.apiextensions.k8s.io/meshpolicies.authentication.istio.io created
customresourcedefinition.apiextensions.k8s.io/httpapispecbindings.config.istio.io created
customresourcedefinition.apiextensions.k8s.io/httpapispecs.config.istio.io created
customresourcedefinition.apiextensions.k8s.io/quotaspecbindings.config.istio.io created
customresourcedefinition.apiextensions.k8s.io/quotaspecs.config.istio.io created
customresourcedefinition.apiextensions.k8s.io/rules.config.istio.io created
customresourcedefinition.apiextensions.k8s.io/attributemanifests.config.istio.io created
customresourcedefinition.apiextensions.k8s.io/bypasses.config.istio.io created
customresourcedefinition.apiextensions.k8s.io/circonuses.config.istio.io created
customresourcedefinition.apiextensions.k8s.io/deniers.config.istio.io created
customresourcedefinition.apiextensions.k8s.io/fluentds.config.istio.io created
customresourcedefinition.apiextensions.k8s.io/kubernetesenvs.config.istio.io created
customresourcedefinition.apiextensions.k8s.io/listcheckers.config.istio.io created
customresourcedefinition.apiextensions.k8s.io/memquotas.config.istio.io created
customresourcedefinition.apiextensions.k8s.io/noops.config.istio.io created
customresourcedefinition.apiextensions.k8s.io/opas.config.istio.io created
customresourcedefinition.apiextensions.k8s.io/prometheuses.config.istio.io created
customresourcedefinition.apiextensions.k8s.io/rbacs.config.istio.io created
customresourcedefinition.apiextensions.k8s.io/redisquotas.config.istio.io created
customresourcedefinition.apiextensions.k8s.io/servicecontrols.config.istio.io created
customresourcedefinition.apiextensions.k8s.io/signalfxs.config.istio.io created
customresourcedefinition.apiextensions.k8s.io/solarwindses.config.istio.io created
customresourcedefinition.apiextensions.k8s.io/stackdrivers.config.istio.io created
customresourcedefinition.apiextensions.k8s.io/statsds.config.istio.io created
customresourcedefinition.apiextensions.k8s.io/stdios.config.istio.io created
customresourcedefinition.apiextensions.k8s.io/apikeys.config.istio.io created
customresourcedefinition.apiextensions.k8s.io/authorizations.config.istio.io created
customresourcedefinition.apiextensions.k8s.io/checknothings.config.istio.io created
customresourcedefinition.apiextensions.k8s.io/kuberneteses.config.istio.io created
customresourcedefinition.apiextensions.k8s.io/listentries.config.istio.io created
customresourcedefinition.apiextensions.k8s.io/logentries.config.istio.io created
customresourcedefinition.apiextensions.k8s.io/edges.config.istio.io created
customresourcedefinition.apiextensions.k8s.io/metrics.config.istio.io created
customresourcedefinition.apiextensions.k8s.io/quotas.config.istio.io created
customresourcedefinition.apiextensions.k8s.io/reportnothings.config.istio.io created
customresourcedefinition.apiextensions.k8s.io/servicecontrolreports.config.istio.io created
customresourcedefinition.apiextensions.k8s.io/tracespans.config.istio.io created
customresourcedefinition.apiextensions.k8s.io/rbacconfigs.rbac.istio.io created
customresourcedefinition.apiextensions.k8s.io/serviceroles.rbac.istio.io created
customresourcedefinition.apiextensions.k8s.io/servicerolebindings.rbac.istio.io created
customresourcedefinition.apiextensions.k8s.io/adapters.config.istio.io created
customresourcedefinition.apiextensions.k8s.io/instances.config.istio.io created
customresourcedefinition.apiextensions.k8s.io/templates.config.istio.io created
customresourcedefinition.apiextensions.k8s.io/handlers.config.istio.io created&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;/details&gt;&lt;/p&gt;

&lt;p&gt;다음으로, 데모 리소스를 설치한다. &lt;code&gt;install&lt;/code&gt; 디렉토리에는 상호 TLS 인증용(&lt;code&gt;istio-demo-auth.yaml&lt;/code&gt;)과 비인증용(&lt;code&gt;istio-demo.yaml&lt;/code&gt;) 두 가지 파일이 있는데, &lt;code&gt;istio-demo-auth.yaml&lt;/code&gt;를 사용한다.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;덧붙여서 학습용 목적의 개인 클러스터의 경우, 워커 노드의 리소스가 매우 작기 때문에, 기본 요구 사항에 맞는 노드를 찾지 못해 Pod의 스케쥴링 &lt;code&gt;Pending&lt;/code&gt; 이 발생할 수 있다. 일단, 데모이니 생략하기로 한다. (또는 리밋을 걸어도 무방) &lt;code&gt;install/kubernetes/istio-demo.yaml&lt;/code&gt; 파일의 13565 라인에서 13568 라인까지를 삭제한다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;PILOT_CACHE_SQUASH&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;value&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;5&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;GODEBUG&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;value&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;gctrace=2&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;PILOT_PUSH_THROTTLE_COUNT&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;value&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;100&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;PILOT_TRACE_SAMPLING&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;value&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;100&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;13565&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;resources&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;requests&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;cpu&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;500m&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;13568&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;           &lt;/span&gt;memory&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;2048Mi&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;다음과 같이, Istio 컴포넌트를 설치한다.&lt;/p&gt;

&lt;p&gt;&lt;details&gt;
&lt;summary&gt;kubectl apply -f install/kubernetes/istio-demo-auth.yaml&lt;/summary&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;$ kubectl apply -f install/kubernetes/istio-demo-auth.yaml
namespace/istio-system created
configmap/istio-galley-configuration created
configmap/istio-grafana-custom-resources created
configmap/istio-grafana-configuration-dashboards created
configmap/istio-grafana created
configmap/istio-statsd-prom-bridge created
configmap/prometheus created
configmap/istio-security-custom-resources created
configmap/istio created
configmap/istio-sidecar-injector created
serviceaccount/istio-galley-service-account created
serviceaccount/istio-egressgateway-service-account created
serviceaccount/istio-ingressgateway-service-account created
serviceaccount/istio-grafana-post-install-account created
clusterrole.rbac.authorization.k8s.io/istio-grafana-post-install-istio-system created
clusterrolebinding.rbac.authorization.k8s.io/istio-grafana-post-install-role-binding-istio-system created
job.batch/istio-grafana-post-install created
serviceaccount/istio-mixer-service-account created
serviceaccount/istio-pilot-service-account created
serviceaccount/prometheus created
serviceaccount/istio-cleanup-secrets-service-account created
clusterrole.rbac.authorization.k8s.io/istio-cleanup-secrets-istio-system created
clusterrolebinding.rbac.authorization.k8s.io/istio-cleanup-secrets-istio-system created
job.batch/istio-cleanup-secrets created
serviceaccount/istio-security-post-install-account created
clusterrole.rbac.authorization.k8s.io/istio-security-post-install-istio-system created
clusterrolebinding.rbac.authorization.k8s.io/istio-security-post-install-role-binding-istio-system created
job.batch/istio-security-post-install created
serviceaccount/istio-citadel-service-account created
serviceaccount/istio-sidecar-injector-service-account created
customresourcedefinition.apiextensions.k8s.io/virtualservices.networking.istio.io unchanged
customresourcedefinition.apiextensions.k8s.io/destinationrules.networking.istio.io unchanged
customresourcedefinition.apiextensions.k8s.io/serviceentries.networking.istio.io unchanged
customresourcedefinition.apiextensions.k8s.io/gateways.networking.istio.io unchanged
customresourcedefinition.apiextensions.k8s.io/envoyfilters.networking.istio.io unchanged
customresourcedefinition.apiextensions.k8s.io/httpapispecbindings.config.istio.io unchanged
customresourcedefinition.apiextensions.k8s.io/httpapispecs.config.istio.io unchanged
customresourcedefinition.apiextensions.k8s.io/quotaspecbindings.config.istio.io unchanged
customresourcedefinition.apiextensions.k8s.io/quotaspecs.config.istio.io unchanged
customresourcedefinition.apiextensions.k8s.io/rules.config.istio.io unchanged
customresourcedefinition.apiextensions.k8s.io/attributemanifests.config.istio.io unchanged
customresourcedefinition.apiextensions.k8s.io/bypasses.config.istio.io unchanged
customresourcedefinition.apiextensions.k8s.io/circonuses.config.istio.io unchanged
customresourcedefinition.apiextensions.k8s.io/deniers.config.istio.io unchanged
customresourcedefinition.apiextensions.k8s.io/fluentds.config.istio.io unchanged
customresourcedefinition.apiextensions.k8s.io/kubernetesenvs.config.istio.io unchanged
customresourcedefinition.apiextensions.k8s.io/listcheckers.config.istio.io unchanged
customresourcedefinition.apiextensions.k8s.io/memquotas.config.istio.io unchanged
customresourcedefinition.apiextensions.k8s.io/noops.config.istio.io unchanged
customresourcedefinition.apiextensions.k8s.io/opas.config.istio.io unchanged
customresourcedefinition.apiextensions.k8s.io/prometheuses.config.istio.io unchanged
customresourcedefinition.apiextensions.k8s.io/rbacs.config.istio.io unchanged
customresourcedefinition.apiextensions.k8s.io/redisquotas.config.istio.io unchanged
customresourcedefinition.apiextensions.k8s.io/servicecontrols.config.istio.io unchanged
customresourcedefinition.apiextensions.k8s.io/signalfxs.config.istio.io unchanged
customresourcedefinition.apiextensions.k8s.io/solarwindses.config.istio.io unchanged
customresourcedefinition.apiextensions.k8s.io/stackdrivers.config.istio.io unchanged
customresourcedefinition.apiextensions.k8s.io/statsds.config.istio.io unchanged
customresourcedefinition.apiextensions.k8s.io/stdios.config.istio.io unchanged
customresourcedefinition.apiextensions.k8s.io/apikeys.config.istio.io unchanged
customresourcedefinition.apiextensions.k8s.io/authorizations.config.istio.io unchanged
customresourcedefinition.apiextensions.k8s.io/checknothings.config.istio.io unchanged
customresourcedefinition.apiextensions.k8s.io/kuberneteses.config.istio.io unchanged
customresourcedefinition.apiextensions.k8s.io/listentries.config.istio.io unchanged
customresourcedefinition.apiextensions.k8s.io/logentries.config.istio.io unchanged
customresourcedefinition.apiextensions.k8s.io/edges.config.istio.io unchanged
customresourcedefinition.apiextensions.k8s.io/metrics.config.istio.io unchanged
customresourcedefinition.apiextensions.k8s.io/quotas.config.istio.io unchanged
customresourcedefinition.apiextensions.k8s.io/reportnothings.config.istio.io unchanged
customresourcedefinition.apiextensions.k8s.io/servicecontrolreports.config.istio.io unchanged
customresourcedefinition.apiextensions.k8s.io/tracespans.config.istio.io unchanged
customresourcedefinition.apiextensions.k8s.io/rbacconfigs.rbac.istio.io unchanged
customresourcedefinition.apiextensions.k8s.io/serviceroles.rbac.istio.io unchanged
customresourcedefinition.apiextensions.k8s.io/servicerolebindings.rbac.istio.io unchanged
customresourcedefinition.apiextensions.k8s.io/adapters.config.istio.io unchanged
customresourcedefinition.apiextensions.k8s.io/instances.config.istio.io unchanged
customresourcedefinition.apiextensions.k8s.io/templates.config.istio.io unchanged
customresourcedefinition.apiextensions.k8s.io/handlers.config.istio.io unchanged
clusterrole.rbac.authorization.k8s.io/istio-galley-istio-system created
clusterrole.rbac.authorization.k8s.io/istio-egressgateway-istio-system created
clusterrole.rbac.authorization.k8s.io/istio-ingressgateway-istio-system created
clusterrole.rbac.authorization.k8s.io/istio-mixer-istio-system created
clusterrole.rbac.authorization.k8s.io/istio-pilot-istio-system created
clusterrole.rbac.authorization.k8s.io/prometheus-istio-system created
clusterrole.rbac.authorization.k8s.io/istio-citadel-istio-system created
clusterrole.rbac.authorization.k8s.io/istio-sidecar-injector-istio-system created
clusterrolebinding.rbac.authorization.k8s.io/istio-galley-admin-role-binding-istio-system created
clusterrolebinding.rbac.authorization.k8s.io/istio-egressgateway-istio-system created
clusterrolebinding.rbac.authorization.k8s.io/istio-ingressgateway-istio-system created
clusterrolebinding.rbac.authorization.k8s.io/istio-mixer-admin-role-binding-istio-system created
clusterrolebinding.rbac.authorization.k8s.io/istio-pilot-istio-system created
clusterrolebinding.rbac.authorization.k8s.io/prometheus-istio-system created
clusterrolebinding.rbac.authorization.k8s.io/istio-citadel-istio-system created
clusterrolebinding.rbac.authorization.k8s.io/istio-sidecar-injector-admin-role-binding-istio-system created
service/istio-galley created
service/istio-egressgateway created
service/istio-ingressgateway created
service/grafana created
service/istio-policy created
service/istio-telemetry created
service/istio-pilot created
service/prometheus created
service/istio-citadel created
service/servicegraph created
service/istio-sidecar-injector created
deployment.extensions/istio-galley created
deployment.extensions/istio-egressgateway created
deployment.extensions/istio-ingressgateway created
deployment.extensions/grafana created
deployment.extensions/istio-policy created
deployment.extensions/istio-telemetry created
deployment.extensions/istio-pilot created
deployment.extensions/prometheus created
deployment.extensions/istio-citadel created
deployment.extensions/servicegraph created
deployment.extensions/istio-sidecar-injector created
deployment.extensions/istio-tracing created
gateway.networking.istio.io/istio-autogenerated-k8s-ingress created
horizontalpodautoscaler.autoscaling/istio-egressgateway created
horizontalpodautoscaler.autoscaling/istio-ingressgateway created
horizontalpodautoscaler.autoscaling/istio-policy created
horizontalpodautoscaler.autoscaling/istio-telemetry created
horizontalpodautoscaler.autoscaling/istio-pilot created
service/jaeger-query created
service/jaeger-collector created
service/jaeger-agent created
service/zipkin created
service/tracing created
mutatingwebhookconfiguration.admissionregistration.k8s.io/istio-sidecar-injector created
attributemanifest.config.istio.io/istioproxy created
attributemanifest.config.istio.io/kubernetes created
stdio.config.istio.io/handler created
logentry.config.istio.io/accesslog created
logentry.config.istio.io/tcpaccesslog created
rule.config.istio.io/stdio created
rule.config.istio.io/stdiotcp created
metric.config.istio.io/requestcount created
metric.config.istio.io/requestduration created
metric.config.istio.io/requestsize created
metric.config.istio.io/responsesize created
metric.config.istio.io/tcpbytesent created
metric.config.istio.io/tcpbytereceived created
prometheus.config.istio.io/handler created
rule.config.istio.io/promhttp created
rule.config.istio.io/promtcp created
kubernetesenv.config.istio.io/handler created
rule.config.istio.io/kubeattrgenrulerule created
rule.config.istio.io/tcpkubeattrgenrulerule created
kubernetes.config.istio.io/attributes created
destinationrule.networking.istio.io/istio-policy created
destinationrule.networking.istio.io/istio-telemetry created&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;/details&gt;&lt;/p&gt;

&lt;p&gt;설치 후에는 서비스 목록을 확인한다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;$ kubectl get svc -n istio-system
NAME                     TYPE           CLUSTER-IP       EXTERNAL-IP                                                                    PORT&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;S&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;                                                                                                                   AGE
grafana                  ClusterIP      &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;.103.36.168    &amp;lt;none&amp;gt;                                                                         &lt;span class=&#34;m&#34;&gt;3000&lt;/span&gt;/TCP                                                                                                                  1m
istio-citadel            ClusterIP      &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;.105.126.133   &amp;lt;none&amp;gt;                                                                         &lt;span class=&#34;m&#34;&gt;8060&lt;/span&gt;/TCP,9093/TCP                                                                                                         1m
istio-egressgateway      ClusterIP      &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;.96.167.111    &amp;lt;none&amp;gt;                                                                         &lt;span class=&#34;m&#34;&gt;80&lt;/span&gt;/TCP,443/TCP                                                                                                            1m
istio-galley             ClusterIP      &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;.101.13.252    &amp;lt;none&amp;gt;                                                                         &lt;span class=&#34;m&#34;&gt;443&lt;/span&gt;/TCP,9093/TCP                                                                                                          1m
istio-ingressgateway     LoadBalancer   &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;.110.86.12     a9ea060f3215111e98ff402da3f66b58-1123416063.ap-northeast-2.elb.amazonaws.com   &lt;span class=&#34;m&#34;&gt;80&lt;/span&gt;:31380/TCP,443:31390/TCP,31400:31400/TCP,15011:32529/TCP,8060:32743/TCP,853:32409/TCP,15030:32031/TCP,15031:30142/TCP   1m
istio-pilot              ClusterIP      &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;.100.252.232   &amp;lt;none&amp;gt;                                                                         &lt;span class=&#34;m&#34;&gt;15010&lt;/span&gt;/TCP,15011/TCP,8080/TCP,9093/TCP                                                                                     1m
istio-policy             ClusterIP      &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;.105.64.250    &amp;lt;none&amp;gt;                                                                         &lt;span class=&#34;m&#34;&gt;9091&lt;/span&gt;/TCP,15004/TCP,9093/TCP                                                                                               1m
istio-sidecar-injector   ClusterIP      &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;.97.255.80     &amp;lt;none&amp;gt;                                                                         &lt;span class=&#34;m&#34;&gt;443&lt;/span&gt;/TCP                                                                                                                   1m
istio-telemetry          ClusterIP      &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;.100.243.108   &amp;lt;none&amp;gt;                                                                         &lt;span class=&#34;m&#34;&gt;9091&lt;/span&gt;/TCP,15004/TCP,9093/TCP,42422/TCP                                                                                     1m
jaeger-agent             ClusterIP      None             &amp;lt;none&amp;gt;                                                                         &lt;span class=&#34;m&#34;&gt;5775&lt;/span&gt;/UDP,6831/UDP,6832/UDP                                                                                                1m
jaeger-collector         ClusterIP      &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;.96.82.132     &amp;lt;none&amp;gt;                                                                         &lt;span class=&#34;m&#34;&gt;14267&lt;/span&gt;/TCP,14268/TCP                                                                                                       1m
jaeger-query             ClusterIP      &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;.97.191.144    &amp;lt;none&amp;gt;                                                                         &lt;span class=&#34;m&#34;&gt;16686&lt;/span&gt;/TCP                                                                                                                 1m
prometheus               ClusterIP      &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;.104.183.23    &amp;lt;none&amp;gt;                                                                         &lt;span class=&#34;m&#34;&gt;9090&lt;/span&gt;/TCP                                                                                                                  1m
servicegraph             ClusterIP      &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;.102.175.176   &amp;lt;none&amp;gt;                                                                         &lt;span class=&#34;m&#34;&gt;8088&lt;/span&gt;/TCP                                                                                                                  1m
tracing                  ClusterIP      &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;.103.166.96    &amp;lt;none&amp;gt;                                                                         &lt;span class=&#34;m&#34;&gt;80&lt;/span&gt;/TCP                                                                                                                    1m
zipkin                   ClusterIP      &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;.108.3.146     &amp;lt;none&amp;gt;                                                                         &lt;span class=&#34;m&#34;&gt;9411&lt;/span&gt;/TCP&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;다음과 같이, Istio 설치가 완료되었다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;$ kubectl get po -n istio-system
NAME                                     READY   STATUS      RESTARTS   AGE
grafana-7f6cd4bf56-lqgck                 &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1     Running     &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          2m
istio-citadel-7dd558dcf-m2qjf            &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1     Running     &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          2m
istio-cleanup-secrets-shkfz              &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;/1     Completed   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          2m
istio-egressgateway-8666f9bdcc-s5xpv     &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1     Running     &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          2m
istio-galley-787758f7b8-lc97g            &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1     Running     &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          2m
istio-grafana-post-install-2n6zv         &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;/1     Completed   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          2m
istio-ingressgateway-645bbdc9db-znhnx    &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1     Running     &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          2m
istio-pilot-86b6679ddf-7k795             &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;/2     Pending     &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          2m
istio-policy-6b59f7bdfd-9xgw6            &lt;span class=&#34;m&#34;&gt;2&lt;/span&gt;/2     Running     &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          2m
istio-security-post-install-vpbh4        &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;/1     Completed   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          2m
istio-sidecar-injector-d7f98d9cb-ght2x   &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1     Running     &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          2m
istio-telemetry-f94b484cd-wsd72          &lt;span class=&#34;m&#34;&gt;2&lt;/span&gt;/2     Running     &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          2m
istio-tracing-7596597bd7-wh57j           &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1     Running     &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          2m
prometheus-76db5fddd5-w5zrl              &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1     Running     &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          2m
servicegraph-56dddff777-q66jx            &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1     Running     &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          2m&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&#34;envoy-컨테이너-주입&#34;&gt;Envoy 컨테이너 주입&lt;/h2&gt;

&lt;p&gt;Instio Sidecar Injector는 Envoy 컨테이너를 주입하는 역할을 하는데, 두 가지 방법이 있다.&lt;/p&gt;

&lt;p&gt;특정 네임스페이스를 라벨링하여 자동으로 주입한다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;$ kubectl label namespace &amp;lt;namespace&amp;gt; istio-injection&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;enabled
$ kubectl create -n &amp;lt;namespace&amp;gt; -f &amp;lt;your-app-spec&amp;gt;.yaml&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;또는 다음과 같이 &lt;code&gt;istioctl&lt;/code&gt;을 사용하여 수동으로 주입할 수 있다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;$ istioctl kube-inject -f &amp;lt;your-app-spec&amp;gt;.yaml &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; kubectl apply -f -&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이하, 아래 예제 서비스는 모두 &lt;code&gt;istioctl&lt;/code&gt;을 사용해서 배포한다.&lt;/p&gt;

&lt;h3 id=&#34;helloworld-예제&#34;&gt;HelloWorld 예제&lt;/h3&gt;

&lt;p&gt;먼저, 다운 받아 놓은 Istio의 &lt;code&gt;sample&lt;/code&gt; 폴더 밑에 있는 &lt;code&gt;hello-world&lt;/code&gt; 서비스를 배포해보자.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;$ kubectl apply -f &amp;lt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;istioctl kube-inject -f helloworld.yaml&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Istio 인그레스 컨트롤러에서 획득한 ELB 주소와 포트로 접속하면, 다음과 같이 Hello version 1과 Hello version 2로 로드밸런싱 되는 것을 볼 수 있다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;$ curl http://af4e1ca06216211e9bc6d02f1aa55be0-1809927191.ap-northeast-2.elb.amazonaws.com/hello
Hello version: v1, instance: helloworld-v1-67f4b97db-ldzhl

$ curl http://af4e1ca06216211e9bc6d02f1aa55be0-1809927191.ap-northeast-2.elb.amazonaws.com/hello
Hello version: v2, instance: helloworld-v2-c4bb7875c-rnpnd

$ curl http://af4e1ca06216211e9bc6d02f1aa55be0-1809927191.ap-northeast-2.elb.amazonaws.com/hello
Hello version: v1, instance: helloworld-v1-67f4b97db-ldzhl

$ curl http://af4e1ca06216211e9bc6d02f1aa55be0-1809927191.ap-northeast-2.elb.amazonaws.com/hello
Hello version: v2, instance: helloworld-v2-c4bb7875c-rnpnd&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&#34;bookinfo-예제&#34;&gt;BookInfo 예제&lt;/h3&gt;

&lt;p&gt;BookInfo 예제의 배포도 HelloWorld와 동일하다.&lt;/p&gt;

&lt;p&gt;자세한 것은 다음 문서를 참고한다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://istio.io/docs/examples/bookinfo/&#34; target=&#34;_blank&#34;&gt;https://istio.io/docs/examples/bookinfo/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;BookInfo 예제도 접속할 때마다, Istio 서비스 메쉬로 화면이 갱신되는 것을 확인할 수 있다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;../../tgik-003/bookinfo.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;h2 id=&#34;모니터링&#34;&gt;모니터링&lt;/h2&gt;

&lt;h3 id=&#34;service-graph&#34;&gt;Service Graph&lt;/h3&gt;

&lt;p&gt;서비스 그래프는 포트 포워딩 후에, &lt;code&gt;http://localhost:8088/dotviz&lt;/code&gt;에 접속하게 되면 서비스 그래프를 확인할 수 있다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;$ kubectl -n istio-system port-forward &lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;kubectl -n istio-system get pod -l &lt;span class=&#34;nv&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;servicegraph -o &lt;span class=&#34;nv&#34;&gt;jsonpath&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;{.items[0].metadata.name}&amp;#39;&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;8088&lt;/span&gt;:8080 &lt;span class=&#34;p&#34;&gt;&amp;amp;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&#34;../../tgik-003/service-graph.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;그 외에도 다양한 방법의 시각화를 제공하고 있다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;/force/forcegraph.html (D3.js 시각화 그래프)&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;/dotviz (정적 시각화 그래프)&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;/dotgraph (DOT 직렬화 데이터)&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;/d3graph (D3 visualization JSON 직렬화 데이터)&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;/graph (JSON 직렬화 데이터)&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;이상, 자세한 내용은 다음 링크를 참고한다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://istio.io/docs/tasks/telemetry/using-istio-dashboard/&#34; target=&#34;_blank&#34;&gt;https://istio.io/docs/tasks/telemetry/using-istio-dashboard/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;graphana&#34;&gt;Graphana&lt;/h3&gt;

&lt;p&gt;또한 Istio 메쉬 대시보드, 서비스 대시보드, 워크 로드 대시보드 등을 비릇해 다양한 대시보드를 통해 메트릭을 확인할 수 있다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;$ kubectl -n istio-system port-forward &lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;kubectl -n istio-system get pod -l &lt;span class=&#34;nv&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;grafana -o &lt;span class=&#34;nv&#34;&gt;jsonpath&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;{.items[0].metadata.name}&amp;#39;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;3000&lt;/span&gt;:3000 &lt;span class=&#34;p&#34;&gt;&amp;amp;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&#34;../../tgik-003/grafana.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;자세한 내용은 다음 링크를 참고한다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://istio.io/docs/tasks/telemetry/using-istio-dashboard/&#34; target=&#34;_blank&#34;&gt;https://istio.io/docs/tasks/telemetry/using-istio-dashboard/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;jaeger&#34;&gt;Jaeger&lt;/h3&gt;

&lt;p&gt;예거라는 분산 로그 추적 시스템을 통해 마이크로 서비스의 API 하나하나를 추적할 수 있다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;$ kubectl port-forward -n istio-system &lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;kubectl get pod -n istio-system -l &lt;span class=&#34;nv&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;jaeger -o &lt;span class=&#34;nv&#34;&gt;jsonpath&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;{.items[0].metadata.name}&amp;#39;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;16686&lt;/span&gt;:16686 &lt;span class=&#34;p&#34;&gt;&amp;amp;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&#34;../../tgik-003/jaeger-001.png&#34; alt=&#34;&#34; /&gt;
&lt;img src=&#34;../../tgik-003/jaeger-002.png&#34; alt=&#34;&#34; /&gt;
&lt;img src=&#34;../../tgik-003/jaeger-003.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;이상, 자세한 내용은 다음 링크를 참고한다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://istio.io/docs/tasks/telemetry/distributed-tracing/&#34; target=&#34;_blank&#34;&gt;https://istio.io/docs/tasks/telemetry/distributed-tracing/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.jaegertracing.io&#34; target=&#34;_blank&#34;&gt;https://www.jaegertracing.io&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;center&gt;•••&lt;/center&gt;&lt;/p&gt;

&lt;h2 id=&#34;service-account-오류-수정&#34;&gt;Service Account 오류 수정&lt;/h2&gt;

&lt;p&gt;2017년 데모 당시에는 Istio RBAC 활성화시에 제대로 배포되지 않는 버그가 있었다. 그 과정이 흥미진진하고 마지막에 해결하는 모습이 멋있어서 그 과정을 간략히 요약해보았다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://www.youtube.com/watch?v=WnDG-5cvEew&amp;amp;feature=youtu.be&amp;amp;t=2491&#34; target=&#34;_blank&#34;&gt;Ingress/Engress 에러 확인&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://www.youtube.com/watch?v=WnDG-5cvEew&amp;amp;feature=youtu.be&amp;amp;t=2540&#34; target=&#34;_blank&#34;&gt;일단, Ingress/Engress 컨테이너 로그를 확인해 봄&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://www.youtube.com/watch?v=WnDG-5cvEew&amp;amp;feature=youtu.be&amp;amp;t=2644&#34; target=&#34;_blank&#34;&gt;Pilot Pod에서 api-server 컨테이너 로그 확인&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;* failed to register Third-Party Resources. User &lt;span class=&#34;s2&#34;&gt;&amp;#34;system:serviceaccount:default:istio-pilot-service-account&amp;#34;&lt;/span&gt; cannot get thirdpartyresources.exentions at the cluster scope. &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;get thirdpartyresources.extensions istio-config.istio.io&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
* failed to register Thrid-Party REsources. Failed to create all TPRs&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://www.youtube.com/watch?v=WnDG-5cvEew&amp;amp;feature=youtu.be&amp;amp;t=3230&#34; target=&#34;_blank&#34;&gt;Istio 네임스페이스가 디폴트가 아닌 경우에 ClusterRoleBinding을 변경해줘야 하는 이슈 PR(333)&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Istio mixer가 뭔가 하는 게 있는데, RBAC 롤을 제대로 안 주고 있는 것 같다고 추측. 이에 누군가가 mixer가 pilot 애셋을 가지고 있는지 확인해보라고 함.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://www.youtube.com/watch?v=WnDG-5cvEew&amp;amp;feature=youtu.be&amp;amp;t=3230&#34; target=&#34;_blank&#34;&gt;&lt;code&gt;istio-pilot-service-account&lt;/code&gt; 서비스 계정 추가&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;$ kubectl edit deployment istio-mixer
serviceAccount: istio-pilot-service-account&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;추후 RBAC이 활성화 되었을 때 k8s TPR이 생성되지 않는 동일한 &lt;a href=&#34;https://github.com/istio/istio/issues/327&#34; target=&#34;_blank&#34;&gt;327번 이슈&lt;/a&gt; 확인&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;기타-링크&#34;&gt;기타 링크&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/subicura/istio-demo&#34; target=&#34;_blank&#34;&gt;https://github.com/subicura/istio-demo&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.katacoda.com/courses/istio/deploy-istio-on-kubernetes&#34; target=&#34;_blank&#34;&gt;https://www.katacoda.com/courses/istio/deploy-istio-on-kubernetes&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
      
    </item>
    
    <item>
      <title>TGI Kubernetes 002: Networking and Services</title>
      <link>https://ziwon.github.io/post/tgik-002/</link>
      <pubDate>Sat, 19 Jan 2019 08:12:00 +0900</pubDate>
      <author>Aron Yoon</author>
      <guid>https://ziwon.github.io/post/tgik-002/</guid>
      <description></description>
      
      <content>

&lt;h1 id=&#34;tgik-thanks-god-it-s-kubernetes&#34;&gt;TGIK: Thanks God It&amp;rsquo;s Kubernetes&lt;/h1&gt;

&lt;p&gt;&lt;a href=&#34;https://github.com/heptio/tgik/tree/master/episodes/002&#34; target=&#34;_blank&#34;&gt;두 번째 에피소드&lt;/a&gt;는 네트워킹과 서비스에 관해 다룬다. 관련 링크나 노트는 없다.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;결국, heptio-quickstart를 AWS에 올리고 따라해보았다. 아무래도 GCP UI나 커맨드라인 결과가 조금 다른 것으로 인해 혼란의 여지가 있을 것 같다. QuickStart이긴 하나, CloudFormation 기반으로 Kubernetes 컴포넌트들을 설치해가는 스크립트를 하나하나씩 살펴보는 것도 유의미해보인다.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;center&gt;•••&lt;/center&gt;&lt;/p&gt;

&lt;h1 id=&#34;networking&#34;&gt;Networking&lt;/h1&gt;

&lt;p&gt;먼저, 10개의 &lt;code&gt;kuard&lt;/code&gt; &lt;code&gt;Pod&lt;/code&gt;를 띄운다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;$ kubectl run --replicas&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;10&lt;/span&gt; --image&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;gcr.io/kuar-demo/kuard-amd64:1 kuard
deployment.apps &lt;span class=&#34;s2&#34;&gt;&amp;#34;kuard&amp;#34;&lt;/span&gt; created

$ kubectl get pods
NAME                    READY     STATUS    RESTARTS   AGE
kuard-dbdd7955d-4kdbr   &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1       Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          13s
kuard-dbdd7955d-5r757   &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1       Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          13s
kuard-dbdd7955d-dhts5   &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1       Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          13s
kuard-dbdd7955d-hsl87   &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1       Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          13s
kuard-dbdd7955d-k8x7l   &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1       Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          13s
kuard-dbdd7955d-ms8hb   &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1       Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          13s
kuard-dbdd7955d-qfjbk   &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1       Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          13s
kuard-dbdd7955d-tfgdl   &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1       Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          13s
kuard-dbdd7955d-v8lj2   &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1       Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          13s
kuard-dbdd7955d-wzcf4   &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1       Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          13s&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;port-forward&lt;/code&gt;으로 실행 중인 &lt;code&gt;kuard&lt;/code&gt;에 접속해본다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;$ kubectl port-forward kuard-dbdd7955d-4kdbr &lt;span class=&#34;m&#34;&gt;8080&lt;/span&gt;:8080&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;그리고 해당 &lt;code&gt;Pod&lt;/code&gt;의 쉘에 접속해서 호스트 이름과 IP 주소를 확인한다. 호스트 네임은 &lt;code&gt;kuard-dbdd7955d-4kdbr&lt;/code&gt;이고, IP 주소는 &lt;code&gt;192.168.3.140&lt;/code&gt;으로 확인된다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;$ kubectl &lt;span class=&#34;nb&#34;&gt;exec&lt;/span&gt; -it kuard-dbdd7955d-4kdbr ash
~ $ hostname
kuard-dbdd7955d-4kdbr
~ $ ifconfig
eth0      Link encap:Ethernet  HWaddr 4E:C8:47:58:DF:76  
          inet addr:192.168.3.140  Bcast:0.0.0.0  Mask:255.255.255.255
          inet6 addr: fe80::4cc8:47ff:fe58:df76/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:8 errors:0 dropped:0 overruns:0 frame:0
          TX packets:8 errors:0 dropped:1 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:648 &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;648&lt;/span&gt;.0 B&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;  TX bytes:648 &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;648&lt;/span&gt;.0 B&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;

lo        Link encap:Local Loopback  
          inet addr:127.0.0.1  Mask:255.0.0.0
          inet6 addr: ::1/128 Scope:Host
          UP LOOPBACK RUNNING  MTU:65536  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1 
          RX bytes:0 &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;.0 B&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;  TX bytes:0 &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;.0 B&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;또는 다음과 같이 &lt;code&gt;-o wide&lt;/code&gt; 옵션으로 &lt;code&gt;Node&lt;/code&gt;와 &lt;code&gt;Pod&lt;/code&gt;의 IP 주소를 같이 확인할 수 있다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;$ kubectl get pods -o wide
NAME                    READY     STATUS    RESTARTS   AGE       IP              NODE
kuard-dbdd7955d-4kdbr   &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1       Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          2m        &lt;span class=&#34;m&#34;&gt;192&lt;/span&gt;.168.3.140   ip-10-0-8-254.ap-northeast-2.compute.internal
kuard-dbdd7955d-5r757   &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1       Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          2m        &lt;span class=&#34;m&#34;&gt;192&lt;/span&gt;.168.49.6    ip-10-0-8-176.ap-northeast-2.compute.internal
kuard-dbdd7955d-dhts5   &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1       Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          2m        &lt;span class=&#34;m&#34;&gt;192&lt;/span&gt;.168.49.9    ip-10-0-8-176.ap-northeast-2.compute.internal
kuard-dbdd7955d-hsl87   &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1       Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          2m        &lt;span class=&#34;m&#34;&gt;192&lt;/span&gt;.168.49.10   ip-10-0-8-176.ap-northeast-2.compute.internal
kuard-dbdd7955d-k8x7l   &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1       Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          2m        &lt;span class=&#34;m&#34;&gt;192&lt;/span&gt;.168.49.8    ip-10-0-8-176.ap-northeast-2.compute.internal
kuard-dbdd7955d-ms8hb   &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1       Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          2m        &lt;span class=&#34;m&#34;&gt;192&lt;/span&gt;.168.3.137   ip-10-0-8-254.ap-northeast-2.compute.internal
kuard-dbdd7955d-qfjbk   &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1       Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          2m        &lt;span class=&#34;m&#34;&gt;192&lt;/span&gt;.168.3.138   ip-10-0-8-254.ap-northeast-2.compute.internal
kuard-dbdd7955d-tfgdl   &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1       Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          2m        &lt;span class=&#34;m&#34;&gt;192&lt;/span&gt;.168.3.136   ip-10-0-8-254.ap-northeast-2.compute.internal
kuard-dbdd7955d-v8lj2   &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1       Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          2m        &lt;span class=&#34;m&#34;&gt;192&lt;/span&gt;.168.3.139   ip-10-0-8-254.ap-northeast-2.compute.internal
kuard-dbdd7955d-wzcf4   &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1       Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          2m        &lt;span class=&#34;m&#34;&gt;192&lt;/span&gt;.168.49.7    ip-10-0-8-176.ap-northeast-2.compute.internal&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;보다시피, Kubernetes에서 Pod은 자신의 고유 IP를 가지고 있고, Pod의 IP가 Node의 IP와는 다르다는 것에 주목한다. 이는 Kubernetes의 전신인 구글의 Borg 또는 Borg에서 영감을 받은 Mesos, 또는 단순히 여러 도커가 실행되는 기타 노드 클러스터와는 다른 점이라고 한다. Borg에서는 많은 워크로드들이 IP를 공유했었다고 한다. 이는 여러가지 문제와 복잡성을 야기했다. 이를 테면, IP를 공유하기 때문에 포트를 할당받을 수 있는데, Borg는 어느 컨테이너에 어떤 포트가 액세스하는지 알아야만 했고 관리가 복잡해졌다고 한다. 영상에서는 다소 길게 설명하고 있는데, &lt;a href=&#34;https://pdos.csail.mit.edu/6.824/papers/borg.pdf&#34; target=&#34;_blank&#34;&gt;Large-scale cluster management at Google with Borg&lt;/a&gt; 페이퍼의 &lt;strong&gt;8. Lessons and future work&lt;/strong&gt;에서 다음과 같이 언급하고 있다.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;One IP address per machine complicates things&lt;/strong&gt; 머신마다 하나의 IP 주소가 일을 복잡하게 만든다. Borg에서 시스템의 모든 작업은 호스트의 단일 IP 주소를 사용하므로 호스트의 포트 공간을 공유한다. 이는 여러가지 어려움을 야기한다. Borg는 포트를 리소스로 예약해야 한다. 태스크는 필요한 포트 수를 미리 선언하고, 시작시 어떤 포트를 사용할 지 알아야만 한다. Linux 네임스페이스, VM, IPv6 및 소프트웨어 정의 네트워킹의 등장으로 인해 Kubernetes는 이러한 복잡성을 제거하는, 보다 사용자 친화적인 접근 방식을 취할 수 있다. 즉, 모든 포드 및 서비스는 고유한 IP 주소를 가지므로, 인프라에서 선택한 포트에 개발자의 소프트웨어를 맞추기 보다는 개발자가 포트를 선택할 수 있고, 포트 관리의 인프라 복잡성을 제거한다.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;Note&lt;/strong&gt;: Node IP는 다음과 같이 확인할 수 있다. &lt;code&gt;type&lt;/code&gt;에는 &lt;code&gt;ExternalIP&lt;/code&gt; 또는 &lt;code&gt;InternalIP&lt;/code&gt; 등의 값으로 조회할 수 있다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;$ kubectl get nodes -o &lt;span class=&#34;nv&#34;&gt;jsonpath&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;{.items[*].status.addresses[?(@.type==&amp;#34;InternalIP&amp;#34;)].address}&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; tr -s &lt;span class=&#34;s1&#34;&gt;&amp;#39;[[:space:]]&amp;#39;&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;\n&amp;#39;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&#34;pop간의-연결&#34;&gt;Pop간의 연결&lt;/h2&gt;

&lt;p&gt;Pod가 서로 고유한 IP 주소를 가지기 때문에, 다음과 같이 한 &lt;code&gt;Pod(192.168.3.140)&lt;/code&gt;에서 다른 &lt;code&gt;Pod(192.168.49.6)&lt;/code&gt;에 API 요청을 할 수 있다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;$ kubectl &lt;span class=&#34;nb&#34;&gt;exec&lt;/span&gt; -it kuard-dbdd7955d-4kdbr ash
~ $ wget -O - &lt;span class=&#34;m&#34;&gt;192&lt;/span&gt;.168.49.6:8080/env/api
Connecting to &lt;span class=&#34;m&#34;&gt;192&lt;/span&gt;.168.49.6:8080 &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;192&lt;/span&gt;.168.49.6:8080&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;commandLine&amp;#34;&lt;/span&gt;:&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;/kuard&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;env&amp;#34;&lt;/span&gt;:&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;HOME&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;/&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;HOSTNAME&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;kuard-dbdd7955d-c48g5&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;tcp://192.168.49.6:443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT_443_TCP&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;tcp://92.168.49.6:443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT_443_TCP_ADDR&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;192.168.49.6&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT_443_TCP_PORT&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT_443_TCP_PROTO&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;tcp&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_SERVICE_HOST&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;192.168.49.6&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_SERVICE_PORT&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_SERVICE_PORT_HTTPS&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;PATH&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;}}&lt;/span&gt;
-                    &lt;span class=&#34;m&#34;&gt;100&lt;/span&gt;% &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt;*************************************************************************************************************************&lt;span class=&#34;p&#34;&gt;|&lt;/span&gt;   &lt;span class=&#34;m&#34;&gt;473&lt;/span&gt;   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;:00:00 ETA&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&#34;node와-pod간의-연결&#34;&gt;Node와 Pod간의 연결&lt;/h2&gt;

&lt;p&gt;다음으로, 마스터 노드에 SSH 접속하여 &lt;code&gt;kubectl&lt;/code&gt; 명령의 동작 여부를 살펴본다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;nv&#34;&gt;SSH_KEY&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;~/.ssh/id_rsa&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; ssh -i &lt;span class=&#34;nv&#34;&gt;$SSH_KEY&lt;/span&gt; -o &lt;span class=&#34;nv&#34;&gt;ProxyCommand&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;ssh -i \&amp;#34;&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;SSH_KEY&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;\&amp;#34; ubuntu@13.209.11.49 nc %h %p&amp;#34;&lt;/span&gt; ubuntu@10.0.23.3&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;$ kubectl get po -o wide
NAME                    READY     STATUS    RESTARTS   AGE       IP              NODE                                            NOMINATED NODE
kuard-dbdd7955d-4kdbr   &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1       Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          25m       &lt;span class=&#34;m&#34;&gt;192&lt;/span&gt;.168.3.140   ip-10-0-8-254.ap-northeast-2.compute.internal   &amp;lt;none&amp;gt;
kuard-dbdd7955d-5r757   &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1       Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          25m       &lt;span class=&#34;m&#34;&gt;192&lt;/span&gt;.168.49.6    ip-10-0-8-176.ap-northeast-2.compute.internal   &amp;lt;none&amp;gt;
kuard-dbdd7955d-dhts5   &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1       Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          25m       &lt;span class=&#34;m&#34;&gt;192&lt;/span&gt;.168.49.9    ip-10-0-8-176.ap-northeast-2.compute.internal   &amp;lt;none&amp;gt;
kuard-dbdd7955d-hsl87   &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1       Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          25m       &lt;span class=&#34;m&#34;&gt;192&lt;/span&gt;.168.49.10   ip-10-0-8-176.ap-northeast-2.compute.internal   &amp;lt;none&amp;gt;
kuard-dbdd7955d-k8x7l   &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1       Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          25m       &lt;span class=&#34;m&#34;&gt;192&lt;/span&gt;.168.49.8    ip-10-0-8-176.ap-northeast-2.compute.internal   &amp;lt;none&amp;gt;
kuard-dbdd7955d-ms8hb   &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1       Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          25m       &lt;span class=&#34;m&#34;&gt;192&lt;/span&gt;.168.3.137   ip-10-0-8-254.ap-northeast-2.compute.internal   &amp;lt;none&amp;gt;
kuard-dbdd7955d-qfjbk   &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1       Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          25m       &lt;span class=&#34;m&#34;&gt;192&lt;/span&gt;.168.3.138   ip-10-0-8-254.ap-northeast-2.compute.internal   &amp;lt;none&amp;gt;
kuard-dbdd7955d-tfgdl   &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1       Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          25m       &lt;span class=&#34;m&#34;&gt;192&lt;/span&gt;.168.3.136   ip-10-0-8-254.ap-northeast-2.compute.internal   &amp;lt;none&amp;gt;
kuard-dbdd7955d-v8lj2   &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1       Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          25m       &lt;span class=&#34;m&#34;&gt;192&lt;/span&gt;.168.3.139   ip-10-0-8-254.ap-northeast-2.compute.internal   &amp;lt;none&amp;gt;
kuard-dbdd7955d-wzcf4   &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1       Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          25m       &lt;span class=&#34;m&#34;&gt;192&lt;/span&gt;.168.49.7    ip-10-0-8-176.ap-northeast-2.compute.internal   &amp;lt;none&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;다음과 같이 Node 인스턴스에서 Pod에 접속이 되는 것을 확인할 수 있다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;ubuntu@ip-10-0-23-3:~/.kube$ curl &lt;span class=&#34;m&#34;&gt;192&lt;/span&gt;.168.3.140:8080/env/api
&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;commandLine&amp;#34;&lt;/span&gt;:&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;/kuard&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;env&amp;#34;&lt;/span&gt;:&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;HOME&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;/&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;HOSTNAME&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;kuard-dbdd7955d-4kdbr&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;tcp://10.96.0.1:443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT_443_TCP&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;tcp://10.96.0.1:443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT_443_TCP_ADDR&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;10.96.0.1&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT_443_TCP_PORT&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT_443_TCP_PROTO&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;tcp&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_SERVICE_HOST&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;10.96.0.1&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_SERVICE_PORT&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_SERVICE_PORT_HTTPS&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;PATH&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;}}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Note&lt;/strong&gt;: 2017년 데모에서는 &lt;code&gt;KUBECONFIG&lt;/code&gt; 파일의 명시해주고 있는데, 현재 버전에서는 마스터 노드 홈디렉토리에 &lt;code&gt;~/.kube/config&lt;/code&gt; 파일이 존재한다.  &lt;code&gt;kubeadm&lt;/code&gt; v1.8.0부터 kubeadm은 클러스터 구성을 kube-system 네임 스페이스의 kubeadm-config라는 ConfigMap에 업로드하고 나중에 업그레이드 할 때 ConfigMap을 읽는다. 그리고 어드민 설정 정보는 &lt;code&gt;/etc/kubernetes/admin.confg&lt;/code&gt; 파일에 기록된다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;~/.kube/config&lt;/li&gt;
&lt;li&gt;/etc/kubernetes/admin.config&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;데모 영상에 나온 질문 몇가지에 대한 답변을 다음과 같이 간단히 요약하였다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;AWS 네이티브 라우팅을 이용해서 Kubernetes 클러스터의 노드가 아니어도 클러스터 네트워크에 조인하여 연결될 수 있다.&lt;/li&gt;
&lt;li&gt;Pod을 일반적인 호스트처럼 바로 IP 어드레싱을 할 수 있지만, 대부분 Service나 Isto 서비스 메쉬를 통한다. 물론, Service 없이 할 수도 있다. 그러나 자체의 진보된 서비스 디스커버리 매커니즘이 필요할 것이다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&#34;cni&#34;&gt;CNI&lt;/h1&gt;

&lt;p&gt;다음으로 CNI에 대해 설명하고 잇다. CNI는 Kubernetes 컨텍스트가 아니더라도, 많은 컨테이너가 있고 그들 사이의 네트워킹을 구성해야 한다면, 표준 인터페이스로 사용할 수 있다.&lt;/p&gt;

&lt;p&gt;다음과 같이 CloudFormation에 명시한 Calico 플러그인 정보는 아래 경로에서 확인할 수 있다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;ubuntu@ip-10-0-23-3:~$ &lt;span class=&#34;nb&#34;&gt;cd&lt;/span&gt; /etc/cni/net.d/
ubuntu@ip-10-0-23-3:/etc/cni/net.d$ ls
&lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;-calico.conflist  calico-kubeconfig&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;10-calico.conflist&lt;/code&gt;을 보면, Pod 네트워크에 Calio 플러그인을 사용할 것을 명시하고 있다. IPAM 주소 관리는 &lt;code&gt;calico-ipam&lt;/code&gt;을 사용한다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;ubuntu@ip-10-0-23-3:/etc/cni/net.d$ cat &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;-calico.conflist 
&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
  &lt;span class=&#34;s2&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;k8s-pod-network&amp;#34;&lt;/span&gt;,
  &lt;span class=&#34;s2&#34;&gt;&amp;#34;cniVersion&amp;#34;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;0.3.0&amp;#34;&lt;/span&gt;,
  &lt;span class=&#34;s2&#34;&gt;&amp;#34;plugins&amp;#34;&lt;/span&gt;: &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;s2&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;calico&amp;#34;&lt;/span&gt;,
      &lt;span class=&#34;s2&#34;&gt;&amp;#34;log_level&amp;#34;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;info&amp;#34;&lt;/span&gt;,
      &lt;span class=&#34;s2&#34;&gt;&amp;#34;etcd_endpoints&amp;#34;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;http://10.96.232.136:6666&amp;#34;&lt;/span&gt;,
      &lt;span class=&#34;s2&#34;&gt;&amp;#34;mtu&amp;#34;&lt;/span&gt;: &lt;span class=&#34;m&#34;&gt;1500&lt;/span&gt;,
      &lt;span class=&#34;s2&#34;&gt;&amp;#34;ipam&amp;#34;&lt;/span&gt;: &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
          &lt;span class=&#34;s2&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;calico-ipam&amp;#34;&lt;/span&gt;
      &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;,
      &lt;span class=&#34;s2&#34;&gt;&amp;#34;policy&amp;#34;&lt;/span&gt;: &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
          &lt;span class=&#34;s2&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;k8s&amp;#34;&lt;/span&gt;
      &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;,
      &lt;span class=&#34;s2&#34;&gt;&amp;#34;kubernetes&amp;#34;&lt;/span&gt;: &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
          &lt;span class=&#34;s2&#34;&gt;&amp;#34;kubeconfig&amp;#34;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;/etc/cni/net.d/calico-kubeconfig&amp;#34;&lt;/span&gt;
      &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;,
    &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;s2&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;portmap&amp;#34;&lt;/span&gt;,
      &lt;span class=&#34;s2&#34;&gt;&amp;#34;snat&amp;#34;&lt;/span&gt;: true,
      &lt;span class=&#34;s2&#34;&gt;&amp;#34;capabilities&amp;#34;&lt;/span&gt;: &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;portMappings&amp;#34;&lt;/span&gt;: true&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
  &lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;calico API를 호출시 사용되는 Kubernetes 설정 내용이다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;ubuntu@ip-10-0-23-3:/etc/cni/net.d$ sudo cat calico-kubeconfig 
&lt;span class=&#34;c1&#34;&gt;# Kubeconfig file for Calico CNI plugin.
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;apiVersion: v1
kind: Config
clusters:
- name: &lt;span class=&#34;nb&#34;&gt;local&lt;/span&gt;
  cluster:
    server: https://&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;.96.0.1&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;:443
    certificate-authority-data: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JS...S0tLQo&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;
users:
- name: calico
  user:
    token: &lt;span class=&#34;s2&#34;&gt;&amp;#34;eyJhbGciOiJSUzI1NiIsImtpZCI6IiJ9.eyJpc...&amp;#34;&lt;/span&gt;
contexts:
- name: calico-context
  context:
    cluster: &lt;span class=&#34;nb&#34;&gt;local&lt;/span&gt;
    user: calico
current-context: calico-context&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;컨테이너로 해야할 어떤 작업이 있을 때마다 플러그인이 호출된다고 한다. 컨테이너의 여러 인터페이스에 대해 여러 개의 플러그인을 구성할 수 있다. 예를 들면, 컨테이너를 런칭할 때, 도커는 내부에 네트워크 네임스페이스를 셋업하는데, CNI는 도커의 모든 네트워크 설정을 가져와 도커와 마찬가지로 네임스페이스 설정을 한 뒤에 Kubernetes의 플러그형 시스템으로 확장하는 역할을 한다고 한다. (CNI에 대해 좀 더 기대했으나 위와 같이 간략하게 설명하고 있다.)&lt;/p&gt;

&lt;p&gt;&lt;code&gt;/opt/cni/bin&lt;/code&gt;으로 이동하면, 여러가지 CNI 배포 패키지들을 볼 수 있다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;ubuntu@ip-10-0-23-3: &lt;span class=&#34;nb&#34;&gt;cd&lt;/span&gt; /opt/cni/bin
ubuntu@ip-10-0-23-3:/opt/cni/bin$ ls
bridge  calico  calico-ipam  dhcp  flannel  host-local  ipvlan  loopback  macvlan  portmap  ptp  sample  tuning  vlan&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;calico&lt;/code&gt;를 실행해보자.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;ubuntu@ip-10-0-23-3:/opt/cni/bin$ ./calico
CNI_COMMAND env variable missing
&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;s2&#34;&gt;&amp;#34;code&amp;#34;&lt;/span&gt;: &lt;span class=&#34;m&#34;&gt;100&lt;/span&gt;,
    &lt;span class=&#34;s2&#34;&gt;&amp;#34;msg&amp;#34;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;required env variables missing&amp;#34;&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;에러를 반환한다. 위에서 보다시피 CNI에 대한 API 호출은 여러가지 환경설정 변수를 넘겨주는데, CNI는 다른 UNIX 네트워킹 프로세스를 셋업할 수 있는 API 호출이라는 것을 알 수 있다.&lt;/p&gt;

&lt;h1 id=&#34;service&#34;&gt;Service&lt;/h1&gt;

&lt;p&gt;다음 명령은 &lt;code&gt;type&lt;/code&gt;이 &lt;code&gt;LoadBalancer&lt;/code&gt;이고, 이름이 &lt;code&gt;kuard&lt;/code&gt;인 Service를 생성하여 Kubernetes 클러스터 내의 Pod을 클러스터 외부 로드 밸런서와 연결시킨다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;$ kubectl expose deployment kuard --type&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;LoadBalancer --target-port&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;8080&lt;/span&gt; --port&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;80&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Service와 Pop은 서로에 대해 알지 못하나 Pod의 &lt;code&gt;label&lt;/code&gt;로 Service와 Pod이 서로 코디네이션된다. (&lt;code&gt;label&lt;/code&gt;을 통해 매핑되는 Service와 Pod의 메카니즘에 대해 설명하고 있는 자료가 이미 많으므로 넘어가기로 한다.)&lt;/p&gt;

&lt;p&gt;서비스에는 다음과 같이 4가지 타입이 있다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;ExternalName&lt;/li&gt;
&lt;li&gt;None&lt;/li&gt;
&lt;li&gt;ClusterIP&lt;/li&gt;
&lt;li&gt;NodePort&lt;/li&gt;
&lt;li&gt;LoadBalancer&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;externalname&#34;&gt;ExternalName&lt;/h2&gt;

&lt;p&gt;&lt;code&gt;ExternalName&lt;/code&gt; 타입은 Kubernetes의 자체 서비스 디스커버리을 사용하되, Kubernetes 외부의 이름을 가리키는 Service를 생성한다. Kubernetes 내부와 외부를 매핑시켜줄 때 사용한다. (알다시피, &lt;a href=&#34;https://github.com/kubernetes-incubator/external-dns&#34; target=&#34;_blank&#34;&gt;external-dns&lt;/a&gt;를 애드온을 연동하게 되면 AWS, GCP 등의 DNS와 매핑된다.)&lt;/p&gt;

&lt;h2 id=&#34;none&#34;&gt;None&lt;/h2&gt;

&lt;p&gt;Service 타입이 None인 경우는 named label query가 되는 기저 레벨이라고 볼 수 있다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;None&lt;/code&gt; 타입으로 선언한 Service의 내용은 다음과 같이 확인할 수 있다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;$ kubectl expose deployment kuard --type&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;None --target-port&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;8080&lt;/span&gt; --port&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;80&lt;/span&gt; -o yaml --dry-run&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;type&lt;/code&gt;의 값이 &lt;code&gt;None&lt;/code&gt;이고 이름이 &lt;code&gt;kuard&lt;/code&gt;인 Service이다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;apiVersion&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;v1&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;kind&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;Service&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;metadata&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;creationTimestamp&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;null&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;labels&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;run&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;kuard&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;kuard&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;spec&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;ports&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;port&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;80&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;protocol&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;TCP&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;targetPort&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;8080&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;selector&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;run&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;kuard&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;type&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;None&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;status&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;loadBalancer&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;{}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;그리고 Kubernetes 상에서 &lt;code&gt;kuard&lt;/code&gt;라는 &lt;code&gt;Service&lt;/code&gt;는 다음과 같은 &lt;code&gt;Endpoints&lt;/code&gt;로 디코딩된다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;c&#34;&gt;# $ kubectl get endpoints kuard&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;apiVersion&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;v1&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;kind&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;Endpoints&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;metadata&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;creationTimestamp&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;ld&#34;&gt;2019-01-18T07:57:55Z&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;labels&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;run&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;kuard&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;kuard&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;namespace&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;default&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;resourceVersion&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;10106&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;selfLink&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;/api/v1/namespaces/default/endpoints/kuard&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;uid&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;c395caf3-1af6-&lt;span class=&#34;m&#34;&gt;11e9&lt;/span&gt;-befa-0209e53cf850&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;subsets&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;addresses&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;ip&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;192.168&lt;/span&gt;.&lt;span class=&#34;m&#34;&gt;3.136&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;nodeName&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;ip-&lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;-&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;-&lt;span class=&#34;m&#34;&gt;8&lt;/span&gt;-&lt;span class=&#34;m&#34;&gt;254.&lt;/span&gt;ap-northeast-&lt;span class=&#34;m&#34;&gt;2.&lt;/span&gt;compute.internal&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;targetRef&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;kind&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;Pod&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;kuard-dbdd7955d-tfgdl&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;namespace&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;default&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;resourceVersion&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;1935&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;uid&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;411010f3-1ae9-&lt;span class=&#34;m&#34;&gt;11e9&lt;/span&gt;-befa-0209e53cf850&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;ip&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;192.168&lt;/span&gt;.&lt;span class=&#34;m&#34;&gt;3.137&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;nodeName&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;ip-&lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;-&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;-&lt;span class=&#34;m&#34;&gt;8&lt;/span&gt;-&lt;span class=&#34;m&#34;&gt;254.&lt;/span&gt;ap-northeast-&lt;span class=&#34;m&#34;&gt;2.&lt;/span&gt;compute.internal&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;targetRef&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;kind&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;Pod&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;kuard-dbdd7955d-ms8hb&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;namespace&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;default&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;resourceVersion&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;1938&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;uid&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;4108db60-1ae9-&lt;span class=&#34;m&#34;&gt;11e9&lt;/span&gt;-befa-0209e53cf850&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;ip&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;192.168&lt;/span&gt;.&lt;span class=&#34;m&#34;&gt;3.138&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;nodeName&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;ip-&lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;-&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;-&lt;span class=&#34;m&#34;&gt;8&lt;/span&gt;-&lt;span class=&#34;m&#34;&gt;254.&lt;/span&gt;ap-northeast-&lt;span class=&#34;m&#34;&gt;2.&lt;/span&gt;compute.internal&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;targetRef&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;kind&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;Pod&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;kuard-dbdd7955d-qfjbk&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;namespace&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;default&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;resourceVersion&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;1949&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;uid&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;410b40b7-1ae9-&lt;span class=&#34;m&#34;&gt;11e9&lt;/span&gt;-befa-0209e53cf850&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;ip&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;192.168&lt;/span&gt;.&lt;span class=&#34;m&#34;&gt;3.139&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;nodeName&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;ip-&lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;-&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;-&lt;span class=&#34;m&#34;&gt;8&lt;/span&gt;-&lt;span class=&#34;m&#34;&gt;254.&lt;/span&gt;ap-northeast-&lt;span class=&#34;m&#34;&gt;2.&lt;/span&gt;compute.internal&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;targetRef&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;kind&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;Pod&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;kuard-dbdd7955d-v8lj2&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;namespace&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;default&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;resourceVersion&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;1965&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;uid&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;41102fed-1ae9-&lt;span class=&#34;m&#34;&gt;11e9&lt;/span&gt;-befa-0209e53cf850&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;ip&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;192.168&lt;/span&gt;.&lt;span class=&#34;m&#34;&gt;3.140&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;nodeName&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;ip-&lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;-&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;-&lt;span class=&#34;m&#34;&gt;8&lt;/span&gt;-&lt;span class=&#34;m&#34;&gt;254.&lt;/span&gt;ap-northeast-&lt;span class=&#34;m&#34;&gt;2.&lt;/span&gt;compute.internal&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;targetRef&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;kind&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;Pod&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;kuard-dbdd7955d-4kdbr&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;namespace&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;default&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;resourceVersion&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;1982&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;uid&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;411761d7-1ae9-&lt;span class=&#34;m&#34;&gt;11e9&lt;/span&gt;-befa-0209e53cf850&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;ip&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;192.168&lt;/span&gt;.&lt;span class=&#34;m&#34;&gt;49.10&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;nodeName&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;ip-&lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;-&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;-&lt;span class=&#34;m&#34;&gt;8&lt;/span&gt;-&lt;span class=&#34;m&#34;&gt;176.&lt;/span&gt;ap-northeast-&lt;span class=&#34;m&#34;&gt;2.&lt;/span&gt;compute.internal&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;targetRef&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;kind&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;Pod&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;kuard-dbdd7955d-hsl87&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;namespace&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;default&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;resourceVersion&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;1985&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;uid&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;41177ccd-1ae9-&lt;span class=&#34;m&#34;&gt;11e9&lt;/span&gt;-befa-0209e53cf850&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;ip&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;192.168&lt;/span&gt;.&lt;span class=&#34;m&#34;&gt;49.6&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;nodeName&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;ip-&lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;-&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;-&lt;span class=&#34;m&#34;&gt;8&lt;/span&gt;-&lt;span class=&#34;m&#34;&gt;176.&lt;/span&gt;ap-northeast-&lt;span class=&#34;m&#34;&gt;2.&lt;/span&gt;compute.internal&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;targetRef&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;kind&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;Pod&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;kuard-dbdd7955d-5r757&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;namespace&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;default&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;resourceVersion&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;1952&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;uid&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;41102166&lt;/span&gt;-1ae9-&lt;span class=&#34;m&#34;&gt;11e9&lt;/span&gt;-befa-0209e53cf850&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;ip&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;192.168&lt;/span&gt;.&lt;span class=&#34;m&#34;&gt;49.7&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;nodeName&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;ip-&lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;-&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;-&lt;span class=&#34;m&#34;&gt;8&lt;/span&gt;-&lt;span class=&#34;m&#34;&gt;176.&lt;/span&gt;ap-northeast-&lt;span class=&#34;m&#34;&gt;2.&lt;/span&gt;compute.internal&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;targetRef&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;kind&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;Pod&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;kuard-dbdd7955d-wzcf4&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;namespace&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;default&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;resourceVersion&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;1962&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;uid&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;41178be2-1ae9-&lt;span class=&#34;m&#34;&gt;11e9&lt;/span&gt;-befa-0209e53cf850&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;ip&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;192.168&lt;/span&gt;.&lt;span class=&#34;m&#34;&gt;49.8&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;nodeName&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;ip-&lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;-&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;-&lt;span class=&#34;m&#34;&gt;8&lt;/span&gt;-&lt;span class=&#34;m&#34;&gt;176.&lt;/span&gt;ap-northeast-&lt;span class=&#34;m&#34;&gt;2.&lt;/span&gt;compute.internal&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;targetRef&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;kind&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;Pod&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;kuard-dbdd7955d-k8x7l&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;namespace&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;default&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;resourceVersion&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;1969&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;uid&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;410b5dad-1ae9-&lt;span class=&#34;m&#34;&gt;11e9&lt;/span&gt;-befa-0209e53cf850&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;ip&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;192.168&lt;/span&gt;.&lt;span class=&#34;m&#34;&gt;49.9&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;nodeName&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;ip-&lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;-&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;-&lt;span class=&#34;m&#34;&gt;8&lt;/span&gt;-&lt;span class=&#34;m&#34;&gt;176.&lt;/span&gt;ap-northeast-&lt;span class=&#34;m&#34;&gt;2.&lt;/span&gt;compute.internal&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;targetRef&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;kind&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;Pod&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;kuard-dbdd7955d-dhts5&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;namespace&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;default&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;resourceVersion&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;1977&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;uid&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;410ff0b5-1ae9-&lt;span class=&#34;m&#34;&gt;11e9&lt;/span&gt;-befa-0209e53cf850&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;ports&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;port&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;8080&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;protocol&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;TCP&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;보다시피 &lt;code&gt;kuard&lt;/code&gt; 엔드포인트의 프로토콜은 &lt;code&gt;TCP&lt;/code&gt;, 포트는 &lt;code&gt;8080&lt;/code&gt;,그리고 &lt;code&gt;kuard&lt;/code&gt; Pod에 대한 여러 IP 주소의 집합으로 구성되어 있다. Pop의 헬스체크로 인해 Pod이 죽었다고 판단될 경우, 엔드포인트에서는 보이지 않게 된다. 즉, 일종의 Sanity Filtering이 동작하는 것으로, 서비스 디스커버리가 동작하는 기본적인 메카니즘이라 할 수 있다.&lt;/p&gt;

&lt;h2 id=&#34;clusterip&#34;&gt;ClusterIP&lt;/h2&gt;

&lt;p&gt;현재 &lt;code&gt;kuard&lt;/code&gt; Service를 보면, &lt;code&gt;clusterIP&lt;/code&gt;는 &lt;code&gt;10.97.169.67&lt;/code&gt;로 잡혀 있다. 이는 가상 IP이고, 서비스의 라이프사이클 동안 변하지 않는다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;c&#34;&gt;# kubectl get svc kuard -o yaml&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;apiVersion&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;v1&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;kind&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;Service&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;metadata&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;creationTimestamp&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;ld&#34;&gt;2019-01-18T13:22:28Z&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;labels&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;run&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;kuard&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;kuard&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;namespace&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;default&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;resourceVersion&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;7842&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;selfLink&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;/api/v1/namespaces/default/services/kuard&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;uid&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;1a7df4fb-1b24-&lt;span class=&#34;m&#34;&gt;11e9&lt;/span&gt;-a27c-02b8e4b61ab8&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;spec&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;clusterIP&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;10.97&lt;/span&gt;.&lt;span class=&#34;m&#34;&gt;169.67&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;externalTrafficPolicy&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;Cluster&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;ports&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;nodePort&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;31986&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;port&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;80&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;protocol&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;TCP&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;targetPort&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;8080&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;selector&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;run&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;kuard&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;sessionAffinity&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;None&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;type&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;LoadBalancer&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;status&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;loadBalancer&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;ingress&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;hostname&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;a1a7df4fb1b2411e9a27c02b8e4b61ab-&lt;span class=&#34;m&#34;&gt;1083762423.&lt;/span&gt;ap-northeast-&lt;span class=&#34;m&#34;&gt;2.&lt;/span&gt;elb.amazonaws.com&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;좀 더 자세히 알아보기 위해, 클러스터 마스터 내부에 접속한다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;$ &lt;span class=&#34;nv&#34;&gt;SSH_KEY&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;~/.ssh/id_rsa&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; ssh -i &lt;span class=&#34;nv&#34;&gt;$SSH_KEY&lt;/span&gt; -A -L8080:localhost:8080 -o &lt;span class=&#34;nv&#34;&gt;ProxyCommand&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;ssh -i \&amp;#34;&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;SSH_KEY&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;\&amp;#34; ubuntu@13.125.51.126 nc %h %p&amp;#34;&lt;/span&gt; ubuntu@10.0.18.181

&lt;span class=&#34;c1&#34;&gt;###############################################################
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;#       _   _            _   _         _    ___               #
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;#      | | | | ___ _ __ | |_(_) ___   | | _( _ ) ___          #
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;#      | |_| |/ _ \ &amp;#39;_ \| __| |/ _ \  | |/ / _ \/ __|         #
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;#      |  _  |  __/ |_) | |_| | (_) | |   &amp;lt; (_) \__ \         #
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;#      |_| |_|\___| .__/ \__|_|\___/  |_|\_\___/|___/         #
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;#                 |_|                                         #
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;#        ___        _      _     ____  _             _        #
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;#       / _ \ _   _(_) ___| | __/ ___|| |_ __ _ _ __| |_      #
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;#      | | | | | | | |/ __| |/ /\___ \| __/ _` | &amp;#39;__| __|     #
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;#      | |_| | |_| | | (__|   &amp;lt;  ___) | || (_| | |  | |_      #
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;#       \__\_\\__,_|_|\___|_|\_\|____/ \__\__,_|_|   \__|     #
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;#                                                             #
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;###############################################################
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;Welcome to Ubuntu &lt;span class=&#34;m&#34;&gt;16&lt;/span&gt;.04.5 LTS &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;GNU/Linux &lt;span class=&#34;m&#34;&gt;4&lt;/span&gt;.4.0-1072-aws x86_64&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage

  Get cloud support with Ubuntu Advantage Cloud Guest:
    http://www.ubuntu.com/business/services/cloud
This system has been minimized by removing packages and content that are
not required on a system that users &lt;span class=&#34;k&#34;&gt;do&lt;/span&gt; not log into.

To restore this content, you can run the &lt;span class=&#34;s1&#34;&gt;&amp;#39;unminimize&amp;#39;&lt;/span&gt; command.

&lt;span class=&#34;m&#34;&gt;38&lt;/span&gt; packages can be updated.
&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt; updates are security updates.

New release &lt;span class=&#34;s1&#34;&gt;&amp;#39;18.04.1 LTS&amp;#39;&lt;/span&gt; available.
Run &lt;span class=&#34;s1&#34;&gt;&amp;#39;do-release-upgrade&amp;#39;&lt;/span&gt; to upgrade to it.

*** System restart required ***
ubuntu@ip-10-0-18-181:~$&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위와 같이 마스터 노드에 진입해서 &lt;code&gt;kube-system&lt;/code&gt; 네임스페이스의 Pod을 조회하면, 각 노드마다 &lt;code&gt;kube-proxy&lt;/code&gt;라는 DaemonSet이 실행 중인 것을 알 수 있다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;ubuntu@ip-10-0-18-181:~$ kubectl get pod --namespace&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;kube-system
NAME                                                                     READY     STATUS    RESTARTS   AGE
calico-etcd-twh4d                                                        &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1       Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          2h
calico-kube-controllers-b798bfc9c-qzdzn                                  &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1       Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          2h
calico-node-b7w5v                                                        &lt;span class=&#34;m&#34;&gt;2&lt;/span&gt;/2       Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          2h
calico-node-bxhxx                                                        &lt;span class=&#34;m&#34;&gt;2&lt;/span&gt;/2       Running   &lt;span class=&#34;m&#34;&gt;2&lt;/span&gt;          1h
calico-node-smrvg                                                        &lt;span class=&#34;m&#34;&gt;2&lt;/span&gt;/2       Running   &lt;span class=&#34;m&#34;&gt;2&lt;/span&gt;          1h
coredns-78fcdf6894-fpt2m                                                 &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1       Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          2h
coredns-78fcdf6894-m2zsn                                                 &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1       Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          2h
etcd-ip-10-0-18-181.ap-northeast-2.compute.internal                      &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1       Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          1h
kube-apiserver-ip-10-0-18-181.ap-northeast-2.compute.internal            &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1       Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          1h
kube-controller-manager-ip-10-0-18-181.ap-northeast-2.compute.internal   &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1       Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          1h
kube-proxy-f9q76                                                         &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1       Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          1h
kube-proxy-m5sqz                                                         &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1       Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          1h
kube-proxy-pnxwv                                                         &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1       Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          1h
kube-scheduler-ip-10-0-18-181.ap-northeast-2.compute.internal            &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1       Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          1h
kubernetes-dashboard-84fff45879-cmmtp                                    &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1       Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          2h&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;kube-proxy&lt;/code&gt;의 메커니즘은 다음과 같다. &lt;code&gt;kube-proxy&lt;/code&gt;는 ClusterIP를 지닌 모든 &lt;code&gt;Service&lt;/code&gt;를 모니터링한다. 그리고 연관된 &lt;code&gt;EndPoint&lt;/code&gt; 변경을 따라 iptable을 구성하고, 해당 iptable을 사용해서 ClusterIP를 통하는 모든 트래픽이 해당하는 엔드포인트에 랜덤하게 로드 밸런싱되게 한다.&lt;/p&gt;

&lt;p&gt;iptable을 살펴보자. calico가 관리하는 iptable은 &lt;code&gt;cali&lt;/code&gt;라고 주석이 달려 있다.&lt;/p&gt;

&lt;p&gt;&lt;details&gt;
&lt;summary&gt;&lt;code&gt;iptables -L&lt;/code&gt;&lt;/summary&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;$ iptables -L
Chain INPUT &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;policy ACCEPT&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
target     prot opt &lt;span class=&#34;nb&#34;&gt;source&lt;/span&gt;               destination         
cali-INPUT  all  --  anywhere             anywhere             /* cali:Cz_u1IQiXIMmKD4c */
KUBE-EXTERNAL-SERVICES  all  --  anywhere             anywhere             ctstate NEW /* kubernetes externally-visible service portals */
KUBE-FIREWALL  all  --  anywhere             anywhere            

Chain FORWARD &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;policy DROP&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
target     prot opt &lt;span class=&#34;nb&#34;&gt;source&lt;/span&gt;               destination         
cali-FORWARD  all  --  anywhere             anywhere             /* cali:wUHhoiAYhphO9Mso */
KUBE-FORWARD  all  --  anywhere             anywhere             /* kubernetes forwarding rules */
DOCKER-ISOLATION  all  --  anywhere             anywhere            
DOCKER     all  --  anywhere             anywhere            
ACCEPT     all  --  anywhere             anywhere             ctstate RELATED,ESTABLISHED
ACCEPT     all  --  anywhere             anywhere            
ACCEPT     all  --  anywhere             anywhere            

Chain OUTPUT &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;policy ACCEPT&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
target     prot opt &lt;span class=&#34;nb&#34;&gt;source&lt;/span&gt;               destination         
cali-OUTPUT  all  --  anywhere             anywhere             /* cali:tVnHkvAo15HuiPy0 */
KUBE-SERVICES  all  --  anywhere             anywhere             ctstate NEW /* kubernetes service portals */
KUBE-FIREWALL  all  --  anywhere             anywhere            

Chain DOCKER &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; references&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
target     prot opt &lt;span class=&#34;nb&#34;&gt;source&lt;/span&gt;               destination         

Chain DOCKER-ISOLATION &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; references&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
target     prot opt &lt;span class=&#34;nb&#34;&gt;source&lt;/span&gt;               destination         
RETURN     all  --  anywhere             anywhere            

Chain KUBE-EXTERNAL-SERVICES &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; references&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
target     prot opt &lt;span class=&#34;nb&#34;&gt;source&lt;/span&gt;               destination         

Chain KUBE-FIREWALL &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;2&lt;/span&gt; references&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
target     prot opt &lt;span class=&#34;nb&#34;&gt;source&lt;/span&gt;               destination         
DROP       all  --  anywhere             anywhere             /* kubernetes firewall &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; dropping marked packets */ mark match 0x8000/0x8000

Chain KUBE-FORWARD &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; references&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
target     prot opt &lt;span class=&#34;nb&#34;&gt;source&lt;/span&gt;               destination         
ACCEPT     all  --  anywhere             anywhere             /* kubernetes forwarding rules */ mark match 0x4000/0x4000
ACCEPT     all  --  ip-192-168-0-0.ap-northeast-2.compute.internal/16  anywhere             /* kubernetes forwarding conntrack pod &lt;span class=&#34;nb&#34;&gt;source&lt;/span&gt; rule */ ctstate RELATED,ESTABLISHED
ACCEPT     all  --  anywhere             ip-192-168-0-0.ap-northeast-2.compute.internal/16  /* kubernetes forwarding conntrack pod destination rule */ ctstate RELATED,ESTABLISHED

Chain KUBE-SERVICES &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; references&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
target     prot opt &lt;span class=&#34;nb&#34;&gt;source&lt;/span&gt;               destination         

Chain cali-FORWARD &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; references&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
target     prot opt &lt;span class=&#34;nb&#34;&gt;source&lt;/span&gt;               destination         
MARK       all  --  anywhere             anywhere             /* cali:vjrMJCRpqwy5oRoX */ MARK and 0xfff1ffff
cali-from-hep-forward  all  --  anywhere             anywhere             /* cali:A_sPAO0mcxbT9mOV */ mark match 0x0/0x10000
cali-from-wl-dispatch  all  --  anywhere             anywhere             /* cali:8ZoYfO5HKXWbB3pk */
cali-to-wl-dispatch  all  --  anywhere             anywhere             /* cali:jdEuaPBe14V2hutn */
cali-to-hep-forward  all  --  anywhere             anywhere             /* cali:12bc6HljsMKsmfr- */
ACCEPT     all  --  anywhere             anywhere             /* cali:MH9kMp5aNICL-Olv */ /* Policy explicitly accepted packet. */ mark match 0x10000/0x10000

Chain cali-INPUT &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; references&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
target     prot opt &lt;span class=&#34;nb&#34;&gt;source&lt;/span&gt;               destination         
ACCEPT     all  --  anywhere             anywhere             /* cali:msRIDfJRWnYwzW4g */ mark match 0x10000/0x10000
ACCEPT     ipencap--  anywhere             anywhere             /* cali:1IRlRis1-pHsGnX5 */ /* Allow IPIP packets from Calico hosts */ match-set cali40all-hosts-net src ADDRTYPE match dst-type LOCAL
DROP       ipencap--  anywhere             anywhere             /* cali:jX63A0VGotRJWnUL */ /* Drop IPIP packets from non-Calico hosts */
cali-wl-to-host  all  --  anywhere             anywhere            &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;goto&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;  /* cali:Dit8xicL3zTIYYlp */
MARK       all  --  anywhere             anywhere             /* cali:LCGWUV2ju3tJmfW0 */ MARK and 0xfff0ffff
cali-from-host-endpoint  all  --  anywhere             anywhere             /* cali:x-gEznubq2huN2Fo */
ACCEPT     all  --  anywhere             anywhere             /* cali:m27NaAhoKHLs1plD */ /* Host endpoint policy accepted packet. */ mark match 0x10000/0x10000

Chain cali-OUTPUT &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; references&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
target     prot opt &lt;span class=&#34;nb&#34;&gt;source&lt;/span&gt;               destination         
ACCEPT     all  --  anywhere             anywhere             /* cali:Mq1_rAdXXH3YkrzW */ mark match 0x10000/0x10000
RETURN     all  --  anywhere             anywhere             /* cali:69FkRTJDvD5Vu6Vl */
ACCEPT     ipencap--  anywhere             anywhere             /* cali:AnEsmO6bDZbQntWW */ /* Allow IPIP packets to other Calico hosts */ match-set cali40all-hosts-net dst ADDRTYPE match src-type LOCAL
MARK       all  --  anywhere             anywhere             /* cali:9e9Uf3GU5tX--Lxy */ MARK and 0xfff0ffff
cali-to-host-endpoint  all  --  anywhere             anywhere             /* cali:OB2pzPrvQn6PC89t */
ACCEPT     all  --  anywhere             anywhere             /* cali:tvSSMDBWrme3CUqM */ /* Host endpoint policy accepted packet. */ mark match 0x10000/0x10000

Chain cali-failsafe-in &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt; references&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
target     prot opt &lt;span class=&#34;nb&#34;&gt;source&lt;/span&gt;               destination         
ACCEPT     tcp  --  anywhere             anywhere             /* cali:wWFQM43tJU7wwnFZ */ multiport dports ssh
ACCEPT     udp  --  anywhere             anywhere             /* cali:LwNV--R8MjeUYacw */ multiport dports bootpc
ACCEPT     tcp  --  anywhere             anywhere             /* cali:QOO5NUOqOSS1_Iw0 */ multiport dports bgp
ACCEPT     tcp  --  anywhere             anywhere             /* cali:cwZWoBSwVeIAZmVN */ multiport dports &lt;span class=&#34;m&#34;&gt;2379&lt;/span&gt;
ACCEPT     tcp  --  anywhere             anywhere             /* cali:7FbNXT91kugE_upR */ multiport dports &lt;span class=&#34;m&#34;&gt;2380&lt;/span&gt;
ACCEPT     tcp  --  anywhere             anywhere             /* cali:ywE9WYUBEpve70WT */ multiport dports &lt;span class=&#34;m&#34;&gt;6666&lt;/span&gt;
ACCEPT     tcp  --  anywhere             anywhere             /* cali:l-WQSVBf_lygPR0J */ multiport dports ircd

Chain cali-failsafe-out &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt; references&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
target     prot opt &lt;span class=&#34;nb&#34;&gt;source&lt;/span&gt;               destination         
ACCEPT     udp  --  anywhere             anywhere             /* cali:82hjfji-wChFhAqL */ multiport dports domain
ACCEPT     udp  --  anywhere             anywhere             /* cali:TNM3RfEjbNr72hgH */ multiport dports bootps
ACCEPT     tcp  --  anywhere             anywhere             /* cali:ycxKitIl4u3dK0HR */ multiport dports bgp
ACCEPT     tcp  --  anywhere             anywhere             /* cali:hxjEWyxdkXXkdvut */ multiport dports &lt;span class=&#34;m&#34;&gt;2379&lt;/span&gt;
ACCEPT     tcp  --  anywhere             anywhere             /* cali:cA_GLtruuvG88KiO */ multiport dports &lt;span class=&#34;m&#34;&gt;2380&lt;/span&gt;
ACCEPT     tcp  --  anywhere             anywhere             /* cali:Sb1hkLYFMrKS6r01 */ multiport dports &lt;span class=&#34;m&#34;&gt;6666&lt;/span&gt;
ACCEPT     tcp  --  anywhere             anywhere             /* cali:UwLSebGONJUG4yG- */ multiport dports ircd

Chain cali-from-hep-forward &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; references&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
target     prot opt &lt;span class=&#34;nb&#34;&gt;source&lt;/span&gt;               destination         

Chain cali-from-host-endpoint &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; references&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
target     prot opt &lt;span class=&#34;nb&#34;&gt;source&lt;/span&gt;               destination         

Chain cali-from-wl-dispatch &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;2&lt;/span&gt; references&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
target     prot opt &lt;span class=&#34;nb&#34;&gt;source&lt;/span&gt;               destination         
cali-fw-cali82a8bb394bd  all  --  anywhere             anywhere            &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;goto&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;  /* cali:iec6Icru0K37idwj */
cali-fw-calie930c422661  all  --  anywhere             anywhere            &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;goto&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;  /* cali:0jlZAcGo54oqY8p3 */
cali-fw-calif3533dd3229  all  --  anywhere             anywhere            &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;goto&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;  /* cali:PUv0YBkan3WHQZix */
DROP       all  --  anywhere             anywhere             /* cali:-ojO7WWmz0kbfddZ */ /* Unknown interface */

Chain cali-fw-cali82a8bb394bd &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; references&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
target     prot opt &lt;span class=&#34;nb&#34;&gt;source&lt;/span&gt;               destination         
ACCEPT     all  --  anywhere             anywhere             /* cali:rEFkHFBfSpqnudiF */ ctstate RELATED,ESTABLISHED
DROP       all  --  anywhere             anywhere             /* cali:cMimONNlTtpLzwFn */ ctstate INVALID
MARK       all  --  anywhere             anywhere             /* cali:ScMWqdtSYj6jUbqB */ MARK and 0xfffeffff
cali-pro-kns.kube-system  all  --  anywhere             anywhere             /* cali:fcyxR3eYmhq2xDwn */
RETURN     all  --  anywhere             anywhere             /* cali:XkAXtVVx5l-JkBR_ */ /* Return &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; profile accepted */ mark match 0x10000/0x10000
cali-pro-_u2Tn2rSoAPffvE7JO6  all  --  anywhere             anywhere             /* cali:gHae-WfoqhPTeoWZ */
RETURN     all  --  anywhere             anywhere             /* cali:kFr4XE5funBdyddk */ /* Return &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; profile accepted */ mark match 0x10000/0x10000
DROP       all  --  anywhere             anywhere             /* cali:XGKyCDMWXBQivuzk */ /* Drop &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; no profiles matched */

Chain cali-fw-calie930c422661 &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; references&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
target     prot opt &lt;span class=&#34;nb&#34;&gt;source&lt;/span&gt;               destination         
ACCEPT     all  --  anywhere             anywhere             /* cali:9GO__AFzeIKKpkC3 */ ctstate RELATED,ESTABLISHED
DROP       all  --  anywhere             anywhere             /* cali:PJ-pgay_zq2Qslnb */ ctstate INVALID
MARK       all  --  anywhere             anywhere             /* cali:ogTm-kn-NPg6zYsd */ MARK and 0xfffeffff
cali-pro-kns.kube-system  all  --  anywhere             anywhere             /* cali:MR5-EG6LT-4FQVHs */
RETURN     all  --  anywhere             anywhere             /* cali:eSbE3QKgYjrONve7 */ /* Return &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; profile accepted */ mark match 0x10000/0x10000
cali-pro-_be-1GnaHI4zA9ZiNqb  all  --  anywhere             anywhere             /* cali:M1HNVqvcGyE94Nvw */
RETURN     all  --  anywhere             anywhere             /* cali:jGOTAMwTGCI4OWPX */ /* Return &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; profile accepted */ mark match 0x10000/0x10000
DROP       all  --  anywhere             anywhere             /* cali:LOtk7YMg5IrVV3BH */ /* Drop &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; no profiles matched */

Chain cali-fw-calif3533dd3229 &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; references&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
target     prot opt &lt;span class=&#34;nb&#34;&gt;source&lt;/span&gt;               destination         
ACCEPT     all  --  anywhere             anywhere             /* cali:YH57UrJxw-tOmJKr */ ctstate RELATED,ESTABLISHED
DROP       all  --  anywhere             anywhere             /* cali:IE-8xOX07E7Owz-K */ ctstate INVALID
MARK       all  --  anywhere             anywhere             /* cali:jVx41uBbKJHbN4OU */ MARK and 0xfffeffff
cali-pro-kns.kube-system  all  --  anywhere             anywhere             /* cali:UYWxLdAe9bsLem-b */
RETURN     all  --  anywhere             anywhere             /* cali:LtqfyPifkDfH-orx */ /* Return &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; profile accepted */ mark match 0x10000/0x10000
cali-pro-_u2Tn2rSoAPffvE7JO6  all  --  anywhere             anywhere             /* cali:mr7YiskIpUpprX35 */
RETURN     all  --  anywhere             anywhere             /* cali:O0-SshHUwmCNJ8Cx */ /* Return &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; profile accepted */ mark match 0x10000/0x10000
DROP       all  --  anywhere             anywhere             /* cali:_NyR6RmRKEMmc0Sr */ /* Drop &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; no profiles matched */

Chain cali-pi-_vOsBt0qc8GM-JXGkiMn &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; references&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
target     prot opt &lt;span class=&#34;nb&#34;&gt;source&lt;/span&gt;               destination         

Chain cali-po-_vOsBt0qc8GM-JXGkiMn &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt; references&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
target     prot opt &lt;span class=&#34;nb&#34;&gt;source&lt;/span&gt;               destination         

Chain cali-pri-_be-1GnaHI4zA9ZiNqb &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; references&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
target     prot opt &lt;span class=&#34;nb&#34;&gt;source&lt;/span&gt;               destination         
DROP       all  --  anywhere             anywhere             /* cali:YrXwxizPmMHbIOcu */

Chain cali-pri-_u2Tn2rSoAPffvE7JO6 &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;2&lt;/span&gt; references&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
target     prot opt &lt;span class=&#34;nb&#34;&gt;source&lt;/span&gt;               destination         
DROP       all  --  anywhere             anywhere             /* cali:3WowQ2oY88d3FWSg */

Chain cali-pri-kns.kube-system &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;3&lt;/span&gt; references&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
target     prot opt &lt;span class=&#34;nb&#34;&gt;source&lt;/span&gt;               destination         
MARK       all  --  anywhere             anywhere             /* cali:zoH5gU6U55FKZxEo */ MARK or 0x10000
RETURN     all  --  anywhere             anywhere             /* cali:bcGRIJcyOS9dgBiB */ mark match 0x10000/0x10000

Chain cali-pro-_be-1GnaHI4zA9ZiNqb &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; references&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
target     prot opt &lt;span class=&#34;nb&#34;&gt;source&lt;/span&gt;               destination         
DROP       all  --  anywhere             anywhere             /* cali:KGqIRWRYnPNtm88p */

Chain cali-pro-_u2Tn2rSoAPffvE7JO6 &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;2&lt;/span&gt; references&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
target     prot opt &lt;span class=&#34;nb&#34;&gt;source&lt;/span&gt;               destination         
DROP       all  --  anywhere             anywhere             /* cali:7uaZJ8EAWrfkGzjv */

Chain cali-pro-kns.kube-system &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;3&lt;/span&gt; references&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
target     prot opt &lt;span class=&#34;nb&#34;&gt;source&lt;/span&gt;               destination         
MARK       all  --  anywhere             anywhere             /* cali:-50oJuMfLVO3LkBk */ MARK or 0x10000
RETURN     all  --  anywhere             anywhere             /* cali:ztVPKv1UYejNzm1g */ mark match 0x10000/0x10000

Chain cali-to-hep-forward &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; references&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
target     prot opt &lt;span class=&#34;nb&#34;&gt;source&lt;/span&gt;               destination         

Chain cali-to-host-endpoint &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; references&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
target     prot opt &lt;span class=&#34;nb&#34;&gt;source&lt;/span&gt;               destination         

Chain cali-to-wl-dispatch &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; references&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
target     prot opt &lt;span class=&#34;nb&#34;&gt;source&lt;/span&gt;               destination         
cali-tw-cali82a8bb394bd  all  --  anywhere             anywhere            &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;goto&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;  /* cali:DH1bLyxskFJok8LY */
cali-tw-calie930c422661  all  --  anywhere             anywhere            &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;goto&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;  /* cali:v4KHY3mc1Ym9DiZc */
cali-tw-calif3533dd3229  all  --  anywhere             anywhere            &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;goto&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;  /* cali:Z6Ww2zhhGbh19h6K */
DROP       all  --  anywhere             anywhere             /* cali:EuaJOevUVXhWjfo- */ /* Unknown interface */

Chain cali-tw-cali82a8bb394bd &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; references&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
target     prot opt &lt;span class=&#34;nb&#34;&gt;source&lt;/span&gt;               destination         
ACCEPT     all  --  anywhere             anywhere             /* cali:vrhTi3Nw7kE6Ef5t */ ctstate RELATED,ESTABLISHED
DROP       all  --  anywhere             anywhere             /* cali:jG_UsyATyr-kJ6AQ */ ctstate INVALID
MARK       all  --  anywhere             anywhere             /* cali:FerW_RRGXaa36-vj */ MARK and 0xfffeffff
cali-pri-kns.kube-system  all  --  anywhere             anywhere             /* cali:YKrxQCxGe4eaqLap */
RETURN     all  --  anywhere             anywhere             /* cali:wfbQVtfm0N1ND8R0 */ /* Return &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; profile accepted */ mark match 0x10000/0x10000
cali-pri-_u2Tn2rSoAPffvE7JO6  all  --  anywhere             anywhere             /* cali:9PkEFe9LRMPxCP4K */
RETURN     all  --  anywhere             anywhere             /* cali:i-PGBuetIpieXaJ8 */ /* Return &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; profile accepted */ mark match 0x10000/0x10000
DROP       all  --  anywhere             anywhere             /* cali:43EsNrcTxe_Gut6O */ /* Drop &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; no profiles matched */

Chain cali-tw-calie930c422661 &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; references&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
target     prot opt &lt;span class=&#34;nb&#34;&gt;source&lt;/span&gt;               destination         
ACCEPT     all  --  anywhere             anywhere             /* cali:tkJMJT3XRZeM-2Gg */ ctstate RELATED,ESTABLISHED
DROP       all  --  anywhere             anywhere             /* cali:hBXm_jQ4g-vOXrvD */ ctstate INVALID
MARK       all  --  anywhere             anywhere             /* cali:wQ2uqXWFYbTHdTqX */ MARK and 0xfffeffff
MARK       all  --  anywhere             anywhere             /* cali:YlnF0m9DiQACjY09 */ /* Start of policies */ MARK and 0xfffdffff
cali-pi-_vOsBt0qc8GM-JXGkiMn  all  --  anywhere             anywhere             /* cali:0LpzqkQs2SGOS_wo */ mark match 0x0/0x20000
RETURN     all  --  anywhere             anywhere             /* cali:xr1W-9np6ixXUzOe */ /* Return &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; policy accepted */ mark match 0x10000/0x10000
DROP       all  --  anywhere             anywhere             /* cali:DyuQ1f19JvhahmR7 */ /* Drop &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; no policies passed packet */ mark match 0x0/0x20000
cali-pri-kns.kube-system  all  --  anywhere             anywhere             /* cali:566-vQl_FY43wHvx */
RETURN     all  --  anywhere             anywhere             /* cali:XeFMO_8xxORT_IXy */ /* Return &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; profile accepted */ mark match 0x10000/0x10000
cali-pri-_be-1GnaHI4zA9ZiNqb  all  --  anywhere             anywhere             /* cali:83QDy1HEQkh-KMXt */
RETURN     all  --  anywhere             anywhere             /* cali:XXlZXzitmj5-clZc */ /* Return &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; profile accepted */ mark match 0x10000/0x10000
DROP       all  --  anywhere             anywhere             /* cali:ZMgyCtJ9dKOGThG0 */ /* Drop &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; no profiles matched */

Chain cali-tw-calif3533dd3229 &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; references&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
target     prot opt &lt;span class=&#34;nb&#34;&gt;source&lt;/span&gt;               destination         
ACCEPT     all  --  anywhere             anywhere             /* cali:Jp5FpTzoIYgEzVhI */ ctstate RELATED,ESTABLISHED
DROP       all  --  anywhere             anywhere             /* cali:OS4FQ7GDf9nqPGuo */ ctstate INVALID
MARK       all  --  anywhere             anywhere             /* cali:U8S5KlI4JDCzJT2L */ MARK and 0xfffeffff
cali-pri-kns.kube-system  all  --  anywhere             anywhere             /* cali:N7mCGC3NJKTvWJ2_ */
RETURN     all  --  anywhere             anywhere             /* cali:cags8BdhUzZKkCtV */ /* Return &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; profile accepted */ mark match 0x10000/0x10000
cali-pri-_u2Tn2rSoAPffvE7JO6  all  --  anywhere             anywhere             /* cali:LNHtw-GrC3bM44iL */
RETURN     all  --  anywhere             anywhere             /* cali:EhyfxW1SBfAAy2Ec */ /* Return &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; profile accepted */ mark match 0x10000/0x10000
DROP       all  --  anywhere             anywhere             /* cali:tV1eFXrUQA4xEfFW */ /* Drop &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; no profiles matched */

Chain cali-wl-to-host &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; references&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
target     prot opt &lt;span class=&#34;nb&#34;&gt;source&lt;/span&gt;               destination         
cali-from-wl-dispatch  all  --  anywhere             anywhere             /* cali:Ee9Sbo10IpVujdIY */
ACCEPT     all  --  anywhere             anywhere             /* cali:nSZbcOoG1xPONxb8 */ /* Configured DefaultEndpointToHostAction */&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;/details&gt;&lt;/p&gt;

&lt;p&gt;다음으로, 포워딩 테이블을 살펴보자.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;$ iptables-save &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; less
...
-A KUBE-SERVICES ! -s &lt;span class=&#34;m&#34;&gt;192&lt;/span&gt;.168.0.0/16 -d &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;.96.0.10/32 -p tcp -m comment --comment &lt;span class=&#34;s2&#34;&gt;&amp;#34;kube-system/kube-dns:dns-tcp cluster IP&amp;#34;&lt;/span&gt; -m tcp --dport &lt;span class=&#34;m&#34;&gt;53&lt;/span&gt; -j KUBE-MARK-MASQ
-A KUBE-SERVICES -d &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;.96.0.10/32 -p tcp -m comment --comment &lt;span class=&#34;s2&#34;&gt;&amp;#34;kube-system/kube-dns:dns-tcp cluster IP&amp;#34;&lt;/span&gt; -m tcp --dport &lt;span class=&#34;m&#34;&gt;53&lt;/span&gt; -j KUBE-SVC-ERIFXISQEP7F7OF4
-A KUBE-SERVICES ! -s &lt;span class=&#34;m&#34;&gt;192&lt;/span&gt;.168.0.0/16 -d &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;.96.232.136/32 -p tcp -m comment --comment &lt;span class=&#34;s2&#34;&gt;&amp;#34;kube-system/calico-etcd: cluster IP&amp;#34;&lt;/span&gt; -m tcp --dport &lt;span class=&#34;m&#34;&gt;6666&lt;/span&gt; -j KUBE-MARK-MASQ
-A KUBE-SERVICES -d &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;.96.232.136/32 -p tcp -m comment --comment &lt;span class=&#34;s2&#34;&gt;&amp;#34;kube-system/calico-etcd: cluster IP&amp;#34;&lt;/span&gt; -m tcp --dport &lt;span class=&#34;m&#34;&gt;6666&lt;/span&gt; -j KUBE-SVC-NTYB37XIWATNM25Y
-A KUBE-SERVICES ! -s &lt;span class=&#34;m&#34;&gt;192&lt;/span&gt;.168.0.0/16 -d &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;.98.144.55/32 -p tcp -m comment --comment &lt;span class=&#34;s2&#34;&gt;&amp;#34;kube-system/kubernetes-dashboard: cluster IP&amp;#34;&lt;/span&gt; -m tcp --dport &lt;span class=&#34;m&#34;&gt;443&lt;/span&gt; -j KUBE-MARK-MASQ
-A KUBE-SERVICES -d &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;.98.144.55/32 -p tcp -m comment --comment &lt;span class=&#34;s2&#34;&gt;&amp;#34;kube-system/kubernetes-dashboard: cluster IP&amp;#34;&lt;/span&gt; -m tcp --dport &lt;span class=&#34;m&#34;&gt;443&lt;/span&gt; -j KUBE-SVC-XGLOHA7QRQ3V22RZ
-A KUBE-SERVICES ! -s &lt;span class=&#34;m&#34;&gt;192&lt;/span&gt;.168.0.0/16 -d &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;.97.169.67/32 -p tcp -m comment --comment &lt;span class=&#34;s2&#34;&gt;&amp;#34;default/kuard: cluster IP&amp;#34;&lt;/span&gt; -m tcp --dport &lt;span class=&#34;m&#34;&gt;80&lt;/span&gt; -j KUBE-MARK-MASQ
-A KUBE-SERVICES -d &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;.97.169.67/32 -p tcp -m comment --comment &lt;span class=&#34;s2&#34;&gt;&amp;#34;default/kuard: cluster IP&amp;#34;&lt;/span&gt; -m tcp --dport &lt;span class=&#34;m&#34;&gt;80&lt;/span&gt; -j KUBE-SVC-CUXC5A3HHHVSSN62
-A KUBE-SERVICES ! -s &lt;span class=&#34;m&#34;&gt;192&lt;/span&gt;.168.0.0/16 -d &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;.96.0.1/32 -p tcp -m comment --comment &lt;span class=&#34;s2&#34;&gt;&amp;#34;default/kubernetes:https cluster IP&amp;#34;&lt;/span&gt; -m tcp --dport &lt;span class=&#34;m&#34;&gt;443&lt;/span&gt; -j KUBE-MARK-MASQ
-A KUBE-SERVICES -d &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;.96.0.1/32 -p tcp -m comment --comment &lt;span class=&#34;s2&#34;&gt;&amp;#34;default/kubernetes:https cluster IP&amp;#34;&lt;/span&gt; -m tcp --dport &lt;span class=&#34;m&#34;&gt;443&lt;/span&gt; -j KUBE-SVC-NPX46M4PTMTKRN6Y
-A KUBE-SERVICES ! -s &lt;span class=&#34;m&#34;&gt;192&lt;/span&gt;.168.0.0/16 -d &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;.96.0.10/32 -p udp -m comment --comment &lt;span class=&#34;s2&#34;&gt;&amp;#34;kube-system/kube-dns:dns cluster IP&amp;#34;&lt;/span&gt; -m udp --dport &lt;span class=&#34;m&#34;&gt;53&lt;/span&gt; -j KUBE-MARK-MASQ
-A KUBE-SERVICES -d &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;.96.0.10/32 -p udp -m comment --comment &lt;span class=&#34;s2&#34;&gt;&amp;#34;kube-system/kube-dns:dns cluster IP&amp;#34;&lt;/span&gt; -m udp --dport &lt;span class=&#34;m&#34;&gt;53&lt;/span&gt; -j KUBE-SVC-TCOU7JCQXEZGVUNU
-A KUBE-SERVICES -m comment --comment &lt;span class=&#34;s2&#34;&gt;&amp;#34;kubernetes service nodeports; NOTE: this must be the last rule in this chain&amp;#34;&lt;/span&gt; -m addrtype --dst-type LOCAL -j KUBE-NODEPORTS
...&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;다음과 같이 ip &lt;code&gt;10.97.169.67&lt;/code&gt;은 &lt;code&gt;KUBE-SVC-CUXC5A3HHHVSSN62&lt;/code&gt;으로 점프한다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;-A KUBE-SERVICES -d &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;.97.169.67/32 -p tcp -m comment --comment &lt;span class=&#34;s2&#34;&gt;&amp;#34;default/kuard: cluster IP&amp;#34;&lt;/span&gt; -m tcp --dport &lt;span class=&#34;m&#34;&gt;80&lt;/span&gt; -j KUBE-SVC-CUXC5A3HHHVSSN62&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;KUBE-SVC-CUXC5A3HHHVSSN62&lt;/code&gt;을 살펴보면, 랜덤 확률별로 각각의 규칙으로 점프하는 것을 알 수 있다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;-A KUBE-SVC-CUXC5A3HHHVSSN62 -m comment --comment &lt;span class=&#34;s2&#34;&gt;&amp;#34;default/kuard:&amp;#34;&lt;/span&gt; -m statistic --mode random --probability &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;.10000000009 -j KUBE-SEP-IY5EMZGCCC7HUEGX
-A KUBE-SVC-CUXC5A3HHHVSSN62 -m comment --comment &lt;span class=&#34;s2&#34;&gt;&amp;#34;default/kuard:&amp;#34;&lt;/span&gt; -m statistic --mode random --probability &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;.11110999994 -j KUBE-SEP-JBD3W2H2CSU7KYVR
-A KUBE-SVC-CUXC5A3HHHVSSN62 -m comment --comment &lt;span class=&#34;s2&#34;&gt;&amp;#34;default/kuard:&amp;#34;&lt;/span&gt; -m statistic --mode random --probability &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;.12500000000 -j KUBE-SEP-FM3234RRJZPD4GZX
-A KUBE-SVC-CUXC5A3HHHVSSN62 -m comment --comment &lt;span class=&#34;s2&#34;&gt;&amp;#34;default/kuard:&amp;#34;&lt;/span&gt; -m statistic --mode random --probability &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;.14286000002 -j KUBE-SEP-YOAWVANELGWJS5XG
-A KUBE-SVC-CUXC5A3HHHVSSN62 -m comment --comment &lt;span class=&#34;s2&#34;&gt;&amp;#34;default/kuard:&amp;#34;&lt;/span&gt; -m statistic --mode random --probability &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;.16667000018 -j KUBE-SEP-EV53L32GZTSBWT5L
-A KUBE-SVC-CUXC5A3HHHVSSN62 -m comment --comment &lt;span class=&#34;s2&#34;&gt;&amp;#34;default/kuard:&amp;#34;&lt;/span&gt; -m statistic --mode random --probability &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;.20000000019 -j KUBE-SEP-N7OVRTBYAU5DSTM3
-A KUBE-SVC-CUXC5A3HHHVSSN62 -m comment --comment &lt;span class=&#34;s2&#34;&gt;&amp;#34;default/kuard:&amp;#34;&lt;/span&gt; -m statistic --mode random --probability &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;.25000000000 -j KUBE-SEP-33XGFXWM5AKJXNJR
-A KUBE-SVC-CUXC5A3HHHVSSN62 -m comment --comment &lt;span class=&#34;s2&#34;&gt;&amp;#34;default/kuard:&amp;#34;&lt;/span&gt; -m statistic --mode random --probability &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;.33332999982 -j KUBE-SEP-CPH6I2HAHV4Y5PMM
-A KUBE-SVC-CUXC5A3HHHVSSN62 -m comment --comment &lt;span class=&#34;s2&#34;&gt;&amp;#34;default/kuard:&amp;#34;&lt;/span&gt; -m statistic --mode random --probability &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;.50000000000 -j KUBE-SEP-6ESI6K2EKT4JPG3E
-A KUBE-SVC-CUXC5A3HHHVSSN62 -m comment --comment &lt;span class=&#34;s2&#34;&gt;&amp;#34;default/kuard:&amp;#34;&lt;/span&gt; -j KUBE-SEP-AOUKRORADL3ZFT3D&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;50% 이상의 확률일 때는, &lt;code&gt;KUBE-SEP-AOUKRORADL3ZFT3D&lt;/code&gt;에 점프하게 되는데, 패킷 소스가 &lt;code&gt;192.168.236.133/32&lt;/code&gt;이면 Kubernetes 매스쿼레이딩을 하고, 그렇지 않은 tcp 패킷의 경우 &lt;code&gt;192.168.236.133:8080&lt;/code&gt;로 전송됨을 알 수 있다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;-A KUBE-SEP-AOUKRORADL3ZFT3D -s &lt;span class=&#34;m&#34;&gt;192&lt;/span&gt;.168.236.133/32 -m comment --comment &lt;span class=&#34;s2&#34;&gt;&amp;#34;default/kuard:&amp;#34;&lt;/span&gt; -j KUBE-MARK-MASQ
-A KUBE-SEP-AOUKRORADL3ZFT3D -p tcp -m comment --comment &lt;span class=&#34;s2&#34;&gt;&amp;#34;default/kuard:&amp;#34;&lt;/span&gt; -m tcp -j DNAT --to-destination &lt;span class=&#34;m&#34;&gt;192&lt;/span&gt;.168.236.133:8080&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;실제로 마스터에 들어가서 ClusterIP에 대해 테스트해보면 다음과 같다. 요청마다 &lt;code&gt;HOSTNAME&lt;/code&gt;의 값이 랜덤하게, 즉 서로 다른 호스트의 Pod이 랜덤으로 응답하고 있다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;ubuntu@ip-10-0-18-181:~$ curl &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;.110.41.209:80/env/api
&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;commandLine&amp;#34;&lt;/span&gt;:&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;/kuard&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;env&amp;#34;&lt;/span&gt;:&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;HOME&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;/&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;HOSTNAME&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;kuard-dbdd7955d-nv89q&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;tcp://10.96.0.1:443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT_443_TCP&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;tcp://10.96.0.1:443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT_443_TCP_ADDR&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;10.96.0.1&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT_443_TCP_PORT&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT_443_TCP_PROTO&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;tcp&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_SERVICE_HOST&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;10.96.0.1&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_SERVICE_PORT&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_SERVICE_PORT_HTTPS&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;PATH&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;}}&lt;/span&gt;
ubuntu@ip-10-0-18-181:~$ curl &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;.110.41.209:80/env/api
&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;commandLine&amp;#34;&lt;/span&gt;:&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;/kuard&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;env&amp;#34;&lt;/span&gt;:&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;HOME&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;/&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;HOSTNAME&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;kuard-dbdd7955d-bcsdh&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;tcp://10.96.0.1:443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT_443_TCP&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;tcp://10.96.0.1:443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT_443_TCP_ADDR&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;10.96.0.1&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT_443_TCP_PORT&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT_443_TCP_PROTO&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;tcp&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_SERVICE_HOST&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;10.96.0.1&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_SERVICE_PORT&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_SERVICE_PORT_HTTPS&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;PATH&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;}}&lt;/span&gt;
ubuntu@ip-10-0-18-181:~$ curl &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;.110.41.209:80/env/api
&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;commandLine&amp;#34;&lt;/span&gt;:&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;/kuard&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;env&amp;#34;&lt;/span&gt;:&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;HOME&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;/&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;HOSTNAME&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;kuard-dbdd7955d-q7f2w&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;tcp://10.96.0.1:443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT_443_TCP&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;tcp://10.96.0.1:443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT_443_TCP_ADDR&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;10.96.0.1&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT_443_TCP_PORT&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT_443_TCP_PROTO&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;tcp&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_SERVICE_HOST&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;10.96.0.1&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_SERVICE_PORT&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_SERVICE_PORT_HTTPS&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;PATH&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;}}&lt;/span&gt;
ubuntu@ip-10-0-18-181:~$ curl &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;.110.41.209:80/env/api
&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;commandLine&amp;#34;&lt;/span&gt;:&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;/kuard&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;env&amp;#34;&lt;/span&gt;:&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;HOME&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;/&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;HOSTNAME&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;kuard-dbdd7955d-nv89q&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;tcp://10.96.0.1:443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT_443_TCP&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;tcp://10.96.0.1:443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT_443_TCP_ADDR&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;10.96.0.1&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT_443_TCP_PORT&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT_443_TCP_PROTO&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;tcp&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_SERVICE_HOST&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;10.96.0.1&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_SERVICE_PORT&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_SERVICE_PORT_HTTPS&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;PATH&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;}}&lt;/span&gt;
ubuntu@ip-10-0-18-181:~$ curl &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;.110.41.209:80/env/api
&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;commandLine&amp;#34;&lt;/span&gt;:&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;/kuard&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;env&amp;#34;&lt;/span&gt;:&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;HOME&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;/&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;HOSTNAME&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;kuard-dbdd7955d-f8sbq&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;tcp://10.96.0.1:443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT_443_TCP&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;tcp://10.96.0.1:443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT_443_TCP_ADDR&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;10.96.0.1&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT_443_TCP_PORT&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT_443_TCP_PROTO&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;tcp&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_SERVICE_HOST&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;10.96.0.1&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_SERVICE_PORT&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_SERVICE_PORT_HTTPS&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;PATH&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;}}&lt;/span&gt;
ubuntu@ip-10-0-18-181:~$ curl &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;.110.41.209:80/env/api
&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;commandLine&amp;#34;&lt;/span&gt;:&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;/kuard&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;env&amp;#34;&lt;/span&gt;:&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;HOME&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;/&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;HOSTNAME&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;kuard-dbdd7955d-rsxrz&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;tcp://10.96.0.1:443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT_443_TCP&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;tcp://10.96.0.1:443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT_443_TCP_ADDR&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;10.96.0.1&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT_443_TCP_PORT&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT_443_TCP_PROTO&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;tcp&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_SERVICE_HOST&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;10.96.0.1&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_SERVICE_PORT&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_SERVICE_PORT_HTTPS&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;PATH&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;}}&lt;/span&gt;
ubuntu@ip-10-0-18-181:~$ curl &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;.110.41.209:80/env/api
&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;commandLine&amp;#34;&lt;/span&gt;:&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;/kuard&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;env&amp;#34;&lt;/span&gt;:&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;HOME&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;/&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;HOSTNAME&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;kuard-dbdd7955d-bcsdh&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;tcp://10.96.0.1:443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT_443_TCP&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;tcp://10.96.0.1:443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT_443_TCP_ADDR&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;10.96.0.1&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT_443_TCP_PORT&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT_443_TCP_PROTO&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;tcp&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_SERVICE_HOST&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;10.96.0.1&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_SERVICE_PORT&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_SERVICE_PORT_HTTPS&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;PATH&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;}}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&#34;nodeport&#34;&gt;NodePort&lt;/h2&gt;

&lt;p&gt;그리고 &lt;code&gt;NodePort&lt;/code&gt;의 값이 &lt;code&gt;30361&lt;/code&gt;으로 할당되어 있다. 이 값은 동적으로 랜덤하게 설정된다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;kubectl get svc kuard -o yaml
apiVersion: v1
kind: Service
metadata:
  creationTimestamp: &lt;span class=&#34;m&#34;&gt;2019&lt;/span&gt;-01-18T14:49:58Z
  labels:
    run: kuard
  name: kuard
  namespace: default
  resourceVersion: &lt;span class=&#34;s2&#34;&gt;&amp;#34;15378&amp;#34;&lt;/span&gt;
  selfLink: /api/v1/namespaces/default/services/kuard
  uid: 53772d95-1b30-11e9-a27c-02b8e4b61ab8
spec:
  clusterIP: &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;.110.41.209
  externalTrafficPolicy: Cluster
  ports:
  - nodePort: &lt;span class=&#34;m&#34;&gt;30361&lt;/span&gt;
    port: &lt;span class=&#34;m&#34;&gt;80&lt;/span&gt;
    protocol: TCP
    targetPort: &lt;span class=&#34;m&#34;&gt;8080&lt;/span&gt;
  selector:
    run: kuard
  sessionAffinity: None
  type: LoadBalancer
status:
  loadBalancer:
    ingress:
    - hostname: a53772d951b3011e9a27c02b8e4b61ab-1700641417.ap-northeast-2.elb.amazonaws.com&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;NodePort&lt;/code&gt;는 Kubernetes 외부와 내부를 연결하는 브리지의 역할을 한다. 마스터 노드에 진입하여 해당 포트에 접속하면 &lt;code&gt;ClusterIP&lt;/code&gt;와 동일하게 &lt;code&gt;HOSTNAME&lt;/code&gt;의 값이 랜덤하게 변경되는 것을 알 수 있다. 즉, 모든 Kubernetes 노드에서 해당 NodePort &lt;code&gt;30361&lt;/code&gt;을 통해 해당 서비스 &lt;code&gt;kuard&lt;/code&gt;로 진입하게 된다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;ubuntu@ip-10-0-18-181:~$ curl localhost:30361/env/api
&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;commandLine&amp;#34;&lt;/span&gt;:&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;/kuard&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;env&amp;#34;&lt;/span&gt;:&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;HOME&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;/&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;HOSTNAME&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;kuard-dbdd7955d-bcsdh&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;tcp://10.96.0.1:443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT_443_TCP&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;tcp://10.96.0.1:443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT_443_TCP_ADDR&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;10.96.0.1&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT_443_TCP_PORT&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT_443_TCP_PROTO&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;tcp&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_SERVICE_HOST&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;10.96.0.1&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_SERVICE_PORT&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_SERVICE_PORT_HTTPS&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;PATH&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;}}&lt;/span&gt;
ubuntu@ip-10-0-18-181:~$ curl localhost:30361/env/api
&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;commandLine&amp;#34;&lt;/span&gt;:&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;/kuard&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;env&amp;#34;&lt;/span&gt;:&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;HOME&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;/&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;HOSTNAME&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;kuard-dbdd7955d-q7f2w&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;tcp://10.96.0.1:443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT_443_TCP&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;tcp://10.96.0.1:443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT_443_TCP_ADDR&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;10.96.0.1&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT_443_TCP_PORT&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT_443_TCP_PROTO&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;tcp&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_SERVICE_HOST&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;10.96.0.1&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_SERVICE_PORT&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_SERVICE_PORT_HTTPS&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;PATH&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;}}&lt;/span&gt;
ubuntu@ip-10-0-18-181:~$ curl localhost:30361/env/api
&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;commandLine&amp;#34;&lt;/span&gt;:&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;/kuard&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;env&amp;#34;&lt;/span&gt;:&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;HOME&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;/&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;HOSTNAME&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;kuard-dbdd7955d-bgwrj&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;tcp://10.96.0.1:443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT_443_TCP&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;tcp://10.96.0.1:443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT_443_TCP_ADDR&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;10.96.0.1&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT_443_TCP_PORT&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT_443_TCP_PROTO&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;tcp&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_SERVICE_HOST&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;10.96.0.1&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_SERVICE_PORT&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_SERVICE_PORT_HTTPS&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;PATH&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;}}&lt;/span&gt;
ubuntu@ip-10-0-18-181:~$ curl localhost:30361/env/api
&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;commandLine&amp;#34;&lt;/span&gt;:&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;/kuard&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;env&amp;#34;&lt;/span&gt;:&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;HOME&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;/&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;HOSTNAME&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;kuard-dbdd7955d-cqxwq&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;tcp://10.96.0.1:443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT_443_TCP&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;tcp://10.96.0.1:443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT_443_TCP_ADDR&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;10.96.0.1&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT_443_TCP_PORT&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT_443_TCP_PROTO&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;tcp&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_SERVICE_HOST&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;10.96.0.1&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_SERVICE_PORT&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_SERVICE_PORT_HTTPS&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;PATH&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;}}&lt;/span&gt;
ubuntu@ip-10-0-18-181:~$ curl localhost:30361/env/api
&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;commandLine&amp;#34;&lt;/span&gt;:&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;/kuard&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;env&amp;#34;&lt;/span&gt;:&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;HOME&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;/&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;HOSTNAME&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;kuard-dbdd7955d-bgwrj&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;tcp://10.96.0.1:443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT_443_TCP&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;tcp://10.96.0.1:443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT_443_TCP_ADDR&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;10.96.0.1&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT_443_TCP_PORT&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT_443_TCP_PROTO&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;tcp&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_SERVICE_HOST&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;10.96.0.1&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_SERVICE_PORT&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_SERVICE_PORT_HTTPS&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;PATH&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;}}&lt;/span&gt;
ubuntu@ip-10-0-18-181:~$ curl localhost:30361/env/api
&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;commandLine&amp;#34;&lt;/span&gt;:&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;/kuard&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;env&amp;#34;&lt;/span&gt;:&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;HOME&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;/&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;HOSTNAME&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;kuard-dbdd7955d-qd9fj&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;tcp://10.96.0.1:443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT_443_TCP&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;tcp://10.96.0.1:443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT_443_TCP_ADDR&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;10.96.0.1&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT_443_TCP_PORT&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_PORT_443_TCP_PROTO&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;tcp&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_SERVICE_HOST&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;10.96.0.1&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_SERVICE_PORT&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;KUBERNETES_SERVICE_PORT_HTTPS&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;443&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;PATH&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;}}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&#34;loadbalancer&#34;&gt;LoadBalancer&lt;/h2&gt;

&lt;p&gt;마지막으로 앞서 보았던 &lt;code&gt;LoadBalancer&lt;/code&gt; 타입의 서비스이다. 예제에서는 AWB의 ELB가 연결된다.&lt;/p&gt;

&lt;p&gt;ELB의 리스너 항목을 살펴보면, 생성된 ELB의 로드 밸런서 포트는 &lt;code&gt;80&lt;/code&gt;이고, EC2의 인스턴스 포트는 &lt;code&gt;30361&lt;/code&gt;이다. 이 포트는 앞서 살펴본 Kubernetes에서 &lt;code&gt;kuard&lt;/code&gt; Service의 &lt;code&gt;NodePort&lt;/code&gt;의 값이다. 즉, ELB의 80으로 들어오는 모든 트래픽은 다음과 같이 EC2 인스턴스 중 하나로 전달되고, &lt;code&gt;30361&lt;/code&gt;로 전달된 트래픽은 &lt;code&gt;kuard&lt;/code&gt; Service에 의해 &lt;code&gt;kuard&lt;/code&gt; Pod로 전달된다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;../../tgik-002-loadbalaner.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;$ kubectl expose deployment kuard --type&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;LoadBalancer --target-port&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;8080&lt;/span&gt; --port&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;80&lt;/span&gt;
service/kuard exposed

$ kubectl expose deployment kuard --type&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;LoadBalancer --target-port&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;8080&lt;/span&gt; --port&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;80&lt;/span&gt; -o yaml
apiVersion: v1
kind: Service
metadata:
  creationTimestamp: null
  labels:
    run: kuard
  name: kuard
spec:
  ports:
  - port: &lt;span class=&#34;m&#34;&gt;80&lt;/span&gt;
    protocol: TCP
    targetPort: &lt;span class=&#34;m&#34;&gt;8080&lt;/span&gt;
  selector:
    run: kuard
  type: LoadBalancer
status:
  loadBalancer: &lt;span class=&#34;o&#34;&gt;{}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;apiVersion&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;extensions/v1beta1&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;kind&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;Deployment&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;metadata&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;annotations&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;deployment.kubernetes.io/revision&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;1&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;creationTimestamp&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;ld&#34;&gt;2019-01-18T06:21:13Z&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;generation&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;labels&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;run&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;kuard&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;kuard&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;namespace&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;default&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;resourceVersion&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;1987&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;selfLink&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;/apis/extensions/v1beta1/namespaces/default/deployments/kuard&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;uid&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;41075e21&lt;/span&gt;-1ae9-&lt;span class=&#34;m&#34;&gt;11e9&lt;/span&gt;-befa-0209e53cf850&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;spec&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;progressDeadlineSeconds&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;600&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;replicas&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;revisionHistoryLimit&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;selector&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;matchLabels&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;run&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;kuard&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;strategy&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;rollingUpdate&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;maxSurge&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;maxUnavailable&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;type&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;RollingUpdate&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;template&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;metadata&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;creationTimestamp&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;null&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;labels&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;run&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;kuard&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;spec&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;containers&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;image&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;gcr.io/kuar-demo/kuard-amd64&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;imagePullPolicy&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;IfNotPresent&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;name&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;kuard&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;resources&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;{}&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;terminationMessagePath&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;/dev/termination-log&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;terminationMessagePolicy&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;File&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;dnsPolicy&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;ClusterFirst&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;restartPolicy&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;Always&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;schedulerName&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;default-scheduler&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;securityContext&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;{}&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;terminationGracePeriodSeconds&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;30&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;status&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;availableReplicas&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;conditions&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;lastTransitionTime&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;ld&#34;&gt;2019-01-18T06:21:22Z&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;lastUpdateTime&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;ld&#34;&gt;2019-01-18T06:21:22Z&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;message&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;Deployment&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;has&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;minimum&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;availability.&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;reason&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;MinimumReplicasAvailable&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;status&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;True&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;type&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;Available&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;-&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;lastTransitionTime&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;ld&#34;&gt;2019-01-18T06:21:13Z&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;lastUpdateTime&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;ld&#34;&gt;2019-01-18T06:21:23Z&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;message&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;ReplicaSet&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;kuard-dbdd7955d&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;has&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;successfully&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;progressed.&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;reason&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;NewReplicaSetAvailable&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;status&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;True&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;type&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;Progressing&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;observedGeneration&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;readyReplicas&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;replicas&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;updatedReplicas&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;center&gt;•••&lt;/center&gt;&lt;/p&gt;
</content>
      
    </item>
    
    <item>
      <title>[번역] 확장성 있고, 이식성 있는 도커 컨테이너 네트워크 설계</title>
      <link>https://ziwon.github.io/post/designing-scalable-portable-docker-container-networks/</link>
      <pubDate>Wed, 16 Jan 2019 08:23:00 +0900</pubDate>
      <author>Aron Yoon</author>
      <guid>https://ziwon.github.io/post/designing-scalable-portable-docker-container-networks/</guid>
      <description></description>
      
      <content>

&lt;blockquote&gt;
&lt;p&gt;원문: &lt;a href=&#34;https://success.docker.com/article/networking&#34; target=&#34;_blank&#34;&gt;Docker Reference Architecture: Designing Scalable, Portable Docker Container Networks&lt;/a&gt; (오역 및 오타는 댓글로 알려주세요)&lt;/p&gt;

&lt;p&gt;※ 컨테이너가 아닌 Pod간의 Kubernetes 네트워킹 모델은 도커 네트워킹 모델과 좀 다릅니다. 자세한 내용은 하단의 &lt;a href=&#34;#기타&#34;&gt;기타&lt;/a&gt; 아티클을 참조하세요.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;hr /&gt;

&lt;h1 id=&#34;배우게-될-것&#34;&gt;배우게 될 것&lt;/h1&gt;

&lt;p&gt;도커 컨테이너는 실행에 필요한 모든 것, 즉 코드, 런타임, 시스템 도구, 시스템 라이브러리 등 서버에 설치할 수 있는 모든 것을 포함하는 완전한 파일 시스템에 있는 소프트웨어 하나를 래핑한다. 이는 소프트웨어가 환경에 관계없이 항상 동일한 기능을 실행할 것을 보장한다. 기본적으로 컨테이너는 애플리케이션을 서로 격리하고, 애플리케이션을 위한 추가적인 보호 계층을 제공한다.&lt;/p&gt;

&lt;p&gt;애플리케이션이 서로 간에, 또는 호스트와, 혹은 외부 네트워크와 통신해야 한다면 어떻게 해야하는가? 애플리케이션 이식성, 서비스 검색, 로드 밸런싱, 보안, 성능 및 확장성을 유지하면서 적절한 연결성을 위해 네트워크를 설계하는 방법은 무엇인가? 이 문서는 이러한 네트워크 설계 문제와 사용 가능한 도구 및 일반적인 배포 패턴을 다룬다. 물리적 네트워크 설계를 기술하거나 권장하지는 않지만 애플리케이션과 물리적 네트워크의 제약 조건을 고려하면서 도커 네트워크를 설계하는 방법에 대한 선택 사항들을 제공한다.&lt;/p&gt;

&lt;h2 id=&#34;사전-지식&#34;&gt;사전 지식&lt;/h2&gt;

&lt;p&gt;계속하기 전에 도커 개념과 도커 Swarm에 대해 잘 알고 있어야 한다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://docs.docker.com/engine/understanding-docker/&#34; target=&#34;_blank&#34;&gt;도커 개념&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://docs.docker.com/engine/swarm/key-concepts/#/services-and-tasks&#34; target=&#34;_blank&#34;&gt;도커 Swarm 및 Swarm 모드 개념&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&#34;네트워킹-컨테이너-및-마이크로-서비스의-미션&#34;&gt;네트워킹 컨테이너 및 마이크로 서비스의 미션&lt;/h1&gt;

&lt;p&gt;마이크로서비스는 실무에서 애플리케이션의 스케일을 증가시켰는데, 이러한 애플리케이션들은 제공되는 연결성 및 격리 방법들이 훨씬 더 중시된다. 도커 네트워킹 철학은 애플리케이션 중심이다. 네트워크 운영자에게 옵션과 유연성을 제공하는 것을 목표로 하는 것 뿐만 아니라 애플리케이션 개발자에게 적합한 수준의 추상화를 제공하는 것을 목표로 한다.&lt;/p&gt;

&lt;p&gt;여느 설계처럼, 네트워크 설계은 밸런스를 맞추는 행위이다. 도커 엔터프라이즈 에디션과 도커 생태계는 네트워크 엔지니어들에게 그들의 애플리케이션과 환경에 대한 최상의 밸런스를 달성하기 위해 다양한 도구를 제공한다. 각 옵션은 서로 다른 장점과 트레이드오프를 제공한다. 이 가이드의 나머지 부분에서는 네트워크 엔지니어가 자신의 환경에 가장 적합한 것을 이해할 수 있도록 이러한 각각 선택에 대해 자세히 설명한다.&lt;/p&gt;

&lt;p&gt;도커는 애플리케이션을 공급하는 새로운 방법을 개발했고, 그와 함께 컨테이너는 네트워킹 접근 방식의 일부 측면도 변화시켰다. 다음 주제는 컨테이너형 애플리케이션에 대한 일반적인 설계 주제이다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;이식성&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;고유한 네트워크 특성을 활용하면서 다양한 네트워크 환경에서 최대한의 이식성을 어떻게 보장할 수 있는가?&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;strong&gt;서비스 검색&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;서비스가 확장 및 축소될 때 어디에 살고 있는지 어떻게 알 수 있는가?&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;strong&gt;로드 밸런싱&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;서비스 자체가 커지고 확장될 때 서비스 간에 부하를 어떻게 공유하는가?&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;strong&gt;보안&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;잘못된 컨테이너가 서로 액세스하지 못하도록 어떻게 구분하는가?&lt;/li&gt;
&lt;li&gt;애플리케이션 및 클러스터 제어 트래픽이 있는 컨테이너가 안전하다는 것을 어떻게 보장하는가?&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;strong&gt;성능&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;대기 시간을 최소화하고 대역폭을 최대화하는 동시에 고급 네트워크 서비스를 어떻게 제공하는가?&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;strong&gt;확장성&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;여러 호스트에 걸쳐 애플리케이션을 확장할 때 이러한 특성들이 저하되지 않도록 하려면 어떻게 하는가?&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&#34;컨테이너-네트워킹-모델&#34;&gt;컨테이너 네트워킹 모델&lt;/h1&gt;

&lt;p&gt;도커 네트워킹 아키텍처는 CNM(Container Networking Model)이라고 하는 인터페이스 집합 위에 구축된다. CNM의 철학은 다양한 인프라 구조에서 애플리케이션 이식성을 제공하는 것이다. 이 모델은 애플리케이션 이식성을 달성하기 위해 밸런스를 맞추고 인프라의 특징과 기능을 활용한다.&lt;/p&gt;

&lt;p&gt;&lt;center&gt;
&lt;img src=&#34;https://success.docker.com/api/images/.%2Frefarch%2Fnetworking%2Fimages%2Fcnm.png&#34; alt=&#34;&#34; /&gt;
&lt;/center&gt;&lt;/p&gt;

&lt;h2 id=&#34;cnm-구성&#34;&gt;CNM 구성&lt;/h2&gt;

&lt;p&gt;CNM에는 몇 가지 상위 레벨의 구성이 있다. 이들은 모두 OS 및 인프라에 구애받지 않으므로 인프라 스택에 관계없이 애플리케이션이 동일한 환경을 가질 수 있다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;샌드박스&lt;/strong&gt; - 샌드박스는 컨테이너 네트워크 스택의 설정을 포함한다. 여기에는 컨테이너 인터페이스, 라우팅 테이블 및 DNS 설정 관리가 포함된다. 샌드박스의 구현은 Linux 네트워크 네임스페이스, FreeBSD Jail 또는 기타 유사한 개념일 수 있다. 샌드박스는 여러 네트워크의 많은 엔드포인트를 포함할 수 있다.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;엔드포인트&lt;/strong&gt; - 엔드포인트는 샌드박스를 네트워크에 연결한다. 엔드포인트는 네트워크에 대한 실제 연결을 애플리케이션에서 추상화할 수 있도록 존재한다. 이는 서비스가 네트워크에 어떻게 연결되어 있는지에 신경쓰지 않으며 여러 유형의 네트워크 드라이버를 사용할 수 있도록 이식성을 유지하는데 도움을 준다.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;네트워크&lt;/strong&gt; — CNM은 OSI 모델 측면에서 네트워크를 명시하지 않는다. 네트워크의 구현은 리눅스 브리지, VLAN 등이 될 수 있다. 네트워크는 이들 사이에 연결성이 있는 엔드포인트의 모음이다. 네트워크에 연결되지 않은 엔드포인트는 네트워크에 연결되어 있지 않다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;cnm-드라이버-인터페이스&#34;&gt;CNM 드라이버 인터페이스&lt;/h2&gt;

&lt;p&gt;컨테이너 네트워킹 모델은 사용자, 커뮤니티 및 벤더가 네트워크에서 추가 기능, 가시성 또는 제어 기능을 활용할 수 있는 2개의 플러그형 및 개방형 인터페이스를 제공한다.&lt;/p&gt;

&lt;p&gt;다음과 같은 네트워크 드라이버가 있다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;네트워크 드라이버&lt;/strong&gt; - 도커 네트워크 드라이버는 네트워크를 작동시키는 실제 구현을 제공한다. 다른 드라이버를 사용할 수 있고 다양한 유스케이스를 쉽게 지원할 수 있도록 상호 교환될 수 있는 플러그 스타일이다. 주어진 도커 엔진 또는 클러스터에서 여러 개의 네트워크 드라이버를 동시에 사용할 수 있지만, 각 도커 네트워크는 단일 네트워크 드라이버를 통해서만 인스턴스화된다. CNM 네트워크 드라이버는 크게 두 가지 유형이 있다.

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;네이티브 네트워크 드라이버&lt;/strong&gt; - 네이티브 네트워크 드라이버는 도커 엔진의 네이티브 요소이며 도커에서 제공한다. 오버레이 네트워크나 로컬 브리지와 같은 다양한 기능을 지원하는 여러 드라이버가 있다.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;원격 네트워크 드라이버&lt;/strong&gt; - 원격 네트워크 드라이버는 커뮤니티와 다른 벤더가 만든 네트워크 드라이버이다. 이러한 드라이버는 기존 소프트웨어 및 하드웨어와의 통합을 제공할 수 있다. 사용자는 또한 기존 네트워크 드라이버가 지원하지 않는 특정 기능을 원하는 경우 자신의 드라이버를 만들 수도 있다.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;IPAM 드라이버&lt;/strong&gt; - 도커에는 네트워크 및 엔드포인트의 기본 서브넷 또는 IP 주소를 지정하지 않은 경우 이를 제공하는 네이티브 IP 주소 관리 드라이버가 있다. IP 주소 지정은 네트워크, 컨테이너 및 서비스 생성 명령을 통해 수동으로 할당할 수도 있다. 원격 IPAM 드라이버도 존재하며 기존 IPAM 도구와 통합된다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;center&gt;
&lt;img src=&#34;https://success.docker.com/api/images/.%2Frefarch%2Fnetworking%2Fimages%2Fcnm-api.png&#34; alt=&#34;&#34; /&gt;
&lt;/center&gt;&lt;/p&gt;

&lt;h2 id=&#34;도커-네이티브-네트워크-드라이버&#34;&gt;도커 네이티브 네트워크 드라이버&lt;/h2&gt;

&lt;p&gt;도커 네이티브 네트워크 드라이버는 도커 엔진의 일부이므로 추가 모듈은 필요없다. 이들은 표준 &lt;code&gt;docker network&lt;/code&gt; 명령을 통해 호출되고 사용된다. 다음과 같은 네이티브 네트워크 드라이버가 있다.&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;드라이버&lt;/th&gt;
&lt;th&gt;설명&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Host&lt;/td&gt;
&lt;td&gt;&lt;code&gt;host&lt;/code&gt; 드라이버가 있는 호스트 컨테이너는 호스트의 네트워킹 스택을 사용함. 네임스페이스 분리가 없으므로 호스트의 모든 인터페이스를 컨테이너에서 직접 사용할 수 있음.&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;Bridge&lt;/td&gt;
&lt;td&gt;&lt;code&gt;bridge&lt;/code&gt; 드라이버는 도커가 관리하는 호스트에 리눅스 브리지를 생성함. 기본적으로 브리지의 컨테이너는 서로 통신할 수 있음. 또한 브리지 드라이버를 통해 컨테이너에 대한 외부 액세스를 구성할 수 있음.&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;Overlay&lt;/td&gt;
&lt;td&gt;&lt;code&gt;overlay&lt;/code&gt; 드라이버는 도커 외부에서 다중 호스트 네트워크를 지원하는 오버레이 네트워크를 생성함. 로컬 리눅스 브리지와 VXLAN을 함께 사용하여 물리적 네트워크 인프라를 통해 컨테이너와 컨테이너 간의 통신을 오버레이함.&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;MACVLAN&lt;/td&gt;
&lt;td&gt;&lt;code&gt;macvlan&lt;/code&gt; 드라이버는 MACVLAN 브리지 모드를 사용해서 컨테이너 인터페이스와 상위 호스트 인터페이스(또는 하위 인터페이스) 간의 연결을 설정함. 물리적 네트워크에서 라우팅 가능한 컨테이너에 IP 주소를 제공하기 위해 사용될 수 있음. 또한 VLAN은 Layer 2 컨테이너 분할을 실행하기 위해 macvlan 드라이버에 트렁킹될 수 있음.&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;None&lt;/td&gt;
&lt;td&gt;&lt;code&gt;none&lt;/code&gt; 드라이버는 컨테이너에 자체 네트워킹 스택과 네트워크 네임스페이스를 제공하지만, 컨테이너 내부에 인터페이스를 구성하지는 않음. 추가 구성없이 컨테이너가 호스트 네트워킹 스택에서 완전히 분리됨.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&#34;네트워크-스코프&#34;&gt;네트워크 스코프&lt;/h2&gt;

&lt;p&gt;&lt;code&gt;docker network ls&lt;/code&gt; 출력에서 볼 수 있듯이, 도커 네트워크 드라이버는 &lt;em&gt;스코프&lt;/em&gt; 라는 개념이 있다. 네트워크 스코프는 &lt;code&gt;local&lt;/code&gt; 또는 &lt;code&gt;swarm&lt;/code&gt; 범위인 드라이버의 도메인이다. Local 스코프 드라이버는 호스트의 범위 내에서 연결 및 네트워크 서비스(예: DNS 또는 IPAM)를 제공한다. Swarm 스코프 드라이버는 Swarm 클러스터 전반에서 연결 및 네트워크 서비스를 제공한다. Swarm 스코프 네트워크는 전체 클러스터에서 동일한 네트워크 ID를 가지고 있고, 반면에 Local 스코프 네트워크는 각 호스트에 고유한 네트워크 ID를 가지고 있다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;$ docker network ls
NETWORK ID          NAME                DRIVER              SCOPE
1475f03fbecb        bridge              bridge              &lt;span class=&#34;nb&#34;&gt;local&lt;/span&gt;
e2d8a4bd86cb        docker_gwbridge     bridge              &lt;span class=&#34;nb&#34;&gt;local&lt;/span&gt;
407c477060e7        host                host                &lt;span class=&#34;nb&#34;&gt;local&lt;/span&gt;
f4zr3zrswlyg        ingress             overlay             swarm
c97909a4b198        none                null                local&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&#34;도커-원격-네트워크-드라이버&#34;&gt;도커 원격 네트워크 드라이버&lt;/h2&gt;

&lt;p&gt;아래 커뮤니티 및 벤더에서 만든 원격 네트워크 드라이버는 CNM과 호환되며, 각 드라이버는 컨테이너를 위한 고유한 기능과 네트워크 서비스를 제공한다.&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;드라이버&lt;/th&gt;
&lt;th&gt;설명&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;http://contiv.github.io/&#34; target=&#34;_blank&#34;&gt;contiv&lt;/a&gt;&lt;img width=250/&gt;&lt;/td&gt;
&lt;td&gt;멀티 테넌트(Multi-tenant) 마이크로 서비스 구현를 위한 인프라 및 보안 정책을 제공하는 오픈 소스 네트워크 플러그인, Cisco Systems가 리딩. 또한 Contiv는 비컨테이너 워크로드 및 ACI와 같은 물리적 네트워크에 대해 통합을 제공. Contiv는 원격 네트워크 및 IPAM 드라이버를 구현하고 있음.&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://www.weave.works/docs/net/latest/introducing-weave/&#34; target=&#34;_blank&#34;&gt;weave&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;도커 컨테이너를 여러 호스트 또는 클라우드에 연결하는 가상 네트워크를 만드는 네트워크 플러그인. Weave는 애플리케이션 자동 검색 기능을 제공하며 부분적으로 연결된 네트워크에서 작동할 수 있으며, 외부 클러스터 저장소가 필요하지 않고, 운영 친화적임.&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://www.projectcalico.org/&#34; target=&#34;_blank&#34;&gt;calico&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;클라우드 데이터 센터의 가상 네트워킹을 위한 오픈 소스 솔루션. 대부분의 워크로드(VM, 컨테이너 또는 베어 메탈 서버)가 IP 연결만 필요로 하는 데이터 센터를 대상으로 함. Calico는 표준 IP 라우팅을 사용하여 이 연결성을 제공함. 테넌트 소유권 (tenant ownership) 또는 보다 세분화된 정책에 따라 워크로드 간의 격리는 소스 및 대상 워크로드를 호스팅하는 서버에서 iptables 프로그래밍을 통해 수행됨.&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://github.com/openstack/kuryr&#34; target=&#34;_blank&#34;&gt;kuryr&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;오픈스택 Kuryr 프로젝트의 일부로 개발된 네트워크 플러그인. 오픈스택 네트워킹 서비스인 Neutron을 활용하여 도커 네트워킹 (libnetwork) 원격 드라이버 API를 구현함. Kuryr에는 IPAM 드라이버도 포함되어 있음.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&#34;도커-원격-ipam-드라이버&#34;&gt;도커 원격 IPAM 드라이버&lt;/h2&gt;

&lt;p&gt;커뮤니티 및 벤더가 만든 IPAM 드라이버도 기존 시스템 또는 특수 기능과의 통합을 제공하는데 사용될 수 있다.&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;드라이버&lt;/th&gt;
&lt;th&gt;설명&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&#34;https://hub.docker.com/r/infoblox/ipam-driver/&#34; target=&#34;_blank&#34;&gt;infobox&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;기존 Infoblox 툴과 통합되는 오픈소스 IPAM 플러그인.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;blockquote&gt;
&lt;p&gt;많은 도커 플러그인이 존재하며, 더 많은 플러그인이 계속 만들어지고 있다. 도커는 &lt;a href=&#34;https://docs.docker.com/engine/extend/legacy_plugins/&#34; target=&#34;_blank&#34;&gt;가장 일반적인 플러그인&lt;/a&gt; 목록을 유지한다.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h1 id=&#34;리눅스-네트워크-기본원리&#34;&gt;리눅스 네트워크 기본원리&lt;/h1&gt;

&lt;p&gt;리눅스 커널은 TCP/IP 스택 (DNS 및 VXLAN과 같은 기타 네이티브 커널 기능과 더불어)을 매우 성숙하고 효율적으로 구현한다. 도커 네트워킹은 커널의 네트워킹 스택을 하위 레벨의 기본 요소로 사용하여 상위 레벨의 네트워크 드라이버를 만든다. 간단히 말해서, &lt;em&gt;도커 네트워킹&lt;/em&gt; 은 &lt;em&gt;리눅스 네트워킹&lt;/em&gt; 이다.&lt;/p&gt;

&lt;p&gt;기존에 구현된 리눅스 커널 기능은 고성능과 견고성을 보장한다. 가장 중요한 점은 여러 배포판과 버전에게 이식성을 제공하므로 애플리케이션의 이식성이 향샹된다는 것이다.&lt;/p&gt;

&lt;p&gt;도커가 네이티브 CNM 네트워크 드라이버를 구현하는데 사용하는 몇 가지 리눅스 네트워킹 빌딩 블록이 있다. 이 목록에는 &lt;strong&gt;리눅스 브리지&lt;/strong&gt;, &lt;strong&gt;네트워크 네임스페이스&lt;/strong&gt;, &lt;strong&gt;veth pair&lt;/strong&gt; 및 &lt;strong&gt;iptable&lt;/strong&gt;이 포함된다. 네트워크 드라이버로 구현되는 이러한 도구의 조합은 복잡한 네트워크 정책을 위한 전달 규칙, 네트워크 분할 및 관리 도구를 제공한다.&lt;/p&gt;

&lt;h2 id=&#34;리눅스-브리지&#34;&gt;리눅스 브리지&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;리눅스 브리지&lt;/strong&gt;는 리눅스 커널 내부의 물리적 스위치를 가상으로 구현한 Layer 2 디바이스이다. 트래픽을 검사하여 동적으로 학습되는 MAC 주소를 기반으로 트래픽을 전달한다. 리눅스 브리지는 많은 도커 네트워크 드라이버에서 광범위하게 사용된다. 리눅스 브리지를 리눅스 브리지의 상위 레벨 구현인 &lt;code&gt;bridge&lt;/code&gt; 도커 네트워크 드라이버와 혼동해서는 안된다.&lt;/p&gt;

&lt;h2 id=&#34;네트워크-네임스페이스&#34;&gt;네트워크 네임스페이스&lt;/h2&gt;

&lt;p&gt;리눅스 &lt;strong&gt;네트워크 네임스페이스&lt;/strong&gt;는 커널에 격리된 네트워크 스택으로 자체 인터페이스, 라우트 및 방화벽 규칙을 지니고 있다. 컨테이너와 리눅스의 보안적인 측면으로, 컨테이너를 격리하는데 사용된다. 네트워킹 용어에서는 호스트 내부의 네트워크 제어와 데이터 플레인을 격리하는 VRF와 유사하다. 네트워크 네임 스페이스는 도커 네트워크를 통해 구성된 경우가 아니면 동일한 호스트의 두 컨테이너가 서로 통신하거나 호스트 자체와 통신할 수 없음을 보장한다. 일반적으로 CNM 네트워크 드라이버는 각 컨테이너에 대해 별도의 네임스페이스를 구현한다. 그러나 컨테이너는 동일한 네트워크 네임스페이스를 공유할 수도 있고 호스트의 네트워크 네임스페이스의 일부가 될 수도 있다. 호스트 네트워크 네임스페이스 컨테이너는 호스트 인터페이스와 호스트 라우팅 테이블이다. 이 네트워크 네임스페이스를 글로벌 네트워크 네임스페이스라고 한다.&lt;/p&gt;

&lt;h2 id=&#34;가상-이더넷-디바이스&#34;&gt;가상 이더넷 디바이스&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;가상 이더넷 디바이스 (virtual ethernet device)&lt;/strong&gt; 또는 &lt;strong&gt;veth&lt;/strong&gt;는 두 네트워크 네임스페이스 사이의 연결선으로 동작하는 리눅스 네트워킹 인터페이스이다. veth는 각 네임스페이스에 단일 인터페이스가 있는 전이중 링크(full duplex link)이다. 한 인터페이스의 트래픽은 다른 인터페이스로 전달된다. 도커 네트워크를 만들 때 도커 네트워크 드라이버는 veth를 사용하여 네임스페이스간에 명시적인 연결을 제공한다. 컨테이너가 도커 네트워크에 연결되면 veth의 한쪽 끝은 컨테이너 내부에 배치되며 (일반적으로 &lt;code&gt;ethX&lt;/code&gt; 인터페이스로 표시됨), 다른 쪽은 도커 네트워크에 연결된다.&lt;/p&gt;

&lt;h2 id=&#34;iptables&#34;&gt;iptables&lt;/h2&gt;

&lt;p&gt;&lt;code&gt;iptables&lt;/code&gt;는 네이티브 패킷 필터링 시스템으로 버전 2.4 이후 리눅스 커널의 일부였다. 이는 패킷 마킹, 매스쿼레이딩(masquerading) 및 드라핑(dropping)에 대한 룰체인을 제공하는 기능이 풍부한 L3/L4 방화벽이다. 네이티브 도커 네트워크 드라이버는 iptables를 광범위하게 활용하여 네트워크 트래픽을 세분화하고, 호스트 포트 매핑을 제공하며, 로드 밸런싱 결정을 위해 트래픽을 마킹한다. (역자: &lt;a href=&#34;https://www.linux.com/blog/what-ip-masquerading-and-when-it-use&#34; target=&#34;_blank&#34;&gt;What is IP masquerading and when is it of use?&lt;/a&gt;)&lt;/p&gt;

&lt;h1 id=&#34;도커-네트워크-컨트롤-플레인&#34;&gt;도커 네트워크 컨트롤 플레인&lt;/h1&gt;

&lt;p&gt;도커 분산형 네트워크 제어 플레인은 컨트롤 플레인 데이터를 전파하는 것 외에 Swarm 스코프 도커 네트워크의 상태를 관리한다. 도커 Swarm 클러스터의 내장 기능으로 외부 KV 저장소와 같은 추가 구성 요소가 필요하지 않다. 컨트롤 플레인에서는 SWIM에 기반한 가십 프로토콜을 사용하여 도커 컨테이너 클러스터에 네트워크 상태 정보와 토폴로지를 전파한다. 가십 프로토콜은 대규모 클러스터에서 메시지 크기, 오류 감지 시간 및 컨버전스 시간을 일정하게 유지하면서 클러스터 내에서 결과적 일관성(eventual consistency)을 달성하는 데 매우 효율적이다. 이는 네트워크가 느린 컨버전스 또는 잘못된 긍정 노드 오류와 같은 확장 문제를 일으키지 않고 네트워크가 여러 노도로 확장되게 한다.&lt;/p&gt;

&lt;p&gt;컨트롤 플레인은 암호화된 채널을 통해 기밀성, 무결성 및 인증을 제공하며 매우 안전하다. 또한 네트워크마다 범위가 지정되어 있어 주어진 호스트에서 수신하는 업데이트를 크게 감소시킨다.&lt;/p&gt;

&lt;p&gt;&lt;center&gt;
&lt;img src=&#34;https://success.docker.com/api/images/.%2Frefarch%2Fnetworking%2Fimages%2Fcontrolplane.png&#34; alt=&#34;&#34; /&gt;
&lt;/center&gt;&lt;/p&gt;

&lt;p&gt;대규모 네트워크 전반에 걸쳐 빠른 컨버전스를 달성하기 위해서 함께 동작하는 몇 가지 컴포넌트로 구성되어 있다. 컨트롤 플레인의 분산 특성은 클러스터 컨트롤러 장애가 네트워크 성능에 영향을 미치지 않도록 보장한다.&lt;/p&gt;

&lt;p&gt;도커 네트워크 컨트롤 플레인의 컴포넌트는 다음과 같다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;메세지 확산 (Message Dissemination)&lt;/strong&gt;은 각 교환의 정보가 보다 큰 노드 그룹으로 확장되는 P2P 방식으로 노드를 업데이트한다. 피어 그룹의 고정된 간격과 크기는 클러스터의 크기가 확장되는 경우에도 네트워크 사용량을 일정하게 한다. 피어 간의 기하급수적인 정보 전파는 신속하고 모든 클러스터 크기에 연결되게 한다.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;장애 탐지 (Failure Detection)&lt;/strong&gt;는 네트워크 정체와 긍정 노드(false posivive node) 장애를 유발하는 특정 경로를 배제시키기 위해 직접 및 간접 hello 메시지를 사용한다.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;전체 상태 동기화 (Full State Syncs)&lt;/strong&gt;는 일관성(consistency)을 신속하게 구성하고, 네트워크 파티션을 해결하기 위해 주기적으로 발생한다.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;토폴로지 인식 (Topology Aware)&lt;/strong&gt; 알고리즘은 자신과 다른 피어 간의 상대적인 대기 시간을 이해한다. 이것은 컨버전스를 보다 빠르고 효율적으로 만드는 피어 그룹을 최적화하는 데 사용된다.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;컨트롤 플레인 암호화 (Control Plane Encryption)&lt;/strong&gt;은 네트워크 보안을 손상시킬 수 있는 중간자 공격(man in the middle) 및 다른 공격에서 보호한다.&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
&lt;p&gt;도커 네트워크 컨트롤 플레인은 &lt;a href=&#34;https://docs.docker.com/engine/swarm/&#34; target=&#34;_blank&#34;&gt;Swarm&lt;/a&gt;의 구성 요소이며 Swarm 클러스터가 운영되어야 한다.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h1 id=&#34;도커-호스트-네트워크-드라이버&#34;&gt;도커 호스트 네트워크 드라이버&lt;/h1&gt;

&lt;p&gt;&lt;code&gt;host&lt;/code&gt; 네트워크 드라이버는 도커 없이 리눅스가 사용하는 것과 동일한 네트워킹 설정이기 때문에 도커가 처음인 사람들에게 가장 친숙한다. &lt;code&gt;-net=host&lt;/code&gt;는 효과적으로 도커 네트워킹을 해제하고, 컨테이너는 호스트 운영체제의 호스트(또는 디폴트) 네트워킹 스택을 사용한다.&lt;/p&gt;

&lt;p&gt;일반적으로 다른 네트워킹 드라이버의 경우, 각 컨테이너는 자체 네트워크 네임스페이스(또는 샌드박스)에 배치되어 서로 완전한 네트워크 격리를 제공한다. &lt;code&gt;host&lt;/code&gt; 드라이버 컨테이너는 모두 동일한 호스트 네트워크 네임스페이스에 있으며 호스트의 네트워크 인터페이스와 IP 스택을 사용한다. 호스트 네트워크의 모든 컨테이너는 호스트 인터페이스에서 서로 통신할 수 있다. 네트워킹 관점에서 이는 컨테이너 없이 호스트에서 실행되는 여러 프로세스와 동일하다. 이들이 동일한 호스트 인터페이스를 사용하고 있기 때문에, 두 컨테이너가 똑같은 TCP 포트에 바인딩할 수 없다. 같은 호스트에서 여러 컨테이너를 스케줄링하는 경우, 포트 경합이 발생할 수 있다.&lt;/p&gt;

&lt;p&gt;&lt;center&gt;
&lt;img src=&#34;https://success.docker.com/api/images/.%2Frefarch%2Fnetworking%2Fimages%2Fhost-driver.png&#34; alt=&#34;&#34; /&gt;
&lt;/center&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span class=&#34;c1&#34;&gt;#호스트 네트워크에 컨테이너를 생성함
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;$ docker run -itd --net host --name C1 alpine sh
$ docker run -itd --net host --name nginx

&lt;span class=&#34;c1&#34;&gt;#호스트 eth0 표시
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;$ ip add &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; grep eth0
&lt;span class=&#34;m&#34;&gt;2&lt;/span&gt;: eth0: &amp;lt;BROADCAST,MULTICAST,UP,LOWER_UP&amp;gt; mtu &lt;span class=&#34;m&#34;&gt;9001&lt;/span&gt; qdisc mq state UP group default qlen &lt;span class=&#34;m&#34;&gt;1000&lt;/span&gt;
	inet &lt;span class=&#34;m&#34;&gt;172&lt;/span&gt;.31.21.213/20 brd &lt;span class=&#34;m&#34;&gt;172&lt;/span&gt;.31.31.255 scope global eth0

&lt;span class=&#34;c1&#34;&gt;#C1으로부터 eth0 표시
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;$ docker run -it --net host --name C1 alpine ip add &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; grep eth0
&lt;span class=&#34;m&#34;&gt;2&lt;/span&gt;: eth0: &amp;lt;BROADCAST,MULTICAST,UP,LOWER_UP&amp;gt; mtu &lt;span class=&#34;m&#34;&gt;9001&lt;/span&gt; qdisc mq state UP qlen &lt;span class=&#34;m&#34;&gt;1000&lt;/span&gt;
	inet &lt;span class=&#34;m&#34;&gt;172&lt;/span&gt;.31.21.213/20 brd &lt;span class=&#34;m&#34;&gt;172&lt;/span&gt;.31.31.255 scope global eth0

&lt;span class=&#34;c1&#34;&gt;#C1의 locahost를 통해 nginx 컨테이너에 연결
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;$ curl localhost
!DOCTYPE html&amp;gt;
&amp;lt;html&amp;gt;
&amp;lt;head&amp;gt;
&amp;lt;title&amp;gt;Welcome to nginx!&amp;lt;/title&amp;gt;
...&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이 예제에서, 컨테이너가 &lt;code&gt;host&lt;/code&gt; 네트워크를 사용할 때 호스트, &lt;code&gt;C1&lt;/code&gt; 및 &lt;code&gt;nginx&lt;/code&gt;는 모두 &lt;code&gt;eth0&lt;/code&gt;에 대해 동일한 인터페이스를 공유한다. 이는 &lt;code&gt;host&lt;/code&gt;를 멀티 테넌트(Multi-tenant) 또는 보안 수준이 높은 애플리케이션에 적합하지 않게 만든다. &lt;code&gt;host&lt;/code&gt; 컨테이너는 호스트의 다른 모든 컨테이너에 네트워크 액세스 권한을 가진다. &lt;code&gt;C1&lt;/code&gt;에서 &lt;code&gt;curl nginx&lt;/code&gt;를 실행할 때 예제와 같이 &lt;code&gt;localhost&lt;/code&gt;를 사용하여 컨테이너 간에 통신이 가능하다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;host&lt;/code&gt; 드라이버를 사용하는 경우, 도커는 포트 매핑 또는 라우팅 규칙과 같은 컨테이너 네트워킹 스택의 어떤 부분도 관리하지 않는다. 이것은 &lt;code&gt;-p&lt;/code&gt;와 &lt;code&gt;--icc&lt;/code&gt;와 같은 일반적인 네트워킹 플래그가 호스트 드라이버에 아무런 의미가 없다는 것을 의미한다. 이들은 무시된다. 이는 &lt;code&gt;host&lt;/code&gt; 네트워킹을 네트워킹 드라이버 중에서 가장 간단하게 그리고 가장 낮은 지연 시간(latency)을 갖게 한다. 트래픽 경로는 컨테이너 프로세스에서 호스트 인터페이스로 직접 이동하며, 컨테이너화되지 않은 프로세스와 동등한 베어메탈 성능을 제공한다.&lt;/p&gt;

&lt;p&gt;전체 호스트 액세스 및 부재한 자동화된 정책의 관리 방식들은 &lt;code&gt;host&lt;/code&gt; 드라이버를 일반 네트워크 드라이버로 사용하기에 적합하지 않을 수 있다. 그러나, &lt;code&gt;host&lt;/code&gt; 초고성능 애플리케이션 또는 애플리케이션 트러블슈팅과 같은 유즈케이스에 적용할 수 있는 몇 가지 흥미로운 속성을 가지고 있다.&lt;/p&gt;

&lt;h1 id=&#34;도커-브리지-네트워크-드라이버&#34;&gt;도커 브리지 네트워크 드라이버&lt;/h1&gt;

&lt;p&gt;이 섹션에서는 기본 도커 브리지 네트워크와 사용자 정의 브리지 네트워크를 설명한다.&lt;/p&gt;

&lt;h2 id=&#34;기본-도커-브리지-네트워크&#34;&gt;기본 도커 브리지 네트워크&lt;/h2&gt;

&lt;p&gt;도커 엔진을 실행하는 호스트에는 기본적으로 &lt;code&gt;bridge&lt;/code&gt; 라는 로컬 도커 네트워크가 있다. 이 네트워크는 &lt;code&gt;docker0&lt;/code&gt; 이라 불리는 리눅스 브리지를 인스턴스화하는 &lt;code&gt;bridge&lt;/code&gt; 네트워크 드라이버를 사용하여 생성된다. 이는 혼란스럽게 들릴지도 모른다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;bridge&lt;/code&gt;는 도커 네트워크의 이름이다.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;brdige&lt;/code&gt;는 이 네트워크가 생성되는 네트워크 드라이버 또는 템플릿이다.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;docker0&lt;/code&gt;은 이 네트워크를 구현하는데 사용되는 커널 빌딩 블록인 리눅스 브리지의 이름이다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;독립 실행형 도커 호스트에서, &lt;code&gt;bridge&lt;/code&gt;는 다른 네트워크가 지정되지 않은 경우 컨테이너가 연결되는 기본 네트워크다. 다음 예에서 컨테이너는 네트워크 매개변수 없이 생성된다. 도커 엔진은 기본적으로 이를 브리지 네트워크에 연결한다. 컨테이너 내부 &lt;code&gt;eth0&lt;/code&gt;을 주목하라. 이는 &lt;code&gt;bridge&lt;/code&gt; 드라이버에 의해 생성되고 도커 네이티브 IPAM 드라이버에 의해 주소가 지정된다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span class=&#34;c1&#34;&gt;#&amp;#34;c1&amp;#34;이라는 이름의 busybox 컨테이너를 만들고 해당 IP 주소를 표시
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;host $ docker run -it --name c1 busybox sh
c1 &lt;span class=&#34;c1&#34;&gt;# ip 주소
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;4&lt;/span&gt;: eth0@if5: &amp;lt;BROADCAST,MULTICAST,UP,LOWER_UP,M-DOWN&amp;gt; mtu &lt;span class=&#34;m&#34;&gt;1500&lt;/span&gt; qdisc noqueue
	link/ether &lt;span class=&#34;m&#34;&gt;02&lt;/span&gt;:42:ac:11:00:02 brd ff:ff:ff:ff:ff:ff
	inet &lt;span class=&#34;m&#34;&gt;172&lt;/span&gt;.17.0.2/16 scope global eth0
...&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;컨테이너 인터페이스의 MAC 주소는 동적으로 생성되고 충돌을 피하기 위해 IP 주소를 포함한다. 여기서 &lt;code&gt;ac:11:00:02&lt;/code&gt;는 172.17.0.2에 해당한다.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;호스트의 &lt;code&gt;brctl&lt;/code&gt; 툴은 호스트 네트워크 네임 스페이스에 존재하는 리눅스 브리지를 표시한다. &lt;code&gt;docker0&lt;/code&gt;이라 부르는 단일 브리지가 표시된다. &lt;code&gt;docker0&lt;/code&gt;에는 하나의 인터페이스 &lt;code&gt;vetha3788c4&lt;/code&gt;가 있는데, 이 인터페이스는 브리지에서 컨테이너 &lt;code&gt;c1&lt;/code&gt; 내부의 &lt;code&gt;eth0&lt;/code&gt; 인터페이스에 대한 연결을 제공한다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;host $ brctl show
bridge name      bridge id            STP enabled    interfaces
docker0          &lt;span class=&#34;m&#34;&gt;8000&lt;/span&gt;.0242504b5200    no             vethb64e8b8&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;컨테이너 &lt;code&gt;c1&lt;/code&gt; 내부의 컨테이너 라우팅 테이블은 컨테이너의 &lt;code&gt;eth0&lt;/code&gt;으로 트래픽을 전달하고, 따라서 &lt;code&gt;docker0&lt;/code&gt; 브리지로 이동한다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;c1# ip 라우트
default via &lt;span class=&#34;m&#34;&gt;172&lt;/span&gt;.17.0.1 dev eth0
&lt;span class=&#34;m&#34;&gt;172&lt;/span&gt;.17.0.0/16 dev eth0  src &lt;span class=&#34;m&#34;&gt;172&lt;/span&gt;.17.0.2&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;컨테이너는 연결되는 네트워크 수에 따라 0개에서 다수의 인터페이스를 가질 수 있다. 각 도커 네트워크는 컨테이너 마다 하나의 인터페이스만 가질 수 있다.&lt;/p&gt;

&lt;p&gt;&lt;center&gt;
&lt;img src=&#34;https://success.docker.com/api/images/.%2Frefarch%2Fnetworking%2Fimages%2Fbridge-driver.png&#34; alt=&#34;&#34; /&gt;
&lt;/center&gt;&lt;/p&gt;

&lt;p&gt;호스트 라우팅 테이블이 보여주는 것처럼, 글로벌 네트워크 네임스페이스의 IP 인터페이스는 이제 &lt;code&gt;docker0&lt;/code&gt;을 포함한다. 호스트 라우팅 테이블은 외부 네트워크에서 &lt;code&gt;doker0&lt;/code&gt;과 &lt;code&gt;eth0&lt;/code&gt; 사이의 연결시켜 컨테이너 내부에서 외부 네트워크로의 경로를 완성한다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;host $ ip route
default via &lt;span class=&#34;m&#34;&gt;172&lt;/span&gt;.31.16.1 dev eth0
&lt;span class=&#34;m&#34;&gt;172&lt;/span&gt;.17.0.0/16 dev docker0  proto kernel  scope link  src &lt;span class=&#34;m&#34;&gt;172&lt;/span&gt;.17.42.1
&lt;span class=&#34;m&#34;&gt;172&lt;/span&gt;.31.16.0/20 dev eth0  proto kernel  scope link  src &lt;span class=&#34;m&#34;&gt;172&lt;/span&gt;.31.16.102&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;기본적으로 &lt;code&gt;bridge&lt;/code&gt;는 기존 호스트 인터페이스와 겹치지 않는 172.[17-31].0.0/16 또는 192.168.[0-240].0/20 범위에서 서브넷 한 개가 할당된다. 또한 기본 &lt;code&gt;bridge&lt;/code&gt; 네트워크는 사용자 제공 주소 범위를 사용하도록 구성할 수 있다. 또한 도커가 생성하는 대신 기존 Linux 브리지가 &lt;code&gt;bridge&lt;/code&gt; 네트워크에 사용될 수 있다. &lt;code&gt;bridge&lt;/code&gt; 사용자 정의에 대한 자세한 내용은 &lt;a href=&#34;https://docs.docker.com/engine/userguide/networking/default_network/custom-docker0/&#34; target=&#34;_blank&#34;&gt;도커 엔진 문서&lt;/a&gt;를 참조하라.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;기본 &lt;code&gt;bridge&lt;/code&gt; 네트워크는 레거시 &lt;a href=&#34;https://docs.docker.com/engine/userguide/networking/default_network/dockerlinks/&#34; target=&#34;_blank&#34;&gt;링크&lt;/a&gt;를 지원하는 유일한 네트워크다. 이름 기반 서비스 검색 (Name-based service discovery) 및 사용자 제공 IP 주소는 기본 &lt;code&gt;bridge&lt;/code&gt; 네트워크에 의해 지원되지 않는다.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&#34;사용자-정의-브리지-네트워크&#34;&gt;사용자 정의 브리지 네트워크&lt;/h2&gt;

&lt;p&gt;기본 네트워크 외에도, 사용자들은 모든 네트워크 드라이버 유형의 &lt;strong&gt;사용자 정의 네트워크 (user-defined-network)&lt;/strong&gt; 라고 불리는 네트워크를 만들 수 있다. 사용자 정의 &lt;code&gt;bridge&lt;/code&gt; 네트워크의 경우 호스트에 새 리눅스 브리지를 설정한다. 기본 &lt;code&gt;bridge&lt;/code&gt; 네트워크와 달리, 사용자 정의 네트워크는 수동 IP 주소와 서브넷 할당을 지원한다. 할당이 지정되지 않은 경우에는, 도커의 기본 IPAM 드라이버가 프라이빗 IP 공간에서 사용할 수 있는 다음 서브넷을 할당한다.&lt;/p&gt;

&lt;p&gt;&lt;center&gt;
&lt;img src=&#34;https://success.docker.com/api/images/.%2Frefarch%2Fnetworking%2Fimages%2Fbridge2.png&#34; alt=&#34;&#34; /&gt;
&lt;/center&gt;&lt;/p&gt;

&lt;p&gt;사용자 정의 &lt;code&gt;bridge&lt;/code&gt; 네트워크 아래에는 2개의 컨테이너가 연결되어 있다. 서브넷이 지정되고, 네트워크는 &lt;code&gt;my_bridge&lt;/code&gt;로 이름이 붙여진다. 하나의 컨테이너에는 IP 매개변수가 제공되지 않으므로, IPAM 드라이버는 서브넷에 사용 가능한 다음 IP를 할당한다. 다른 컨테이너에는 IP가 지정되어 있다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;$ docker network create -d bridge --subnet &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;.0.0.0/24 my_bridge
$ docker run -itd --name c2 --net my_bridge busybox sh
$ docker run -itd --name c3 --net my_bridge --ip &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;.0.0.254 busybox sh&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;brctl&lt;/code&gt;은 이제 호스트에 두번째 리눅스 &lt;code&gt;bridge&lt;/code&gt;를 나타낸다. 리눅스 브리지의 이름인 &lt;code&gt;br-4bcc22f5e5b9&lt;/code&gt;는 &lt;code&gt;my_bridge&lt;/code&gt; 네트워크의 네트워크 ID와 일치한다. &lt;code&gt;my_bridge&lt;/code&gt;는 또한 컨테이너 &lt;code&gt;c2&lt;/code&gt;와 &lt;code&gt;c3&lt;/code&gt;에 연결된 2개의 &lt;code&gt;veth&lt;/code&gt; 인터페이스가 있다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;$ brctl show
bridge name      bridge id            STP enabled    interfaces
br-b5db4578d8c9  &lt;span class=&#34;m&#34;&gt;8000&lt;/span&gt;.02428d936bb1    no             vethc9b3282
														vethf3ba8b5
docker0          &lt;span class=&#34;m&#34;&gt;8000&lt;/span&gt;.0242504b5200    no             vethb64e8b8

$ docker network ls
NETWORK ID          NAME                DRIVER              SCOPE
b5db4578d8c9        my_bridge           bridge              &lt;span class=&#34;nb&#34;&gt;local&lt;/span&gt;
e1cac9da3116        bridge              bridge              &lt;span class=&#34;nb&#34;&gt;local&lt;/span&gt;
...&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;글로벌 네트워크 네임스페이스 인터페이스 목록은 도커 엔진에 의해 인스턴스화된 리눅스 네트워킹 서킷을 보여준다. 각 &lt;code&gt;veth&lt;/code&gt; 및 리눅스 브리지 인터페이스는 리눅스 브리지 중 하나와 컨테이너 네트워크 네임스페이스 사이의 링크로 나타난다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;$ ip link

&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;: lo: &amp;lt;LOOPBACK,UP,LOWER_UP&amp;gt; mtu &lt;span class=&#34;m&#34;&gt;65536&lt;/span&gt;
&lt;span class=&#34;m&#34;&gt;2&lt;/span&gt;: eth0: &amp;lt;BROADCAST,MULTICAST,UP,LOWER_UP&amp;gt; mtu &lt;span class=&#34;m&#34;&gt;9001&lt;/span&gt;
&lt;span class=&#34;m&#34;&gt;3&lt;/span&gt;: docker0: &amp;lt;BROADCAST,MULTICAST,UP,LOWER_UP&amp;gt; mtu &lt;span class=&#34;m&#34;&gt;1500&lt;/span&gt;
&lt;span class=&#34;m&#34;&gt;5&lt;/span&gt;: vethb64e8b8@if4: &amp;lt;BROADCAST,MULTICAST,UP,LOWER_UP&amp;gt; mtu &lt;span class=&#34;m&#34;&gt;1500&lt;/span&gt;
&lt;span class=&#34;m&#34;&gt;6&lt;/span&gt;: br-b5db4578d8c9: &amp;lt;BROADCAST,MULTICAST,UP,LOWER_UP&amp;gt; mtu &lt;span class=&#34;m&#34;&gt;1500&lt;/span&gt;
&lt;span class=&#34;m&#34;&gt;8&lt;/span&gt;: vethc9b3282@if7: &amp;lt;BROADCAST,MULTICAST,UP,LOWER_UP&amp;gt; mtu &lt;span class=&#34;m&#34;&gt;1500&lt;/span&gt;
&lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;: vethf3ba8b5@if9: &amp;lt;BROADCAST,MULTICAST,UP,LOWER_UP&amp;gt; mtu &lt;span class=&#34;m&#34;&gt;1500&lt;/span&gt;
...&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&#34;독립-실행형-컨테이너의-외부-접근&#34;&gt;독립 실행형 컨테이너의 외부 접근&lt;/h2&gt;

&lt;p&gt;기본적으로 동일한 도커 네트워크의 모든 컨테이너 (멀티 호스트 swarm 스코프 또는 local 스코프)는 모든 포트에서 서로 연결된다. 서로 다른 도커 네트워크와 외부 도커에서 발생하는 컨테이너 인그레스 트래픽 간의 통신은 방화벽으로 보호된다. 이는 컨테이너 애플리케이션을 외부 세계 및 서로에게서 보호하는 기본적인 보안 측면이다. 자세한 내용은 &lt;a href=&#34;https://success.docker.com/api/asset/.%2Frefarch%2Fnetworking%2F#security&#34; target=&#34;_blank&#34;&gt;네트워크 보안&lt;/a&gt;을 참조하라.&lt;/p&gt;

&lt;p&gt;대부분 유형의 도커 네트워크(&lt;code&gt;bridge&lt;/code&gt;와 &lt;code&gt;overlay&lt;/code&gt; 포함)의 경우 애플리케이션을 위한 외부 인그레스 액세스를 명시적으로 부여해야 한다. 이는 내부 포트 매핑을 통해 이루어진다. 도커는 내부 컨테이너 인터페이스에 호스트 인터페이스에 노출된 포트를 퍼블리싱한다. 다음 다이어그램은 컨테이너 &lt;code&gt;C2&lt;/code&gt;로의 인그레스(하향 화살표) 및 엔그레스(상단 화살표) 트래픽을 나타낸다. 아웃바운드(엔그레스) 컨테이너 트래픽은 기본적으로 허용된다. 컨테이너에 의해 시작된 엔그레스 연결은 임시 포트(일반적으로 32768 - 60999 범위)에 마스커레이딩되거나 SNAT된다. 이 연결에 대한 반송 트래픽(return traffic)이 허용되므로 컨테이너는 임시 포트에서 호스트에 라우팅할 수 있는 최상의 IP 주소를 사용한다.&lt;/p&gt;

&lt;p&gt;인그레스 액세스는 명시적인 포트 퍼블리싱을 통해 제공된다. 포트 퍼블리싱은 도커 엔진에 의해 수행되며 UCP 또는 엔진 CLI를 통해 제어할 수 있다. 서비스나 컨테이너를 노출하도록 특정 또는 무작위로 선택된 포트를 구성할 수 있다. 포트는 특정(또는 모든) 호스트 인터페이스에서 수신 대기하도록 설정할 수 있으며, 모든 트래픽은 이 포트에서 포트 및 컨테이너 내부의 인터페이스로 매핑된다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;$ docker run -d --name C2 --net my_bridge -p &lt;span class=&#34;m&#34;&gt;5000&lt;/span&gt;:80 nginx&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;center&gt;
&lt;img src=&#34;https://success.docker.com/api/images/.%2Frefarch%2Fnetworking%2Fimages%2Fnat.png&#34; alt=&#34;&#34; /&gt;
&lt;/center&gt;&lt;/p&gt;

&lt;p&gt;외부 액세스는 도커 CLI 또는 UCP에서 &lt;code&gt;--publish/-p&lt;/code&gt;를 사용하여 설정되며, 위의 명령을 실행한 후 다이어그램은 컨테이너 &lt;code&gt;C2&lt;/code&gt;가 &lt;code&gt;my_bridge&lt;/code&gt; 네트워크에 연결되고 IP 주소가 &lt;code&gt;10.0.0.2&lt;/code&gt;인 것으로 표시된다. 컨테이너는 &lt;code&gt;192.168.0.2&lt;/code&gt;의 호스트 인터페이스의 포트 &lt;code&gt;5000&lt;/code&gt;에서 외부 세계에 서비스를 알린다. 이 인터페이스:포트로 전송되는 모든 트래픽은 컨테이너 인터페이스의 &lt;code&gt;10.0.2:80&lt;/code&gt;에 퍼블리싱된 포트다.&lt;/p&gt;

&lt;p&gt;컨테이너에 의해 시작된 아웃바운드 트래픽은 호스트 인터페이스 &lt;code&gt;192.168.0.2&lt;/code&gt;의 사용 후 삭제 포트 &lt;code&gt;32768&lt;/code&gt;에서 소싱되도록 마스커레이딩된다. 반송 트래픽(return traffic)은 목적지와 동일한 IP 주소와 포트를 사용하며 내부적으로 다시 컨테이너 주소:포트 &lt;code&gt;10.0.2:33920&lt;/code&gt;로 마스커레이딩된다. 포트 게시를 사용할 때, 네트워크의 외부 트래픽은 항상 호스트 IP와 노출된 포트를 사용하며 컨테이너 IP와 내부 포트는 사용하지 않는다.&lt;/p&gt;

&lt;p&gt;도커 엔진의 클러스터에 컨테이너와 서비스를 노출하는 방법에 대한 자세한 내용은 &lt;a href=&#34;https://success.docker.com/api/asset/.%2Frefarch%2Fnetworking%2F#swarm-external&#34; target=&#34;_blank&#34;&gt;Swarm 서비스 외부 액세스&lt;/a&gt;를 참조하라.&lt;/p&gt;

&lt;h1 id=&#34;오버레이-드라이버-네트워크-아키텍처&#34;&gt;오버레이 드라이버 네트워크 아키텍처&lt;/h1&gt;

&lt;p&gt;네이티브 도커 &lt;code&gt;overlay&lt;/code&gt; 네트워크 드라이버는 멀티 호스트 네트워킹의 여러가지 문제를 근본적으로 단순화한다. &lt;code&gt;overlay&lt;/code&gt; 드라이버를 사용하면, 멀티 호스트 네트워크가 외부 프로비저닝이나 컴포넌트가 없는 도커 내부의 일급 시민이다. &lt;code&gt;overlay&lt;/code&gt;는 swarm 분산 컨트롤 플레인을 사용하여 대규모 클러스터에 걸쳐 중앙 집중식 관리, 안정성 및 보안을 제공한다.&lt;/p&gt;

&lt;h2 id=&#34;vxlan-데이터-플레인&#34;&gt;VXLAN 데이터 플레인&lt;/h2&gt;

&lt;p&gt;&lt;code&gt;overlay&lt;/code&gt; 드라이버는 기본 물리적 네트워크(언더레이)와 컨테이너 네트워크를 분리하는 업계 표준 VXLAN 데이터 플레인을 활용한다. 도커 오버레이 네트워크는 컨테이너 트래픽을 VXLAN 헤더에 컨테이너 트래픽을 캡슐화하여 물리적 Layer 2 또는 Layer 3 네트워크를 통과할 수 있도록 한다. 오버레이를 사용하면 기본 물리적 토폴로지에 상관없이 네트워크 분할을 동적으로 제어하기 쉽다. 표준 IETF VXLAN 헤더를 사용해서 네트워크 트래픽을 검사하고 분석하기 위한 표준 툴링을 꾀할 수 있다.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;VXLAN은 버전 3.7부터 리눅스 커널의 일부였으며, 도커는 커널의 기본 VXLAN 기능을 사용하여 오버레이 네트워크를 생성한다. 도커 오버레이 데이터패스는 전적으로 커널 공간에 있다. 따라서 컨텍스트 스위치가 줄어들고 CPU 오버헤드가 감소하며, 대기 시간이 짧고, 애플리케이션과 물리적 NIC 간의 직접적인 트래픽 경로가 생긴다.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;IETF VXLAN(&lt;a href=&#34;https://datatracker.ietf.org/doc/rfc7348/&#34; target=&#34;_blank&#34;&gt;RFC 7348&lt;/a&gt;)은 Layer 3 네트워크에서 Layer 2 세그먼트를 오버레이하는 데이터 계층 캡슐화 형식이다. VXLAN은 표준 IP 네트워크에서 사용하도록 설계되었으며 공유된 물리적 네트워크 인프라에서 대규모 멀티 테넌트(Multi-tenant) 설계를 지원할 수 있다. 기존 사내 및 클라우드 기반 네트워크는 VXLAN을 투명하게 지원할 수 있다.&lt;/p&gt;

&lt;p&gt;VXLAN은 언더레이 IP/UDP 헤더 내에 컨테이너 Layer 2 프레임을 배치하는 MAC-in-UDP 캡슐화로 정의된다. 언더레이 IP/UDP 헤더는 언더레이 네트워크의 호스트 간의 전송을 제공한다. 오버레이는 지정된 오버레이 네트워크에 참여하는 각 호스트 간에 점 대 다중점 연결로 존재하는 상태 비저장 VXLAN 터널이다. 오버레이는 언더레이 토폴로지와 독립적이기 때문에 애플리케이션이 더 쉽게 이동할 수 있다. 따라서, 네트워크 정책 및 연결성은 온프레미스, 개발자 데스크탑, 또는 퍼블릭 클라우드에 관계없이 애플리케이션과 함께 전송될 수 있다.&lt;/p&gt;

&lt;p&gt;&lt;center&gt;
&lt;img src=&#34;https://success.docker.com/api/images/.%2Frefarch%2Fnetworking%2Fimages%2Fpacketwalk.png&#34; alt=&#34;&#34; /&gt;
&lt;/center&gt;&lt;/p&gt;

&lt;p&gt;이 다이어그램에서 오버레이 네트워크의 패킷 흐름이 표시된다. 다음은 &lt;code&gt;c1&lt;/code&gt;이 공유 오버레이 네트워크에서 &lt;code&gt;c2&lt;/code&gt; 패킷을 전송할 때 수행되는 단계이다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;c1&lt;/code&gt;은 &lt;code&gt;c2&lt;/code&gt;에 대해 DNS 조회를 한다. 두 컨테이너가 동일한 오버레이 네트워크에 있으므로 도커 엔진 로컬 DNS 서버는 &lt;code&gt;c2&lt;/code&gt;를 오버레이 IP 주소 &lt;code&gt;10.0.0.3&lt;/code&gt;으로 확인한다.&lt;/li&gt;
&lt;li&gt;오버레이 네트워크는 L2 세그먼트이므로 &lt;code&gt;c1&lt;/code&gt;은 &lt;code&gt;c2&lt;/code&gt;의 MAC 주소로 지정된 L2 프레임을 생성한다.&lt;/li&gt;
&lt;li&gt;프레임은 &lt;code&gt;overlay&lt;/code&gt; 네트워크 드라이버에 의해 VXLAN 헤더로 캡슐화된다. 분산 오버레이 컨트롤 플레인은 각 VXLAN 터널 엔드포인트의 위치와 상태를 관리하므로 &lt;code&gt;c2&lt;/code&gt;가 &lt;code&gt;192.168.0.3&lt;/code&gt;의 물리적 주소에 있는 &lt;code&gt;host-B&lt;/code&gt;에 있다는 것을 알고 있다. 이 주소는 언더레이 IP 헤더의 대상 주소가 된다.&lt;/li&gt;
&lt;li&gt;일단 캡슐화되면 패킷이 전송된다. 물리적 네트워크는 VXLAN 패킷을 올바른 호스트로 라우팅하거나 브리징하는 역할을 한다.&lt;/li&gt;
&lt;li&gt;패킷은 &lt;code&gt;host-B&lt;/code&gt;의 &lt;code&gt;eth0&lt;/code&gt; 인터페이스에 도착하며 &lt;code&gt;overlay&lt;/code&gt; 네트워크 드라이버에 의해 캡슐 해제된다. &lt;code&gt;c1&lt;/code&gt;의 원래 L2 프레임은 &lt;code&gt;c2&lt;/code&gt;의 &lt;code&gt;eth0&lt;/code&gt; 인터페이스와 수신 대기중인 애플리케이션까지 전달된다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;오버레이-드라이버-내부-아키텍처&#34;&gt;오버레이 드라이버 내부 아키텍처&lt;/h2&gt;

&lt;p&gt;도커 Swarm 컨트롤 플레인은 오버레이 네트워크에 대한 모든 프로비저닝을 자동화한다. VXLAN 설정 또는 리눅스 네트워킹 설정은 필요없다. 오버레이의 옵션 기능인 데이터 플레인 암호화도 네트워크가 생성될 때 오버레이 드라이버에 의해 자동으로 설정된다. 사용자 또는 네트워크 운영자는 네트워크를 정의하고 (&lt;code&gt;docker network create -d overlay ...&lt;/code&gt;) 컨테이너를 해당 네트워크에 연결하기만 하면 된다.&lt;/p&gt;

&lt;p&gt;&lt;center&gt;
&lt;img src=&#34;https://success.docker.com/api/images/.%2Frefarch%2Fnetworking%2Fimages%2Foverlayarch.png&#34; alt=&#34;&#34; /&gt;
&lt;/center&gt;&lt;/p&gt;

&lt;p&gt;오버레이 네트워크 생성 중에 도커 엔진은 각 호스트에 오버레이에 필요한 네트워크 인프라를 만든다. 리눅스 브리지는 연결된 VXLAN 인터페이스와 함께 오버레이별로 생성된다. 도커 엔진은 해당 네트워크에 연결된 컨테이너가 호스트에 예약되어 있을 때만 호스트의 오버레이 네트워크를 지능적으로 인스턴스화한다. 이렇게 하면 연결된 컨테이너가 없는 오버레이 네트워크의 무질서한 확산을 방지할 수 있다.&lt;/p&gt;

&lt;p&gt;다음 예제는 오버레이 네트워크를 생성하고 그 네트워크에 컨테이너를 연결한다. 도커 Swarm/UCP는 자동으로 오버레이 네트워크를 생성한다. 다음 예제는 Swarm 또는 UCP를 미리 설정해야 한다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;c1&#34;&gt;#오버레이 드라이버로 &amp;#34;ovnet&amp;#34;이라는 이름의 오버레이 생성
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;$ docker network create -d overlay --subnet &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;.1.0.0/24 ovnet

&lt;span class=&#34;c1&#34;&gt;#nginx 이미지에서 서비스를 생성하여 &amp;#34;ovnet&amp;#34; 오버레이 네트워크에 연결
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;$ docker service create --network ovnet nginx&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;오버레이 네트워크가 생성되면 호스트 내부에 여러 개의 인터페이스와 브리지가 생성되고, 이 컨테이너 내부에 두 개의 인터페이스도 생성된다는 점에 주목해야 한다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;c1&#34;&gt;#이 서비스의 컨테이너를 들여다 보면 내부 인터페이스를 볼 수 있다
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;conatiner$ ip address

&lt;span class=&#34;c1&#34;&gt;#docker_gwbridge 네트워크
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;52&lt;/span&gt;: eth0@if55: &amp;lt;BROADCAST,MULTICAST,UP,LOWER_UP&amp;gt; mtu &lt;span class=&#34;m&#34;&gt;1500&lt;/span&gt;
    link/ether &lt;span class=&#34;m&#34;&gt;02&lt;/span&gt;:42:ac:14:00:06 brd ff:ff:ff:ff:ff:ff
    inet &lt;span class=&#34;m&#34;&gt;172&lt;/span&gt;.20.0.6/16 scope global eth1
       valid_lft forever preferred_lft forever
    inet6 fe80::42:acff:fe14:6/64 scope link
       valid_lft forever preferred_lft forever

&lt;span class=&#34;c1&#34;&gt;#오버레이 네트워크 인터페이스
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;54&lt;/span&gt;: eth1@if53: &amp;lt;BROADCAST,MULTICAST,UP,LOWER_UP&amp;gt; mtu &lt;span class=&#34;m&#34;&gt;1450&lt;/span&gt;
    link/ether &lt;span class=&#34;m&#34;&gt;02&lt;/span&gt;:42:0a:01:00:03 brd ff:ff:ff:ff:ff:ff
    inet &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;.1.0.3/24 scope global eth0
       valid_lft forever preferred_lft forever
    inet &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;.1.0.2/32 scope global eth0
       valid_lft forever preferred_lft forever
    inet6 fe80::42:aff:fe01:3/64 scope link
       valid_lft forever preferred_lft forever&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;현재 호스트에 있는 두 개의 브리지에 해당하는 컨테이너 내부에 두 개의 인터페이스가 생성되었다. 오버레이 네트워크에서, 각 컨테이너에는 &lt;code&gt;overlay&lt;/code&gt;와 &lt;code&gt;docker_gwbridge&lt;/code&gt;를 각각 연결하는 최소한 두 개의 인터페이스가 있다.&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&#34;center&#34;&gt;브리지&lt;/th&gt;
&lt;th&gt;목적&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td align=&#34;center&#34;&gt;overlay&lt;/td&gt;
&lt;td&gt;오버레이 네트워크로의 인그레스 및 엔그레스는  VXLAN이 캡슐화하고 (선택적으로) 동일한 오버레이 네트워크의 컨테이너 간에 전송되는 트래픽을 암호화함. 이 특정 오버레이에 참여하는 모든 호스트에 걸쳐 오버레이를 확장함. 호스트의 오버레이 서브넷당 하나씩 존재하며 지정된 특정 오버레이 네트워크 이름과 동일한 이름을 가지고 있음.&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td align=&#34;center&#34;&gt;docker_gwbridge&lt;/td&gt;
&lt;td&gt;클러스터에서 나가는 트래픽에 대한 엔그레스 브리지. 호스트당 하나의 &lt;code&gt;docker_gwbridgege&lt;/code&gt; 만 존재. 이 브리지의 컨테이너 대 컨테이너 트래픽은 인그레스/엔그레스 트래픽 플로우만 허용함.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;blockquote&gt;
&lt;p&gt;도커 오버레이 드라이버는 도커 엔진 1.9 이후 존재해왔으며, 네트워크 상태를 관리하기 위해 외부 K/V 스토어가 필요했다. 도커 엔진 1.12는 더 이상 외부 저장소가 필요하지 않도록 컨트롤 플레인 스테이트를 도커 엔진에 통합했다.  또한 1.12는 암호화와 서비스 로드 밸런싱을 포함한 몇 가지 새로운 기능을 도입했다. 도입된 네트워킹 기능은 이러한 기능을 지원하는 도커 엔진 버전이 필요하며, 이러한 기능을 이전 버전의 도커 엔진과 함께 사용하는 것은 지원하지 않는다.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h1 id=&#34;도커-서비스를-위한-외부-액세스&#34;&gt;도커 서비스를 위한 외부 액세스&lt;/h1&gt;

&lt;p&gt;Swarm &amp;amp; UCP는 클러스터 포트 퍼블리싱 외부에서 서비스에 액세스한다. 서비스의 인그레스 및 엔그레스는 중앙 집중식 게이트웨이에 의존하지 않고 특정 서비스 태스크가 실행 중인 호스트에 인그레스/엔그레스가 분산된다. 서비스를 위한 포트 퍼블리싱에는 &lt;code&gt;host&lt;/code&gt; 모드와 &lt;code&gt;ingress&lt;/code&gt; 모드라는 두 가지 모드가 있다.&lt;/p&gt;

&lt;h2 id=&#34;인그레스-모드-서비스-퍼블리싱&#34;&gt;인그레스 모드 서비스 퍼블리싱&lt;/h2&gt;

&lt;p&gt;&lt;code&gt;ingress&lt;/code&gt; 모드 포트 퍼블리싱은 &lt;a href=&#34;https://success.docker.com/api/asset/.%2Frefarch%2Fnetworking%2F#routingmesh&#34; target=&#34;_blank&#34;&gt;Swarm Routing Mesh&lt;/a&gt;를 사용하여 서비스 태스크 간에 로드 밸런싱을 적용한다. 인그레스 모드는 모든 UCP/Swarm 노드에 노출된 포트를 퍼블리싱한다. 퍼블리시된 포트로 들어오는 트래픽은 라우팅 메쉬에 의해 로드 밸런싱되고 라운드 로빈 로드 밸런싱을 통해 서비스의 정상적인 태스크 중 하나로 이동된다. 특정 호스트가 서비스 태스크를 실행하고 있지 않더라도 이 포트는 호스트에 퍼블리시되고 태스크가 있는 호스트에 로드 밸런싱된다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;docker service create --replicas &lt;span class=&#34;m&#34;&gt;2&lt;/span&gt; --publish &lt;span class=&#34;nv&#34;&gt;mode&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;ingress,target&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;80&lt;/span&gt;,published&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;8080&lt;/span&gt; nginx&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;mode=ingress&lt;/code&gt;는 서비스의 기본 모드다. 이 명령은 축약 버전 &lt;code&gt;-p 80:8080&lt;/code&gt;으로도 가능하다. 포트 &lt;code&gt;8080&lt;/code&gt;은 클러스터의 모든 호스트에 노출되며, 이 서비스에서는 두 컨테이너에 대한 로드 밸런성이 이루어진다.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&#34;호스트-모드-서비스-퍼블리싱&#34;&gt;호스트 모드 서비스 퍼블리싱&lt;/h2&gt;

&lt;p&gt;&lt;code&gt;host&lt;/code&gt; 모드 포트 퍼블리싱은 특정 서비스 태스크가 실행 중인 호스트의 포트만 노출한다. 포트는 해당 호스트의 컨테이너에 직접 매핑된다. 포트 충돌을 방지하기 위해 각 호스트에서 특정 서비스의 단일 태스크만 실행할 수 있다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;$ docker service create --replicas &lt;span class=&#34;m&#34;&gt;2&lt;/span&gt; --publish &lt;span class=&#34;nv&#34;&gt;mode&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;host,target&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;80&lt;/span&gt;,published&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;8080&lt;/span&gt; nginx&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;host&lt;/code&gt; 모드는 &lt;code&gt;mode=host&lt;/code&gt; 플래그가 필요하다. 이 두 컨테이너가 실행 중인 호스트에 포트 &lt;code&gt;8080&lt;/code&gt;을 로컬로 퍼블리싱한다. 로드 밸런싱은 적용하지 않으므로, 해당 노드에 대한 트래픽은 로컬 컨테이너에만 전달된다. 복제본 수에 사용할 수 있는 포트가 충분하지 않은 경우, 포트 충돌이 발생할 수 있다.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&#34;인그레스-설계&#34;&gt;인그레스 설계&lt;/h2&gt;

&lt;p&gt;두 가지 퍼블리싱 모드 중 하나를 위한 좋은 유즈케이스가 많이 있다. &lt;code&gt;ingress&lt;/code&gt; 모드는 여러 복제본이 있고, 해당 복제본 간에 로드 밸런싱이 필요한 서비스에 잘 작동한다. &lt;code&gt;host&lt;/code&gt; 모드는 다른 툴에 의해 외부 서비스 검색이 이미 제공되어 있는 경우 잘 작동한다. 호스트 모드의 또 다른 좋은 유즈케이스는 호스트별로 한 번씩 존재하는 글로벌 컨테이너이다. 이러한 컨테이너는 해당 호스트에만 관련이 있고 그 서비스에 액세스할 때 로드 밸런싱을 원하지 않는 로컬 호스트에 대한 특정 정보(예: 모니터링 또는 로깅)를 노출할 수도 있다.&lt;/p&gt;

&lt;p&gt;&lt;center&gt;
&lt;img src=&#34;https://success.docker.com/api/images/.%2Frefarch%2Fnetworking%2Fimages%2Fingress-vs-host.png&#34; alt=&#34;&#34; /&gt;
&lt;/center&gt;&lt;/p&gt;

&lt;h1 id=&#34;macvlan&#34;&gt;MACVLAN&lt;/h1&gt;

&lt;p&gt;&lt;code&gt;macvlan&lt;/code&gt; 드라이버는 실제로 새로 구현된 진정한 네트워크 가상화 기술이다. 리눅스 구현은 매우 가볍다. 왜나하면 격리를 위해 리눅스 브리지를 사용하는 대신, 네트워크 격리와 물리적 네트워크 연결성을 강제하기 위해 리눅스 이더넷 인터페이스 또는 하위 인터페이스와 간단히 연결되기 때문이다.&lt;/p&gt;

&lt;p&gt;MACVLAN은 여러 가지 고유한 특징과 기능을 제공한다. 매우 단순하고 가벼운 아키텍처 덕택에 성능에 긍정적인 영향을 미친다. MACVLAN 드라이버는 포트 매핑 대신 컨테이너와 물리적 네트워크 간에 직접적으로 액세스한다. 또한 컨테이너는 물리적 네트워크의 서브넷에 있는 라우팅 가능한 IP 주소를 수신할 수 있다.&lt;/p&gt;

&lt;p&gt;MACVLAN 유즈케이스는 다음을 포함할 수 있다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;대기 시간이 매우 짧은 애플리케이션&lt;/li&gt;
&lt;li&gt;컨테이너가 외부 호스트 네트워크와 동일한 서브넷에 있고 IP를 외부 네트워크 호스트로 사용해야 하는 네트워크의 설계&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;code&gt;macvlan&lt;/code&gt; 드라이버는 부모 인터페이스의 개념을 사용한다. 이 인터페이스는 &lt;code&gt;eth0&lt;/code&gt;과 같은 물리적인 인터페이스, &lt;code&gt;eth0.10&lt;/code&gt; (&lt;code&gt;VLAN 10&lt;/code&gt;을 나타내는 &lt;code&gt;.10&lt;/code&gt;)과 같은 802.1q VLAN 태깅을 위한 하위 인터페이스, 또는 두 이더넷 인터페이스를 단일 논리적 인터페이스에 결합하는 본드 호스트 어댑터와 같은 물리적 인터페이스일 수도 있다.&lt;/p&gt;

&lt;p&gt;MACVLAN 네트워크를 구성할 때, 게이트웨이 주소가 필요하다. 게이트웨이는 네트워크 인프라에서 제공하는 호스트 외부에 있어야 한다. MACVLAN 네트워크는 동일한 네트워크에 있는 컨테이너 간의 액세스를 허용한다. 동일한 호스트의 다른 MACVLAN 네트워크 간 액세스는 호스트 외부로 라우팅하지 않으면 불가능하다.&lt;/p&gt;

&lt;p&gt;&lt;center&gt;
&lt;img src=&#34;https://success.docker.com/api/images/.%2Frefarch%2Fnetworking%2Fimages%2Fmacvlanarch.png&#34; alt=&#34;&#34; /&gt;
&lt;/center&gt;&lt;/p&gt;

&lt;p&gt;이 예제는 호스트의 &lt;code&gt;eth0&lt;/code&gt;에 MACVLAN 네트워크를 바인딩한다. 또한 두 개의 컨테이너를 &lt;code&gt;mvnet&lt;/code&gt; MACVLAN 네트워크에 연결하고 그들 사이에서 핑(ping)할 수 있다는 것을 보여준다. 각 컨테이너는 물리적 네트워크 서브넷 &lt;code&gt;192.168.0.0/24&lt;/code&gt;에 주소가 있고, 기본 게이트웨이는 물리적 네트워크의 인터페이스이다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;c1&#34;&gt;#호스트의 eth0에 바인딩된 MACVLAN 네트워크 &amp;#34;mvnet&amp;#34;생성
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;$ docker network create -d macvlan --subnet &lt;span class=&#34;m&#34;&gt;192&lt;/span&gt;.168.0.0/24 --gateway &lt;span class=&#34;m&#34;&gt;192&lt;/span&gt;.168.0.1 -o &lt;span class=&#34;nv&#34;&gt;parent&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;eth0 mvnet

&lt;span class=&#34;c1&#34;&gt;#&amp;#34;mvnet&amp;#34;네트워크에 컨테이너 생성
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;$ docker run -itd --name c1 --net mvnet --ip &lt;span class=&#34;m&#34;&gt;192&lt;/span&gt;.168.0.3 busybox sh
$ docker run -it --name c2 --net mvnet --ip &lt;span class=&#34;m&#34;&gt;192&lt;/span&gt;.168.0.4 busybox sh
&lt;span class=&#34;c1&#34;&gt;# 192.168.0.3 ping
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;PING &lt;span class=&#34;m&#34;&gt;127&lt;/span&gt;.0.0.1 &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;127&lt;/span&gt;.0.0.1&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;: &lt;span class=&#34;m&#34;&gt;56&lt;/span&gt; data bytes
&lt;span class=&#34;m&#34;&gt;64&lt;/span&gt; bytes from &lt;span class=&#34;m&#34;&gt;127&lt;/span&gt;.0.0.1: &lt;span class=&#34;nv&#34;&gt;icmp_seq&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;ttl&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;64&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;.052 ms&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이 다이어그램에서 볼 수 있듯이, &lt;code&gt;c1&lt;/code&gt;과 &lt;code&gt;c2&lt;/code&gt;는 호스트의 &lt;code&gt;eth0&lt;/code&gt;에 연결된 &lt;code&gt;macvlan&lt;/code&gt; 이라는 MACVLAN 네트워크를 통해 연결된다.&lt;/p&gt;

&lt;h2 id=&#34;macvlan을-사용한-vlan-트렁킹&#34;&gt;MACVLAN을 사용한 VLAN 트렁킹&lt;/h2&gt;

&lt;p&gt;리눅스 호스트에 802.1q를 트렁킹하는 것은 운영에 있어 많은 이들에게 악명높을 정도로 고통스럽다. 재부팅에도 지속되려면 설정 파일을 변경해야 한다. 브리지가 관련되어 있으면, 물리적 NIC를 브리지로 옮기고 그 브리지가 IP 주소를 얻어와야 한다. &lt;code&gt;macvlan&lt;/code&gt; 드라이버는 생성, 파괴 및 호스트 재부팅을 통해 MACVLAN 네트워크의 하위 인터페이스와 기타 컴포넌트를 완벽하게 관리한다.&lt;/p&gt;

&lt;p&gt;&lt;center&gt;
&lt;img src=&#34;https://success.docker.com/api/images/.%2Frefarch%2Fnetworking%2Fimages%2Ftrunk-macvlan.png&#34; alt=&#34;&#34; /&gt;
&lt;/center&gt;&lt;/p&gt;

&lt;p&gt;&lt;code&gt;macvlan&lt;/code&gt; 드라이버가 하위 인터페이스로 인스턴스화되면 호스트와 L2의 세그먼트 컨테이너에 대한 VLAN 트렁킹할 수 있다. &lt;code&gt;macvlan&lt;/code&gt; 드라이버는 자동으로 하위 인터페이스를 만들고, 이를 컨테이너 인터페이스에 연결한다. 그 결과, 각 컨테이너는 다른 VLAN에 있으며 트래픽이 물리적 네트워크에서 라우팅되지 않는 한, 컨테이너 간의 통신은 불가능하다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;c1&#34;&gt;#VLAN 10에 macvlan10 네트워크 생성
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;$ docker network create -d macvlan --subnet &lt;span class=&#34;m&#34;&gt;192&lt;/span&gt;.168.10.0/24 --gateway &lt;span class=&#34;m&#34;&gt;192&lt;/span&gt;.168.10.1 -o &lt;span class=&#34;nv&#34;&gt;parent&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;eth0.10 macvlan10

&lt;span class=&#34;c1&#34;&gt;#VLAN 20에 macvlan20 네트워크 생성
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;$ docker network create -d macvlan --subnet &lt;span class=&#34;m&#34;&gt;192&lt;/span&gt;.168.20.0/24 --gateway &lt;span class=&#34;m&#34;&gt;192&lt;/span&gt;.168.20.1 -o &lt;span class=&#34;nv&#34;&gt;parent&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;eth0.20 macvlan20

&lt;span class=&#34;c1&#34;&gt;#별도의 MACVLAN 네트워크에서 컨테이너 생성
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;$ docker run -itd --name c1--net macvlan10 --ip &lt;span class=&#34;m&#34;&gt;192&lt;/span&gt;.168.10.2 busybox sh
$ docker run -it --name c2--net macvlan20 --ip &lt;span class=&#34;m&#34;&gt;192&lt;/span&gt;.168.20.2 busybox sh&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;앞선 설정에서 하위 인터페이스를 상위 인터페이스로 사용하도록 설정된 &lt;code&gt;macvlan&lt;/code&gt; 드라이버를 사용하여 두 개의 개별 네트워크를 생성했다. &lt;code&gt;macvlan&lt;/code&gt; 드라이버는 하위 인터페이스를 생성하고 이를 호스트의 &lt;code&gt;eth0&lt;/code&gt;과 컨테이너 인터페이스 간에 연결한다. 호스트 인터페이스와 업스트림 스위치는 &lt;code&gt;switchport mode trunk&lt;/code&gt;로 설정해 주어야 VLAN이 태그되어 인터페이스를 통과할 수 있다. 하나 또는 그 이상의 컨테이너를 지정된 MACVLAN 네트워크에 연결해서 L2를 통해 세그먼트화된 복잡한 네트워크 정책을 만들 수 있다.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;여러 개의 MAC 주소가 단일 호스트 인터페이스 뒤에 있으므로, MAC 필터링의 NIC 지원에 따라 인터페이스에서 비규칙 모드(promiscuous mode)를 활성화해야할 수도 있다.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h1 id=&#34;무지정-none-격리용-네트워크-드라이버&#34;&gt;무지정(None, 격리용) 네트워크 드라이버&lt;/h1&gt;

&lt;p&gt;호스트 네트워크 드라이버와 마찬가지로 &lt;code&gt;none&lt;/code&gt; 네트워크 드라이버는 기본적으로 관리되지 않는 네트워킹 옵션이다. 도커 엔진은 컨테이너 내부에 인터페이스를 만들거나, 포트 매핑을 설정하거나, 연결을 위한 경로를 설치하지 않는다. &lt;code&gt;--net=none&lt;/code&gt;을 사용하는 컨테이너는 다른 컨테이너와 호스트로부터 완전히 격리된다. 네트워킹 관리자 또는 외부 툴이 이 배관을 제공해야 한다. &lt;code&gt;none&lt;/code&gt;을 사용하는 컨테이너는 루프백 인터페이스만 있고 다른 인터페이스는 없다.&lt;/p&gt;

&lt;p&gt;호스트 드라이버와 달리, &lt;code&gt;none&lt;/code&gt; 드라이버는 각 컨테이너에 대해 구분된 네임스페이스를 생성하지 않는다. 이는 컨테이너와 호스트 사이의 컨테이너 네트워크를 확실하게 격리시킨다.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;--net=none&lt;/code&gt; 또는 &lt;code&gt;--net=host&lt;/code&gt;를 사용하는 컨테이너는 다른 도커  네트워크에 연결할 수 없다.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h1 id=&#34;물리적-네트워크-설계-요구사항&#34;&gt;물리적 네트워크 설계 요구사항&lt;/h1&gt;

&lt;p&gt;도커 엔터프라즈 엔진 및 도커 네트워킹은 공통 데이터 센터 네트워크 인프라와 토폴로지에서 실행되도록 설계되었다. 중앙 집중식 컨트롤러와 무정지(fault-tolerance) 클러스터는 광범위한 네트워크 환경에서 호환성을 보장한다. 네트워킹 기능(네트워크 프로비저닝, MAC 학습, 오버레이 암호화)을 제공하는 컴포넌트는 도커 엔진, UCP 또는 리눅스 커널 자체의 일부이다. 네이티브 도커 네트워킹 드라이버를 실행하는 데 추가 컴포넌트나 특수 네트워킹 기능이 필요없다.&lt;/p&gt;

&lt;p&gt;보다 구체적으로, 도커 네이티브 네트워크 드라이버는 다음에 대한 요구사항이 없다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;멀티캐스트&lt;/li&gt;
&lt;li&gt;외부 키밸류 저장소&lt;/li&gt;
&lt;li&gt;특정 라우팅 프로토콜&lt;/li&gt;
&lt;li&gt;호스트 간의 Layer 2 종속성&lt;/li&gt;
&lt;li&gt;스핀(spine) 및 리프(leaf), 전통적인 3티어 및 PoD 설계와 같은 특정 토폴로지. 이러한 토폴로지는 지원된다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;이는 모든 환경에서 애플리케이션 이식성을 향샹시키면서 애플리케이션에 필요한 성능 및 정책을 변함없이 획득하는 컨테이너 네트워킹 모델(CNM)과 일치한다.&lt;/p&gt;

&lt;h1 id=&#34;swarm-네이티브-서비스-검색&#34;&gt;Swarm 네이티브 서비스 검색&lt;/h1&gt;

&lt;p&gt;도커는 단일 도커 엔진에서 실행되는 컨테이너와 도커 Swarm에서 실행되는 &lt;code&gt;task&lt;/code&gt;에 대한 서비스 검색을 제공하기 위해 내장된 DNS를 사용한다. 도커 엔진에는 사용자 정의 브리지, 오버레이 및 MACVLAN 네트워크의 호스트에 있는 모든 컨테이너에 이름 분석(name resolution)을 하는 내부 DNS 서버가 있다. 각 도커 컨테이너(또는 Swarm 모드의 &lt;code&gt;task&lt;/code&gt;)에는 DNS 리졸버가 있어 DNS 쿼리를 DNS 서버 역할을 하는 도커 엔진에 전달한다. 그런 다음 도커 엔진은 DNS 쿼리가 요청 컨테이너가 속한 네트워크의 컨테이너 또는 &lt;code&gt;service&lt;/code&gt;에 속하는지 여부를 확인한다. 이 경우 도커 엔진은 키밸류 저장소에서 컨테이너, &lt;code&gt;task&lt;/code&gt; 또는 &lt;code&gt;server&lt;/code&gt;의 &lt;strong&gt;이름&lt;/strong&gt;과 일치하는 IP 주소를 찾아 해당 IP 또는 서비스 가상 IP(VIP)를 다시 요청자에게 반환한다.&lt;/p&gt;

&lt;p&gt;서비스 검색은 네트워크 스코프화되며, 동일한 네트워크에 있는 컨테이너 또는 태스크만 내장형 DNS 기능을 사용할 수 있음을 의미한다. 같은 네트워크에 있지 않은 컨테이너는 서로의 주소를 확인할 수 없다. 덧붙여, 네트워크의 DNS 항목이 있는 특정 네트워크 저장소에 컨테이너 또는 태스크가 있는 노드만 사용할 수 있다. 이는 보안과 성능을 증진시킨다.&lt;/p&gt;

&lt;p&gt;대상 컨테이너 또는 &lt;code&gt;service&lt;/code&gt;가 소스 컨테이너와 동일한 네트워크에 있지 않는 경우, 도커 엔진은 기본 DNS 서버를 구성하기 위해 도커 쿼리를 전달한다.&lt;/p&gt;

&lt;p&gt;&lt;center&gt;
&lt;img src=&#34;https://success.docker.com/api/images/.%2Frefarch%2Fnetworking%2Fimages%2FDNS.png&#34; alt=&#34;&#34; /&gt;
&lt;/center&gt;&lt;/p&gt;

&lt;p&gt;이 예에서는 &lt;code&gt;myservice&lt;/code&gt;라고 하는 두 개의 컨테이너 서비스가 있다. 두 번째 서비스(&lt;code&gt;client&lt;/code&gt;)는 동일한 네트워크에 존재한다. 그 &lt;code&gt;client&lt;/code&gt;는 &lt;code&gt;docker.com&lt;/code&gt;과 &lt;code&gt;myservice&lt;/code&gt;에 대해 두 번의 curl 태스크를 실행한다.&lt;/p&gt;

&lt;p&gt;다음은 발생하게 되는 액션이다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;docker.com&lt;/code&gt; 및 &lt;code&gt;myservice&lt;/code&gt;에 대한 DNS 쿼리가 &lt;code&gt;client&lt;/code&gt;에 의해 시작된다.&lt;/li&gt;
&lt;li&gt;컨테이너의 내장형 리졸버는 &lt;code&gt;127.0.11:53&lt;/code&gt;의 DNS 쿼리를 가로채 도커 엔진의 DNS 서버로 보낸다.&lt;/li&gt;
&lt;li&gt;내 &lt;code&gt;myservice&lt;/code&gt;는 개별 태스크 IP 주소로 내부 로드 밸런싱되는 해당 서비스의 가상 IP(VIP)로 식별된다. IP 주소에 직접 연결되더라도 컨테이너 이름은 마찬가지로 리졸브된다.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;docker.com&lt;/code&gt;은 &lt;code&gt;mynet&lt;/code&gt; 네트워크에 서비스 이름으로 존재하지 않으므로 요청은 설정된 기본 DNS 서버로 전달된다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&#34;도커-네이티브-로드-밸런싱&#34;&gt;도커 네이티브 로드 밸런싱&lt;/h1&gt;

&lt;p&gt;도커 Swarm 클러스터에는 엔진에 바로 내장된 내부 및 외부 로드 밸런싱 기능이 있다. 내부 로드 밸런싱은 동일한 Swarm 또는 UCP 클러스터 내의 컨테이너 간에 로드 밸런싱을 제공한다. 외부 로드 밸런싱은 클러스터로 들어오는 인그레스 트래픽의 로드 밸런싱을 제공한다.&lt;/p&gt;

&lt;h2 id=&#34;ucp-내부-로드-밸런싱&#34;&gt;UCP 내부 로드 밸런싱&lt;/h2&gt;

&lt;p&gt;도커 서비스가 만들어지면 내부 로드 밸런싱이 자동으로 인스턴스화된다. 서비스가 도커 Swarm 클러스터에서 생성되면 서비스 네트워크의 일부인 가상 IP(VIP)가 자동으로 할당된다. 서비스 이름을 확인하면 VIP가 반환된다. 해당 VIP에 대한 트래픽은 오버레이 네트워크를 통해 해당 서비스의 정상적인 모든 태스크로 자동 전송된다. 이 방법은 단일 IP만 클라이언트로 반환되기 때문에 클라이언트측 로드 밸런싱을 피할 수 있다. 도커는 라우팅을 처리하고 정상적인 서비스 태스크 전반에 트래픽을 균등하게 분배한다.&lt;/p&gt;

&lt;p&gt;&lt;center&gt;
&lt;img src=&#34;https://success.docker.com/api/images/.%2Frefarch%2Fnetworking%2Fimages%2Fipvs.png&#34; alt=&#34;&#34; /&gt;
&lt;/center&gt;&lt;/p&gt;

&lt;p&gt;VIP를 보기 위해서는, 다음과 같이 &lt;code&gt;docker service inspect my_service&lt;/code&gt;를 실행한다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;c1&#34;&gt;#mynet이라 부르는 오버레이 네트워크 생성
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;$ docker network create -d overlay mynet
a59umzkdj2r0ua7x8jxd84dhr

&lt;span class=&#34;c1&#34;&gt;#해당 네트워크의 일부로 2개의 복제본을 사용하여 myservice를 생성
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;$ docker service create --network mynet --name myservice --replicas &lt;span class=&#34;m&#34;&gt;2&lt;/span&gt; busybox ping localhost
8t5r8cr0f0h6k2c3k7ih4l6f5

&lt;span class=&#34;c1&#34;&gt;#해당 서비스에 대해 생성된 VIP 보기
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;$ docker service inspect myservice
...

&lt;span class=&#34;s2&#34;&gt;&amp;#34;VirtualIPs&amp;#34;&lt;/span&gt;: &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;
                &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
                    &lt;span class=&#34;s2&#34;&gt;&amp;#34;NetworkID&amp;#34;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;a59umzkdj2r0ua7x8jxd84dhr&amp;#34;&lt;/span&gt;,
                    &lt;span class=&#34;s2&#34;&gt;&amp;#34;Addr&amp;#34;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;10.0.0.3/24&amp;#34;&lt;/span&gt;
                &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;,
&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;DNS RR(DNS RR) 로드 밸런싱은 서비스에 대한 또 다른 로드 밸런싱 옵션이다( &lt;code&gt;--endpoint-mode&lt;/code&gt;로 구성). DNS RR 모드에서는 각 서비스에 대해 VIP가 만들어지지 않는다. Docker DNS 서버는 라운드 로빈 방식으로 개별 컨테이너 IP에 대한 서비스 이름을 확인한다.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&#34;ucp-외부-l4-로드-밸런싱-도커-라우팅-메쉬&#34;&gt;UCP 외부 L4 로드 밸런싱 (도커 라우팅 메쉬)&lt;/h2&gt;

&lt;p&gt;서비스를 만들거나 업데이트할 때 &lt;code&gt;--publish&lt;/code&gt; 플래그를 사용하여 서비스를 외부에 노출할 수 있다. 도커 Swarm 모드로 포트를 게시하는 것은 클러스터의 모든 노드가 해당 포트에서 수신 중임을 의미한다. 하지만 서비스 태스크가 해당 포트에서 수신 중인 노드에 있지 않으면 어떻게 될까?&lt;/p&gt;

&lt;p&gt;이 지점에서 라우팅 메쉬가 작동한다. 라우팅 메쉬는 &lt;code&gt;ipvs&lt;/code&gt;와 &lt;code&gt;iptables&lt;/code&gt;를 결합하여 강력한 클러스터 전체 전송 계층(L4) 로드 밸런서를 만드는 Docker 1.12의 새로운 기능이다. 모든 Swarm 노드는 서비스의 퍼블리싱된 포트에 대한 연결을 허용할 수 있도록 한다. Swarm 노드가 실행 중인 &lt;code&gt;service&lt;/code&gt;의 퍼블리싱된 TCP/UDP 포트로 향하는 트래픽을 수신할 때, &lt;code&gt;ingress&lt;/code&gt;라는 사전 정의된 오버레이 네트워크를 사용하여 이를 서비스의 VIP로 전달한다. &lt;code&gt;ingress&lt;/code&gt; 네트워크는 다른 오버레이 네트워크와 유사하게 동작하지만 유일한 목적은 외부 클라이언트에서 클러스터 서비스로 메쉬 라우팅 트래픽을 전송하는 것이다. 이전 섹션에서 설명한 것과 동일한 VIP 기반 내부 로드 밸런싱을 사용한다.&lt;/p&gt;

&lt;p&gt;서비스를 시작하면 애플리케이션에 대한 외부 DNS 레코드를 만들어 모든 도커 Swarm 노드 중 일부 또는 전부에 매핑할 수 있다. 클러스터의 모든 노드가 라우팅 메쉬 라우팅 기능이 있는 노드처럼 보이므로 컨테이너가 실행되는 위치에 대해 걱정할 필요가 없다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;c1&#34;&gt;#2개의 복제본을 사용하여 서비스를 생성하고 클러스터에 포트 8000을 내보내기
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;$ docker service create --name app --replicas &lt;span class=&#34;m&#34;&gt;2&lt;/span&gt; --network appnet -p &lt;span class=&#34;m&#34;&gt;8000&lt;/span&gt;:80 nginx&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;center&gt;
&lt;img src=&#34;https://success.docker.com/api/images/.%2Frefarch%2Fnetworking%2Fimages%2Frouting-mesh.png&#34; alt=&#34;&#34; /&gt;
&lt;/center&gt;&lt;/p&gt;

&lt;p&gt;이 다이어그램은 라우팅 메쉬가 어떻게 작동하는지 보여준다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;서비스는 두 개의 복제본으로 만들어지며 포트 &lt;code&gt;8000&lt;/code&gt;에 외부적으로 매핑된다.&lt;/li&gt;
&lt;li&gt;라우팅 메쉬는 클러스터의 각 호스트에 있는 포트 &lt;code&gt;8000&lt;/code&gt;을 노출한다.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;app&lt;/code&gt;으로 향하는 트래픽은 모든 호스트에서 들어갈 수 있다. 이 경우 외부 LB는 서비스 복제본이 없이 호스트에 트래픽을 전송한다.&lt;/li&gt;
&lt;li&gt;커널의 IPVS 로드 밸런서는 &lt;code&gt;ingress&lt;/code&gt; 오버레이 네트워크의 트래픽을 정상적인 서비스 복제본으로 리디렉션한다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;ucp-외부-l7-로드-밸런싱-http-라우팅-메쉬&#34;&gt;UCP 외부 L7 로드 밸런싱 (HTTP 라우팅 메쉬)&lt;/h2&gt;

&lt;p&gt;UCP는 HTTP 라우팅 메쉬를 통해 L7 HTTP/HTTPS 로드 밸런싱을 제공한다. URL은 서비스에 로드 밸런싱될 수 있고 서비스 복제본에 걸쳐 로드 밸런싱될 수 있다.&lt;/p&gt;

&lt;p&gt;&lt;center&gt;
&lt;img src=&#34;https://success.docker.com/api/images/.%2Frefarch%2Fnetworking%2Fimages%2Fucp-hrm.png&#34; alt=&#34;&#34; /&gt;
&lt;/center&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://success.docker.com/Architecture/Docker_Reference_Architecture%3A_Universal_Control_Plane_2.0_Service_Discovery_and_Load_Balancing&#34; target=&#34;_blank&#34;&gt;UCP 로드 밸런싱 참조 아키텍처&lt;/a&gt;로 가서 UCP L7 LB 설계에 대해 좀 더 살펴보라.&lt;/p&gt;

&lt;h1 id=&#34;도커-네트워크-보안-및-암호화&#34;&gt;도커 네트워크 보안 및 암호화&lt;/h1&gt;

&lt;p&gt;도커를 사용하여 컨테이너형 워크로드를 설계하고 구현할 때 네트워크 보안은 최우선 고려사항이다. 이 섹션에서는 도커 네트워크를 배포할 때 고려해야할 핵심 보안사항을 다룬다.&lt;/p&gt;

&lt;h2 id=&#34;네트워크-세분화-segmentation-그리고-데이터-플레인-보안&#34;&gt;네트워크 세분화(Segmentation) 그리고 데이터 플레인 보안&lt;/h2&gt;

&lt;p&gt;도커는 도커 네트워크를 세분화하고 컨테이너 리소스에 대한 악의적인 액세스를 방지하기 위해  분산 방화벽 규칙을 관리한다. 기본적으로 도커 네트워크는 트래픽을 차단하기 위해 서로 세분화되어 있다. 이 접근방식은 Layer 3에서 진정한 네트워크 격리를 제공한다.&lt;/p&gt;

&lt;p&gt;도커 엔진은 네트워크 간 액세스를 차단하고 노출된 컨테이너의 포트를 관리하는 호스트 방화벽 규칙을 관리한다. Swarm &amp;amp; UCP 클러스터에서 이렇게 하면 클러스터에서 애플리케이션이 스케쥴링될 때 애플리케이션을 동적으로 보호하는 분산 방화벽이 만들어진다.&lt;/p&gt;

&lt;p&gt;이 표는 도커 네트워크를 이용한 몇 가지 액세스 정책을 요약한 것이다.&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;경로&lt;/th&gt;
&lt;th&gt;액세스&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;도커 네트워크 내부&lt;img width=300/&gt;&lt;/td&gt;
&lt;td&gt;액세스는 동일한 도커 네트워크의 모든 포트에 있는 모든 컨테이너 사이에 허용된다. 이는 모든 네트워크 유형(메인 범위, 로컬 범위, 내장 드라이버 및 원격 드라이버)에 적용된다.&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;도커 네트워크 사이&lt;/td&gt;
&lt;td&gt;액세스는 도커 엔진에 의해 관리되는 분산 호스트 방화벽 규칙에 의해 도커 네트워크 사이에 거부된다. 컨테이너를 여러 개의 네트워크에 연결하여 다른 도커 네트워크 사이에 통신할 수 있다. 도커 네트워크 사이의 네트워크 연결은 호스트 외부에서 관리할 수도 있다.&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;도커 네트워크에서 엔그레스&lt;/td&gt;
&lt;td&gt;도커 호스트 외부로 향하는 도커 네트워크 내부에서 발생한 트래픽은 허용된다. 호스트의 로컬 스테이트풀 방화벽은 연결을 추적하여 해당 연결에 대한 응답을 허용한다.&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;인그레스에서 도커 네트워크&lt;/td&gt;
&lt;td&gt;인그레스 트래픽은 기본적으로 거부된다. 호스트 포트 또는 인그레스 모드 포트를 통한 포트 노출은 명백한 인그레스 액세스를 제공한다. &lt;p&gt;&lt;br/&gt;&lt;/p&gt; 예외적으로 MACVLAN 드라이버는 외부 네트워크와 동일한 IP 공간에서 작동하고 해당 네트워크 내에서 완전히 열린다. MACVLAN과 유사하게 작동하는 다른 원격 드라이버는 인그레스 트래픽도 허용할 수 있다.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&#34;컨트롤-플레인-보안&#34;&gt;컨트롤 플레인 보안&lt;/h2&gt;

&lt;p&gt;도커 Swarm은 통합된 PKI를 따른다. Swarm에 있는 모든 관리자와 노드는 서명된 인증서 형식의 암호로 암호화된(cryptographically signed) ID를 가지고 있다. 관리자-관리자 사이 및 매니저-노드 사이의 모든 컨트롤 통신은 TLS를 통해 외부로부터 보호된다. 도커 Swarm 모드에서 종단간 컨트롤 플레인 트래픽을 확보하기 위해 외부에서 인증서를 생성하거나 CA를 수동으로 설정할 필요가 없다. 인증서는 주기적으로 자동으로 순환된다.&lt;/p&gt;

&lt;h2 id=&#34;데이터-플레인-네트워크-암호화&#34;&gt;데이터 플레인 네트워크 암호화&lt;/h2&gt;

&lt;p&gt;도커는 바로 사용할 수 있는 오버레이 네트워크에 대해 IPSec 암호화를 지원한다. Swarm 및 UCP 관리 IPSec 터널은 소스 컨테이너를 떠날 때 네트워크 트래픽을 암호화하고 목적지 컨테이너에 들어갈 때 암호를 복호한다. 이렇게 하면 기본 네트워크에 관계없이 전송되는 애플리케이션 트래픽이 매우 안전할 수 있다. 하이브리드, 멀티 테넌트(Multi-tenant) 또는 멀티 클라우드 환경에서는 제어할 수 없는 네트워크를 통과할 때 데이터가 안전하게 보호되도록 하는 것이 중요하다.&lt;/p&gt;

&lt;p&gt;이 다이어그램은 도커 Swarm의 서로 다른 호스트에서 실행되는 두 컨테이너 사이의 통신을 보호하는 방법을 보여준다.&lt;/p&gt;

&lt;p&gt;&lt;center&gt;
&lt;img src=&#34;https://success.docker.com/api/images/.%2Frefarch%2Fnetworking%2Fimages%2Fipsec.png&#34; alt=&#34;&#34; /&gt;
&lt;/center&gt;&lt;/p&gt;

&lt;p&gt;이 기능은 &lt;code&gt;--opt crypted=true&lt;/code&gt; 옵션 (예: &lt;code&gt;docker network create -d overlay --opt crypted=true &amp;lt;NETWORK_NAME&amp;gt;&lt;/code&gt;)을 추가하여 생성시 네트워크별로 활성화할 수 있다. 네트워크가 생성된 후에는 해당 네트워크에서 서비스를 시작할 수 있다 (예: &lt;code&gt;docker service create --netWORK_NAME&amp;gt; &amp;lt;IMAGE&amp;gt; &amp;lt;COMMAND&amp;gt;&lt;/code&gt;). 동일한 서비스의 두 태스크가 서로 다른 두 호스트에서 생성되면, IPsec 터널이 생성되고 소스 호스트를 떠날 때 트래픽이 암호화되고, 목적지 호스트에 들어올 때 암호가 복호된다.&lt;/p&gt;

&lt;p&gt;Swarm 리더는 주기적으로 대칭 키를 재생성하여 모든 클러스터 노드에 안전하게 배포한다. 이 키는 IPsec에서 데이터 플레인 트래픽을 암호화하고 복호화하는 데 사용된다. 암호화는 AES-GCM을 사용하여 호스트 간 전송 모드에서 IPSec를 통해 구현된다.&lt;/p&gt;

&lt;h2 id=&#34;관리-플레인-보안-및-ucp의-rbac&#34;&gt;관리 플레인 보안 및 UCP의 RBAC&lt;/h2&gt;

&lt;p&gt;UCP로 네트워크를 만들 때, 팀과 레이블은 컨테이너 리소스에 대한 액세스를 정의한다. 리소스 권한 레이블은 특정 도커 네트워크를 보고 설정하고 사용할 수 있는 사용자를 정의한다.&lt;/p&gt;

&lt;p&gt;&lt;center&gt;
&lt;img src=&#34;https://success.docker.com/api/images/.%2Frefarch%2Fnetworking%2Fimages%2Fucp-network.png&#34; alt=&#34;&#34; /&gt;
&lt;/center&gt;&lt;/p&gt;

&lt;p&gt;이 UCP 스크린샷은 해당 팀 구성원에게만 이 네트워크에 대한 접근을 제어하기 위한 &lt;code&gt;product-team&lt;/code&gt; 라벨의 사용을 보여준다. 또한 네트워크 암호화와 같은 옵션은 UCP를 통해 전환할 수 있다.&lt;/p&gt;

&lt;h1 id=&#34;ip-주소-관리&#34;&gt;IP 주소 관리&lt;/h1&gt;

&lt;p&gt;컨테이너 네트워킹 모델(CNM)은 유연한 IP 주소 관리 방법을 제공한다. IP 주소 관리를 위한 두 가지 방법이 있다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;CNM은 클러스터에 대해 전역으로 IP 주소를 간단하게 할당하고 중복 할당을 방지하는 네이티브 IPAM 드라이버를 가지고 있다. 네이티브 IPAM 드라이버는 다른 드라이버가 지정되지 않은 경우 기본적으로 사용되는 드라이버다.&lt;/li&gt;
&lt;li&gt;CNM은 다른 벤더와 커뮤니티의 원격 IPAM 드라이버를 사용하는 인터페이스를 가지고 있다. 이러한 드라이버는 기존 벤더 또는 자체 내장 IPAM 도구에 통합될 수 있다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;컨테이너 IP 주소와 네트워크 서브넷의 수동 구성은 UCP, CLI 또는 도커 API를 사용해 수행할 수 있다. 주소 요청은 선택된 드라이버를 거친 후에 요청을 처리하는 방법을 결정한다.&lt;/p&gt;

&lt;p&gt;서브넷 크기와 설계는 주로 특정 애플리케이션과 특정 네트워크 드라이버에 의존한다. IP 주소 공간 설계는 다음 절에서 각 &lt;a href=&#34;https://success.docker.com/api/asset/.%2Frefarch%2Fnetworking%2F#models&#34; target=&#34;_blank&#34;&gt;네트워크 배포 모델&lt;/a&gt;에 대해 보다 심도 있게 다룬다. 포트 매핑, 오버레이 및 MACVLAN의 사용은 모두 IP 주소 할당 방법에 영향을 미친다. 일반적으로 컨테이너 주소 지정은 두 개의 버킷으로 나뉜다. 내부 컨테이너 네트워크(브리지 및 오버레이)는 기본적으로 물리적 네트워크에서 라우팅할 수 없는 IP 주소를 가진 컨테이너를 처리한다. MACVLAN 네트워크는 물리적 네트워크의 서브넷에 있는 컨테이너에 IP 주소를 제공한다. 따라서, 컨테이너 인터페이스의 트래픽은 물리적 네트워크에서 라우팅할 수 있다. 내부 네트워크(브리지, 오버레이)의 서브넷이 물리적 언더레이 네트워크의 IP 공간과 충돌하지 않아야 한다는 점에 유의해야 한다. 겹치는 주소 공간으로 인해 트래픽이 목적지에 도달하지 못할 수 있다.&lt;/p&gt;

&lt;h1 id=&#34;네트워크-트러블슈팅&#34;&gt;네트워크 트러블슈팅&lt;/h1&gt;

&lt;p&gt;도커 네트워크 트러블슈팅은 데브옵스 엔지니어와 네트워크 엔지니어에게 어려울 수 있다. 도커 네트워킹의 작동 방식과 적절한 도구 세트를 올바르게 이해하면 이러한 네트워크 문제를 해결할 수 있다. 한 가지 권장되는 방법은 &lt;a href=&#34;https://github.com/nicolaka/netshoot&#34; target=&#34;_blank&#34;&gt;netshoot&lt;/a&gt; 컨테이너를 사용하여 네트워크 문제를 해결하는 것이다. &lt;code&gt;netshoot&lt;/code&gt; 컨테이너에는 도커 네트워크 문제를 해결하는 데 사용할 수 있는 강력한 네트워킹 트러블슈팅 도구 모음이다.&lt;/p&gt;

&lt;p&gt;netshoot과 같은 트러블슈팅 컨테이너를 사용하는 것의 장점은 네트워크 트러블슈팅 도구가 이식 가능하다는 것이다. &lt;code&gt;netshoot&lt;/code&gt; 컨테이너는 호스트 네트워크의 뷰포인트를 검사하기 위해 어떤 네트워크에 연결되거나, 호스트 네트워크 네임스페이스, 또는 다른 컨테이너의 네트워크 네임스페이스에 배치될 수 있다.&lt;/p&gt;

&lt;p&gt;컨테이너에는 아래 도구 등이 포함된다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;iperf&lt;/li&gt;
&lt;li&gt;tcpdump&lt;/li&gt;
&lt;li&gt;netstat&lt;/li&gt;
&lt;li&gt;iftop&lt;/li&gt;
&lt;li&gt;drill&lt;/li&gt;
&lt;li&gt;util-linux(nsenter)&lt;/li&gt;
&lt;li&gt;curl&lt;/li&gt;
&lt;li&gt;nmap&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&#34;네트워크-배포-모델&#34;&gt;네트워크 배포 모델&lt;/h1&gt;

&lt;p&gt;다음 예제는 &lt;a href=&#34;https://github.com/mark-church/docker-pets&#34; target=&#34;_blank&#34;&gt;도커 펫&lt;/a&gt;이라는 가상의 앱을 사용하여 &lt;strong&gt;네트워크 배포 모델(Network Deployment Models)&lt;/strong&gt;을 보여준다. 백엔드 데이터베이스에서 페이지에 대한 히트 수를 계산하면서 웹페이지에 있는 애완동물의 이미지를 제공한다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;web&lt;/code&gt;은 &lt;code&gt;chrch/docker-pets:1.0&lt;/code&gt; 이미지를 기반으로 하는 프런트엔드 웹 서버임&lt;/li&gt;
&lt;li&gt;&lt;code&gt;db&lt;/code&gt;는 &lt;code&gt;consul&lt;/code&gt; 백엔드임&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;code&gt;chrch/docker-pets&lt;/code&gt;는 백엔드 &lt;code&gt;db&lt;/code&gt; 서비스를 찾는 방법을 알려주는 환경 변수 &lt;code&gt;DB&lt;/code&gt;를 기대한다.&lt;/p&gt;

&lt;h2 id=&#34;단일-호스트의-브리지-드라이버&#34;&gt;단일 호스트의 브리지 드라이버&lt;/h2&gt;

&lt;p&gt;이 모델은 네이티브 도커 &lt;code&gt;bridge&lt;/code&gt; 네트워크 드라이버의 기본 동작이다. &lt;code&gt;bridge&lt;/code&gt; 드라이버는 호스트 내부에 전용 네트워크를 생성하고 외부 연결을 위해 호스트 인터페이스에 외부 포트 매핑을 제공한다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;$ docker network create -d bridge petsBridge

$ docker run -d --net petsBridge --name db consul

$ docker run -it --env &lt;span class=&#34;s2&#34;&gt;&amp;#34;DB=db&amp;#34;&lt;/span&gt; --net petsBridge --name web -p &lt;span class=&#34;m&#34;&gt;8000&lt;/span&gt;:5000 chrch/docker-pets:1.0
Starting web container e750c649a6b5
 * Running on http://0.0.0.0:5000/ &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;Press CTRL+C to quit&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;IP 주소를 지정하지 않으면 호스트의 모든 인터페이스에 포트 매핑이 노출된다. 이 경우 컨테이너의 애플리케이션이 &lt;code&gt;0.0.0.0:8000&lt;/code&gt;에 노출된다. 알릴 특정 IP 주소를 제공하려면 플래그 &lt;code&gt;-p IP:host_port:container_port&lt;/code&gt;를 사용한다. 포트를 노출하는 추가 옵션은 &lt;a href=&#34;https://docs.docker.com/engine/reference/run/#/expose-incoming-ports&#34; target=&#34;_blank&#34;&gt;도커 docs&lt;/a&gt;에서 찾을 수 있다.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;center&gt;
&lt;img src=&#34;https://success.docker.com/api/images/.%2Frefarch%2Fnetworking%2Fimages%2Fsinglehost-bridge.png&#34; alt=&#34;&#34; /&gt;
&lt;/center&gt;&lt;/p&gt;

&lt;p&gt;애플리케이션은 모든 인터페이스의 포트 &lt;code&gt;8000&lt;/code&gt;에서 이 호스트에 로컬로 노출된다. 또한 백엔드 컨테이너의 이름을 제공하는 &lt;code&gt;DB=db&lt;/code&gt;도 공급된다. 도커 엔진의 내장 DNS를 통해 이 컨테이너 이름이 &lt;code&gt;db&lt;/code&gt;의 IP 주소로 확인된다. &lt;code&gt;bridge&lt;/code&gt;는 로컬 드라이버이기 때문에 DNS 레졸루션 범위는 단일 호스트에만 있다.&lt;/p&gt;

&lt;p&gt;아래의 출력은 우리의 컨테이너가 &lt;code&gt;petsBridge&lt;/code&gt; 네트워크의 &lt;code&gt;172.19.0.0/24&lt;/code&gt; IP 공간으로부터 개인 IP를 할당받았다는 것을 보여준다. 도커는 다른 IPAM 드라이버가 지정되지 않은 경우, 내장 IPAM 드라이버를 사용하여 적절한 서브넷에서 IP를 제공한다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;$ docker inspect --format &lt;span class=&#34;o&#34;&gt;{{&lt;/span&gt;.NetworkSettings.Networks.petsBridge.IPAddress&lt;span class=&#34;o&#34;&gt;}}&lt;/span&gt; web
&lt;span class=&#34;m&#34;&gt;172&lt;/span&gt;.19.0.3

$ docker inspect --format &lt;span class=&#34;o&#34;&gt;{{&lt;/span&gt;.NetworkSettings.Networks.petsBridge.IPAddress&lt;span class=&#34;o&#34;&gt;}}&lt;/span&gt; db
&lt;span class=&#34;m&#34;&gt;172&lt;/span&gt;.19.0.2&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이러한 IP 주소는 &lt;code&gt;petsBridge&lt;/code&gt; 네트워크 내부의 통신에 내부적으로 사용된다. 이러한 IP는 호스트 밖으로 절대 노출되지 않는다.&lt;/p&gt;

&lt;h2 id=&#34;외부-서비스-검색의-멀티-호스트-브리지-드라이버&#34;&gt;외부 서비스 검색의 멀티 호스트 브리지 드라이버&lt;/h2&gt;

&lt;p&gt;브리지 드라이버는 로컬 범위 드라이버이기 때문에 다중 호스트 네트워킹에는 다중 호스트 서비스 검색 솔루션이 필요하다. 외부 SD는 컨테이너 또는 서비스의 위치와 상태를 등록한 다음 다른 서비스가 해당 위치를 검색할 수 있도록 한다. 브리지 드라이버는 외부 액세서를 위해 포트를 노출하므로, 외부 SD는 &lt;code&gt;host-ip:port&lt;/code&gt;를 지정된 컨테이너의 위치로 저장한다.&lt;/p&gt;

&lt;p&gt;다음 예에서는, 각 서비스의 위치가 수동으로 설정되어, 외부 서비스 검색을 시뮬레이션한다. &lt;code&gt;db&lt;/code&gt; 서비스의 위치는 &lt;code&gt;DB&lt;/code&gt; 환경 변수를 통해 웹으로 전달된다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;c1&#34;&gt;#백엔드 db 서비스를 생성하여 포트 8500에 노출
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;host-A $ docker run -d -p &lt;span class=&#34;m&#34;&gt;8500&lt;/span&gt;:8500 --name db consul

&lt;span class=&#34;c1&#34;&gt;#host-A의 호스트 IP 표시
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;host-A $ ip add show eth0 &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; grep inet
    inet &lt;span class=&#34;m&#34;&gt;172&lt;/span&gt;.31.21.237/20 brd &lt;span class=&#34;m&#34;&gt;172&lt;/span&gt;.31.31.255 scope global eth0
    inet6 fe80::4db:c8ff:fea0:b129/64 scope link

&lt;span class=&#34;c1&#34;&gt;#프론트엔드 웹 서비스를 생성하여 host-B의 포트 8000에 노출
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;host-B $ docker run -d -p &lt;span class=&#34;m&#34;&gt;8000&lt;/span&gt;:5000 -e &lt;span class=&#34;s1&#34;&gt;&amp;#39;DB=172.31.21.237:8500&amp;#39;&lt;/span&gt; --name web chrch/docker-pets:1.0&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;web&lt;/code&gt; 서비스는 이제 &lt;code&gt;host-B&lt;/code&gt; IP 주소의 포트 &lt;code&gt;8000&lt;/code&gt;에서 웹 페이지를 서비스해야 한다.&lt;/p&gt;

&lt;p&gt;&lt;center&gt;
&lt;img src=&#34;https://success.docker.com/api/images/.%2Frefarch%2Fnetworking%2Fimages%2Fmulti-host-bridge.png&#34; alt=&#34;&#34; /&gt;
&lt;/center&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;이 예에서는 사용할 네트워크를 지정하지 않으므로, 기본 도커 &lt;code&gt;bridge&lt;/code&gt; 네트워크가 자동으로 선택된다.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;code&gt;db&lt;/code&gt; 위치를 &lt;code&gt;172.31.237:8500&lt;/code&gt;으로 설정하면, 서비스 검색의 폼을 생성하게 된다. 우리는 웹 서비스를 위한 &lt;code&gt;db&lt;/code&gt; 서비스의 위치를 정적으로 설정하고 있다. 단일 호스트 예에서, 도커 엔진은 컨테이너 이름에 대해 내장 DNS 레졸루션을 제공했기 때문에, 자동으로 수행되었다. 이 다중 호스트 예제에서는 서비스 검색을 수동으로 수행하고 있다.&lt;/p&gt;

&lt;p&gt;프로덕션 환경에서는 애플리케이션 위치의 하드 코딩이 권장되지 않는다. 외부 서비스 검색 도구는 클러스터에서 컨테이너가 생성 및 파괴될 때 이러한 매핑을 동적으로 제공한다. 몇 가지 예는 &lt;a href=&#34;https://www.consul.io/&#34; target=&#34;_blank&#34;&gt;consul&lt;/a&gt;과 &lt;a href=&#34;https://coreos.com/etcd/&#34; target=&#34;_blank&#34;&gt;etcd&lt;/a&gt;이다.&lt;/p&gt;

&lt;p&gt;다음 섹션에서는 클러스터 전반에서 전역 서비스 검색을 내장 기능으로 제공하는 &lt;code&gt;overlay&lt;/code&gt; 드라이버 시나리오를 살펴본다. 이러한 단순성은 네트워크 서비스를 제공하기 위해 여러 외부 도구를 사용하는 것과 대조적인 &lt;code&gt;overlay&lt;/code&gt; 드라이버의 주요 장점이다.&lt;/p&gt;

&lt;h2 id=&#34;오버레이-드라이버가-있는-다중-호스트&#34;&gt;오버레이 드라이버가 있는 다중 호스트&lt;/h2&gt;

&lt;p&gt;이 모델은 네이티브 &lt;code&gt;overlay&lt;/code&gt; 드라이버를 사용하여 외부로 다중 호스트 연결성을 제공한다. 오버레이 드라이버의 기본 설정은 컨테이너 애플리케이션 내에서 내부 연결 및 서비스 검색뿐만 아니라 외부 세계에 대한 외부 연결을 제공한다. &lt;a href=&#34;https://success.docker.com/api/asset/.%2Frefarch%2Fnetworking%2F#overlayarch&#34; target=&#34;_blank&#34;&gt;오버레이 드라이버 구조&lt;/a&gt; 섹션에서는 이 섹션을 읽기 전에 검토해야 할 오버레이 드라이버의 내부를 검토한다.&lt;/p&gt;

&lt;p&gt;이 예제는 이전 &lt;code&gt;docker-pets&lt;/code&gt; 애플리케이션을 재사용한다. 이 예를 따르기 전에 도커 swarm를 설정하라. Swarm을 설정하는 방법에 대한 지침은 도커 문서를 참조하라. Swarm을 설정한 후, &lt;code&gt;docker service create&lt;/code&gt; 명령을 사용하여 Swarm이 관리할 컨테이너와 네트워크를 생성하라.&lt;/p&gt;

&lt;p&gt;다음은 Swarm을 검사하고, 오버레이 네트워크를 생성한 후, 해당 오버레이 네트워크에 일부 서비스를 프로비저닝하는 방법을 보여준다. 이 명령들은 UCP/Swarm 컨트롤러 노드에서 실행된다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;c1&#34;&gt;#이미 생성된 이 swarm 클러스터에 참여하는 노드 표시
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;$ docker node ls
ID                           HOSTNAME          STATUS  AVAILABILITY  MANAGER STATUS
a8dwuh6gy5898z3yeuvxaetjo    host-B  Ready   Active
elgt0bfuikjrntv3c33hr0752 *  host-A  Ready   Active        Leader

&lt;span class=&#34;c1&#34;&gt;#dognet 오버레이 네트워크 생성
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;host-A $ docker network create -d overlay petsOverlay

&lt;span class=&#34;c1&#34;&gt;#백엔드 서비스를 생성하여 dognet 네트워크에 배치
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;host-A $ docker service create --network petsOverlay --name db consul

&lt;span class=&#34;c1&#34;&gt;#프런트엔드 서비스를 생성하고 포트 8000에 외부 노출
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;host-A $ docker service create --network petsOverlay -p &lt;span class=&#34;m&#34;&gt;8000&lt;/span&gt;:5000 -e &lt;span class=&#34;s1&#34;&gt;&amp;#39;DB=db&amp;#39;&lt;/span&gt; --name web chrch/docker-pets:1.0

host-A $ docker service ls
ID            NAME  MODE        REPLICAS  IMAGE
lxnjfo2dnjxq  db    replicated  &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;/1       consul:latest
t222cnez6n7h  web   replicated  &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;/1       chrch/docker-pets:1.0&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;center&gt;
&lt;img src=&#34;https://success.docker.com/api/images/.%2Frefarch%2Fnetworking%2Fimages%2Foverlay-pets-example.png&#34; alt=&#34;&#34; /&gt;
&lt;/center&gt;&lt;/p&gt;

&lt;p&gt;단일 호스트 브릿지 예에서와 같이, 우리는 &lt;code&gt;web&lt;/code&gt; 서비스에 환경변수로 &lt;code&gt;DB=db&lt;/code&gt;를 전달한다. 오버레이 드라이버는 컨테이너의 오버레이 IP 주소로 서비스 이름 &lt;code&gt;db&lt;/code&gt;를 결정한다. &lt;code&gt;web&lt;/code&gt;과 &lt;code&gt;db&lt;/code&gt; 사이의 통신은 오버레이 IP 서브넷을 단독으로 사용하여 이루어진다.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;오버레이 및 브리지 네트워크 내부에서는 컨테이너에 대한 모든 TCP 및 UDP 포트가 열려 오버레이 네트워크에 연결된 다른 모든 컨테이너가 액세스할 수 있다.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;code&gt;web&lt;/code&gt; 서비스는 포트 &lt;code&gt;8000&lt;/code&gt;에 노출되며, 라우팅 메쉬는 Swarm 클러스터의 모든 호스트에 포트 &lt;code&gt;8000&lt;/code&gt;을 노출한다. 브라우저의 &lt;code&gt;&amp;lt;host-A&amp;gt;:8000&lt;/code&gt; 또는 &lt;code&gt;&amp;lt;host-B&amp;gt;:8000&lt;/code&gt;에 가서 애플리케이션이 작동하는지 테스트하라.&lt;/p&gt;

&lt;h3 id=&#34;오버레이-장점-및-유즈케이스&#34;&gt;오버레이 장점 및 유즈케이스&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;소규모 및 대규모 구축을 위한 매우 단순한 다중 호스트 연결&lt;/li&gt;
&lt;li&gt;추가 구성 또는 컴포넌트 없이 서비스 검색 및 로드 밸런싱 제공&lt;/li&gt;
&lt;li&gt;암호화된 오버레이를 통한 동-서 마이크로 세분화에 유용&lt;/li&gt;
&lt;li&gt;라우팅 메쉬를 사용하여 전체 클러스터에 서비스를 알릴 수 있음&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;튜토리얼-앱-macvlan-브리지-모드&#34;&gt;튜토리얼 앱: MACVLAN 브리지 모드&lt;/h2&gt;

&lt;p&gt;애플리케이션 또는 네트워크 환경에 언더레이 서브넷의 일부인 라우팅 가능한 IP 주소가 컨테이너에 필요한 경우가 있을 수 있다. MACVLAN 드라이버는 이를 가능케 하도록 구현되어 있다. &lt;a href=&#34;https://success.docker.com/api/asset/.%2Frefarch%2Fnetworking%2F#macvlan&#34; target=&#34;_blank&#34;&gt;MACVLAN 구조&lt;/a&gt; 섹션에 설명된 것처럼, MACVLAN 네트워크는 호스트 인터페이스에 바인딩된다. 물리적 인터페이스, 논리적 하위 인터페이스 또는 결합된 논리적 인터페이스가 될 수 있다. 가상 스위치 역할을 하며 동일한 MACVLAN 네트워크의 컨테이너들 사이에 통신을 제공한다. 각 컨테이너는 노드가 연결된 물리적 네트워크의 고유한 MAC 주소와 IP 주소를 수신한다.&lt;/p&gt;

&lt;p&gt;&lt;center&gt;
&lt;img src=&#34;https://success.docker.com/api/images/.%2Frefarch%2Fnetworking%2Fimages%2F2node-macvlan-app.png&#34; alt=&#34;&#34; /&gt;
&lt;/center&gt;&lt;/p&gt;

&lt;p&gt;이 예제에서 Pets 애플리케이션은 &lt;code&gt;host-A&lt;/code&gt; 및 &lt;code&gt;host-B&lt;/code&gt;에 배포된다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;c1&#34;&gt;#두 호스트에 로컬 macvlan 네트워크 생성
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;host-A $ docker network create -d macvlan --subnet &lt;span class=&#34;m&#34;&gt;192&lt;/span&gt;.168.0.0/24 --gateway &lt;span class=&#34;m&#34;&gt;192&lt;/span&gt;.168.0.1 -o &lt;span class=&#34;nv&#34;&gt;parent&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;eth0 petsMacvlan
host-B $ docker network create -d macvlan --subnet &lt;span class=&#34;m&#34;&gt;192&lt;/span&gt;.168.0.0/24 --gateway &lt;span class=&#34;m&#34;&gt;192&lt;/span&gt;.168.0.1 -o &lt;span class=&#34;nv&#34;&gt;parent&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;eth0 petsMacvlan

&lt;span class=&#34;c1&#34;&gt;#host-B에 db 컨테이너 생성
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;host-B $ docker run -d --net petsMacvlan --ip &lt;span class=&#34;m&#34;&gt;192&lt;/span&gt;.168.0.5 --name db consul

&lt;span class=&#34;c1&#34;&gt;#host-A에 web 컨테이너 생성
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;host-A $ docker run -it --net petsMacvlan --ip &lt;span class=&#34;m&#34;&gt;192&lt;/span&gt;.168.0.4 -e &lt;span class=&#34;s1&#34;&gt;&amp;#39;DB=192.168.0.5:8500&amp;#39;&lt;/span&gt; --name web chrch/docker-pets:1.0&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이는 다중 호스트 브리지 예제와 매우 비슷하게 보일 수 있지만 몇 가지 주목할 만한 차이점이 있다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;web&lt;/code&gt;에서 &lt;code&gt;db&lt;/code&gt;로의 참조는 호스트와 반대되는 &lt;code&gt;db&lt;/code&gt; 자체의 IP 주소를 사용한다. &lt;code&gt;macvlan&lt;/code&gt; 컨테이너 IP는 언더레이 네트워크에서 라우팅할 수 있다는 점을 기억하라.&lt;/li&gt;
&lt;li&gt;컨테이너에 열린 포트는 컨테이너 컨테이너 IP 주소를 사용하여 즉시 연결할 수 있으므로 &lt;code&gt;db&lt;/code&gt; 또는 &lt;code&gt;web&lt;/code&gt; 포트는 노출하지 않는다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;code&gt;macvlan&lt;/code&gt; 드라이버는 이러한 고유한 이점을 제공하지만, 희생되는 영역 중 하나는 이식성이다. MACVLAN 설정 및 배포는 언더레이 네트워크와 밀접하게 연관되어 있다. 컨테이너 어드레싱은 중복 주소 할당을 방지하는 것 외에 컨테이너 배치의 물리적 위치를 준수해야 한다. 이 때문에, MACVLAN 네트워크의 외부로 IPAM을 관리하는 데에 주의를 기울여야 한다. IP 어드레싱을 겹치거나 잘못된 서브넷을 사용하면 컨테이너 연결이 끊어질 수 있다.&lt;/p&gt;

&lt;h3 id=&#34;macvlan-장점-및-유즈케이스&#34;&gt;MACVLAN 장점 및 유즈케이스&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;NAT을 활용하지 않기 때문에 대기 시간이 매우 짧은 애플리케이션은 macvlan 드라이버의 이점을 누릴 수 있다.&lt;/li&gt;
&lt;li&gt;MACVLAN은 일부 환경에서는 요구 사항이 될 수 있는 컨테이너당 IP를 제공할 수 있다.&lt;/li&gt;
&lt;li&gt;IPAM에 대한 고려가 보다 신중히 이루어져야 한다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&#34;결론&#34;&gt;결론&lt;/h1&gt;

&lt;p&gt;도커는 빠르게 진화하는 기술이며, 네트워킹 옵션은 매일 점점 더 많은 유즈케이스를 충족시키기 위해 증가하고 있다. 현존 네트워킹 벤더, 순수 SDN 벤더 및 도커 모두 이 분야의 공헌자이다. 물리적 네트워크, 네트워크 모니터링 및 암호화와의 보다 긴밀한 통합은 모두 상당한 관심과 혁신의 영역이다.&lt;/p&gt;

&lt;p&gt;이 문서는 자세한 내용을 설명하지만, 존재하는 CNM 네트워크 드라이버와 가능한 모든 배치를 모두 다루진 않았다. 개별 드라이버와 이러한 드라이버를 구성하는 더 많은 방법이 있지만 일상적으로 배포되는 공통 모델은 몇 가지 뿐임을 알 수 있었으면 한다. 각 모델의 장단점을 이해하는 것이 장기적인 성공의 열쇠이다.&lt;/p&gt;

&lt;hr /&gt;

&lt;h1 id=&#34;기타&#34;&gt;기타&lt;/h1&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.joinc.co.kr/w/man/12/docker/InfrastructureForDocker/network&#34; target=&#34;_blank&#34;&gt;도커 네트워크 - JoinC&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://arisu1000.tistory.com/27850&#34; target=&#34;_blank&#34;&gt;Kubernetes 네트워킹: Pod 네트워킹&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://sookocheff.com/post/kubernetes/understanding-kubernetes-networking-model/&#34; target=&#34;_blank&#34;&gt;A Guide to the Kubernetes Networking Model&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://supergiant.io/blog/kubernetes-networking-explained-introduction/&#34; target=&#34;_blank&#34;&gt;Kubernetes Networking Explained: Introduction&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://medium.com/google-cloud/understanding-kubernetes-networking-pods-7117dd28727&#34; target=&#34;_blank&#34;&gt;Understanding kubernetes networking: pods&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
      
    </item>
    
    <item>
      <title>TGI Kubernetes 001: A Quick Tour</title>
      <link>https://ziwon.github.io/post/tgik-001/</link>
      <pubDate>Sun, 13 Jan 2019 17:12:00 +0000</pubDate>
      <author>Aron Yoon</author>
      <guid>https://ziwon.github.io/post/tgik-001/</guid>
      <description></description>
      
      <content>

&lt;h1 id=&#34;tgik-thanks-god-it-s-kubernetes&#34;&gt;TGIK: Thanks God It&amp;rsquo;s Kubernetes&lt;/h1&gt;

&lt;p&gt;유튜브를 검색하다가, 지난 2017년부터 Kubernetes라는 주제로 Heptio에서 매주 금요일마다 라이브 스트리밍을 하고 있다는 것을 알게 되었다. 아무래도 제한적인 실무 경험이나 개인적인 스터디만으로는 한계가 있기 때문에, 하나씩 팔로우업 해보고자 한다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/heptio/tgik&#34; target=&#34;_blank&#34;&gt;TGIK 깃헙 리포지토리&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.youtube.com/playlist?list=PLvmPtYZtoXOENHJiAQc6HmV2jmuexKfrJ&#34; target=&#34;_blank&#34;&gt;TGIK 유트브 공식채널&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/heptio/tgik/blob/master/playlist.md&#34; target=&#34;_blank&#34;&gt;TGIK 전체 목록&lt;/a&gt;, &lt;a href=&#34;https://github.com/recollir/tgik-playlist/blob/master/playlist.md&#34; target=&#34;_blank&#34;&gt;recollir&amp;rsquo;s Playlist&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&#34;a-quick-tour&#34;&gt;A Quick Tour&lt;/h1&gt;

&lt;p&gt;첫 번째 에피소드의 내용은 다음 링크를 참고한다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/heptio/tgik/tree/master/episodes/001&#34; target=&#34;_blank&#34;&gt;https://github.com/heptio/tgik/tree/master/episodes/001&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;내용은 &lt;code&gt;kubeadm&lt;/code&gt;을 기반으로 AWS에 Kubernetes 클러스터를 구동해보는 것이다. 이 내용은 APN(AWS Partner Network)의 기술 파트너인 Heptio가 AWS에 작성한 쿠버네티스 가이드 문서인 &lt;a href=&#34;https://aws.amazon.com/quickstart/architecture/heptio-kubernetes/&#34; target=&#34;_blank&#34;&gt;Quick Start for Kubernetes by Heptio&lt;/a&gt;에 소개되어 있다.&lt;/p&gt;

&lt;p&gt;영상에서 진행하는 데모의 깃헙 저장소와 단계별 상세 디플로이 문서의 링크는 다음과 같다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/heptio/aws-quickstart&#34; target=&#34;_blank&#34;&gt;GitHub - aws-quickstart&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://aws-quickstart.s3.amazonaws.com/quickstart-heptio/doc/heptio-kubernetes-on-the-aws-cloud.pdf&#34; target=&#34;_blank&#34;&gt;Step by Step Guide - heptio-kubernetes-on-the-aws-cloud&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;전체적인 아키텍처는 다음과 같다. AWS의 베스트 프랙티스를 따라, Public Network와 Private Network로 디자인하고 있다. Kubernets API를 외부에서 접속할 수 있도록 마스터 노드에 ELB를 연결한 것이 특이하다.&lt;/p&gt;

&lt;p&gt;&lt;center&gt;
  &lt;img src=&#34;https://d1.awsstatic.com/partner-network/QuickStart/datasheets/heptio-kubernetes-architecture.4ce06fe6b45b290e2b46ddf5dc7a664d45d7aae2.png&#34; alt=&#34;&#34; /&gt;
&lt;/center&gt;&lt;/p&gt;

&lt;p&gt;데모에서는 CloudFormation을 사용해 다음의 컴포넌트들을 AWS에 구성하게 된다. (이상, &lt;a href=&#34;https://github.com/heptio/aws-quickstart/blob/master/templates/kubernetes-cluster-with-new-vpc.template&#34; target=&#34;_blank&#34;&gt;kubernetes-cluster-with-new-vpc.template 참조&lt;/a&gt;)&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;단일 가용영 영역에 가상 프라이빗 클라우드 (VPC)&lt;/li&gt;
&lt;li&gt;서브넷 2개, 퍼블릭 1개 및 프라이빗 1개&lt;/li&gt;
&lt;li&gt;퍼브릭서브넷에서 바스티온 호스트로 작동하는 EC2 인스턴스 하나&lt;/li&gt;
&lt;li&gt;프라이빗 서브넷의 마스터 노드에 대한 자동 복구가 가능한 EC2 인스턴스 하나&lt;/li&gt;
&lt;li&gt;프라이빗 서브넷의 추가 노드에 대한 자동 스케일링 그룹의 EC2 인스턴스 1-20개&lt;/li&gt;
&lt;li&gt;Kubernetes API에 대한 HTTPS 액세스를 위한 Elastic Load Balancing(ELB) 로드 밸런싱 장치 1개&lt;/li&gt;
&lt;li&gt;모든 노드에 Ubuntu 16.04 LTS&lt;/li&gt;
&lt;li&gt;Linux에서 Kubernetes를 부트스트래핑하기 위한 Kubeadm&lt;/li&gt;
&lt;li&gt;Kubernetes가 의존하는 컨테이너 런타임에 대한 도커&lt;/li&gt;
&lt;li&gt;Pod 네트워킹을 위한 Calico 또는 Weave. 디폴트는 Calico이다.&lt;/li&gt;
&lt;li&gt;클러스터 DNS에 대한 CoreDNS 또는 KubeDNS 기본값은 CoreDNS이며, CoreDNS는 CoreDNS로 대체되며, CoreDNS를 지원할 수 없는 환경에만 제공.&lt;/li&gt;
&lt;li&gt;SSH 액세스를 위해 포트 22를 허용하는 스택 전용 security group, HTTPS 액세스를 위한 포트 6443 및 모든 포트의 노드 간 연결을 허용하는 단일 security group.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;깃헙의 다음 스크립트를 이용하면 CloudFormation 기반으로 바로 디플로이 할 수 있다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/aws-quickstart/quickstart-heptio/blob/master/bin/boot-master-branch.sh&#34; target=&#34;_blank&#34;&gt;https://github.com/aws-quickstart/quickstart-heptio/blob/master/bin/boot-master-branch.sh&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#!/usr/bin/env bash
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;# This is where Heptio stores templates/scripts for the master branch of this repository
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;S3_BUCKET&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;heptio-aws-quickstart-test
&lt;span class=&#34;nv&#34;&gt;S3_PREFIX&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;heptio/kubernetes/master/

&lt;span class=&#34;c1&#34;&gt;# Where to place your cluster
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;REGION&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;us-west-2
&lt;span class=&#34;nv&#34;&gt;AZ&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;us-west-2b

&lt;span class=&#34;c1&#34;&gt;# What to name your CloudFormation stack
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;STACK&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;Heptio-Kubernetes

&lt;span class=&#34;c1&#34;&gt;# What SSH key you want to allow access to the cluster (must be created ahead of time in your AWS EC2 account)
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;KEYNAME&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;mykey

&lt;span class=&#34;c1&#34;&gt;# What IP addresses should be able to connect over SSH and over the Kubernetes API
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;INGRESS&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;.0.0.0/0

aws cloudformation create-stack &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  --region &lt;span class=&#34;nv&#34;&gt;$REGION&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  --stack-name &lt;span class=&#34;nv&#34;&gt;$STACK&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  --template-url &lt;span class=&#34;s2&#34;&gt;&amp;#34;https://&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;S3_BUCKET&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;.s3.amazonaws.com/&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;S3_PREFIX&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;templates/kubernetes-cluster-with-new-vpc.template&amp;#34;&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  --parameters &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nv&#34;&gt;ParameterKey&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;AvailabilityZone,ParameterValue&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$AZ&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nv&#34;&gt;ParameterKey&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;KeyName,ParameterValue&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$KEYNAME&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nv&#34;&gt;ParameterKey&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;AdminIngressLocation,ParameterValue&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$INGRESS&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nv&#34;&gt;ParameterKey&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;QSS3BucketName,ParameterValue&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;S3_BUCKET&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nv&#34;&gt;ParameterKey&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;QSS3KeyPrefix,ParameterValue&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;S3_PREFIX&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  --capabilities&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;CAPABILITY_IAM&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;실제로 따라 해보지는 않았다. 테스트 클러스터라고 해도 Kops나 EKS를 사용할 것 같다. 영상에서도 CloudFormation과 Kops 중 어떤 게 더 좋냐고 물어보고 있는데, 이 예제는 익숙한 툴을 이용해 Kubernetes를 재빨리 디플로이 하기 위해 만든 것이며, (보안적인 어떤 면에서는 이 예제의 방식보다 덜 안전할 수도 있지만) Kops가 프로덕션에서 적절하게 튜닝할 수 있는 부가 기능이 많다고 한다. 또한, HA 클러스터 등 좀 더 안정적이기 때문에 프로덕션 레벨에서는 Kops를 사용할 수 있다고 한다. - &lt;a href=&#34;https://youtu.be/9YYeE-bMWv8?t=670&#34; target=&#34;_blank&#34;&gt;11:10&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Kubernetes 클러스터가 구성된 후에는 Pod 등을 설명하고 스케쥴링하는 Kubernetes 관리자라면 비교적 익숙한 기본 명령어들을 다루고 있다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://gist.github.com/jbeda/9a2097c726584560fa13f6c1ae13abfb&#34; target=&#34;_blank&#34;&gt;command line snippets&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# This tells kubecfg to read its config from the local directory
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;export&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;KUBECONFIG&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;./kubeconfig

&lt;span class=&#34;c1&#34;&gt;# Looking at the cluster
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;kubectl get nodes
kubectl get pods --namespace&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;kube-system

&lt;span class=&#34;c1&#34;&gt;# Running a single pod
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;kubectl run --generator&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;run-pod/v1 --image&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;gcr.io/kuar-demo/kuard-amd64:1 kuard
kubectl get pods
kubectl run --generator&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;run-pod/v1 --image&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;gcr.io/kuar-demo/kuard-amd64:1 kuard --dry-run -o yaml
kubectl get pods kuard -o yaml
kubectl port-forward kuard &lt;span class=&#34;m&#34;&gt;8080&lt;/span&gt;:8080
kubectl delete pod kuard

&lt;span class=&#34;c1&#34;&gt;# Running a deployment
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;kubectl run --image&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;gcr.io/kuar-demo/kuard-amd64:1 kuard --replicas&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;5&lt;/span&gt; --dry-run -o yaml
kubectl run --image&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;gcr.io/kuar-demo/kuard-amd64:1 kuard --replicas&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;5&lt;/span&gt;
kubectl get pods

&lt;span class=&#34;c1&#34;&gt;# Running a service
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;kubectl expose deployment kuard --type&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;LoadBalancer --port&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;80&lt;/span&gt; --target-port&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;8080&lt;/span&gt; --dry-run -o yaml
kubectl get service kuard -o wide

&lt;span class=&#34;c1&#34;&gt;# Wait a while for the ELB to be ready
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;KUARD_LB&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;kubectl get service kuard -o &lt;span class=&#34;nv&#34;&gt;jsonpath&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;{.status.loadBalancer.ingress[*].hostname}&amp;#39;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt;

---
&lt;span class=&#34;c1&#34;&gt;# Doing a deployment
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;## Window 1
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;## On the mac, install with `brew install watch`
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;watch -n &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;.1 kubectl get pods

&lt;span class=&#34;c1&#34;&gt;## Window 2
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;## On the mac, install with `brew install jq`
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;while&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;do&lt;/span&gt; curl -s http://&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;KUARD_LB&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;/env/api &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; jq &lt;span class=&#34;s1&#34;&gt;&amp;#39;.env.HOSTNAME&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;done&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;## Window 3
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;kubectl scale deployment kuard --replicas&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;
kubectl &lt;span class=&#34;nb&#34;&gt;set&lt;/span&gt; image deployment kuard &lt;span class=&#34;nv&#34;&gt;kuard&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;gcr.io/kuar-demo/kuard-amd64:2
kubectl rollout undo deployment kuard

---
&lt;span class=&#34;c1&#34;&gt;# Clean up
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;kubectl delete deployment,service kuard&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;개인적으로 Pod 스케쥴링과 스케일링에 간단한 node앱들을 사용했었는데 데모에서처럼 &amp;ldquo;Request 상세, Server 환경변수, Liveness Probe, Readiness Probe, DNS 쿼리, KeyGen Workload, MemQ 서버, 파일 시스템 브라우저&amp;rdquo; 등 여러가지를 살펴볼 수 있는 kuard를 이용하는 것도 괜찮아 보인다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/kubernetes-up-and-running/kuard&#34; target=&#34;_blank&#34;&gt;kuard&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;sig-scalability&#34;&gt;sig-scalability&lt;/h2&gt;

&lt;h3 id=&#34;etcd&#34;&gt;etcd&lt;/h3&gt;

&lt;p&gt;2000대 워커 노드 제한에 대한 병목은 무엇인가라는 질문이 있었는데, 5000대까지 테스트해보았으며, etcd의 확장성 가장 중요하다고 한다. 즉, 노드 간의 일관된 코디네이션을 할 수 있는 양이 관건이라고 한다. 클라이언트 수, 초당 요청수, 저장 데이터 크기에 따른 클러스터 크기별 etcd의 하드웨어 구성은 다음 문서를 참고한다. 문서에 따르면, 일반적인 클러스터의 경우 2~4개의 코어, 8GB 메모리면 충분하며, 디스크는 50개의 순차적인 IOPS가 필요하다. (디스크는 etcd 클러스터 배치 성능 및 안정성에 있어서 가장 중요한 요인이다. etcd의 합의 프로토콜은 메터데이터를 로그에 지속적으로 저장하는 것에 달려 있으므로, etcd 클러스터 멤버는 모든 요청을 디스크에 기록해야 한다. 따라서, 쓰기 지연이 발생하지 않고, 하트비트가 타임아웃이 되지 않고 일렉션이 발생하지 않도록 해야 한다. 장애 발생시, Disk 대역폭이 많을수록 복구 시간이 단축된다.)&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/etcd-io/etcd/blob/master/Documentation/op-guide/hardware.md&#34; target=&#34;_blank&#34;&gt;Hardware recommendations&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;메트릭-목표&#34;&gt;메트릭 목표&lt;/h3&gt;

&lt;p&gt;Kubernetes의 확장성에 관한 자세한 내용은 &lt;a href=&#34;https://github.com/kubernetes/community/blob/master/sig-scalability/goals.md&#34; target=&#34;_blank&#34;&gt;Kubernetes Scaling and Performance Goals&lt;/a&gt;를 참고하라고 한다. 간단히 살펴보면, 주 메트릭과 파생 메트릭으로 나뉜다.&lt;/p&gt;

&lt;p&gt;주 메트릭의 경우, 클러스터별 최대 코어 수는 20만이, 코어별 최대 Pod 수는 10개가 목표이다. 코어 비율은 1:1에서 4:1(GB/코어)라고 가정한다. 경험상 평균적으로 많은 Pod/프로세스가 코어별 1~4GB RAM이 필요한 것으로 나타났다고 한다. 노드별 관리 오버헤드는 최소 0.5코어, 1GB RAM으로 5% 미만이 목표이며,  Docker, KubeProxy, Kubelet, 메트릭 수집, 커널 제외한 수치이다. (예: 32개 코어, 64GB 머신, 1.6개 코어, 노드 관리를 위한 3.2GB RAM), 그리고 클러스터별 오버헤드는 1% 미만, 코어 2개 이상, 4GB RAM가 목표이며, apiserver, 스케줄러, 컨트롤러 등을 포함한 모든 비노드별 구성 요소 포함하고 DNS, 힙스터 등, HA 제외한 수치이다.&lt;/p&gt;

&lt;p&gt;파생 메트릭의 경우, 노드별 최대 코어수는 현재 64개, 향후 수백개가 목표이고, 머신별 최대 Pod 수는 500개라고 한다. 클러스터별 최대 머신수는 5000개이고, 클러스터별 최대 Pod의 수는 50만개이다. Pod의 엔드투엔드 스타트업 시간은 5초 이하가 목표이고, 스케쥴링의 스루풋은 초당 100개의 Pod이 목표라고 한다. 최대 클러스터 포화 시간은 90 분이 목표이다.&lt;/p&gt;

&lt;h3 id=&#34;클라우드별-테스팅-환경&#34;&gt;클라우드별 테스팅 환경&lt;/h3&gt;

&lt;p&gt;또한, 클라우드 프로바이더별로 Kubernetes 확장성의 테스팅 환경은 다음 문서를 참고한다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/kubernetes/community/blob/master/sig-scalability/configs-and-limits/provider-configs.md&#34; target=&#34;_blank&#34;&gt;Scalability Testing/Analysis Environment and Goals&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;kubernetes-1-7&#34;&gt;Kubernetes 1.7&lt;/h2&gt;

&lt;p&gt;그리고 &lt;a href=&#34;https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG-1.7.md#major-themes&#34; target=&#34;_blank&#34;&gt;Kubernetes 1.7 릴리즈 노트&lt;/a&gt;를 간략히 설명하고 있다. 1.7의 내용은 확장성과 보안이 두가지 주요 주제였다고 한다. 시스템의 커널, 즉 시스템의 핵심을 변경하지 않고, 각 컴포넌트를 플러그인하고 서로 빌드해가는 확장성을 계속해서 개선해 나갔으며, 또한 처음부터 여러 컴포넌트, 여러 어플리케이션, 여러 팀들이 개발을 해왔기 때문에 보안 이슈가 다른 컴포넌트 등으로 전파되지 않도록 해왔다고 한다. 이상, 다소 오래된 내용이라 넘어가기로 한다.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Kubernetes 1.7은 Kubernetes의 광범위한 생산 사용에 의해 동기화된 보안, 뛰어난 애플리케이션 및 확장성 기능을 추가하는 릴리스다. 이 릴리스의 보안 강화에는 암호화된 시크릿(alpha), Pod간 통신을 위한 네트워크 정책, API 리소스에 대한 Kubelet 액세스를 제한하는 노드 작성자, Kubelet 클라이언트/서버 TLS 인증서 로테이션(alpha)이 포함된다. 상태 저장 애플리케이션의 주요 기능에는 StatefulSet 자동 업데이트, DaemonSet의 향상된 업데이트, 보다 빠른 StatefulSet 확장을 위한 버스트 모드,  (alpha) 로컬 스토리지에 대한 지원이 포함된다. 확장성 기능에는 API 집계(beta), ThirdPartyResources를 위한 CustomResourceDefinitions(beta), 확장 가능한 Admission controller(alpha), 플러그형 cloud provider(alpha) 및 CRI(컨테이너 런타임 인터페이스) 개선이 포함된다.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;1.7 릴리즈에 대한 좀 자세한 내용은 &lt;a href=&#34;https://www.itworld.co.kr/news/105494&#34; target=&#34;_blank&#34;&gt;쿠버네티스 1.7의 새로운 기능 : 로컬 스토리지, 암호화 등&lt;/a&gt; 참고한다.&lt;/p&gt;

&lt;h2 id=&#34;ksonnet&#34;&gt;ksonnet&lt;/h2&gt;

&lt;p&gt;&lt;code&gt;ksonnet&lt;/code&gt;은 시간 관계상 다루지 못한 것 같다. 링크된 홈페이지에 소개된 것처럼, 다양한 클러스터 및 환경에서 설정을 관리하는 cli 툴인 것으로 보인다.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Built on the JSON templating language Jsonnet, ksonnet provides an organizational structure and specialized features for managing configurations across different clusters and environments.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/ksonnet/ksonnet&#34; target=&#34;_blank&#34;&gt;https://github.com/ksonnet/ksonnet&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://bcho.tistory.com/1302?fbclid=IwAR2KJYAo7TBUTFynZ1NFY0xF7T2R6RJBS77wRlj8u5RoBUyGtbWlnMFSBbs&#34; target=&#34;_blank&#34;&gt;쿠버네티스 리소스 배포와 관리를 위한 ksonnet&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;이상으로, 간략히 TGIK 에피소드 1을 살펴보았다.&lt;/p&gt;
</content>
      
    </item>
    
    <item>
      <title>Kops에서 Bastion 호스트 SSH로 접속하기</title>
      <link>https://ziwon.github.io/post/bastion-in-kops/</link>
      <pubDate>Wed, 02 Jan 2019 12:12:00 +0000</pubDate>
      <author>Aron Yoon</author>
      <guid>https://ziwon.github.io/post/bastion-in-kops/</guid>
      <description></description>
      
      <content>&lt;p&gt;네트워크에서 바스티온 호스트(Bastion Host)는 침입차단 소프트웨어가 설치되어 내부와 외부 네트워크 사이에서 일종의 게이트 역할을 수행하는 호스트로 네트워크 보안에 가장 중요한 방화벽 호스트로써 방화벽의 메인서버를 의미하기도 한다.&lt;sup&gt;&lt;a href=&#34;http://blog.pentasecurity.com/221034903499&#34; target=&#34;_blank&#34;&gt;1&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;

&lt;p&gt;AWS 컨텍스트에서는 바스티온 호스트를 내부 네트워크에 접속할 수 있는 서버로 정의하는데 &lt;sup&gt;&lt;a href=&#34;https://en.wikipedia.org/wiki/Bastion_host&#34; target=&#34;_blank&#34;&gt;2&lt;/a&gt;&lt;/sup&gt;, Kops에서는 바스티온 호스트를 프로비저닝하고 &lt;sup&gt;&lt;a href=&#34;https://github.com/kubernetes/kops/blob/master/docs/bastion.md&#34; target=&#34;_blank&#34;&gt;3&lt;/a&gt;&lt;/sup&gt;, 이를 통해 프라이빗 네트워크 인스턴스에 접속한다. (AWS 바스티온 구조 &lt;sup&gt;&lt;a href=&#34;https://docs.aws.amazon.com/quickstart/latest/linux-bastion/architecture.html&#34; target=&#34;_blank&#34;&gt;4&lt;/a&gt;&lt;/sup&gt;)&lt;/p&gt;

&lt;p&gt;이를 테면, 다음과 같이 쿠버네티스 마스터 노드와 워커 노드가 구성되어 있다고 하자. 이들 인스턴스들은 내부 네트워크에 존재하므로 바스티온 호스트를 통해 접속해야 한다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;$ kubectl get node
NAME                                            STATUS   ROLES    AGE   VERSION
ip-10-1-117-65.ap-northeast-1.compute.internal  Ready    master   49d   v1.10.11
ip-10-1-157-17.ap-northeast-1.compute.internal  Ready    master   49d   v1.10.11
ip-10-1-16-19.ap-northeast-1.compute.internal   Ready    master   49d   v1.10.11
ip-10-1-178-52.ap-northeast-1.compute.internal  Ready    node     45d   v1.10.11
ip-10-1-82-30.ap-northeast-1.compute.internal   Ready    node     44d   v1.10.11
ip-10-1-96-13.ap-northeast-1.compute.internal   Ready    node     44d   v1.10.11
ip-10-1-199-22.ap-northeast-1.compute.internal  Ready    node     45d   v1.10.11
ip-10-1-135-94.ap-northeast-1.compute.internal  Ready    node     45d   v1.10.11
...&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이 때, 바스티온 호스트에 프라이빗 키를 복사해서 바스티온에 로그인하여 내부 서브넷 인스턴스로 접속할 수도 있지만, 다음과 같이 ssh 프락싱을 사용하고 &lt;sup&gt;&lt;a href=&#34;https://ekartco.com/2017/12/using-aws-bastion-hosts-correctly/&#34; target=&#34;_blank&#34;&gt;5&lt;/a&gt;&lt;/sup&gt;, 접속하려는 호스트 네임을 동적으로 구성해서 좀 더 쉽게 접속할 수도 있다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;$ vi ~/.ssh/config
Host k8s-prod
	HostName bastion.prod.k8s.example.net
	User core
	IdentityFile ~/.ssh/prod.k8s.id_rsa
	
Host ip-10-1-*
	User core
	ProxyCommand ssh -q -W %h:%p k8s-prod
	IdentityFile ~/.ssh/prod.k8s.id_rsa
...&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위의 구성이 끝나면, 다음과 같이 한번에 로컬에서 내부 서브넷 호스트에 접속할 수 있게 된다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;$ ssh k8s-prod
Last login: Wed Jan  &lt;span class=&#34;m&#34;&gt;2&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;12&lt;/span&gt;:20:25 UTC &lt;span class=&#34;m&#34;&gt;2019&lt;/span&gt; from &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;.x.x.xx on ssh
Container Linux by CoreOS stable &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1911&lt;/span&gt;.5.0&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
core@ip-10-x-x-x ~ $

$ ssh ip-10-1-178-52.ap-northeast-1.compute.internal
Last login: Wed Jan  &lt;span class=&#34;m&#34;&gt;2&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;12&lt;/span&gt;:47:40 UTC &lt;span class=&#34;m&#34;&gt;2019&lt;/span&gt; from &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt;.1.178.52 on pts/0
Container Linux by CoreOS stable &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1911&lt;/span&gt;.5.0&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
core@ip-10-1-178-52 ~ $&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content>
      
    </item>
    
    <item>
      <title>[번역] 최신 네트워크 로드 밸런싱 및 프록시 소개</title>
      <link>https://ziwon.github.io/post/modern-network-load-balancing-and-proxying/</link>
      <pubDate>Mon, 05 Nov 2018 02:37:00 +0000</pubDate>
      <author>Aron Yoon</author>
      <guid>https://ziwon.github.io/post/modern-network-load-balancing-and-proxying/</guid>
      <description></description>
      
      <content>

&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&#34;https://www.envoyproxy.io/&#34; target=&#34;_blank&#34;&gt;Envoy&lt;/a&gt; Creator인 &lt;a href=&#34;https://twitter.com/mattklein123&#34; target=&#34;_blank&#34;&gt;Matt Klein&lt;/a&gt;의 &lt;a href=&#34;https://youtu.be/RVZX4CwKhGE&#34; target=&#34;_blank&#34;&gt;Envoy 소개 동영상&lt;/a&gt;을 보고 Envoy에 완전히 매료되어 좀 더 자세한 배경지식을 알고자 번역해 보았습니다. 원본 출처는 &lt;a href=&#34;https://blog.envoyproxy.io/introduction-to-modern-network-load-balancing-and-proxying-a57f6ff80236&#34; target=&#34;_blank&#34;&gt;Introduction to modern network load balancing and proxying&lt;/a&gt;입니다.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;최근 네트워크 로드 밸런싱과 프록시에 관한 입문 교육 자료가 부족하다는 사실이 관심을 끌었습니다. 어떻게 이게 가능하지? 라고 속으로 생각했습니다. 로드 밸런싱은 안정적인 분산 시스템 구축에 필요한 핵심 개념 중 하나입니다. 당연히 쓸만한 고급진 정보들이 있어야 합니다. 검색을 해보았으나 사실 쓸만한 것들이 별로 없다는 것을 알게 되었습니다. 위키피디아 기사에는 일부 개념에 대한 개요가 포함되어 있긴 하나, 우아한 내용들은 아니었습니다. 특히, 최신 마이크로 서비스 아키텍처에 관해서 말이죠. 로드 밸런싱을 대한 구글 검색은 주로 버즈 워드가 많고 내용은 없는 벤더 페이지들입니다.&lt;/p&gt;

&lt;p&gt;이 글에서 저는 최신 네트워크 로드밸런싱과 프록시를 소개하며 정보 부족을 해결하려고 합니다. 이것은, 솔직히 말해서, 책 한 권 전체의 주제가 될 수 있는 방대한 주제입니다. 이 포스트의 블로그 길이를 유념하면서 복잡한 주제 세트를 간단한 개요로 뽑아보려고 합니다. 관심과 피드백에 따라 추후 개별 주제에 대한 자세한 후속 포스트를 고려해 보겠습니다.&lt;/p&gt;

&lt;p&gt;특이하고 이상한 이 글을 왜 썼는지에 대한 약간의 배경과 함께 - 시작하겠습니다!&lt;/p&gt;

&lt;h2 id=&#34;네트워크-로드-밸런싱과-프록싱이-무엇인가요&#34;&gt;네트워크 로드 밸런싱과 프록싱이 무엇인가요?&lt;/h2&gt;

&lt;p&gt;위키피디아는 다음과 같이 로드 밸런싱을 정의합니다:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;컴퓨팅에서 로드 밸런싱은 컴퓨터, 컴퓨터 클러스터, 네트워크 링크, 중앙 처리 장치 또는 디스크 드라이브와 같은 여러 컴퓨팅 리소스에서 작업 부하 분산을 향상시킵니다. 로드 밸런싱은 리소스 사용을 최적화하고 처리량을 극대화하며 응답 시간을 최소화하고 단일 리소스의 오버로드를 방지하는 것을 목표로 합니다. 단일 구성 요소 대신 로드 밸런싱과 함께 여러 구성 요소를 사용하면 이중화를 통해 안정성과 가용성을 높일 수 있습니다. 로드 밸런싱은 보통 멀티 레이어 스위치 또는 도메인 이름 시스템 서버 프로세스와 같은 전용 소프트웨어 또는 하드웨어가 사용됩니다.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;위의 정의는 네트워크뿐만 아니라 컴퓨팅의 모든 측면에 적용됩니다. 운영 체제는 로드 밸런싱을 사용하여 물리적 프로세서 간에 작업을 스케줄링하고, Kubernetes과 같은 컨테이너 오케스트레이터는 로드 밸런싱을 사용하여 컴퓨팅 클러스터 전체에서 작업을 스케줄링하고, 네트워크 로드 밸런서는 사용 가능한 백엔드에서 네트워크 작업을 스케줄링합니다. 이 포스트의 나머지 부분에서는 네트워크 로드 밸런싱만 다룹니다.&lt;/p&gt;

&lt;p&gt;&lt;center&gt;&lt;img src=&#34;https://cdn-images-1.medium.com/max/1600/1*cCV-7Q-DDw87xNnTIVIhEg.png&#34;/&gt;
&lt;small&gt;그림 1. 네트워크 로드 밸런싱 개요&lt;/center&gt;&lt;/small&gt;&lt;/p&gt;

&lt;p&gt;그림 1은 네트워크 로드 밸런싱의 개략적인 개요를 보여줍니다. 일부 클라이언트는 일부 백엔드에 리소스를 요청하고 있습니다. 로드 밸런서는 클라이언트와 백엔드 사이에 위치하며 상위 레벨에서 몇 가지 중요한 작업을 수행합니다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;서비스 디스커버리&lt;/strong&gt;: 시스템에서 사용할 수 있는 백엔드는 무엇인가요? 그들 주소가 어떻게 되나요?&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;헬스 체킹&lt;/strong&gt;: 현재 정상이며 요청을 수락할 수 있는 백엔드는 무엇인가요?&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;로드 밸런싱&lt;/strong&gt;: 모든 정상적인 백엔드에 대한 개별 요청의 균형을 맞추기 위해 어떤 알고리즘을 사용해야 할까요?&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;분산 시스템에서 로드 밸런싱을 적절하게 사용하면 다음과 같은 몇 가지 이점이 있습니다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;네이밍 추상화&lt;/strong&gt;: 모든 클라이언트가 모든 백엔드(서비스 디스커버리)을 알아야 하는 대신에, 클라이언트가 미리 정의된 메커니즘으로 로드 밸런서를 지칭하고, 이름 확인(Name resolution) 작업은 로드 밸런서에 위임할 수 있습니다. 미리 정의된 메커니즘은 기본 제공 라이브러리 및 잘 알려진 DNS/IP/포트 위치를 포함하며 아래에서 보다 자세히 설명합니다.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;strong&gt;장애 허용&lt;/strong&gt;: 상태 확인 및 다양한 알고리즘 기술을 통해 로드 밸런서는 불량 또는 과부하가 걸린 백엔드를 효과적으로 라우팅할 수 있습니다. 이는 운영자가 전형적인 여가 시간 대비 비상 조치로 불량 백엔드를 수정할 수 있다는 것을 뜻합니다.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;strong&gt;비용 및 성능 이점&lt;/strong&gt;: 분산 시스템 네트워크는 거의 동질적인 집단으로 구성되지 않습니다. 시스템은 여러 네트워크 Zone과 Region에 걸쳐 있을 가능성이 높습니다. Zone 내에서, 네트워크는 종종 상대적으로 요청량이 낮은 방법으로 구축됩니다. Zone 간에 과다 요청이 표준이 됩니다. 지능형 로드 밸런싱을 통해 가능한 많은 Zone 내에서 요청 트래픽을 유지할 수 있으므로 성능 (대기 시간 감소)이 향상되고 전체 시스템 비용이 절감됩니다 (Zone간 대역폭 및 광섬유 필요 감소).&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;로드-밸런서-대-프록시&#34;&gt;로드 밸런서 대 프록시&lt;/h3&gt;

&lt;p&gt;네트워크 로드 밸런싱 장치에 대해 이야기할 때, 로드 밸런싱 장치 및 프록시라는 용어는 업계 내에서 대략적으로 서로 혼용할 수 있습니다. 이 포스트 또한 용어들을 일반적으로 동등한 것으로 취급합니다. (엄밀히 따지면, 모든 프록시가 로드 밸런서는 아니지만 대다수의 프록시는 로드 밸런싱이 기본적인 기능입니다.)&lt;/p&gt;

&lt;p&gt;일부에서는 내장형 클라이언트 라이브러리의 부분으로 로드 밸런싱을 수행하면 로드 밸런서가 실제로 프록시가 아니라고 덧붙이며 주장할 수 있습니다. 그러나, 저는 구별이 이미 혼란스러운 주제에 불필요한 복잡성을 더하는 것이라고 반박합니다. 로드 밸런서 토폴로지의 유형은 아래에서 자세히 설명되지만, 이 포스트에서는 내장형 로드 밸런서 토폴로지를 프록시 방식의 특수한 경우로 취급하는데 이 때 애플리케이션은 로드 밸런서와 동일한 추상화를 모두 제공하는 내장된 라이브러리를 통해 프록시합니다.&lt;/p&gt;

&lt;h3 id=&#34;l4-연결-세션-로드-밸런싱&#34;&gt;L4 (연결/세션) 로드 밸런싱&lt;/h3&gt;

&lt;p&gt;오늘날 업계 전반에서 로드 밸런싱을 논의할 때 솔루션은 종종 L4와 L7의 두 가지 범주로 분류됩니다. 이러한 범주는 OSI 모델의 4계층과 7계층을 참조합니다. L7 로드 밸런싱에 대해 논의할 때 명확해질 수 있는 이유 때문에, 이것이 우리가 사용하는 용어라는 것은 유감스러운 일이라고 생각합니다. OSI 모델은 TCP 및 UDP와 같은 기존 4계층 프로토콜을 포함하지만 종종 다양한 OSI 계층의 이런저런 잡동사니 프로토콜(예, 만약 L4 TCP 로드 밸런서가 마찬가지로 TLS을 지원하게 되면, 이제 L7 로드 밸런서가 되는 건가요?)을 포함하기 일쑤인지라 로드 밸런싱 솔루션의 복잡성에 대한 매우 낮은 근사치입니다.&lt;/p&gt;

&lt;p&gt;&lt;center&gt;&lt;img src=&#34;https://cdn-images-1.medium.com/max/1600/1*1PjTpM3hLnm3iEAd4-_AaQ.png&#34;/&gt;
&lt;small&gt;그림 2. TCP L4 종료 로드 밸런싱&lt;/center&gt;&lt;/small&gt;&lt;/p&gt;

&lt;p&gt;그림 2는 기존 L4 TCP 로드 밸런서를 보여줍니다. 이 경우 클라이언트는 로드 밸런서에 TCP를 연결합니다. 로드 밸런서는 연결을 종료하고(예, SYN에 직접 응답하고) 백엔드를 선택한 다음 새 TCP 연결을 만듭니다(예, 새 SYN 전송). 다이어그램의 세부 정보는 중요하지 않으며 아래 L4 로드 밸런싱에 할애된 섹션에서 자세히 논의하겠습니다.&lt;/p&gt;

&lt;p&gt;이 섹션의 핵심 사항은 L4 로드 밸런서가 일반적으로 L4 TCP/UDP 연결/세션 수준에서만 작동한다는 것입니다. 따라서 로드 밸런서는 바이트 앞뒤를 거칠게 셔플해서, 동일한 세션의 바이트가 동일한 백엔드에서 끝나도록 합니다. L4 로드 밸런서는 셔플링 중인 바이트의 애플리케이션 세부 정보를 인식하지 못합니다. 바이트는 HTTP, Redis, MongoDB 또는 다른 애플리케이션 프로토콜일 수 있습니다.&lt;/p&gt;

&lt;h3 id=&#34;l7-어플리케이션-로드-밸런싱&#34;&gt;L7 (어플리케이션) 로드 밸런싱&lt;/h3&gt;

&lt;p&gt;L4 로드 밸런싱은 간단하면서도 널리 사용됩니다. L7 (애플리케이션) 로드 밸런싱 투자를 보증하는 L4 로드 밸런싱의 단점은 무엇일까요? 다음 L4 관련 사례를 예로 들어 보겠습니다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;두 개의 gRPC/HTTP2 클라이언트는 백엔드와 통신하며 L4 로드 밸런서를 통해 연결하려고 합니다.&lt;/li&gt;
&lt;li&gt;L4 로드 밸런서는 들어오는 각 TCP 연결에 대해 단일 송신 TCP 연결을 생성하므로 두 개의 수신 연결과 두 개의 송신 연결이 발생합니다.&lt;/li&gt;
&lt;li&gt;그런데, 클라이언트 A는 연결을 통해 분당 1개의 요청(RPM)을 보내고 클라이언트 B는 연결을 통해 초당 50개의 요청(RPS)을 보냅니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;이전 시나리오에서 클라이언트 A를 처리하기 위해 선택된 백엔드는 클라이언트 B를 처리하기 위해 선택된 백엔드에 비해 약 3,000배의 부하를 처리합니다! 이것은 큰 문제이며, 일반적으로 시작부터 로드 밸런싱의 목적을 무산시킵니다. 또한 이 문제는 모든 멀티플렉싱, keep-alive 프로토콜에서 발생합니다. (멀티플렉싱은 단일 L4 연결을 통해 동시 응용 프로그램 요청을 보내고 사용 중인 요청이 없을 때 연결을 닫지 않는 것을 의미합니다.) 최신 프로토콜은 모두 효율성 이유(특히 TLS를 사용하여 연결을 암호화하는 경우)로 멀티플렉싱와 keep-alive 두 가지로 진화하고 있으므로 L4 로드 밸런서의 임피던스 불일치가 시간이 지남에 따라 더욱 뚜렷해지고 있습니다. L7 로드 밸런서가 이 문제를 해결합니다.&lt;/p&gt;

&lt;p&gt;&lt;center&gt;&lt;img src=&#34;https://cdn-images-1.medium.com/max/1600/1*zsaxjSziEm1Tipr6kxs5Zg.png&#34;/&gt;
&lt;small&gt;그림 3. HTTP/2 L7 종료 로드 밸런싱&lt;/center&gt;&lt;/small&gt;&lt;/p&gt;

&lt;p&gt;그림 3은 L7 HTTP/2 로드 밸런서를 보여줍니다. 이 경우 클라이언트는 로드 밸런서에 단일 HTTP/2 TCP를 연결합니다. 그런 다음 로드 밸런서는 두 개의 백엔드 연결을 만듭니다. 클라이언트가 두 개의 HTTP/2 스트림을 로드 밸런서에 전송하면 스트림 1은 백엔드 1로 전송되고 스트림 2는 백엔드 2로 전송됩니다. 따라서 요청 부하가 매우 다른 멀티플렉싱 클라이언트도 백엔드에서 효율적으로 균형을 맞출 것입니다. 이것이 바로 L7 로드 밸런싱이 최신 프로토콜에 매우 중요한 이유입니다.&lt;/p&gt;

&lt;h3 id=&#34;l7-로드-밸런싱-그리고-osi-모델&#34;&gt;L7 로드 밸런싱 그리고 OSI 모델&lt;/h3&gt;

&lt;p&gt;앞서 L4 로드 밸런싱 섹션에서 말씀드린 것처럼 로드 밸런싱 기능을 설명하기 위해 OSI 모델을 사용하는 것은 문제가 있습니다. 그 이유는, 다른 것은 몰라도 OSI 모델에서 기술되는 것과 같이, L7 자체가 로드 밸런싱 추상화의 여러 개별 계층을 포괄하기 때문입니다. 예를 들어 HTTP 트래픽의 경우 다음과 같은 하위 계층을 생각해 볼 수 있습니다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;선택적 TLS(Transport Layer Security). 네트워크쪽 사람들이 어떤 OSI 계층이 TLS에 속하는지 논의 중입니다. 이 논의를 위해 우리는 TLS L7을 검토할 것입니다.&lt;/li&gt;
&lt;li&gt;물리적 HTTP 프로토콜(HTTP/1 또는 HTTP/2).&lt;/li&gt;
&lt;li&gt;논리적 HTTP 프로토콜(헤더, 본문 데이터 및 트레일러).&lt;/li&gt;
&lt;li&gt;메시징 프로토콜(gRPC, REST 등).&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;정교한 L7 로드 밸런싱 장치는 위의 각 하위 계층과 관련된 기능을 제공할 수 있습니다. 다른 L7 로드 밸런서에는 L7 범주에 속하는 기능 중 작은 부분만 있을 수 있습니다. 즉, L7 로드 밸런서 환경은 L4 범주보다 기능을 비교하는 관점에서 훨씬 더 복잡합니다. (물론 이 섹션에서는 HTTP에 대해 좀전에 다루었습니다. Redis, Kafka, MongoDB 등은 모두 L7 로드 밸런싱의 이점을 제공하는 L7 애플리케이션 프로토콜의 예입니다.)&lt;/p&gt;

&lt;h2 id=&#34;로드-밸런서-기능&#34;&gt;로드 밸런서 기능&lt;/h2&gt;

&lt;p&gt;이 섹션에서는 로드 밸런서가 제공하는 상위 레벨 기능을 간략하게 요약합니다. 모든 로드 밸런서가 모든 기능을 제공하는 것은 아닙니다.&lt;/p&gt;

&lt;h3 id=&#34;서비스-디스커버리-service-discovery&#34;&gt;서비스 디스커버리 (Service discovery)&lt;/h3&gt;

&lt;p&gt;서비스 디스커버리는 로드 밸런서가 사용 가능한 백엔드 셋을 결정하는 프로세스입니다. 방법은 매우 다양하며 다음과 같은 예를 들 수 있습니다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;정적 환경설정 파일.&lt;/li&gt;
&lt;li&gt;DNS.&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://zookeeper.apache.org/&#34; target=&#34;_blank&#34;&gt;Zookeeper&lt;/a&gt;, &lt;a href=&#34;https://coreos.com/etcd/&#34; target=&#34;_blank&#34;&gt;Etcd&lt;/a&gt;, &lt;a href=&#34;https://www.consul.io/&#34; target=&#34;_blank&#34;&gt;Consul&lt;/a&gt; 등.&lt;/li&gt;
&lt;li&gt;Envoy의 &lt;a href=&#34;https://medium.com/@mattklein123/the-universal-data-plane-api-d15cec7a&#34; target=&#34;_blank&#34;&gt;범용 데이터 플레인 API&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;헬스-체킹-health-checking&#34;&gt;헬스 체킹 (Health checking)&lt;/h3&gt;

&lt;p&gt;헬스 체킹은 로드 밸런서가 트래픽을 처리하는데 백엔드를 사용할 수 있는지 여부를 결정하는 프로세스입니다. 헬스 체킹은 일반적으로 두 가지 범주로 나뉩니다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;활성&lt;/strong&gt;: 로드 밸런서가 주기적인 간격(예: HTTP 요청을 &lt;code&gt;/healthcheck&lt;/code&gt; 엔드포인트에 전송)을 통해 상태를 측정합니다.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;수동&lt;/strong&gt;: 로드 밸런서가 주 데이터 플로우에서 상태를 감지합니다. 예를 들어, L4 로드 밸런서는 연속 3개의 연결 오류가 있는 경우 백엔드가 비정상이라고 결정할 수 있습니다. L7 로드 밸런서는 연속 세 개의 HTTP 503 응답 코드가 있는 경우 백엔드가 비정상이라고 결정할 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;부하-분산-load-balancing&#34;&gt;부하 분산 (Load balancing)&lt;/h3&gt;

&lt;p&gt;그렇죠. 로드 밸런서는 실제로 부하 분산을 해야합니다! 정상적인 백엔드 셋이 주어질 때, 연결이나 요청에 적합한 백엔드는 어떻게 선택될까요? 로드 밸런싱 알고리즘은 활발한 리서치 영역이며 랜덤 선택 및 라운드 로빈과 같은 단순한 영역에서 다양한 레이턴시 및 백엔드 부하를 계산하는 복잡한 알고리즘에 이르기까지 다양합니다. 성능과 단순성을 고려할 때 가장 널리 사용되는 로드 밸런싱 알고리즘 중 하나는 &lt;a href=&#34;https://brooker.co.za/blog/2012/01/17/two-random.html&#34; target=&#34;_blank&#34;&gt;두 가지 최소 요청 로드 밸런싱의 힘&lt;/a&gt;으로 알려져 있습니다. (역자 주, 링크 제목은 &amp;lsquo;두 가지 무작위 선택의 힘&amp;rsquo;)&lt;/p&gt;

&lt;h3 id=&#34;고정-세션-sticky-sessions&#34;&gt;고정 세션 (Sticky sessions)&lt;/h3&gt;

&lt;p&gt;특정 애플리케이션에서는 같은 세션에 의한 요청이 같은 백엔드에 도달하는 것이 중요합니다. 이는 캐싱, 일시적인 복합 구성 상태 등과 관련이 있을 수 있습니다. 세션의 정의는 다양하며 HTTP 쿠키, 클라이언트 연결 속성 또는 기타 속성을 포함할 수 있습니다. 많은 L7 로드 밸런서는 고정 세션을 지원합니다. 한편, 세션의 고착도(stickiness)는 본질적으로 취약하기 때문에 세션에 의존하는 시스템을 설계할 때는 주의해야 합니다.&lt;/p&gt;

&lt;h3 id=&#34;tls-종료-tls-termination&#34;&gt;TLS 종료 (TLS termination)&lt;/h3&gt;

&lt;p&gt;TLS 주제와 에지 서비스 및 서비스와 서비스 간의 통신 보안 모두에서 TLS의 역할은 따로 포스트할 만큼의 가치가 있습니다. 이에 따라 많은 L7 로드 밸런서는 종료, 인증서 확인 및 핀닝, SNI를 사용한 인증서 서비스 등을 포함한 대량의 TLS 작업을 처리합니다.&lt;/p&gt;

&lt;h3 id=&#34;관측성-observability&#34;&gt;관측성 (Observability)&lt;/h3&gt;

&lt;p&gt;말씀드린 대로, &amp;ldquo;관측성, 관측성, 관측성&amp;rdquo; 입니다. 네트워크는 본질적으로 신뢰할 수 없으며, 로드 밸런서는 종종 작업자가 문제를 해결할 수 있도록 무엇이 잘못되었는지 파악하는 데 도움이 되는 통계, 추적 및 로그를 내보낼 책임이 있습니다. 로드 밸런서는 관측성에 따라 크게 다릅니다. 가장 진보된 로드 밸런서는 숫자 통계, 분산 추적 및 사용자 지정 가능한 로깅을 포함하는 많은 출력을 제공합니다. 향상된 관측성은 거저 얻어지는 게 아니라고 지적하고 싶습니다. 왜냐하면, 로드 밸런서는 이를 생성하기 위한 추가적인 작업을 해야하기 때문입니다. 그러나 이들 데이터가 주는 이득은 상대적으로 성능이 약해서 생기는 결과보다 훨씬 큽니다.&lt;/p&gt;

&lt;h3 id=&#34;보안-및-dos-완화-security-and-dos-mitigation&#34;&gt;보안 및 DoS 완화 (Security and DoS mitigation)&lt;/h3&gt;

&lt;p&gt;특히 에지 배포를 위한 토폴로지(아래 참조)에서는 로드 밸런서가 속도 제한, 인증 및 DoS 완화(예: IP 주소 태깅 및 판독, 타피팅(tarpitting) 등)를 비롯한 다양한 보안 기능을 구현하는 경우가 많습니다.&lt;/p&gt;

&lt;h3 id=&#34;환경-설정-및-컨트롤-플레인-configuration-and-control-plane&#34;&gt;환경 설정 및 컨트롤 플레인 (Configuration and control plane)&lt;/h3&gt;

&lt;p&gt;로드 밸런서는 환경 설정을 해주어야 합니다. 대규모 배포에서 이는 상당한 작업이 될 수 있습니다. 일반적으로, 로드 밸런서를 구성하는 시스템은 &amp;ldquo;컨트롤 플레인(control plane)&amp;ldquo;으로 알려져 있으며 구현이 매우 다양합니다. 이 항목에 대한 자세한 내용은 &lt;a href=&#34;https://medium.com/@mattklein123/service-mesh-data-plane-vs-control-plane-2774e720f7fc&#34; target=&#34;_blank&#34;&gt;데이터 플레인 대 제어 플레인 서비스 메쉬&lt;/a&gt;에 대한 저의 포스트를 참조하세요.&lt;/p&gt;

&lt;h3 id=&#34;그-외-정말-다양한-기능들-and-a-whole-lot-more&#34;&gt;그 외 정말 다양한 기능들 (And a whole lot more)&lt;/h3&gt;

&lt;p&gt;이 섹션에서는 로드 밸런서가 제공하는 기능들의 유형을 수박 겉핥기 식으로 다루어 보았습니다. 아래의 L7 로드 밸런서 섹션에서 추가적인 논의를 확인할 수 있습니다.&lt;/p&gt;

&lt;h2 id=&#34;로드-밸런서-토폴로지-종류&#34;&gt;로드 밸런서 토폴로지 종류&lt;/h2&gt;

&lt;p&gt;이제 로드 밸런서가 무엇인지, L4와 L7 로드 밸런서의 차이와 로드 밸런서 기능의 요약에 대해 개괄적으로 살펴보았으므로 로드 밸런서가 적용된 다양한 분산 시스템 토폴로지로 옮겨 가겠습니다. (다음 토폴로지 중 각 항목은 L4 및 L7 로드 밸런서에 모두 적용됩니다.)&lt;/p&gt;

&lt;h3 id=&#34;미들-프록시&#34;&gt;미들 프록시&lt;/h3&gt;

&lt;p&gt;&lt;center&gt;&lt;img src=&#34;https://cdn-images-1.medium.com/max/1600/1*cCV-7Q-DDw87xNnTIVIhEg.png&#34;/&gt;
&lt;small&gt;그림 4. 미들 프록시 로드 밸런싱 토폴로지&lt;/center&gt;&lt;/small&gt;&lt;/p&gt;

&lt;p&gt;그림 4에 표시된 미들 프록시 토폴로지는 대부분의 독자들이 로드 밸런싱을 확보하는 가장 익숙한 방법입니다. 이 범주에는 Cisco, Juniper, F5 등의 하드웨어 장치, Amazon의 &lt;a href=&#34;https://aws.amazon.com/elasticloadbalancing/&#34; target=&#34;_blank&#34;&gt;ALB 및 NLB&lt;/a&gt;와 Google의 &lt;a href=&#34;https://cloud.google.com/load-balancing/&#34; target=&#34;_blank&#34;&gt;클라우드 로드 밸런서&lt;/a&gt; 같은 클라우드 소프트웨어 솔루션 및 &lt;a href=&#34;https://www.haproxy.com/&#34; target=&#34;_blank&#34;&gt;HAProxy&lt;/a&gt;, &lt;a href=&#34;https://www.nginx.com/&#34; target=&#34;_blank&#34;&gt;NGINX&lt;/a&gt;, 그리고 &lt;a href=&#34;https://www.envoyproxy.io/&#34; target=&#34;_blank&#34;&gt;Envoy&lt;/a&gt;와 같은 순수 소프트웨어 자체 호스팅 솔루션이 포함됩니다. 미들 프록시 솔루션의 핵심은 사용자 단순성입니다. 일반적으로 사용자는 DNS를 통해 로드 밸런서에 연결되므로 다른 어떤 것도 걱정할 필요가 없습니다. 미들 프록시 솔루션의 핵심은 프록시(클러스터된 경우에도)가 단일 장애 지점이며 병목 현상도 증가한다는 점입니다. 미들 프록시도 운영을 어렵게 만드는 블랙박스입니다. 클라이언트에서 보여지는 문제가 있나요? 물리적 네트워크에서? 중간 프록시에서? 백엔드에서? 매우 알기 어려울 수 있습니다.&lt;/p&gt;

&lt;h3 id=&#34;에지-프록시&#34;&gt;에지 프록시&lt;/h3&gt;

&lt;p&gt;&lt;center&gt;&lt;img src=&#34;https://cdn-images-1.medium.com/max/1600/1*4zSWjsKnaC6QQmJ7PTj7Eg.png&#34;/&gt;
&lt;small&gt;그림 5. 에지 프록시 로드 밸런싱 토폴로지&lt;/center&gt;&lt;/small&gt;&lt;/p&gt;

&lt;p&gt;그림 5에 표시된 에지 프록시 토폴로지는 실제로 인터넷을 통해 로드 밸런서에 액세스할 수 있는 미들 프록시 토폴로지의 변형일 뿐입니다. 이 시나리오에서는 일반적으로 로드 밸런서가 TLS 종료, 속도 제한, 인증 및 정교한 트래픽 라우팅과 같은 추가 &amp;ldquo;API 게이트웨이&amp;rdquo; 기능을 제공해야 합니다. 에지 프록시의 장단점은 미들 프록시와 같습니다. 일반적으로 인터넷을 지향하는 대규모 분산 시스템에서 전용 에지 프록시를 배포할 수 없다는 것이 주의사항입니다. 클라이언트는 일반적으로 서비스 소유자가 제어하지 않는 임의의 네트워크 라이브러리를 사용하여 DNS를 통해 시스템에 액세스해야 합니다(다음 섹션에서 설명하는 내장형 클라이언트 라이브러리 또는 사이드카 프록시 토폴로지는 클라이언트에서 직접 실행하기에는 실용적이지 않습니다). 추가적으로, 보안상의 이유로 모든 인터넷 트래픽이 시스템에 들어오는 수단으로 단일 게이트웨이를 사용하는 것이 좋습니다.&lt;/p&gt;

&lt;h3 id=&#34;내장형-클라이언트-라이브러리&#34;&gt;내장형 클라이언트 라이브러리&lt;/h3&gt;

&lt;p&gt;&lt;center&gt;&lt;img src=&#34;https://cdn-images-1.medium.com/max/1600/1*nuqZiYoFEkDe2cUgMh0aQw.png&#34;/&gt;
&lt;small&gt;그림 6. 내장형 클라이언트 라이브러리를 통한 로드 밸런싱&lt;/center&gt;&lt;/small&gt;&lt;/p&gt;

&lt;p&gt;미들 프록시 토폴로지에 내재된 단일 장애 지점과 확장 문제를 피하기 위해, 보다 정교한 인프라는 그림 6에서 보는 것처럼 라이브러리를 통해 로드 밸런서를 서비스에 직접 내장하는 쪽으로 이동했으며, 대부분의 라이브러리들은 다양한 기능을 지원하고 있습니다. &lt;a href=&#34;https://twitter.github.io/finagle/&#34; target=&#34;_blank&#34;&gt;Finagle&lt;/a&gt;, &lt;a href=&#34;https://netflix.github.io/&#34; target=&#34;_blank&#34;&gt;Eureka/Ribbon/Hystrix&lt;/a&gt; 및 &lt;a href=&#34;https://grpc.io/&#34; target=&#34;_blank&#34;&gt;gRPC&lt;/a&gt;(Stougy라고 하는 내부 Google 시스템을 기반으로 함) 라이브러리 기반 솔루션의 주요 장점은 로드 밸런서의 모든 기능을 각 클라이언트에 완전히 분산하여 단일 장애 지점(single point of failure)과 앞서 설명한 확장성 이슈를 제거한다는 것입니다. 라이브러리 기반 솔루션의 주된 단점은 라이브러리가 조직에서 사용하는 모든 언어로 구현되어야 한다는 점입니다. 분산형 아키텍처는 점점 더 &amp;ldquo;폴리글랏(다중 언어)&amp;ldquo;이 증가하고 있습니다. 이러한 환경에서는 여러 언어로 매우 정교한 네트워킹 라이브러리를 다시 구축하는 비용이 엄청나게 들 수 있습니다. 마지막으로, 대규모 서비스 아키텍처에 걸쳐 라이브러리 업그레이드를 배포하는 것은 매우 고통스러울 수 있으며, 다양한 버전의 라이브러리가 운영 환경에서 동시에 실행되게 함으로써 운영 인지 부하(operational cognitive load)가 증가할 가능성이 매우 높습니다.&lt;/p&gt;

&lt;p&gt;모두 그렇다고 해도, 위에서 언급한 라이브러리들은 프로그래밍 언어의 확산을 제한하고 라이브러리 업그레이드 고통을 극복한 회사들에게는 성공적이었습니다.&lt;/p&gt;

&lt;h3 id=&#34;사이드카-프록시&#34;&gt;사이드카 프록시&lt;/h3&gt;

&lt;p&gt;&lt;center&gt;&lt;img src=&#34;https://cdn-images-1.medium.com/max/1600/1*wPoZoz6cKAo0HBi1wmNZtA.png&#34;/&gt;
&lt;small&gt;그림 7. 사이드카를 통한 로드 밸런싱&lt;/center&gt;&lt;/small&gt;&lt;/p&gt;

&lt;p&gt;내장형 클라이언트 라이브러리 로드 밸런서 토폴로지의 변형은 그림 7에 표시된 사이드카 프록시 토폴로지입니다. 최근 몇 년간 이 토폴로지는 &amp;ldquo;서비스 메시&amp;rdquo;로 대중화되었습니다. 사이드카 프록시 이면의 아이디어는 다른 프로세스에 뛰어들어 약간의 지연 시간 페널티를 지불하는 비용으로 내장된 라이브러리 접근 방식의 모든 장점을 프로그래밍 언어를 락(제한)하지 않아도 얻을 수 있다는 것입니다. 이 글을 작성할 때, 가장 인기 있는 사이드카 프록시 로드 밸런서는 &lt;a href=&#34;https://www.envoyproxy.io/&#34; target=&#34;_blank&#34;&gt;Envoy&lt;/a&gt;, &lt;a href=&#34;https://www.nginx.com/&#34; target=&#34;_blank&#34;&gt;NGINX&lt;/a&gt;, &lt;a href=&#34;https://www.haproxy.com/&#34; target=&#34;_blank&#34;&gt;HAProxy&lt;/a&gt; 및 &lt;a href=&#34;https://linkerd.io/&#34; target=&#34;_blank&#34;&gt;Linkerd&lt;/a&gt;입니다. 사이드카 프록시 접근 방식에 대한 보다 자세한 처리에 대해서는 &lt;a href=&#34;https://eng.lyft.com/announcing-envoy-c-l7-proxy-and-communication-bus-92520b6c8191&#34; target=&#34;_blank&#34;&gt;Envoy를 소개하는 블로그 포스트&lt;/a&gt;와 또한 &lt;a href=&#34;https://medium.com/@mattklein123/service-mesh-data-plane-vs-control-plane-2774e720f7fc&#34; target=&#34;_blank&#34;&gt;서비스 메시 데이터 플레인 대 컨트롤 플레인&lt;/a&gt;에 대한 저의 포스트를 참조하시길 바랍니다.&lt;/p&gt;

&lt;h3 id=&#34;다른-로드-밸런서-토폴로지-장단점-요약&#34;&gt;다른 로드 밸런서 토폴로지 장단점 요약&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;미들 프록시 토폴로지는 일반적으로 사용하기 가장 쉬운 로드 밸런싱 토폴로지입니다. 단일 장애 지점, 스케일링 제한 및 블랙 박스 운영으로 인해 성능이 떨어집니다.&lt;/li&gt;
&lt;li&gt;에지 프록시 토폴로지는 미들 프록시와 유사하지만 전형적으로 피해갈 수는 없습니다.&lt;/li&gt;
&lt;li&gt;내장된 클라이언트 라이브러리 토폴로지는 최고의 성능과 확장성을 제공하지만 라이브러리를 모든 언어로 구현해야 하는 필요성뿐 아니라 모든 서비스에 걸쳐 라이브러리를 업그레이드해야 하는 필요성 때문에 어려움을 겪고 있습니다.&lt;/li&gt;
&lt;li&gt;사이드카 프록시 토폴로지는 내장된 클라이언트 라이브러리 토폴로지와 성능이 떨어지지는 않지만 그 어떤 제한으로부터 어려움을 겪지는 않습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;전반적으로, 저는 사이드카 프록시 토폴로지(서비스 메시)가 서비스 간의 통신을 위해 다른 모든 토폴로지를 점차 대체할 것이라고 생각합니다. 에지 프록시 토폴로지는 항상 트래픽이 서비스 메쉬로 들어가기 전에 필요합니다.&lt;/p&gt;

&lt;h2 id=&#34;l4-로드-밸런싱의-기술-현황&#34;&gt;L4 로드 밸런싱의 기술 현황&lt;/h2&gt;

&lt;h3 id=&#34;l4-로드-밸런서는-여전히-관련이-있을까요&#34;&gt;L4 로드 밸런서는 여전히 관련이 있을까요?&lt;/h3&gt;

&lt;p&gt;이 포스트는 이미 L7 로드 밸런싱 장치가 현대적 프로토콜에 얼마나 대단한지에 대해 논의했으며, 더 자세한 L7 로드 밸런서 기능에 대해 아래에서 살펴볼 예정입니다. 이는 L4 로드 밸런서가 더 이상 관련이 없다는 뜻일까요? 아니요! 비록 L7 로드 밸런서가 궁극적으로 서비스 간의 통신을 위해 L4 로드 밸런서를 완전히 대체하겠지만, L4 로드 밸런서는 여전히 에지에서 매우 유효합니다. 왜냐하면 대부분의 대규모 분산 아키텍처는 2가지 티어의 L4/L7 로드 밸런싱를 사용하기 때문입니다. 에지 배치에서 L7 로드 밸런서보다 먼저 전용 L4 로드 밸런서를 배치하여 얻는 이득은 다음과 같습니다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;L7 로드 밸런서는 애플리케이션 트래픽의 훨씬 더 정교한 분석, 변환 및 라우팅을 수행하므로 최적화된 L4 로드 밸런서보다 원시 트래픽 로드(초당 패킷 및 초당 바이트로 측정)의 상대적으로 작은 부분을 처리할 수 있습니다. 이러한 사실은 일반적으로 L4 로드 밸런서가 더 나은 위치에서 특정 유형의 DoS 공격(예: SYN 플러딩, 일반 패킷 플러딩 공격 등)을 처리하도록 합니다.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;L7 로드 밸런서는 L4 로드 밸런서보다 더 활발하게 개발되고, 더 자주 배치되며, 버그가 더 많습니다. L7 로드 밸런서를 배포하는 동안, 헬스 체킹하고 축출할 수 있는 L4 로드 밸런서를 전면에 배치하는 것은 일반적으로 BGP 및 ECMP를 사용하는 최신 L4 로드 밸런서에 사용되는 배치 메커니즘보다 훨씬 더 쉽습니다(아래 내용 참조). 그리고 마지막으로, L7 로드 밸런서는 복잡한 기능들로 인해 버그를 가질 가능성이 높기 때문에, 장애 및 이상 징후를 중심으로 라우팅할 수 있는 L4 로드 밸런서를 사용하면, 보다 안정적인 전체 시스템이 만들어집니다.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;다음 섹션에서는 미들/에지 프록시 L4 로드 밸런서를 위한 여러가지 디자인에 대해 설명합니다. 이 디자인들은 일반적으로 클라이언트 라이브러리 및 사이드카 프록시 토폴로지에는 적용되지 않습니다.&lt;/p&gt;

&lt;h3 id=&#34;tcp-udp-종료-termination-로드-밸런서&#34;&gt;TCP/UDP 종료 (termination) 로드 밸런서&lt;/h3&gt;

&lt;p&gt;&lt;center&gt;&lt;img src=&#34;https://cdn-images-1.medium.com/max/1600/1*1PjTpM3hLnm3iEAd4-_AaQ.png&#34;/&gt;
&lt;small&gt;그림 8. L4 종료 로드 밸런서&lt;/center&gt;&lt;/small&gt;&lt;/p&gt;

&lt;p&gt;여전히 사용 중인 L4 로드 밸런서의 첫 번째 유형은 그림 8에 표시된 종료 로드 밸런서입니다. 위의 L4 로드 밸런싱 소개에서 본 것과 동일한 로드 밸런서입니다. 이러한 유형의 로드 밸런서에서는 클라이언트와 로드 밸런서 간에, 그리고 로드 밸런서와 백엔드 간에 서로 다른 두 개의 TCP 연결이 사용됩니다.&lt;/p&gt;

&lt;p&gt;L4 종료 로드 밸런서는 다음 두 가지 이유로 계속 사용됩니다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;이들은 상대적으로 구현이 쉽습니다.&lt;/li&gt;
&lt;li&gt;클라이언트와 아주 근접한 (낮은 지연 시간) 연결 종료는 상당한 성능 영향을 미칩니다. 특히, 종료 로드 밸런서를 손실된 네트워크(예: 셀룰러)를 사용하는 클라이언트 가까이에 배치할 수 있는 경우, 최종 위치로 전송 도중에 데이터가 안정적인 광섬유 전송 장치로 이동되기 전 재전송이 더 빨리 발생할 수 있습니다. 달리 말하면, 이러한 유형의 로드 밸런서는 원시 TCP 연결 종료의 POP(Point of Presence) 시나리오에서 사용될 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;tcp-udp-패스스루-passthrough-로드-밸런서&#34;&gt;TCP/UDP 패스스루 (passthrough) 로드 밸런서&lt;/h3&gt;

&lt;p&gt;&lt;center&gt;&lt;img src=&#34;https://cdn-images-1.medium.com/max/1600/1*mf0S8BrWjxSBU-mP4ZpC9A.png&#34;/&gt;
&lt;small&gt;그림 9. L4 패스스루 로드 밸런서&lt;/center&gt;&lt;/small&gt;&lt;/p&gt;

&lt;p&gt;두 번째 유형의 L4 로드 밸런서는 그림 9에 표시된 패스스루 로드 밸런서입니다. 이 유형의 로드 밸런서에서는 TCP 연결이 로드 밸런서에 의해 종료되지 않습니다. 대신 연결 추적 및 NAT(&lt;a href=&#34;https://en.wikipedia.org/wiki/Network_address_translation&#34; target=&#34;_blank&#34;&gt;네트워크 주소 변환&lt;/a&gt;)이 수행된 후 각 연결에 대한 패킷이 선택된 백엔드로 전달됩니다. 먼저 연결 추적과 NAT을 정의하겠습니다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;연결 추적&lt;/strong&gt;: 모든 활성 TCP 연결의 상태를 추적하는 프로세스입니다. 여기에는 핸드셰이크가 완료되었는지 여부, FIN이 수신되었는지 여부, 연결 유휴 상태가 얼마나 오래되었는지, 연결에 대해 어떤 백엔드를 선택했는지에 대한 데이터가 포함됩니다.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;strong&gt;NAT&lt;/strong&gt;: NAT은 연결 추적 데이터를 사용하여 패킷이 로드 밸런서를 통과할 때 패킷의 IP/포트 정보를 변경하는 프로세스입니다.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;연결 추적과 NAT을 모두 사용하며 로드 밸런서는 클라이언트에서 백엔드로 원시 TCP 트래픽을 대부분 전달할 수 있습니다. 예를 들어, 클라이언트가 &lt;code&gt;1.2.3.4:80&lt;/code&gt;을 가리키고 있고 선택한 백엔드는 &lt;code&gt;10.0.2:9000&lt;/code&gt;에 있다고 가정해 보겠습니다. 클라이언트 TCP 패킷은 &lt;code&gt;1.2.3.4:80&lt;/code&gt;에 로드 밸런서에 도착합니다. 그런 다음 로드 밸런서는 패킷의 대상 IP 및 포트를 &lt;code&gt;10.0.2:9000&lt;/code&gt;으로 교환하고 패킷의 소스 IP를 로드 밸런서의 IP 주소로 교환합니다. 따라서 백엔드가 TCP 연결에서 응답하면 패킷은 연결 추적을 실행하는 로드 밸런서로 다시 돌아가고 NAT은 역방향으로 다시 수행될 수 있습니다.&lt;/p&gt;

&lt;p&gt;이전 섹션에서 설명한 종료 로드 밸런서 대신 더 복잡한 이 유형의 로드 밸런서가 사용되는 이유는 무엇일까요? 몇 가지 이유는 다음과 같습니다:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;성능 및 리소스 사용&lt;/strong&gt;: 패스스루 로드 밸런서는 TCP 연결을 종료하지 않으므로 TCP 연결 윈도우를 버퍼링할 필요가 없습니다. 연결당 저장된 상태의 양은 매우 작고 일반적으로 효율적인 해시 테이블 검색을 통해 액세스됩니다. 이 때문에 패스스루 로드 밸런서는 일반적으로 종료 로드 밸런서보다 훨씬 많은 수의 액티브 연결 및 초당 패킷(PPS)을 처리할 수 있습니다.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;strong&gt;백엔드가 사용자 지정 혼잡 제어(congestion control)를 할 수 있게 합니다.&lt;/strong&gt;: &lt;a href=&#34;https://en.wikipedia.org/wiki/TCP_congestion_control&#34; target=&#34;_blank&#34;&gt;TCP 정체 제어&lt;/a&gt;는 어느 인터넷 엔드포인트가 사용 가능한 대역폭과 버퍼를 초과하지 않도록 전송되는 데이터를 제어하는 메커니즘입니다. 패스스루 로드 밸런서는 TCP 연결을 종료하지 않으므로 혼잡 제어에 참여하지 않습니다. 이 사실은 백엔드가 애플리케이션 유즈 케이스에 따라 다양한 혼잡 제어 알고리즘을 사용할 수 있게 해준다는 것입니다. 또한 혼잡 제어 변경(예: 최근 &lt;a href=&#34;https://queue.acm.org/detail.cfm?id=3022184&#34; target=&#34;_blank&#34;&gt;BBR&lt;/a&gt; 롤아웃)에 대한 실험도 보다 쉽게 할 수 있습니다.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;strong&gt;DSR(Direct Server Return) 및 클러스터 L4 로드 밸런싱의 기준을 구성합니다.&lt;/strong&gt;: DSR 및 분산 컨시스턴트 해싱을 사용한 클러스터링과 같은 고급 L4 로드 밸런싱 기법에는 패스스루 로드 밸런싱이 필요합니다(다음 섹션에서 설명함).&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;dsr-direct-server-return&#34;&gt;DSR (direct server return)&lt;/h3&gt;

&lt;p&gt;&lt;center&gt;&lt;img src=&#34;https://cdn-images-1.medium.com/max/1600/1*4IW2Y8SvovEMrWpuZA-mtg.png&#34;/&gt;
&lt;small&gt;그림 10. L4 DSR (irect server return)&lt;/center&gt;&lt;/small&gt;&lt;/p&gt;

&lt;p&gt;그림 10은 DSR(Direct Server Return) 로드 밸런서를 보여주고 있습니다. DSR은 이전 섹션에서 설명한 패스스루 로드 밸런서를 기반으로 합니다. DSR은 수신(ingress)/요청(request) 패킷만 로드 밸런서를 횡단하는 최적화입니다. 송신(engress)/응답(response) 패킷은 로드 밸런서 주위를 다시 클라이언트로 이동합니다. DSR을 수행하는 것이 흥미로운 주된 이유는 많은 작업 부하에서 응답 트래픽이 요청 트래픽을 작아지게 하기 때문입니다. (예: 전형적인 HTTP 요청/응답 패턴). 10%의 트래픽이 요청 트래픽이고 90%의 트래픽이 응답 트래픽이라고 가정한다면, 용량의 1/10을 사용하는 로드 밸런서는 시스템의 요구를 충족할 수 있습니다. 역사적으로 로드 밸런서는 매우 비싸기 때문에 이러한 유형의 최적화는 시스템 비용과 신뢰성에 상당한 영향을 미칠 수 있습니다(적은 게 항상 좋습니다). DSR 로드 밸런싱 장치는 다음과 같이 패스스루 로드 밸런서의 개념을 확장합니다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;로드 밸런서는 여전히 부분적인 연결 추적을 일반적으로 수행합니다. 응답 패킷은 로드 밸런서를 이동하지 않으므로 로드 밸런서는 전체 TCP 연결 상태를 인식하지 못합니다. 그러나 로드 밸런서는 클라이언트 패킷을 보고 다양한 유형의 유휴 시간 타임아웃을 사용하여 상태를 견고히 추론할 수 있습니다.&lt;/li&gt;
&lt;li&gt;NAT 대신 로드 밸런서는 일반적으로 &lt;a href=&#34;https://en.wikipedia.org/wiki/Generic_Routing_Encapsulation&#34; target=&#34;_blank&#34;&gt;GRE(Generic Routing Encapsulation)&lt;/a&gt;를 사용하여 로드 밸런서에서 백엔드로 전송되는 IP 패킷을 캡슐화합니다. 따라서 백엔드가 캡슐화된 패킷을 받으면 패킷을 분해해서 클라이언트의 원래 IP 주소와 TCP 포트를 알 수 있습니다. 이렇게 하면 응답 패킷이 로드 밸런서를 통과하지 않고 백엔드가 클라이언트에 직접 응답할 수 있습니다.&lt;/li&gt;
&lt;li&gt;DSR 로드 밸런서의 중요한 부분은 *백엔드가 로드 밸런싱에 참여한다*는 것입니다. 백엔드에 GRE 터널이 올바르게 구성되어 있어야 하며 네트워크 설정의 하위 레벨 세부 정보에 따라 자체 연결 추적, NAT 등이 필요할 수 있습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;패스스루 로드 밸런서와 DSR 로드 밸런서 디자인 모두 로드 밸런서와 백엔드에서 연결 추적을 설정할 수 있는 다양한 방법이 있습니다. 불행히도 이 주제는 이 포스트의 범위를 벗어납니다.&lt;/p&gt;

&lt;h3 id=&#34;고가용성-페어를-통한-장애-허용&#34;&gt;고가용성 페어를 통한 장애 허용&lt;/h3&gt;

&lt;p&gt;&lt;center&gt;&lt;img src=&#34;https://cdn-images-1.medium.com/max/1600/1*dgVKtmARcboQe0up5dQiBQ.png&#34;/&gt;
&lt;small&gt;그림 11. HA 페어와 연결 추적을 통한 L4 장애 허용&lt;/center&gt;&lt;/small&gt;&lt;/p&gt;

&lt;p&gt;지금까지 우리는 단일 L4 로드 밸런서의 디자인을 고려해 왔습니다. 패스스루 및 DSR 로드 밸런서에는 모두 로드 밸런서 자체에서 어느 정도의 연결 추적과 상태가 필요합니다. 로드 밸런서가 죽으면 어떻게 될까요? 로드 밸런서의 단일 인스턴스가 죽으면 로드 밸런서를 통과하는 모든 연결이 끊어집니다. 이는 애플리케이션에 따라 애플리케이션 성능에 상당한 영향을 미칠 수 있습니다.&lt;/p&gt;

&lt;p&gt;역사적으로 L4 로드 밸런싱 장치는 일반적인 벤더(Cisco, Juniper, F5 등)에서 구입한 하드웨어 장치입니다. 이 장치들은 매우 비싸고 많은 양의 트래픽을 처리합니다. 단일 로드 밸런서 장애로 인해 모든 연결이 끊어져 어플리케이션 중단이 발생하는 것을 피하기 위해, 그림 11과 같이 로드 밸런서는 일반적으로 고가용성 페어로 배포되었습니다. 일반적인 HA 로드 밸런서 설정은 다음과 같이 디자인되었습니다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;한 페어의 HA 에지 라우터는 몇 가지 가상 IP(VIP)를 서비스합니다. 이러한 에지 라우터는 BGP(Border Gateway Protocol)를 사용하여 VIP를 알립니다. 기본 에지 라우터는 백업보다 BGP 가중치가 높으므로 모든 트래픽을 처리할 수 있습니다. (BGP는 매우 복잡한 프로토콜이므로, 이 포스트의 목적을 위해, BGP를, 네트워크 장치가 다른 네트워크 장치에서 트래픽을 가져올 수 있다는 사실을 알리며 각 링크가 링크 트래픽의 우선 순위를 매길 수 있는 메커니즘으로 간주합니다.)&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;마찬가지로, 기본 L4 로드 밸런싱 장치는 BGP 가중치가 백업보다 높은 BGP 가중치를 가진 에지 라우터로 자신을 알리므로 모든 트래픽을 안정적으로 처리합니다.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;기본 로드 밸런서는 백업에 교차 연결되고 모든 연결 추적 상태를 공유합니다. 따라서 기본 로드 밸런서가 죽으면 백업이 모든 액티브 연결을 처리할 수 있습니다.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;두 개의 에지 라우터와 두 개의 로드 밸런서는 모두 상호 연결되어 있습니다. 즉, 에지 라우터 중 하나 또는 로드 밸런서 중 하나가 죽거나 다른 이유로 인해 BGP 알림이 취소된 경우 백업이 모든 트래픽을 처리할 수 있습니다.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;위의 설정은 많은 상위 트래픽 인터넷 어플리케이션이 오늘날까지도 서비스되고 있는 방식입니다. 그러나 위의 접근 방식에는 상당한 단점이 있습니다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;VIP 사용량을 고려하여 HA 로드 밸런서 페어 간에 VIP를 올바르게 분할해야 합니다. 단일 VIP가 단일 HA 페어의 용량을 초과하여 확장되는 경우 VIP를 여러 VIP로 분할해야 합니다.&lt;/li&gt;
&lt;li&gt;시스템의 리소스 사용이 열악합니다. 용량의 50%는 정상 상태에서 유휴 상태입니다. 역사적으로 하드웨어 로드 밸런싱 장치가 매우 비싸기다는 것을 감안할 때, 상당한 유휴 자본이 발생합니다.&lt;/li&gt;
&lt;li&gt;최신 분산 시스템 디자인은 액티브/백업보다 장애 허용(fault torlence)이 더 큰 것을 선호합니다. 예를 들어, 시스템이 여러 가지 동시 장애를 겪고 계속 작동할 수 있어야 합니다. HA 로드 밸런서 페어는 활성 및 백업 로드 밸런서가 동시에 죽을 경우, 전체 장애가 쉽게 발생할 수 있습니다.&lt;/li&gt;
&lt;li&gt;벤더의 독점적인 대형 하드웨어 장치는 매우 고가이며 벤더에 종속됩니다. 일반적으로 이러한 하드웨어 장치를 범용 컴퓨팅 서버를 사용하여 구축된 수평 확장 가능한 소프트웨어 솔루션으로 교체하는 것이 좋습니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;분산-컨시스턴트-해싱이-있는-클러스터를-통한-장애-허용-및-확장&#34;&gt;분산 컨시스턴트 해싱이 있는 클러스터를 통한 장애 허용 및 확장&lt;/h3&gt;

&lt;p&gt;&lt;center&gt;&lt;img src=&#34;https://cdn-images-1.medium.com/max/1600/1*q5ZtVZb4UhzuGyhIa5lARA.png&#34;/&gt;
&lt;small&gt;그림 12. 분산 컨시스턴트 해싱이 있는 클러스터를 통한 L4 장애 허용 및 확장&lt;/center&gt;&lt;/small&gt;&lt;/p&gt;

&lt;p&gt;이전 섹션에서는 HA 페어를 통한 L4 로드 밸런서 장애 허용과 해당 디자인의 고유한 문제점을 소개했습니다. 2000년대 초반부터 중반에 이르러 대규모 인터넷 인프라는 그림 12와 같이 대규모 병렬 L4로드 밸런싱 시스템을 디자인하고 구축하기 시작했습니다. 이러한 시스템의 목표는 다음과 같습니다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;이전 섹션에서 설명한 HA 페어 디자인의 단점을 모두 완화&lt;/li&gt;
&lt;li&gt;벤더의 독점 하드웨어 로드 밸런서에서 표준 컴퓨팅 서버 및 NIC를 사용하여 구축된 범용 소프트웨어 솔루션으로 이동&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;이 L4 로드 밸런서 설계를 클러스터링 및 분산 컨시스턴트 해싱을 통해 장애 허용 및 확장이라고 지칭하는 것이 가장 좋습니다. 이는 다음과 같이 작동합니다:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;N 에지 라우터는 모든 애니캐스트 VIP를 동일한 BGP 가중치로 알립니다. 일반적으로 단일 플로우의 모든 패킷이 동일한 에지 라우터에 도달하도록 하기 위해 ECMP(동일한 비용의 다중 경로 라우팅, Equal-Cost Multi-Path Routing)이 사용됩니다. 플로우는 일반적으로 출발지 IP/포트 및 목적지 IP/포트 4개의 튜플입니다. (요컨대, ECMP는 컨시턴트 해싱을 사용하여 패킷을 동일한 가중치 네트워크 링크 집합으로 배포하는 방법입니다.) 에지 라우터 자체는 어떤 패킷이 어디에 도착할지 특별히 신경 쓰지는 않지만, 일반적으로 플로우의 모든 패킷이 성능을 저하시키는 잘못된 순서의 패킷을 피하도록 동일한 링크 집합을 통과하는 것이 좋습니다.&lt;/li&gt;
&lt;li&gt;N L4 로드 밸런서 시스템은 모든 VIP를 에지 라우터에 동일한 BGP 가중치로 알립니다. ECMP를 다시 사용하면 에지 라우터는 일반적으로 플로우에 대해 동일한 로드 밸런서 시스템을 선택합니다.&lt;/li&gt;
&lt;li&gt;각 L4 로드 밸런서 시스템은 일반적으로 부분 연결 추적을 수행한 다음 컨시스턴트 해싱을 사용하여 플로우를 위한 백엔드를 선택합니다. GRE는 로드 밸런서에서 백엔드로 전송된 패킷을 캡슐화하는 데 사용됩니다.&lt;/li&gt;
&lt;li&gt;그런 다음 DSR을 사용하여 에지 라우터를 통해 백엔드에서 클라이언트로 직접 패킷을 전송합니다.&lt;/li&gt;
&lt;li&gt;L4 로드 밸런서가 사용하는 실제 컨시스턴트 해싱 알고리즘은 활발한 리서치 영역입니다. 로드 평준화, 지연 시간 최소화, 백엔드 변경 시 운영 중단 최소화, 메모리 오버헤드 최소화와 관련된 장단점이 있습니다. 이 주제에 대한 전체적인 논의는 이 포스트의 범위를 벗어납니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;위의 디자인이 HA 페어 접근 방식의 모든 단점을 어떻게 완화하는지 살펴보겠습니다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;필요에 따라 새 에지 라우터 및 로드 밸런서 시스템을 추가할 수 있습니다. 컨시스턴트 해싱은 새 시스템을 추가할 때 영향을 받는 플로우의 수를 가능한 많이 줄이기 위해 모든 계층에서 사용됩니다.&lt;/li&gt;
&lt;li&gt;시스템의 리소스 사용량은 버스트 마진과 장애 허용을 충분히 유지하면서 원하는 만큼 높게 실행할 수 있습니다.&lt;/li&gt;
&lt;li&gt;에지 라우터와 로드 밸런서 모두는 이제 기존 하드웨어 로드 밸런싱에 비해 훨씬 적은 비용으로 일반 하드웨어를 사용하여 구축할 수 있습니다(자세한 내용은 아래 참조).&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;이 디자인에 대해 일반적으로 묻는 한 가지 질문은 &amp;ldquo;에지 라우터가 ECMP를 통해 백엔드와 바로 연결되지 않는 이유는 무엇인가요? 대체 왜 로드 밸런서가 필요한가요?&amp;ldquo;입니다. 그 이유는 주로 DoS 완화 및 백엔드 운영 편의성과 관련이 있습니다. 로드 밸런서가 없으면 각 백엔드가 BGP에 참여해야 하며 롤링 배포를 수행하는 데 훨씬 더 많은 시간이 걸립니다.&lt;/p&gt;

&lt;p&gt;모든 최신 L4 로드 밸런싱 시스템은 이 디자인(또는 그 변형)으로 이동하고 있습니다. 가장 널리 알려진 두 가지 예는 Google의 &lt;a href=&#34;https://research.google.com/pubs/pub44824.html&#34; target=&#34;_blank&#34;&gt;Maglev&lt;/a&gt;와 Amazon의 &lt;a href=&#34;http://docs.aws.amazon.com/elasticloadbalancing/latest/network/introduction.html&#34; target=&#34;_blank&#34;&gt;NLB(Network Load Balancer)&lt;/a&gt;입니다. 현재 이 디자인을 구현한 OSS 로드 밸런서는 없지만 2018년 OSS 하나를 출시할 계획 중인 것으로 알고 있는 한 회사가 있습니다. 최신 L4 로드 밸런서는 네트워킹 영역의 OSS가 놓치고 있는 가장 중요한 부분이므로 이번 릴리스에 대해 저는 매우 기쁘게 생각합니다.&lt;/p&gt;

&lt;h2 id=&#34;l7-로드-밸런싱의-기술-현황&#34;&gt;L7 로드 밸런싱의 기술 현황&lt;/h2&gt;

&lt;p&gt;&lt;center&gt;
&lt;blockquote class=&#34;twitter-tweet&#34; data-lang=&#34;en&#34;&gt;&lt;p lang=&#34;en&#34; dir=&#34;ltr&#34;&gt;The proxy wars in tech currently is &lt;em&gt;quite literally&lt;/em&gt; the proxy wars.&lt;br&gt;&lt;br&gt;Or the &amp;quot;war of the proxies&amp;quot;.&lt;br&gt;&lt;br&gt;Nginx plus, HAProxy, linkerd, Envoy all quite literally killing it. &lt;br&gt;&lt;br&gt;And proxy-as-a-service/routing-as-a-service SaaS vendors raising the bar as well. Very interesting times!&lt;/p&gt;&amp;mdash; Cindy Sridharan (@copyconstruct) &lt;a href=&#34;https://twitter.com/copyconstruct/status/935354313617977345?ref_src=twsrc%5Etfw&#34;&gt;November 28, 2017&lt;/a&gt;&lt;/blockquote&gt;
&lt;script async src=&#34;https://platform.twitter.com/widgets.js&#34; charset=&#34;utf-8&#34;&gt;&lt;/script&gt;&lt;/center&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;기술 분야의 프록시 워즈는 현재 &lt;em&gt;문자 그대로&lt;/em&gt; 프록시 워즈이다.&lt;/p&gt;

&lt;p&gt;또는 &amp;ldquo;프록시들의 전쟁&amp;rdquo;.&lt;/p&gt;

&lt;p&gt;Nginx 플러스, HAProxy, linkerd, Envoy 모두 문자 그대로 죽인다. (역자 주: 대박이다는 뜻?)&lt;/p&gt;

&lt;p&gt;서비스형 프록시/서비스형 라우팅 SaaS 벤더들도 그 기준을 높였다. 아주 흥미로운 시대이다!&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;네, 확실히 그렇습니다. 지난 몇 년 동안 L7로드 밸런서/프록시 개발이 부활했습니다. 이 길은 분산 시스템에서 마이크로 서비스 아키텍처로가 지속적인 추진으로 아주 잘 다져지고 있습니다. 본질적으로 결함이 있는 네트워크는 더 자주 사용될 때 효율적으로 작동하기가 훨씬 더 어려워집니다. 또한 오토 스케일링, 컨테이너 스케줄러 등의 등장으로 정적 파일에 정적 IP를 프로비저닝하는 시대는 오래 전에 사라졌습니다. 시스템은 네트워크를 더 많이 활용하고 있을 뿐만 아니라 로드 밸런서에서 새로운 기능을 요구하면서 훨씬 더 동적으로 변하고 있습니다. 이 섹션에서는 최신 L7로드 밸런서에서 가장 많이 발전한 부분을 간략히 설명하겠습니다.&lt;/p&gt;

&lt;h3 id=&#34;프로토콜-지원&#34;&gt;프로토콜 지원&lt;/h3&gt;

&lt;p&gt;최신 L7 로드 밸런서는 여러 가지 다른 프로토콜을 명시적으로 지원합니다. 로드 밸런서가 애플리케이션 트래픽에 대해 더 많은 지식을 가질수록 관측성 아웃풋(observability output), 고급 로드 밸런싱 및 라우팅 등과 관련하여 보다 정교한 작업을 수행할 수 있습니다. 예를 들어, 현재 Envoy는 HTTP/1, HTTP2, gRPC, Redis, MongoDB 및 DynamoDB에 대한 L7 프로토콜 구문 분석 및 라우팅을 명시적으로 지원합니다. 앞으로 MySQL과 Kafka를 포함해 더 많은 프로토콜이 추가될 것입니다.&lt;/p&gt;

&lt;h3 id=&#34;동적-구성&#34;&gt;동적 구성&lt;/h3&gt;

&lt;p&gt;위에서 설명한 것처럼, 분산형 시스템의 점진적 동적 특성은 동적 및 반응형 제어 시스템을 만드는 데 병렬 투자를 필요로 합니다. &lt;a href=&#34;https://istio.io/&#34; target=&#34;_blank&#34;&gt;Istio&lt;/a&gt;는 그러한 시스템의 한 예입니다. 이 주제에 대한 자세한 내용은 &lt;a href=&#34;https://medium.com/@mattklein123/service-mesh-data-plane-vs-control-plane-2774e720f7fc&#34; target=&#34;_blank&#34;&gt;서비스 메시 데이터 플레인 대 컨트롤 플레인&lt;/a&gt;에 있는 저의 포스트를 참조하세요.&lt;/p&gt;

&lt;h3 id=&#34;고급-로드-밸런싱&#34;&gt;고급 로드 밸런싱&lt;/h3&gt;

&lt;p&gt;L7 로드 밸런서는 일반적으로 타임 아웃, 재시도, 속도 제한, 서킷 브레이킹, 섀도우링, 버퍼링, 컨텐츠 기반 라우팅 등과 같은 고급 로드 밸런싱 기능이 기본적으로 내장되어 있습니다.&lt;/p&gt;

&lt;h3 id=&#34;관측성&#34;&gt;관측성&lt;/h3&gt;

&lt;p&gt;일반 로드 밸런서 기능에 대해 위의 섹션에서 설명한 것처럼 배포되고 있는 점진적 동적 시스템을 디버그하는 것이 점점 어려워지고 있습니다. 견고한 프로토콜별 관측성 아웃풋(observability output)은 현대의 L7 로드 밸런서가 제공하는 가장 중요한 기능일 수 있습니다. 이제 모든 L7 로드 밸런싱 솔루션에 숫자 통계, 분산 추적 및 사용자 지정 가능한 로깅이 사실상 필요합니다.&lt;/p&gt;

&lt;h3 id=&#34;확장성&#34;&gt;확장성&lt;/h3&gt;

&lt;p&gt;최신 L7 로드 밸런서 사용자는 사용자 지정 기능을 추가하기 위해 쉽게 로드 밸런서를 확장하고자 하는 경우가 많습니다. 이 작업은 로드 밸런서에 로드되는 플러그형 필터를 작성하여 수행할 수 있습니다. 대부분의 로드 밸런서는 일반적으로 &lt;a href=&#34;https://www.lua.org/&#34; target=&#34;_blank&#34;&gt;Lua&lt;/a&gt;를 통해 스크립팅을 지원합니다.&lt;/p&gt;

&lt;h3 id=&#34;장애-허용&#34;&gt;장애 허용&lt;/h3&gt;

&lt;p&gt;L4 로드 밸런서 장애 허용에 대해 꽤 썼습니다. L7 로드 밸런서 장애 허용은 어떻습니까? 일반적으로 L7 로드 밸런서는 소모적이고 스테이트리스인 것으로 취급합니다. 범용 소프트웨어를 사용하면 L7 로드 밸런서를 쉽게 수평으로 확장할 수 있습니다. 또한 L7 로드 밸런서가 수행하는 처리 및 상태 추적은 L4 보다 훨씬 더 복잡합니다. L7 로드 밸런서의 HA 페어링을 구축하려는 시도는 기술적으로 가능하지만 중요한 비지니스가 될 것입니다.&lt;/p&gt;

&lt;p&gt;전반적으로 L4 및 L7 로드 밸런싱 도메인 모두에서 업계는 HA 페어링을 떠나 컨시스턴트 해싱을 통해 수렴되는 수평 확장 가능한 시스템으로 이동하고 있습니다.&lt;/p&gt;

&lt;h3 id=&#34;그-외의-것들&#34;&gt;그 외의 것들&lt;/h3&gt;

&lt;p&gt;L7 로드 밸런서는 엄청난 속도로 진화하고 있습니다. Envoy가 제공하는 예를 보려면 Envoy의 &lt;a href=&#34;https://www.envoyproxy.io/docs/envoy/latest/intro/arch_overview/arch_overview&#34; target=&#34;_blank&#34;&gt;아키텍처 개요&lt;/a&gt;를 참조하세요.&lt;/p&gt;

&lt;h2 id=&#34;글로벌-로드-밸런싱-및-중앙형-컨트롤-플레인&#34;&gt;글로벌 로드 밸런싱 및 중앙형 컨트롤 플레인&lt;/h2&gt;

&lt;p&gt;&lt;center&gt;&lt;img src=&#34;https://cdn-images-1.medium.com/max/1600/1*WMjv7B0UzZgJje_uQPtvtg.png&#34;/&gt;
&lt;small&gt;그림 13. 글로벌 로드밸런싱&lt;/center&gt;&lt;/small&gt;&lt;/p&gt;

&lt;p&gt;로드 밸런싱의 미래는 점점 더 개별 로드 밸런서를 범용 장치로 취급할 것입니다. 제 생각에는, 진정한 혁신과 상업적 기회는 모두 컨트롤 플레인 안에 있습니다. 그림 13은 글로벌 로드 밸런싱 시스템의 예를 보여 줍니다. 이 예에서는 다음과 같은 몇 가지 다른 작업이 수행됩니다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;각 사이드카 프록시는 세 개의 다른 Zone(A, B, C)에서 백엔드와 통신합니다.&lt;/li&gt;
&lt;li&gt;그림처럼 트래픽의 90%가 Zone C로 전송되고 트래픽의 5%는 Zone A와 B로 전송됩니다.&lt;/li&gt;
&lt;li&gt;사이드카 프록시 및 백엔드는 모두 글로벌 로드 밸런서에 주기적인 상태를 보고합니다. 이를 통해 글로벌 로드 밸런서에서 대기 시간, 비용, 로드, 현재 장애 등을 고려하여 결정을 내릴 수 있습니다.&lt;/li&gt;
&lt;li&gt;글로벌 로드 밸런서는 주기적으로 각 사이드카 프록시를 현재 라우팅 정보로 구성합니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;글로벌 로드 밸런서는 개별 로드 밸런서가 스스로 수행할 수 없는 정교한 작업을 점점 더 많이 수행할 수 있게 됩니다. 예를 들면 다음과 같습니다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;자동으로 Zone 장애를 감지하고 라우팅합니다.&lt;/li&gt;
&lt;li&gt;글로벌 보안 및 라우팅 정책을 적용합니다.&lt;/li&gt;
&lt;li&gt;머신 러닝 및 신경망을 사용하여 DDoS 공격을 비롯한 트래픽 이상을 탐지하고 완화합니다.&lt;/li&gt;
&lt;li&gt;엔지니어가 전체 분산 시스템을 이해하고 작동할 수 있도록 중앙 집중식 UI 및 시각화를 제공합니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;글로벌 로드 밸런싱을 가능하게 하려면 데이터 플레인으로 사용되는 로드 밸런서가 정교한 동적 구성 기능을 가지고 있어야 합니다. 이 항목에 대한 자세한 내용은 &lt;a href=&#34;https://medium.com/@mattklein123/the-universal-data-plane-api-d15cec7a&#34; target=&#34;_blank&#34;&gt;Envoy의 범용 데이터 플레인 API&lt;/a&gt; 및 &lt;a href=&#34;https://medium.com/@mattklein123/service-mesh-data-plane-vs-control-plane-2774e720f7fc&#34; target=&#34;_blank&#34;&gt;서비스 메시 데이터 플레인 대 컨트롤 플레인&lt;/a&gt;에 있는 저의 포스트를 참조하세요.&lt;/p&gt;

&lt;h2 id=&#34;하드웨어에서-소프트웨어로의-진화&#34;&gt;하드웨어에서 소프트웨어로의 진화&lt;/h2&gt;

&lt;p&gt;지금까지 이 포스트는 하드웨어와 소프트웨어를 갼략히 언급했으며, 주로 과거 L4 로드 밸런서 HA 페어와 관련된 내용이었습니다. 이 분야의 업계 동향은 어떨까요?&lt;/p&gt;

&lt;p&gt;&lt;center&gt;&lt;blockquote class=&#34;twitter-tweet&#34; data-lang=&#34;en&#34;&gt;&lt;p lang=&#34;en&#34; dir=&#34;ltr&#34;&gt;I&amp;#39;ve seen the new OSI stack of eight layers of software. &lt;br&gt;I think it&amp;#39;s more like this: &lt;a href=&#34;https://t.co/6K84IJYGAi&#34;&gt;pic.twitter.com/6K84IJYGAi&lt;/a&gt;&lt;/p&gt;&amp;mdash; Brian Glas (@infosecdad) &lt;a href=&#34;https://twitter.com/infosecdad/status/888221481590816768?ref_src=twsrc%5Etfw&#34;&gt;July 21, 2017&lt;/a&gt;&lt;/blockquote&gt;
&lt;script async src=&#34;https://platform.twitter.com/widgets.js&#34; charset=&#34;utf-8&#34;&gt;&lt;/script&gt;&lt;/center&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;소프트웨어의 8계층의 새로운 OSI 스택을 보았다.&lt;/p&gt;

&lt;p&gt;내 생각에 이게 더 맞는 것 같다:&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;이 트윗은 유머러스한 과장이지만 여전히 트렌드를 잘 보여주고 있습니다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;역사적으로, 라우터와 로드 밸런싱 장치는 매우 비싼 독점 하드웨어로 제공되어 왔습니다.&lt;/li&gt;
&lt;li&gt;점차적으로 대부분의 독점적인 L3/L4 네트워킹 장치가 &lt;a href=&#34;http://www.linuxvirtualserver.org/software/ipvs.html&#34; target=&#34;_blank&#34;&gt;IPVS&lt;/a&gt;, &lt;a href=&#34;http://dpdk.org/&#34; target=&#34;_blank&#34;&gt;DPDK&lt;/a&gt; 및 &lt;a href=&#34;https://fd.io/&#34; target=&#34;_blank&#34;&gt;fd.io&lt;/a&gt;와 같은 프레임워크를 기반으로 구축된 범용 서버 하드웨어, 범용 NIC 및 특수 소프트웨어 솔루션으로 대체되고 있습니다. 5K 미만의 비용이 드는 최신 데이터 센터 시스템은 Linux를 사용하여 매우 작은 패킷과 DPDK를 사용하여 작성된 커스텀 유저스페이스 애플리케이션으로 80Gbps NIC를 쉽게 포화시킬 수 있습니다. 한편, 놀랄만한 총 대역폭과 패킷 전송 속도로 ECMP 라우팅을 수행할 수 있는 저렴하고 기본적인 라우터/스위치 ASIC는 범용 라우터로 패키지화되고 있습니다.&lt;/li&gt;
&lt;li&gt;NGINX, HAProxy, Envoy와 같은 정교한 L7 소프트웨어 로드 밸런싱 장치도 F5와 같은 벤더의 영역을 빠르게 이터레이션하며 잠식하고 있습니다. 따라서 L7 로드 밸런서도 범용 소프트웨어 솔루션을 향해 적극적으로 이동하고 있습니다.&lt;/li&gt;
&lt;li&gt;동시에, 업계 전반의 IaaS, CaaS 및 FaaS를 향한 움직임과 주요 클라우드 프로바이더에 의한 확산은 점점 더 소수의 엔지니어들만이 물리적 네트워크의 작동 방식을 이해하면 된다는 것을 의미합니다 (이들은 위의 &amp;ldquo;블랙매직&amp;rdquo;과 &amp;ldquo;더 이상 우리가 힘들게 알 필요가 없는 어떤 것&amp;rdquo;입니다).&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;결론-및-로드-밸런싱의-미래&#34;&gt;결론 및 로드 밸런싱의 미래&lt;/h2&gt;

&lt;p&gt;요약하자면, 이 포스트의 주요 내용은 다음과 같습니다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;로드 밸런서는 최신 분산 시스템의 핵심 구성 요소입니다.&lt;/li&gt;
&lt;li&gt;로드 밸런서에는 L4와 L7의 두 가지 일반 클래스가 있습니다.&lt;/li&gt;
&lt;li&gt;L4 및 L7 로드 밸런서는 모두 최신 아키텍처에 적합합니다.&lt;/li&gt;
&lt;li&gt;L4 로드 밸런서가 수평 확장 가능한 분산형 해싱 솔루션으로 이동하고 있습니다.&lt;/li&gt;
&lt;li&gt;L7 로드 밸런서는 동적 마이크로서비스 아키텍처의 확산으로 인해 최근에 많은 투자를 받고 있습니다.&lt;/li&gt;
&lt;li&gt;글로벌 로드 밸런싱 그리고 컨트롤 플레인과 데이터 플레인의 분리는 로드 밸런싱의 미래이며 향후 혁신 및 상업적 기회의 대부분을 발견할 수 있는 곳입니다.s&lt;/li&gt;
&lt;li&gt;업계에서는 네트워킹 솔루션을 위한 범용 OSS 하드웨어와 소프트웨어를 적극적으로 추진하고 있습니다. 저는 F5와 같은 기존의 로드 밸런싱 벤더가 우선 OSS 소프트웨어와 클라우드 벤더에 의해 교체될 것이라고 생각합니다. Arista/Cumulus/etc와 같은 전통적인 라우터/스위치 벤더는 온프레미스 구축이라는 커다란 탈주로가 있지만, 결국 퍼블릭 클라우드 공급업체와 자체 개발한 물리적 네트워크에 의해 이전될 것입니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;종합적으로 저는 지금이 컴퓨터 네트워킹에 있어 매력적인 시기라고 생각합니다! 대부분의 시스템에서 OSS와 소프트웨어를 개발하려는 움직임은 이터레이션 속도를 몇 배의 규모로 높이고 있습니다. 뿐만 아니라, 분산 시스템이 &amp;ldquo;서버리스(serverless)&amp;rdquo; 패러다임을 통해 역동적인 발전을 계속함에 따라, 기본 네트워크와 로드 밸런싱 시스템의 정교함도 그만큼 발전해야할 필요가 있습니다.&lt;/p&gt;
</content>
      
    </item>
    
    <item>
      <title>[번역] 파이썬 매직 메소드 (Python&#39;s Magic Methods)</title>
      <link>https://ziwon.github.io/post/python_magic_methods/</link>
      <pubDate>Mon, 30 Jan 2017 03:37:00 +0000</pubDate>
      <author>Aron Yoon</author>
      <guid>https://ziwon.github.io/post/python_magic_methods/</guid>
      <description></description>
      
      <content>

&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/RafeKettler/magicmethods&#34; target=&#34;_blank&#34;&gt;A guide to Python&amp;rsquo;s magic methods&lt;/a&gt;를 번역한 문서입니다.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&#34;서론&#34;&gt;서론&lt;/h2&gt;

&lt;p&gt;이 가이드는 몇 달 간의 블로그 게시물의 정점입니다. 주제는 &lt;strong&gt;매직 메소드(magic methods)&lt;/strong&gt; 입니다.&lt;/p&gt;

&lt;p&gt;매직 메소드가 뭘까요? 이들은 객체지향 파이썬의 모든 것입니다. 클래스에 &amp;ldquo;마법&amp;rdquo;을 추가하기 위해 정의할 수 있는 특수한 메소드입니다. 항상 두 개의 밑줄로 둘러싸입니다. (예: &lt;code&gt;__init__&lt;/code&gt; 또는 &lt;code&gt;__lt__&lt;/code&gt;) 또한 필요한 만큼 문서화되지 않았습니다. 파이썬에 대한 모든 매직 메소드가 파이썬 문서의 동일한 섹션에 있지만, 흩어져 있고, 느슨하게 구성되어 있습니다. 섹션에서 예제는 거의 찾기 어렵습니다. (그리고 모두 지루한 문법 설명과 함께 언어 레퍼런스에 자세히 설명되어 있으므로 잘 설계되어 있을 것입니다.)&lt;/p&gt;

&lt;p&gt;그래서, 파이썬의 문서에서 제가 인지한 바를 수정하기 위해 저는 파이썬의 매직 메소드에 대한 좀 더 일반화된 예제 중심의 문서를 제공하기 시작했습니다. 저는 주간 블로그 포스트로 시작했는데, 이제 그 연재가 끝나서 이 가이드를 만들었습니다.&lt;/p&gt;

&lt;p&gt;여러분 마음에 들었으면 좋겠습니다. 이를 튜토리얼, 리프레셔 또는 레퍼런스로 사용하시길 바랍니다. 왜냐하면, 파이썬의 매직 메소드에 대한 사용자 친화적인 가이드로 만들었기 때문입니다.&lt;/p&gt;

&lt;h2 id=&#34;생성-및-초기화&#34;&gt;생성 및 초기화&lt;/h2&gt;

&lt;p&gt;가장 기본적인 매직 메소드인 &lt;code&gt;__init__&lt;/code&gt;는 모두 알고 있습니다. 우리가 객체의 초기화 동작을 정의할 수 있는 방법이죠. 그러나 &lt;code&gt;x = SomeClass()&lt;/code&gt; 를 호출하면 &lt;code&gt;__init__&lt;/code&gt;이 먼저 호출되지 않습니다. 사실, 이는 &lt;code&gt;__new__&lt;/code&gt;라는 메소드로, 실제로 인스턴스를 생성한 다음 생성시에 인수를 초기화 프로그램에 전달합니다. 객체 수명의 다른 끝에는 &lt;code&gt;__del__&lt;/code&gt;이 있습니다. 이 3가지 방법을 자세히 살펴 보겠습니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__new__(cls, [...)&lt;/code&gt; : &lt;code&gt;__new__&lt;/code&gt;은 객체의 인스턴스화에서 호출되는 첫 번째 메소드입니다. 클래스를 취한 다음 &lt;code&gt;__init__&lt;/code&gt;에 전달할 다른 인수를 취합니다. &lt;code&gt;__new__&lt;/code&gt;는 거의 사용되지 않지만 튜플이나 문자열과 같은 불변 유형을 서브 클래싱하는 경우에는 그 용도가 있습니다. 아주 유용하지는 않기 때문에 &lt;code&gt;__new__&lt;/code&gt;에 대해 너무 자세히 설명하고 싶지는 않지만
&lt;a href=&#34;http://www.python.org/download/releases/2.2/descrintro/#__new__&#34; target=&#34;_blank&#34;&gt;파이썬 문서&lt;/a&gt;에서 자세히 다루고 있습니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__init__(self, [...)&lt;/code&gt; : 클래스 이니셜라이저. 기본 생성자가 호출된 것과 관계없이 전달됩니다. (예를 들어, x = SomeClass (10, &amp;lsquo;foo&amp;rsquo;)를 호출하면 &lt;code&gt;__init__&lt;/code&gt;은 인수로 &amp;lsquo;10&amp;rsquo;과 &amp;lsquo;foo&amp;rsquo;를 전달합니다.) &lt;code&gt;__init__&lt;/code&gt;은 파이썬 클래스
정의에서 거의 보편적으로 사용됩니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__del__(self)&lt;/code&gt; : &lt;code&gt;__new__&lt;/code&gt;와 &lt;code&gt;__init__&lt;/code&gt;이 객체의 생성자를 구성한다면, &lt;code&gt;__del__&lt;/code&gt;이 소멸자입니다. &lt;code&gt;del x&lt;/code&gt;에 대한 동작을 구현하지 않기 때문에 코드는 &lt;code&gt;x.__del__()&lt;/code&gt;로 변환되지 않습니다. 오히려, 객체가 가비지 수집되는 경우에 대한 동작을 정의합니다. 소켓이나 파일 객체와 같이 삭제시 추가 정리가 필요할 수 있는 객체에 매우 유용할 수 있습니다. 그러나 인터프리터가 종료될 때 개체가 아직 살아 있다면 &lt;code&gt;__del__&lt;/code&gt;이 실행된다는 보장이 없으므로 주의하시길 바립니다. 따라서 &lt;code&gt;__del__&lt;/code&gt;은 좋은 코딩 방법의 대안으로 사용할 수 없습니다 (예: 작업이 끝나면 항상 연결을 닫는 등). 사실, &lt;code&gt;__del__&lt;/code&gt;은 불리한 환경 때문에 거의 절대 사용되어서는 안 됩니다. 그러니 주의해서 사용하십시오!&lt;/p&gt;

&lt;p&gt;정리해보겠습니다. 다음은 &lt;code&gt;__init__&lt;/code&gt;와 &lt;code&gt;__del__&lt;/code&gt;의 실제 예제입니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;os.path&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;join&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;FileObject&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
    &lt;span class=&#34;s1&#34;&gt;&amp;#39;&amp;#39;&amp;#39;파일 삭제될 때 파일 닫기를 보장하는 파일 객체에 대한 래퍼&amp;#39;&amp;#39;&amp;#39;&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;fm&#34;&gt;__init__&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;filepath&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;~&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;filename&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;sample.txt&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;# 읽기 쓰기 모드로 파일 경로의 파일을 엽니다.&lt;/span&gt;
        &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;file&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;open&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;join&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;filepath&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;filename&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;r+&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;fm&#34;&gt;__del__&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;file&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;close&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;del&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;file&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&#34;사용자-정의-클래스에서-연산자-만들기&#34;&gt;사용자 정의 클래스에서 연산자 만들기&lt;/h2&gt;

&lt;p&gt;파이썬의 매직 메소드를 사용하는 가장 큰 장점 중 하나는 객체가 내장 타입처럼 동작하도록 하는 간단한 방법을 제공한다는 것입니다. 즉, 기본 운영자를 수행하는 경우 보기 흉하고, 직관적이지 않은 비표준 방식을 피할 수 있습니다. 일부 언어에서는 다음과 같이하는 것이 일반적입니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;instance&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;equals&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;other_instance&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;# do something&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;물론 파이썬에서도 이 작업을 수행할 수는 있지만 혼란이 일어나고 불필요하게 자세한 정보가 표시됩니다. 다른 라이브러리는 같은 작업에 대해 다른 이름을 사용할 수 있으므로, 클라이언트가 필요한 것보다 더 많은 일을 합니다. 그러나 매직 매소드의 힘으로 우리는 하나의 메소드(이 경우에는 &lt;code&gt;__eq__&lt;/code&gt;)를 정의할 수 있으며 대신에 우리가 의미하는 바를 말할 수 있습니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;instance&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;other_instance&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;#do something&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이는 매직 매소드 힘의 일부입니다. 이들 대다수는 연산자에게 의미를 정의할 수 있도록 해서, 내장 타입인 것처럼 클래스에서 이들을 사용할 수 있습니다.&lt;/p&gt;

&lt;h3 id=&#34;매직-매소드-비교&#34;&gt;매직 매소드 비교&lt;/h3&gt;

&lt;p&gt;파이썬에는 연산자를 사용하여 객체 간에 직관적인 비교를 구현하도록 설계된 수많은 매직 메소드가 있습니다. 이상한 메소드 호출이 아닙니다. 또한 객체 비교를 위한 기본 파이썬 동작을 재정의하는 방법을 제공합니다 (참조 기준). 다음은 메소드의 목록과 메소드가 하는 일입니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__cmp__(self, other)&lt;/code&gt; : &lt;code&gt;__cmp__&lt;/code&gt;는 비교 매직 메소드의 가장 기본입니다. 모든 비교 연산자 (&amp;lt;, ==,! = 등)에 대해 실제로 동작을 구현하지만 원하는대로 수행되지 못할 수 있습니다 (예를 들어, 한 인스턴스가 다른 인스턴스와 동일한 지 여부가 하나의 기준에 의해 결정되고 인스턴스가 다른 인스턴스보다 큰지 아닌지가 다른 것으로 결정되는 경우) &lt;code&gt;__cmp__&lt;/code&gt;은 &lt;code&gt;self &amp;lt; other&lt;/code&gt;이면 음수를 반환하고 &lt;code&gt;self == other&lt;/code&gt;이면 0을 반환하고 &lt;code&gt;self &amp;gt; other&lt;/code&gt;이면 양수를 반환해야합니다. 일반적으로 한 번에 정의할 필요없이 각 비교를 정의하는 것이 가장 좋지만, &lt;code&gt;__cmp__&lt;/code&gt;은 비슷한 기준으로 구현된 모든 비교가 필요할 때 반복을 저장하고 명확성을 향상시키는 좋은 방법이 될 수 있습니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__eq__(self, other)&lt;/code&gt; : 항등 연산자, &lt;code&gt;==&lt;/code&gt; 에 대한 동작을 정의합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__ne__(self, other)&lt;/code&gt; : 부등호 연산자, &lt;code&gt;!=&lt;/code&gt; 에 대한 동작을 정의합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__lt__(self, other)&lt;/code&gt; : 보다 작음 연산자, &lt;code&gt;&amp;lt;&lt;/code&gt; 에 대한 동작을 정의합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__gt__(self, other)&lt;/code&gt; : 보다 큼 연산자, &lt;code&gt;&amp;gt;&lt;/code&gt; 에 대한 동작을 정의합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__le__(self, other)&lt;/code&gt; : 보다 작거나 같음 연산자, &lt;code&gt;&amp;lt;=&lt;/code&gt; 에 대한 동작을 정의합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__ge__(self, other)&lt;/code&gt; : 크거나 같음 연산자, &lt;code&gt;&amp;gt;=&lt;/code&gt; 에 대한 동작을 정의합니다.&lt;/p&gt;

&lt;p&gt;예를 들어, 단어를 모델링 하는 클래스를 생각해보세요. 문자열에 대한 비교 동작인 단어를 사전식으로 (알파벳 기준) 비교할 수도 있지만, 길이 또는 음절의 수와 같이 다른 기준에 따라 비교할 수도 있습니다. 예제에서는 길이를 비교합니다. 구현 방법은 다음과 같습니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Word&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
    &lt;span class=&#34;s1&#34;&gt;&amp;#39;&amp;#39;&amp;#39;단어에 대한 클래스로, 단어 길이에 따라 비교를 정의합니다.&amp;#39;&amp;#39;&amp;#39;&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;fm&#34;&gt;__new__&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;cls&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;word&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;# __new__ 를 사용해야 합니다. 왜냐하면 str은 불변형이므로,&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;# 초기에 (생성시에) 초기화해야 합니다.&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39; &amp;#39;&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;word&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;print&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;Value contains spaces. Truncating to first space.&amp;#34;&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;word&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;word&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;word&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;index&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39; &amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)]&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;# Word는 이제 첫 번째 공백 앞에 모든 문자가 있습니다.&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;fm&#34;&gt;__new__&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;cls&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;word&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;fm&#34;&gt;__gt__&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;other&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;other&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;fm&#34;&gt;__lt__&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;other&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;other&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;fm&#34;&gt;__ge__&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;other&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;other&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;fm&#34;&gt;__le__&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;other&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;other&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이제 &lt;code&gt;Word(&#39;foo&#39;)&lt;/code&gt;와 &lt;code&gt;Word(&#39;bar&#39;)&lt;/code&gt;를 사용하여 두 단어를 만들고 길이에 따라 비교할 수 있습니다. 그러나 &lt;code&gt;__eq__&lt;/code&gt; 및 &lt;code&gt;__ne__&lt;/code&gt;은 정의하지 않았습니다. 이는 &lt;code&gt;Word(&#39;foo&#39;) == Word (&#39;bar&#39;)&lt;/code&gt;가 참으로 평가된다는 이상한 행동으로 이어질 수 있기 때문입니다. 길이에 기반한 동일성을 테스트하는 것은 의미가 없으므로 &lt;code&gt;str&lt;/code&gt;의 동일성 구현에 의존합니다.&lt;/p&gt;

&lt;p&gt;이제 다채로운 비교를 획득하기 위하여 모든 비교 매직 메소드를 정의할 필요가 없다는 것을 알아두면 좋을 것입니다. 표준 라이브러리는 &lt;code&gt;functools&lt;/code&gt; 모듈에 클래스 장식자를 제공하여 여러분이 &lt;code&gt;__eq__&lt;/code&gt; 및 기타 (예 : &lt;code&gt;__gt__&lt;/code&gt;, &lt;code&gt;__lt__&lt;/code&gt; 등) 만 정의하면, 모든 다양한 비교 방법을 정의해줍니다. 이 기능은 파이썬 2.7에서만 사용할 수 있지만 여러분에게 많은 시간과 노력을 절약할 기회를 줍니다. 여러분의 클래스 정의 위에 &lt;code&gt;@total_ordering&lt;/code&gt;을 두어 이를 사용할 수 있습니다.&lt;/p&gt;

&lt;h3 id=&#34;숫자-매직-메소드&#34;&gt;숫자 매직 메소드&lt;/h3&gt;

&lt;p&gt;비교 연산자와 비교될 클래스의 인스턴스에 대한 방법을 만들 수 있는 것처럼 숫자 연산자에 대한 동작을 정의할 수 있습니다. 좌석 벨트 버클, 사람들 &amp;hellip; 등 숫자들은 많이 있습니다. 조직화하기 위해 숫자 매직 메소드를 단항 연산자, 일반 산술 연산자, 리플렉트 산술 연산자 (자세한 내용은 나중에 설명함), 추가 할당 및 유형 변환 등 다섯 가지 범주로 나눴습니다.&lt;/p&gt;

&lt;h4 id=&#34;단항-연산자와-함수&#34;&gt;단항 연산자와 함수&lt;/h4&gt;

&lt;p&gt;단항 연산자 및 함수는 부정, 절댓값 등 하나의 피연산자만을 갖습니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__pos__(self)&lt;/code&gt; : 단항 긍정 (예 : &lt;code&gt;+some_object&lt;/code&gt;)에 대한 동작을 구현합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__neg__(self)&lt;/code&gt; : 부정 (예 : &lt;code&gt;-some_object&lt;/code&gt;)에 대한 동작을 구현합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__abs__(self)&lt;/code&gt; : 내장된 &lt;code&gt;abs()&lt;/code&gt; 함수의 동작을 구현합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__invert__(self)&lt;/code&gt; : &lt;code&gt;~&lt;/code&gt; 연산자를 사용하여 반전에 대한 동작을 구현합니다. 이 작업에 대한 설명은 &lt;a href=&#34;http://en.wikipedia.org/wiki/Bitwise_operation#NOT&#34; target=&#34;_blank&#34;&gt;비트 연산에 대한 Wikipedia 기사&lt;/a&gt;를 참조하세요.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__round__(self, n)&lt;/code&gt; : 내장된 &lt;code&gt;round()&lt;/code&gt; 함수의 동작을 구현합니다. &lt;code&gt;n&lt;/code&gt;은 반올림할 소수 자릿수입니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__floor__(self)&lt;/code&gt; : &lt;code&gt;math.floor()&lt;/code&gt;에 대한 동작을 구현합니다. 즉, 가장 가까운 정수로 반올림합니다.&lt;/p&gt;

&lt;h4 id=&#34;일반-산술-연산자&#34;&gt;일반 산술 연산자&lt;/h4&gt;

&lt;p&gt;이제 우리는 전형적인 바이너리 연산자 +, -, * 등을 다룹니다. 이들은 대부분 꽤 자명합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__add__(self, other)&lt;/code&gt; : 덧셈을 구현합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__sub__(self, other)&lt;/code&gt; : 뺄셈을 구현합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__mul__(self, other)&lt;/code&gt; : 곱셈을 구현합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__floordiv__(self, other)&lt;/code&gt; : &lt;code&gt;//&lt;/code&gt; 연산자를 사용하여 정수 나눗셈을 구현합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__div__(self, other)&lt;/code&gt; : &lt;code&gt;/&lt;/code&gt; 연산자를 사용하여 나눗셈을 구현합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__truediv__(self, other)&lt;/code&gt; : 진짜 &lt;em&gt;정확한&lt;/em&gt; 나눗셈을 구현합니다. 이것은 &lt;code&gt;__future__ import division&lt;/code&gt; 이 유효한 경우에만 동작합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__mod__(self, other)&lt;/code&gt; : &lt;code&gt;%&lt;/code&gt; 연산자를 사용하여 나머지를 구현합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__divmod__(self, other)&lt;/code&gt; : &lt;code&gt;divmod()&lt;/code&gt; 내장 함수를 사용하여 &lt;code&gt;long&lt;/code&gt; 나눗셈을 위한 동작을 구현합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__pow__&lt;/code&gt; : &lt;code&gt;**&lt;/code&gt; 연산자를 사용하여 지수에 대한 동작을 구현합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__lshift__(self, other)&lt;/code&gt; : &lt;code&gt;&amp;lt;&amp;lt;&lt;/code&gt; 연산자를 사용하여 왼쪽 비트 시프트를 구현합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__rshift__(self, other)&lt;/code&gt; : &lt;code&gt;&amp;gt;&amp;gt;&lt;/code&gt; 연산자를 사용하여 오른쪽 비트 시프트를 구현합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__and__(self, other)&lt;/code&gt; : &lt;code&gt;&amp;amp;&lt;/code&gt; 연산자를 사용하여 비트간 논리곱을 구현합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__or__(self, other)&lt;/code&gt; : &lt;code&gt;|&lt;/code&gt; 연산자를 사용하여 비트간 논리합을 구현합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__xo__(self, other)&lt;/code&gt; : &lt;code&gt;^&lt;/code&gt; 연산자를 사용하여 비트간 배타적 논리합을 구현합니다.&lt;/p&gt;

&lt;h4 id=&#34;뒤집힌-산술-연산자&#34;&gt;뒤집힌 산술 연산자&lt;/h4&gt;

&lt;p&gt;여러분은 제가 어떻게 뒤집힌 산술 연산자 (Reflected arithmetic operators)라는 개념에 도달할 것인지 아시나요? 여러분 중 일부는 크고 무서운 외래 개념이라고 생각할 수 있습니다. 사실, 아주 간단합니다. 다음은 예제입니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;n&#34;&gt;some_object&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;other&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이는 일반적인 덧셈입니다. 뒤집힌 동치는 다음과 같이 피연산자가 전환된 경우를 제외하고는 같은 것입니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;n&#34;&gt;other&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;some_object&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;따라서 이러한 모든 매직 메소드는 other를 첫 번째 피연산자로 사용하고, self를 두 번째 피연산자로 사용하는 것 외에는 일반적인 동치에 해당하는 것들과 같은 작업을 수행합니다. 대부분의 경우 뒤집힌 결과는 일반적인 것과 동일하므로 &lt;code&gt;__add__&lt;/code&gt;를 호출하는 것으로 &lt;code&gt;__radd__&lt;/code&gt;를 정의하는 결과가 발생할 수 있습니다. 연산자의 왼쪽에 있는 객체 (예제에서 other)는 뒤집히지 않은 버전의 연산자에 대해 정의하거나 반환하지 않아야 합니다 (또는 NotImplemented를 반환). 예를 들어, 이 예에서 &lt;code&gt;some_object.__ radd__&lt;/code&gt;은 &lt;code&gt;__add__&lt;/code&gt; 을 정의하지 않은 경우에만 호출됩니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__radd__(self, other)&lt;/code&gt; : 뒤집힌 덧셈을 구현합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__rsub__(self, other)&lt;/code&gt; : 뒤집힌 뺄셈을 구현합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__rmul__(self, other)&lt;/code&gt; : 뒤집힌 곱셈을 구현합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__rfloordiv__(self, other)&lt;/code&gt; : &lt;code&gt;//&lt;/code&gt; 연산자를 사용하여 뒤집힌 정수 나눗셈을 구현합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__rdiv__(self, other)&lt;/code&gt; : &lt;code&gt;/&lt;/code&gt; 연산자를 사용하여 뒤집힌 나눗셈을 구현합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__rtruediv__(self, other)&lt;/code&gt; : 뒤집힌 정확한 나눗셈을 구현합니다. 이것은 &lt;code&gt;__future__ import division&lt;/code&gt; 이 유효한 경우에만 작동합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__rmod__(self, other)&lt;/code&gt; : &lt;code&gt;%&lt;/code&gt; 연산자를 사용하여 뒤집힌 나머지를 구현합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__rdivmod__(self, other)&lt;/code&gt; : &lt;code&gt;divmod(other, self)&lt;/code&gt;가 호출될 때 &lt;code&gt;divmod()&lt;/code&gt; 내장 함수를 사용하여 long 나눗셈에 대한 동작을 구현합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__rpow__&lt;/code&gt; : &lt;code&gt;**&lt;/code&gt; 연산자를 사용하여 뒤집힌 지수에 대한 동작을 구현합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__rlshift__(self, other)&lt;/code&gt; : &lt;code&gt;&amp;lt;&amp;lt;&lt;/code&gt; 연산자를 사용하여 뒤집힌 왼쪽 비트 시프트를 구현합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__rrshift__(self, other)&lt;/code&gt; : &lt;code&gt;&amp;gt;&amp;gt;&lt;/code&gt; 연산자를 사용하여 뒤집힌 오른쪽 비트 시프트를 구현합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__rand__(self, other)&lt;/code&gt; : &lt;code&gt;&amp;amp;&lt;/code&gt; 연산자를 사용하여 뒤집힌 비트간 논리곱을 구현합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__ror__(self, other)&lt;/code&gt; : &lt;code&gt;|&lt;/code&gt; 연산자를 사용하여 뒤집힌 비트간 논리합을 구현합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__rxor__(self, other)&lt;/code&gt; : &lt;code&gt;^&lt;/code&gt; 연산자를 사용하여 뒤집힌 비트간 배타논리합을 구현합니다&lt;/p&gt;

&lt;h4 id=&#34;증가된-할당&#34;&gt;증가된 할당&lt;/h4&gt;

&lt;p&gt;파이썬은 또한 커스텀 비헤이비어가 증가된 할당(augmented assignment)을 위해 정의될 수 있도록 하는 다양한 방법을 가지고 있습니다. 여러분은 아마도 이미 증가된 할당에 익숙할 것입니다. 이는 &amp;ldquo;일반적인&amp;rdquo; 연산자와 할당을 결합합니다. 아직도 제가 무슨 소린지 하는지 모르겠다면, 다음은 그 예제입니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;# 다른 표현으로 x = x + 1&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이 메소드들 각각은 왼쪽에 있는 변수가 할당되어야 하는 값을 반환해야합니다 (예를 들어, &lt;code&gt;+= b&lt;/code&gt; 일 경우 &lt;code&gt;__iadd__&lt;/code&gt;는 &lt;code&gt;a&lt;/code&gt;에 지정된 &lt;code&gt;+b&lt;/code&gt;를 반환할 수 있습니다). 다음은 목록입니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__iadd__(self, other)&lt;/code&gt; : 할당된 덧셈을 구현합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__isub__(self, other)&lt;/code&gt; : 할당된 뺄셈을 구현합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__imul__(self, other)&lt;/code&gt; : 할당된 곱셈을 구현합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__ifloordiv__(self, other)&lt;/code&gt; : &lt;code&gt;//&lt;/code&gt; 연산자를 사용하여 할당된 정수 나눗셈을 구현합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__idiv__(self, other)&lt;/code&gt; : &lt;code&gt;/=&lt;/code&gt; 연산자를 사용하여 할당된 나눗셈를 구현합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__itruediv__(self, other)&lt;/code&gt; : 할당된 정확한 나눗셈을 구현합니다. 이것은 &lt;code&gt;__future__ import division&lt;/code&gt; 이 유효한 경우에만 작동합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__imod__(self, other)&lt;/code&gt; : &lt;code&gt;%=&lt;/code&gt; 연산자를 사용하여 할당된 나머지를 구현합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__ipow__&lt;/code&gt; : &lt;code&gt;**=&lt;/code&gt; 연산자를 사용하여 할당된 지수의 동작을 구현합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__ilshift__(self, other)&lt;/code&gt; : &lt;code&gt;&amp;lt;&amp;lt;=&lt;/code&gt; 연산자를 사용하여 할당된 왼쪽 비트 시프트를 구현합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__irshift__(self, other)&lt;/code&gt; : &lt;code&gt;&amp;gt;&amp;gt;=&lt;/code&gt; 연산자를 사용하여 할당된 오른쪽 비트 시프트를 구현합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__iand__(self, other)&lt;/code&gt; : &lt;code&gt;&amp;amp;=&lt;/code&gt; 연산자를 사용하여 할당된 비트간 논리곱을 구현합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__ior__(self, other)&lt;/code&gt; : &lt;code&gt;|=&lt;/code&gt; 연산자를 사용하여 할당된 비트간 논리합을 구현합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__ixor__(self, other)&lt;/code&gt; : &lt;code&gt;^=&lt;/code&gt; 연산자를 사용하여 할당된 비트간 배타논리합을 구현합니다.&lt;/p&gt;

&lt;h4 id=&#34;타입-변환-매직-메소드&#34;&gt;타입 변환 매직 메소드&lt;/h4&gt;

&lt;p&gt;파이썬은 또한 &lt;code&gt;float()&lt;/code&gt; 같은 내장 타입 변환 함수의 동작을 구현하도록 설계된 일련의 매직 메소드를 가지고 있습니다. 다음과 같습니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__int__(self)&lt;/code&gt; : int로 타입 변환을 구현합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__long__(self)&lt;/code&gt; : long으로 타입 변환을 구현합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__float__(self)&lt;/code&gt; : float로 타입 변환을 구현합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__complex__(self)&lt;/code&gt; : complex로 타입 변환을 구현합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__oct__(self)&lt;/code&gt; : 8진수로 타입 변환을 구현합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__hex__(self)&lt;/code&gt; : 16진수로 타입 변환을 구현합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__index__(self)&lt;/code&gt; : 슬라이스 표현식에서 객체가 사용될 때 타입 변환을 int로 구현합니다. 슬라이싱에 사용할 수 있는 사용자 지정 숫자 타입을 정의하는 경우, &lt;code&gt;__index__&lt;/code&gt;를 정의해야 합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__trunc__(self)&lt;/code&gt; : &lt;code&gt;math.trunc(self)&lt;/code&gt; 가 호출될 때 호출됩니다. &lt;code&gt;__trunc__&lt;/code&gt;는 &lt;code&gt;self&lt;/code&gt;의 값을 정수형 (대개 long)으로 반환해야 합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__coerce__(self, other)&lt;/code&gt; : 혼합 모드 산술을 구현하는 메소드. 타입 변환이 불가능할 경우 &lt;code&gt;__coerce__&lt;/code&gt;은 &lt;code&gt;None&lt;/code&gt;을 반환해야 합니다. 그렇지 않으면 동일한 타입을 갖도록 조작된 &lt;code&gt;self&lt;/code&gt;와 &lt;code&gt;other&lt;/code&gt;의 쌍 (2-tuple)을 반환해야 합니다.&lt;/p&gt;

&lt;h2 id=&#34;클래스-표현하기&#34;&gt;클래스 표현하기&lt;/h2&gt;

&lt;p&gt;클래스를 문자열로 표현하는 것이 종종 유용합니다. 파이썬에는 클래스 정의에서 구현할 수 있는 몇 가지 메소드가 있으며, 클래스의 표현을 반환하는 내장 함수의 작동 방식을 사용자 정의합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__str__(self)&lt;/code&gt; : 클래스의 인스턴스에서 &lt;code&gt;str()&lt;/code&gt;이 호출될 때의 동작을 정의합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__repr__(self)&lt;/code&gt; : 클래스의 인스턴스에서 &lt;code&gt;repr()&lt;/code&gt;이 호출될 때의 동작을 정의합니다. &lt;code&gt;str()&lt;/code&gt;과 &lt;code&gt;repr()&lt;/code&gt; 사이의 주요 차이점은 만들어진 대상입니다. &lt;code&gt;repr()&lt;/code&gt;은 주로 기계가 읽을 수 있는 출력(대부분의 경우, 유효한 파이썬 코드일 수도 있습니다)을 생성하기 위한 것이며, 반면에 &lt;code&gt;str()&lt;/code&gt;은 사람이 읽을 수 있도록 만들어졌습니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__unicode__(self)&lt;/code&gt; : 클래스의 인스턴스에서 &lt;code&gt;unicode()&lt;/code&gt;가 호출될 때의 동작을 정의합니다. &lt;code&gt;unicode()&lt;/code&gt;는 &lt;code&gt;str()&lt;/code&gt;과 비슷하지만 유니코드 문자열을 반환합니다. 주의하십시오 : 클라이언트가 클래스의 인스턴스에서 &lt;code&gt;str()&lt;/code&gt;을 호출하고 &lt;code&gt;__unicode__()&lt;/code&gt; 만 정의한 경우 작동하지 않습니다. 누군가 유니 코드를 사치스럽게 사용하지 못하는 경우를 대비하여 항상 &lt;code&gt;__str__()&lt;/code&gt;을 정의해야합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__format__(self, formatstr)&lt;/code&gt; : 클래스의 인스턴스가 새로운 스타일 문자열 포맷으로 사용될 때의 동작을 정의합니다. 예를 들어 &lt;code&gt;&amp;quot;Hello, {0 : abc}!&amp;quot;.format(a)&lt;/code&gt;은 &lt;code&gt;a.__format__(&amp;quot;abc&amp;quot;)&lt;/code&gt;를 호출합니다. 특수 서식 옵션을 제공하려는 고유한 숫자 또는 문자열 유형을 정의할 때 유용할 수 있습니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__hash__(self)&lt;/code&gt; : 클래스의 인스턴스에서 &lt;code&gt;hash()&lt;/code&gt;가 호출될 때의 동작을 정의합니다. 이 메소드는 정수를 반환해야 하며 그 결과는 사전에서 빠른 키 비교에 사용됩니다. 보통 &lt;code&gt;__eq__&lt;/code&gt;도 구현해야 함을 주의하십시오. &lt;code&gt;a == b&lt;/code&gt;는 &lt;code&gt;hash (a) == hash (b)&lt;/code&gt;를 의미한다는 규칙을 따릅니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__nonzero__(self)&lt;/code&gt; : 클래스의 인스턴스에서 &lt;code&gt;bool()&lt;/code&gt;이 호출될 때의 동작을 정의합니다. 인스턴스를 &lt;code&gt;True&lt;/code&gt; 또는 &lt;code&gt;False&lt;/code&gt;로 간주할지에 따라 &lt;code&gt;True&lt;/code&gt; 또는 &lt;code&gt;False&lt;/code&gt;를 반환해야합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__dir__(self)&lt;/code&gt; : 클래스의 인스턴스에서 &lt;code&gt;dir()&lt;/code&gt;이 호출 될 때의 동작을 정의합니다. 이 메소드는 사용자의 속성 목록을 반환해야 합니다. 일반적으로 &lt;code&gt;__dir__&lt;/code&gt;을 구현하는 것은 불필요하지만 &lt;code&gt;__getattr__&lt;/code&gt; 또는 &lt;code&gt;__getattribute__&lt;/code&gt; (다음 섹션 참조)를 재정의하거나 그렇지 않으면 동적으로 속성을 생성하는 경우 클래스를 대화식으로 사용하는 것이 매우 중요할 수 있습니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__sizeof__(self)&lt;/code&gt; : 클래스의 인스턴스에서 &lt;code&gt;sys.getsizeof()&lt;/code&gt;가 호출될 때의 동작을 정의합니다. 이 메소드는 객체의 크기를 바이트 단위로 반환해야 합니다. 이것은 일반적으로 C확장으로 구현된 Python 클래스에 더 유용하지만, 이를 인식하는 데 도움이됩니다.&lt;/p&gt;

&lt;p&gt;우리는 매직 메소드 가이드의 지루하고 (그리고 예제가 없는) 부분으로 끝내고 있습니다. 이제는 좀 더 기본적인 매직 메소드에 대해 살펴 보았으니 이제는 더 고급 자료로 이동할 때입니다.&lt;/p&gt;

&lt;h2 id=&#34;속성-접근-제어하기&#34;&gt;속성 접근 제어하기&lt;/h2&gt;

&lt;p&gt;다른 언어로부터 파이썬에 온 많은 사람들은 클래스에 대한 진정한 캡슐화가 부족하다고 불평합니다. 즉, 공용 &lt;code&gt;getter&lt;/code&gt; 및 &lt;code&gt;setter&lt;/code&gt; 를 사용하여 개인 속성을 정의할 수 있는 방법이 없습니다. 이는 사실과 다릅니다. 파이썬은 메소드나 필드에 대한 명시적 변경자 대신 &amp;ldquo;매직&amp;rdquo;을 통해 많은 양의 캡슐화를 그냥 수행한다는  것입니다. 보세요:&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__getattr__(self, name)&lt;/code&gt; : 사용자가 존재하지 않는 속성에 액세스하려고 시도할 때의 행위를 정의할 수 있습니다. 이는 일반적인 맞춤법 오류를 포착하고 리다이렉트하고, 더 이상 사용되지 않는 속성 (원하는 경우 해당 속성을 계산하고 반환하도록 선택할 수 있음) 사용에 대한 경고를 제공하거나, &lt;code&gt;AttributeError&lt;/code&gt;를 손쉽게 전달할 때 유용할 수 있습니다. 그러나 존재하지 않는 속성에 액세스할 때만 호출되므로 실제 캡슐화 솔루션이 아닙니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__setattr__(self, name, value)&lt;/code&gt; : &lt;code&gt;__getattr__&lt;/code&gt;과 달리 &lt;code&gt;__setattr__&lt;/code&gt;은 캡슐화 솔루션입니다. 이 속성을 사용하면 특성값의 변경 사항에 대한 사용자 지정 규칙을 정의할 수 있으므로 해당 특성의 존재 여부에 관계없이 특성에 할당할 동작을 정의할 수 있습니다. 그러나 목록 끝에 있는 예제가 보여주고 있듯이 &lt;code&gt;__setattr__&lt;/code&gt;을 사용하는 방법에 주의를 기울여야합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__delattr__(self, name)&lt;/code&gt; : 이것은 &lt;code&gt;__setattr__&lt;/code&gt;과 완전히 동일하지만 속성을 설정하는 대신 삭제하는 것입니다. 무한 재귀(&lt;code&gt;__delattr__&lt;/code&gt; 구현시 &lt;code&gt;del self.name&lt;/code&gt;을 호출하면 무한 재귀가 발생합니다)를 방지하기 위해 &lt;code&gt;__setattr__&lt;/code&gt;과 동일한 예방 조치를 취해야합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__getattribute__(self, name)&lt;/code&gt; : &lt;code&gt;__getattribute__&lt;/code&gt;는 &lt;code&gt;__setattr__&lt;/code&gt; 및 &lt;code&gt;__delattr__&lt;/code&gt;와 매우 잘 어울립니다. 그러나, 사용하지 않는 것이 좋습니다. &lt;code&gt;__getattribute__&lt;/code&gt;는 새로운 스타일의 클래스에서만 사용할 수 있습니다. 모든 클래스는 최신 버전의 파이썬에서 새로운 스타일이며, 이전 버전에서는 객체를 서브클래싱하여 새로운 스타일을 만들 수 있습니다. 이 메소드는 속성값에 액세스할 때마다 규칙을 정의할 수 있습니다. 이 메소드는 그들의 공범자와 같이 비슷한 무한재귀 문제를 겪습니다. (이번에는 베이스 클래스의 &lt;code&gt;__getattribute__&lt;/code&gt; 메소드를 호출하여 이것을 방지합니다). 또한 &lt;code&gt;__getattr__&lt;/code&gt;에 대한 필요성을 제거합니다. &lt;code&gt;__getattribute__&lt;/code&gt;가 구현되면 명시적으로 호출되거나 &lt;code&gt;AttributeError&lt;/code&gt;가 발생하는 경우에만 호출됩니다. 이 메소드를 사용할 수는 있지만 (결국 사용자의 선택사항입니다.) 사용 사례가 적기 때문에 권장하지 않습니다. (값을 할당하는 것보다 값을 획득할 때 특별한 조작이 필요한 상황은 훨씬 더 드뭅니다. (역자: 보통 값을 set할 때보다 get할 때에는 별다른 코드가 필요없다는 뜻인 것 같아요) 왜냐하면 버그없이 구현하는 것은 정말로 어렵기 때문입니다.&lt;/p&gt;

&lt;p&gt;속성 액세스를 제어하는 메소드를 정의하는데, 쉽게 문제가 발생할 수 있습니다. 다음 예제를 고려하십시오.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;fm&#34;&gt;__setattr__&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
    &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;# 속성이 할당될 때마다 __setattr__()이 호출됩니다. 이것은 재귀입니다.&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;# 그래서 이것은 정말로 self.__setattr__(&amp;#39;name&amp;#39;, value)를 의미합니다. 이 메서드는&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;# 계속 호출하므로 이 재귀는 영원히 계속 충돌합니다&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;fm&#34;&gt;__setattr__&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
    &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;vm&#34;&gt;__dict__&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;# 클래스의 dict의 이름에 할당&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;# 커스텀 동작을 정의&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;다시 말하지만, 파이썬의 매직 메소드는 믿을 수 없을 정도로 강력합니다. 그리고 큰 힘에는 큰 책임이 따릅니다. 코드가 손상되지 않도록 매직 메소드를 사용하는 제대로 된 방법을 아는 것이 중요합니다.&lt;/p&gt;

&lt;p&gt;자, 파이썬에서 사용자 정의 속성 액세스에 대해 배웠던 것은 무엇입니까? 속성 액세스는 가볍게 사용되지 않습니다. 사실 과도하게 강력하고 반직관적인 경향이 있습니다. 그러나 이들이 존재하는 이유는 특정한 가려움을 긁어주기 때문입니다. 파이썬은 나쁜 일을 불가능하게 만들려고 하지 않고 단지 어렵게 만듭니다. 자유가 가장 중요한 것인 것처럼, 여러분은 여러분이 원하는 것이라면 무엇이든지 할 수 있습니다. 다음은 특수한 속성 액세스 메소드의 예제입니다 (모든 클래스가 &lt;code&gt;__dict__&lt;/code&gt; 속성을 가지고 있지 않기 때문에 &lt;code&gt;super&lt;/code&gt;를 사용합니다).&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;AccessCounter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;object&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
    &lt;span class=&#34;s1&#34;&gt;&amp;#39;&amp;#39;&amp;#39; 값을 지니고 있고 액세스 카운터를 구현하는 클래스입니다.
&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;    값이 변경 될 때마다 카운터가 증가합니다.&amp;#39;&amp;#39;&amp;#39;&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;fm&#34;&gt;__init__&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;val&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;nb&#34;&gt;super&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;AccessCounter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;fm&#34;&gt;__setattr__&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;counter&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;nb&#34;&gt;super&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;AccessCounter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;fm&#34;&gt;__setattr__&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;value&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;val&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;fm&#34;&gt;__setattr__&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;name&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;value&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
            &lt;span class=&#34;nb&#34;&gt;super&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;AccessCounter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;fm&#34;&gt;__setattr__&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;counter&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;counter&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;# 무조건 이렇게 합니다.&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;# 다른 속성을 설정하지 않으려면, AttributeError 오류를 발생시킵니다.&lt;/span&gt;
        &lt;span class=&#34;nb&#34;&gt;super&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;AccessCounter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;fm&#34;&gt;__setattr__&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;fm&#34;&gt;__delattr__&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;name&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;value&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
            &lt;span class=&#34;nb&#34;&gt;super&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;AccessCounter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;fm&#34;&gt;__setattr__&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;counter&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;counter&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;nb&#34;&gt;super&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;AccessCounter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;fm&#34;&gt;__delattr__&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&#34;커스텀-시퀀스-만들기&#34;&gt;커스텀 시퀀스 만들기&lt;/h2&gt;

&lt;p&gt;파이썬 클래스가 내장 시퀀스(dict, tuple, list, str 등)처럼 동작하도록 하는 방법은 여러 가지가 있습니다. 이들은 파이썬에서 제가 가장 좋아하는 매직 메소드입니다. 왜냐하면 여러분에게 주는 터무니없는 통제력과 마법처럼 배열의 (글로벌) 함수 전체를 여러분 클래스의 인스턴스에서 아름답게 동작하도록 만드는 방식 때문입니다. 그러나 우리가 좋은 물건에 관심을 가지기 전에, 요구사항에 관한 것들을 신속하게 말씀드리겠습니다.&lt;/p&gt;

&lt;h3 id=&#34;요구사항&#34;&gt;요구사항&lt;/h3&gt;

&lt;p&gt;자, 우리는 파이썬에서 자신의 시퀀스를 만드는 것에 대해 말하고 있는데, 프로토콜에 대해 이야기할 차례입니다. 프로토콜은 사용자가 정의해야 하는 일련의 메소드를 제공한다는 점에서 다른 언어의 인터페이스와 다소 유사합니다. 그러나 파이썬 프로토콜은 완전히 비공식적이므로 명시적 선언을 구현할 필요가 없습니다. 오히려 그들은 가이드 라인과 같습니다.&lt;/p&gt;

&lt;p&gt;왜 지금 프로토콜에 대해 이야기하고 있습니까? 파이썬에서 사용자 정의 컨테이너 타입을 구현하려면 이러한 프로토콜 중 일부가 필요합니다. 첫째, 불변 컨테이너를 정의하는 프로토콜이 있습니다. 불변 컨테이너를 만들기 위해서는 &lt;code&gt;__len__&lt;/code&gt;과 &lt;code&gt;__getitem__&lt;/code&gt;(나중에 자세히 설명)만 정의하면 됩니다. 가변 컨테이너 프로토콜에는 불변 컨테이너에 필요한 모든 항목과 &lt;code&gt;__setitem__&lt;/code&gt; 및 &lt;code&gt;__delitem__&lt;/code&gt;이 필요합니다. 마지막으로, 객체를 반복할 수 있게 하려면 반복자를 반환하는 &lt;code&gt;__iter__&lt;/code&gt;를 정의해야 합니다. 이 반복자는 반복자 프로토콜을 준수해야 합니다. 반복자에는 &lt;code&gt;__iter__(자체를 반환)&lt;/code&gt;와 &lt;code&gt;next&lt;/code&gt;라는 메서드가 있어야 합니다.&lt;/p&gt;

&lt;h3 id=&#34;컨테이너-뒤의-마법&#34;&gt;컨테이너 뒤의 마법&lt;/h3&gt;

&lt;p&gt;컨테이너가 사용하는 매직 메소드는 다음과 같습니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__len__(self)&lt;/code&gt; : 컨테이너의 길이를 반환합니다. 불변 및 가변 컨테이너에 대한 프로토콜의 일부입니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__getitem__(self, key)&lt;/code&gt; : &lt;code&gt;self[key]&lt;/code&gt; 표기법을 사용하여 항목에 액세스할 때의 동작을 정의합니다. 이것은 가변 컨테이너 프로토콜과 불변 컨테이너 프로토콜의 일부이기도 합니다. 또한 적절한 예외를 발생시켜야합니다. 즉, 키의 유형이 잘못된 경우 &lt;code&gt;TypeError&lt;/code&gt;를, 키에 해당하는 값이 없는 경우 &lt;code&gt;KeyError&lt;/code&gt;를 지정하십시오.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__setitem__(self, key, value)&lt;/code&gt; : &lt;code&gt;self[nkey] = value&lt;/code&gt; 표기법을 사용하여 항목이 할당된 경우의 동작을 정의합니다. 이것은 가변 컨테이너 프로토콜의
일부입니다. 다시, &lt;code&gt;KeyError&lt;/code&gt;와 &lt;code&gt;TypeError&lt;/code&gt;를 적절히 발생시켜야 합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__delitem__(self, key)&lt;/code&gt; : 항목이 삭제 된 경우의 동작을 정의합니다(예 : &lt;code&gt;del self[key]&lt;/code&gt;). 이것은 가변 컨테이너 프로토콜의 일부일뿐입니다. 유효하지 않은 키가 사용되면 적절한 예외를 발생시켜야합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__iter__(self)&lt;/code&gt; : 컨테이너에 대한 반복자를 반환해야합니다. 반복자는 많은 컨텍스트에서 반환됩니다. 특히 &lt;code&gt;iter()&lt;/code&gt; 내장 함수와 &lt;code&gt;for x in container:&lt;/code&gt; 형태를 사용하여 컨테이너가 반복될 때 가장 많이 볼 수 있습니다. 반복자는 자체가 객체이며 자체를 반환하는 &lt;code&gt;__iter__&lt;/code&gt; 메서드를 정의해야 합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__reversed__(self)&lt;/code&gt; : &lt;code&gt;reversed()&lt;/code&gt; 내장 함수의 동작을 구현하기 위해 호출됩니다. 시퀀스의 반대 버전을 반환해야합니다. 시퀀스 클래스가 &lt;code&gt;list&lt;/code&gt; 또는 &lt;code&gt;tuple&lt;/code&gt;과 같이 정렬된 경우에만 이를 구현하시길 바랍니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__contains__(self, item)&lt;/code&gt; : &lt;code&gt;__contains__&lt;/code&gt;는 &lt;code&gt;in&lt;/code&gt;과 &lt;code&gt;not in&lt;/code&gt;을 사용하여 멤버십 테스트에 대한 동작을 정의합니다. 이 부분이 시퀀스 프로토콜의 일부가 아닌 이유를 물으신다면, &lt;code&gt;__contains__&lt;/code&gt;가 정의되어 있지 않을 때, 파이썬은 그냥 시퀀스를 반복하며 찾고 있는 항목을 발견할 경우 &lt;code&gt;True&lt;/code&gt;를 반환하기 때문입니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__missing__(self, key)&lt;/code&gt; : &lt;code&gt;__missing__&lt;/code&gt;은 &lt;code&gt;dict&lt;/code&gt;의 서브 클래스에서 사용됩니다. 사전에 존재하지 않는 키에 액세스 할 때마다 동작을 정의합니다 (예를 들어, 딕셔러니 &lt;code&gt;d&lt;/code&gt;가 있고 &lt;code&gt;&amp;quot;george&amp;quot;&lt;/code&gt;가 &lt;code&gt;dict&lt;/code&gt;에서 키가 아닌데 &lt;code&gt;d[&amp;quot;george&amp;quot;]&lt;/code&gt;라고 말한 경우, &lt;code&gt;d.__missing__(&amp;quot;george&amp;quot;)&lt;/code&gt;가 호출됩니다.&lt;/p&gt;

&lt;h3 id=&#34;예제&#34;&gt;예제&lt;/h3&gt;

&lt;p&gt;예를 들어, 다른 언어에서 익숙해질 수 있는 몇 가지 함수형 생성자를 구현하는 리스트를 살펴보겠습니다. (예, 하스켈)&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;FunctionalList&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
    &lt;span class=&#34;s1&#34;&gt;&amp;#39;&amp;#39;&amp;#39;head, tail, init, last, drop 및 take와 같은 추가적인 함수형 매직으로
&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;    목록을 래핑하는 클래스입니다.&amp;#39;&amp;#39;&amp;#39;&lt;/span&gt;


    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;fm&#34;&gt;__init__&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;values&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;None&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;values&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;is&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;None&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
            &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;values&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
            &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;values&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;values&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;fm&#34;&gt;__len__&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;values&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;fm&#34;&gt;__getitem__&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;# key의 타입이나 값이 유효하지 않은 경우,리스트의 값은 에러를 발생시킵니다.&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;values&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;fm&#34;&gt;__setitem__&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;values&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;fm&#34;&gt;__delitem__&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;del&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;values&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;fm&#34;&gt;__iter__&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;iter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;values&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;fm&#34;&gt;__reversed__&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;reversed&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;values&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;append&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;values&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;append&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;head&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;# 첫 번째 요소를 가져옵니다.&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;values&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;tail&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;# 첫 번째 이후의 모든 요소들을 가져옵니다.&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;values&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:]&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;init&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;# 마지막 까지의 직전 요소들을 가져옵니다.&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;values&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[:&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;last&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;# 마지막 요소를 가져옵니다.&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;values&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;drop&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;# 처음 n개를 제외한 모든 요소를 가져옵니다.&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;values&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:]&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;take&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;# 처음 n개의 요소를 가져옵니다.&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;values&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;바로 자신만의 시퀀스를 구현하는 방법에 대한 유용한 예제였습니다. 물론 사용자 정의 시퀀스의 보다 유용한 응용 프로그램이 있지만, &lt;code&gt;Counter&lt;/code&gt;, &lt;code&gt;OrderedDict&lt;/code&gt; 및 &lt;code&gt;NamedTuple&lt;/code&gt;과 같이 그들 중 일부는 표준 라이브러리 (배터리 포함)에 이미 구현되어 있습니다.&lt;/p&gt;

&lt;h2 id=&#34;리플렉션&#34;&gt;리플렉션&lt;/h2&gt;

&lt;p&gt;또한 여러분은 내장함수 &lt;code&gt;isinstance()&lt;/code&gt;와 &lt;code&gt;issubclass()&lt;/code&gt;로  매직 메서드를 정의하여 리플렉션이 동작하는 방식을 제어할 수 있습니다. 매직 메소드는 다음과 같습니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__instancecheck__(self, instance)&lt;/code&gt; : 인스턴스가 정의한 클래스의 인스턴스인지 확인합니다 (예 : &lt;code&gt;isinstance(instance, class)&lt;/code&gt;).&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__subclasscheck__(self, subclass)&lt;/code&gt; : 클래스가 정의한 클래스의 하위 클래스인지 확인합니다 (예 : &lt;code&gt;issubclass(subclass, class)&lt;/code&gt;).&lt;/p&gt;

&lt;p&gt;이 매직 메소드의 유즈케이스는 미미해 보일 수 있으며, 이는 사실일 수 있습니다. 리플렉션 매직 메소드에 너무 많은 시간을 할애하지는 않겠지만, 파이썬과 파이썬에서 객체지향 프로그래밍에 대해 중요한 것을 반영합니다. 설령 필요하지 않더라도, 뭔가를 하기 위한 쉬운 방법이 거의 항상 있다는 것입니다. 이 매직 메소드는 유용하지 않을 수도 있지만, 필요할 때면 그들이 거기에 있다는 것을 알게 될 것입니다 (그리고 이 가이드를 읽었으니깐요!).&lt;/p&gt;

&lt;h2 id=&#34;호출-가능한-객체&#34;&gt;호출 가능한 객체&lt;/h2&gt;

&lt;p&gt;이미 알고 있겠지만, 파이썬에서는 함수가 일급객체입니다. 즉, 마치 다른 종류의 객체인 것처럼 함수와 메소드에 전달할 수 있습니다. 이것은 매우 강력한 기능입니다.&lt;/p&gt;

&lt;p&gt;파이썬의 특별한 매직 메소드는 클래스의 인스턴스가 마치 함수인 것처럼 동작하게 할 수 있으므로, 인스턴스를 &amp;ldquo;호출&amp;rdquo;할 수 있고 함수를 인수로 사용하는 함수에  인스턴스를 전달할 수 있습니다. 이것은 파이썬 프로그래밍을 훨씬 더 매력적으로 만드는 또 다른 강력한 기능입니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__call__(self, [args ...])&lt;/code&gt; : 클래스의 인스턴스를 함수로 호출할 수 있습니다. 본질적으로 이것은 &lt;code&gt;x()&lt;/code&gt; 가 &lt;code&gt;x.__call__()&lt;/code&gt;과 동일하다는 것을 의미합니다. &lt;code&gt;__call__&lt;/code&gt;은 가변 개수의 인수(argument)를 취합니다. 이는 다른 함수처럼 &lt;code&gt;__call__&lt;/code&gt;을 정의한다는 것을 의미합니다. 그러나 원하는 많은 인수를 취합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__call__&lt;/code&gt;은 종종 상태를 변경해야 하는 인스턴스가 있는 클래스에서 유용할 수 있습니다. 객체의 상태를 변경하기 위해 인스턴스를 &amp;ldquo;호출&amp;rdquo;하는 것은 직관적이고 우아한 방법입니다. 예제는 비행기에서 엔티티의 위치를 나타내는 클래스일 수 있습니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Entity&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
    &lt;span class=&#34;s1&#34;&gt;&amp;#39;&amp;#39;&amp;#39;엔티티를 나타내는 클래스입니다. 엔터티의 위치를 업데이트하기 위해 호출 가능함.&amp;#39;&amp;#39;
&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;    def __init__(self, size, x, y):
&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;        self.x, self.y = x, y
&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;        self.size = size
&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;    def __call__(self, x, y):
&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;        &amp;#39;&amp;#39;&amp;#39;&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;엔티티의&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;위치를&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;변경합니다&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&amp;#39;&amp;#39;
&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;        self.x, self.y = x, y
&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;
&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;    # 생략...&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&#34;컨텍스트-매니저&#34;&gt;컨텍스트 매니저&lt;/h2&gt;

&lt;p&gt;파이썬 2.5에서는 코드 재사용을 위한 새로운 메소드와 새로운 키워드가 도입되었습니다. 바로 &lt;code&gt;with&lt;/code&gt; 문입니다. 컨텍스트 관리자의 개념은 파이썬에서 거의 새로운 개념이 아니었습니다 (이전에는 라이브러리 일부로 구현되었지만). &lt;a href=&#34;http://www.python.org/dev/peps/pep-0343/&#34; target=&#34;_blank&#34;&gt;PEP 343&lt;/a&gt;이 받아 들여지기 전에는 일급 언어 구성자로서의 지위를 얻지 못했습니다. 다음과 같이 여러분은 이전에 &lt;code&gt;with&lt;/code&gt; 문을 본 적이 있을 겁니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;k&#34;&gt;with&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;open&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;foo.txt&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;bar&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;# bar로 어떤 액션을 수행합니다.&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;객체 생성을 &lt;code&gt;with&lt;/code&gt; 문으로 래핑할 때, 객체에 대한 셋업 및 클린업 조치를 할 수 있게 됩니다. 컨텍스트 관리자의 동작은 두 가지 방법으로 결정됩니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__enter__(self)&lt;/code&gt; : with 문에 의해 생성된 블록의 시작 부분에서 컨텍스트 관리자가 수행해야 하는 작업을 정의합니다. &lt;code&gt;__enter__&lt;/code&gt;의 반환값은 &lt;code&gt;with&lt;/code&gt; 문의 대상 또는 &lt;code&gt;as&lt;/code&gt; 다음의 이름에 바인딩됩니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__exit__(self, exception_type, exception_value, traceback)&lt;/code&gt; : 블록이 실행(또는 종료) 된 후에 컨텍스트 관리자가 해야할 일을 정의합니다. 예외를 처리하거나, 클린업을 실행하거나 또는 블록의 실행 직후에 항상 수행되는 작업을 진행할 수 있습니다. 블록이 성공적으로 실행되면 &lt;code&gt;exception_type&lt;/code&gt;, &lt;code&gt;exception_value&lt;/code&gt; 및 &lt;code&gt;traceback&lt;/code&gt;은 &lt;code&gt;None&lt;/code&gt;이 됩니다. 그렇지 않으면 예외를 처리하도록 선택하거나 사용자가 처리하도록 선택할 수 있습니다. 여러분이 (별도로) 처리하고 싶다면, &lt;code&gt;__exit__&lt;/code&gt;이 모두 진술되고 완료된 후에 &lt;code&gt;True&lt;/code&gt;를 반환하는지 확인하세요. 컨텍스트 관리자가 예외를 처리하지 못하게 하려면 그냥 그대로 두면 됩니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__enter__&lt;/code&gt; 및 &lt;code&gt;__exit__&lt;/code&gt;은 셋업과 및 클린업에 대해 잘 정의되고 공통된 동작을 하는 특정 클래스에 유용할 수 있습니다. 이 메소드를 사용하여 다른 객체를 래핑하는 일반 컨텍스트 매니저를 작성할 수도 있습니다. 다음은 그 예제입니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Closer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
    &lt;span class=&#34;s1&#34;&gt;&amp;#39;&amp;#39;&amp;#39;with 문에서 close 메소드를 사용하여 객체를 자동으로 닫는 컨텍스트
&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;    관리자입니다.&amp;#39;&amp;#39;&amp;#39;&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;fm&#34;&gt;__init__&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;obj&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;obj&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;obj&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;fm&#34;&gt;__enter__&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;obj&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;# bound to target&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;fm&#34;&gt;__exit__&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;exception_type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;exception_val&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;trace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;try&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
           &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;obj&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;close&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;except&lt;/span&gt; &lt;span class=&#34;ne&#34;&gt;AttributeError&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;# 객체를 닫을 수 없는 경우입니다.&lt;/span&gt;
           &lt;span class=&#34;k&#34;&gt;print&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;Not closable.&amp;#39;&lt;/span&gt;
           &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;True&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;# 예외가 성공적으로 처리되었습니다.&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;다음은 FTP 연결을 사용한, 클로저 가능한 클로저의 예입니다 (클로저 가능한 소켓).&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-pythonconsole&#34; data-lang=&#34;pythonconsole&#34;&gt;&amp;gt;&amp;gt;&amp;gt; from magicmethods import Closer
&amp;gt;&amp;gt;&amp;gt; from ftplib import FTP
&amp;gt;&amp;gt;&amp;gt; with Closer(FTP(&amp;#39;ftp.somesite.com&amp;#39;)) as conn:
...     conn.dir()
...
# 길어서 출력은 생략
&amp;gt;&amp;gt;&amp;gt; conn.dir()
# 긴 AttributeError 메세지, 닫힌 연결은 사용할 수 없습니다.
&amp;gt;&amp;gt;&amp;gt; with Closer(int(5)) as i:
...     i += 1
...
Not closable.
&amp;gt;&amp;gt;&amp;gt; i
6&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;래퍼가 적절하고 부적절한 사용을 어떻게 우아하게 처리하는지 보셨나요? 이것이 바로 컨텍스트 매니저와 매직 메소드의 힘입니다. 파이썬 표준 라이브러리에는 거의 같은 작업을 하는, &lt;code&gt;contextlib.closing()&lt;/code&gt;라는 컨텍스트 매니저를 지닌 &lt;code&gt;contextlib&lt;/code&gt;가 포함되어 있습니다 (객체에 &lt;code&gt;close()&lt;/code&gt; 메서드가 없는 경우는 다루지 않음).&lt;/p&gt;

&lt;h2 id=&#34;추상-베이스-클래스&#34;&gt;추상 베이스 클래스&lt;/h2&gt;

&lt;p&gt;&lt;a href=&#34;http://docs.python.org/2/library/abc.html&#34; target=&#34;_blank&#34;&gt;http://docs.python.org/2/library/abc.html&lt;/a&gt; 를 참조하세요.&lt;/p&gt;

&lt;h2 id=&#34;디스크립터-객체-만들기&#34;&gt;디스크립터 객체 만들기&lt;/h2&gt;

&lt;p&gt;디스크립터는 가져 오기, 설정 또는 삭제를 통해 액세스할 때 다른 객체를 변경할 수 있는 클래스입니다. 디스크립터는 단독으로 존재하지 않습니다. 오히려, 이들은 소유자 클래스에 의해 소유됩니다. 디스크립터는 값이 서로 의존하는 속성을 가진 객체지향 데이터베이스 또는 클래스를 빌드할 때 유용할 수 있습니다. (역자 주: 어떤 변수나 함수에 접근, 변경, 삭제하는 것을 제어하거나 로그 출력 등의 이벤트를 걸고 싶을 때에도 유용합니다.) 디스크립터는 특히 여러 측정 단위로 속성을 표현하거나 계산된 속성(클래스의 원점에서 그리드의 한 점을 나타내는 거리와 같은)을 나타낼 때 특히 유용합니다.&lt;/p&gt;

&lt;p&gt;디스크립터가 되려면 클래스에 &lt;code&gt;__get__&lt;/code&gt;, &lt;code&gt;__set__&lt;/code&gt; 및 &lt;code&gt;__delete__&lt;/code&gt; 중 하나 이상이 구현되어 있어야 합니다. 이들의 매직 메소드를 살펴봅시다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__get__(self, instance, owner)&lt;/code&gt; : 디스크립터의 값이 회수될 때의 동작을 정의합니다. &lt;code&gt;instance&lt;/code&gt;는 소유자 객체의 인스턴스입니다. &lt;code&gt;owner&lt;/code&gt;는 소유자 클래스 자체입니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__set__(self, instance, value)&lt;/code&gt; : 디스크립터의 값이 변경될 때의 동작을 정의합니다. &lt;code&gt;instance&lt;/code&gt;는 소유자 클래스의 인스턴스이고 &lt;code&gt;value&lt;/code&gt;는 디스크립터에 설정하는 값입니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__delete__(self, instance)&lt;/code&gt; : 디스크립터의 값이 삭제될 때의 동작을 정의합니다. &lt;code&gt;instance&lt;/code&gt;는 소유자 객체의 인스턴스입니다.&lt;/p&gt;

&lt;p&gt;자, 디스크립터의 유용한 응용 예제, 단위 변환입니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Meter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;object&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
    &lt;span class=&#34;s1&#34;&gt;&amp;#39;&amp;#39;&amp;#39;meter에 대한 디스크립터 &amp;#39;&amp;#39;&amp;#39;&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;fm&#34;&gt;__init__&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;0.0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;float&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;fm&#34;&gt;__get__&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;instance&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;owner&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;fm&#34;&gt;__set__&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;instance&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;float&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Foot&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;object&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
    &lt;span class=&#34;s1&#34;&gt;&amp;#39;&amp;#39;&amp;#39;footer에 대한 디스크립터&amp;#39;&amp;#39;&amp;#39;&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;fm&#34;&gt;__get__&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;instance&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;owner&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;instance&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;meter&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;3.2808&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;fm&#34;&gt;__set__&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;instance&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;instance&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;meter&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;float&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;3.2808&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Distance&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;object&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
    &lt;span class=&#34;s1&#34;&gt;&amp;#39;&amp;#39;&amp;#39;feet 와 meter에 대한 두 개의 디스크립터를 나타내는 클래스입니다.&amp;#39;&amp;#39;&amp;#39;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;meter&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Meter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;foot&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Foot&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&#34;복사하기&#34;&gt;복사하기&lt;/h2&gt;

&lt;p&gt;때로는 변경 가능한 객체를 처리할 때, 특히 복사한 객체에 영향을 주지 않고 객체를 복사하고 변경할 수 있기를 원합니다. 이것은 파이썬의 &lt;code&gt;[copy](http://docs.python.org/library/copy.html)&lt;/code&gt;가 나온 배경입니다. 그러나 (다행스럽게도) 파이썬 모듈은 민감하지 않으므로 리눅스 기반의 로봇의 폭동 (a Linux-based robot uprising)에 대해 걱정할 필요는 없지만, 파이썬에게 효율적으로 복사하는 방법을 알려줘야합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__copy__(self)&lt;/code&gt; : 클래스의 인스턴스에 대해 &lt;code&gt;copy.copy()&lt;/code&gt;에 대한 동작을 정의합니다. &lt;code&gt;copy.copy()&lt;/code&gt;는 객체의 단순 복사본을 반환합니다. 즉, 인스턴스 자체가 새 인스턴스이지만 모든 데이터가 참조됩니다. 즉, 객체 자체는 복사되지만 데이터는 계속 참조됩니다. 따라서 얕은 사본의 데이터가 변경되면 원본이 변경 될 수 있습니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__deepcopy__(self, memodict = {})&lt;/code&gt; : 클래스의 인스턴스에 대해 &lt;code&gt;copy.deepcopy()&lt;/code&gt;에 대한 동작을 정의합니다. &lt;code&gt;copy.deepcopy()&lt;/code&gt;는 객체의 전체 복사본을 반환합니다. 객체와 그 데이터는 모두 복사됩니다. &lt;code&gt;memodict&lt;/code&gt;는 이전에 복사된 객체의 캐시입니다.이 방법은 복사를 최적화하고 재귀적 데이터 구조를 복사할 때 무한 재귀를 방지합니다. 개별 속성을 깊이 복사하려면, &lt;code&gt;memdeict&lt;/code&gt;를 첫 번째 인수로 사용하여 해당 속성에 대해 &lt;code&gt;copy.deepcopy()&lt;/code&gt;를 호출하시면 됩니다.&lt;/p&gt;

&lt;p&gt;이 매직 메소드의 유즈케이스는 무엇일까요? 언제나 그렇듯이 기본 동작이 제공하는 것보다 세분화된 제어가 필요한 경우가 있습니다. 예를 들어, 딕셔너리에 캐시를 저장하는 객체를 복사하려고 시도하면 (크기가 클 수 있음), 캐시를 복사하는 것이 적절하지 않을 수 있습니다. 인스턴스간에 메모리에서 캐시를 공유할 수 있다면 그렇게 해야합니다.&lt;/p&gt;

&lt;h2 id=&#34;객체-피클링하기&#34;&gt;객체 피클링하기&lt;/h2&gt;

&lt;p&gt;다른 파이썬 프로그래머와 함께 시간을 보내고 있다면, 적어도 피클링에 대해 들어 본 적이 있을 것입니다. 피클링은 파이썬 데이터 구조의 직렬화 프로세스이며, 객체를 저장하고 나중에 검색해야 할 때 (대개 캐싱을 위해) 매우 유용할 수 있습니다. 또한 걱정과 혼란의 주요 원인이기도 합니다.&lt;/p&gt;

&lt;p&gt;피클링은 매우 중요하므로 자체 모듈(&lt;code&gt;pickle&lt;/code&gt;)이 아니라 자체 프로토콜과 함께 사용하는 매직 메소드가 필요합니다. 그러나 먼저 기존 유형을 피클링하는 방법에 대한 간단한 것들을 말씀드리겠습니다 (이미 알고있는 경우 건너 뛸 수 있음).&lt;/p&gt;

&lt;h3 id=&#34;피클링-소금물에-빨리-절이기&#34;&gt;피클링: 소금물에 빨리 절이기&lt;/h3&gt;

&lt;p&gt;피클링에 빠져 보죠. 나중에 저장하고 조회하고 싶은 딕셔너리가 있다고 합시다. 내용을 파일에 쓸 수 있으며, 올바른 구문을 작성했는지 확인한 다음 &lt;code&gt;exec()&lt;/code&gt; 또는 파일 입력 처리를 사용하여 내용을 조회할 수 있습니다. 그러나 이것은 매우 위험합니다. 중요한 데이터를 일반 텍스트로 저장하면 프로그램이 충돌하거나 악성 코드가 컴퓨터에서 실행되도록 다양한 방법으로 손상되거나 변경될 수 있습니다. 대신, 우리는 그것을 피클하려고합니다 :&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;pickle&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;foo&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt;
        &lt;span class=&#34;s1&#34;&gt;&amp;#39;bar&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;Hello&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;world!&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;
        &lt;span class=&#34;s1&#34;&gt;&amp;#39;baz&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;jar&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;open&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;data.pkl&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;wb&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;pickle&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dump&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;jar&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;# jar 파일에 피클된 데이터를 기록합니다.&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;jar&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;close&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;몇 시간 후, 우리는 되돌리기 원합니다. 우리가 해야 할 일은 언피클하는 것입니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;pickle&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;pkl_file&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;open&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;data.pkl&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;rb&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;# 피클한 데이터에 연결합니다.&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pickle&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;load&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pkl_file&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;# 데이터를 변수로 로드합니다.&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;print&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;pkl_file&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;close&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;도대체 무슨 일이 일어난 걸까요? 정확히 여러분이 기대하는 것이죠. 우리가 데이터를 모두 가지고 있었던 것과 같습니다.&lt;/p&gt;

&lt;p&gt;자, 주의 사항을 말씀드리겠습니다. 피클링은 완벽하지 않습니다. 피클 파일은 실수로 또는 고의로 쉽게 손상됩니다. 피클링은 무난한 텍스트 파일을 사용하는 것보다 안전할 수 있지만 악성 코드를 실행하는 데에 여전히 사용될 수 있습니다. 다른 버전의 파이썬에서도 호환되지 않으므로 피클링된 객체를 배포하고 사람들이 이를 열 수 있을 것으로 기대하지 마세요. 그러나 캐싱 및 기타 일반적인 직렬화 작업을 위한 강력한 도구가 될 수도 있습니다.&lt;/p&gt;

&lt;h3 id=&#34;자신의-객체-피클링하기&#34;&gt;자신의 객체 피클링하기&lt;/h3&gt;

&lt;p&gt;피클링은 내장 타입을 위한 것이 아닙니다. 피클 프로토콜을 따르는 모든 클래스를 위한 것입니다. 피클 프로토콜에는 파이썬 객체가 동작하는 방식을 사용자 정의할 수 있는 4가지 선택적 메소드가 있습니다 (C 확장의 경우에는 약간 다르지만 범위에는 포함되지 않습니다).&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__getinitargs__(self)&lt;/code&gt; : 클래스가 언피클되었을 때 &lt;code&gt;__init__&lt;/code&gt;을 호출하고 싶다면, &lt;code&gt;__getinitargs__&lt;/code&gt;를 정의할 수 있습니다. 이 &lt;code&gt;__getinitargs__&lt;/code&gt;는 &lt;code&gt;__init__&lt;/code&gt;에 전달할 인수의 튜플을 반환해야 합니다. 이 메소드는 구식 클래스에서만 작동합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__getnewargs__(self)&lt;/code&gt; : 새로운 스타일의 클래스의 경우, 언피클링을 할 때 &lt;code&gt;__new__&lt;/code&gt;에 전달되는 인수에 영향을 줄 수 있습니다. 이 메소드는 &lt;code&gt;__new__&lt;/code&gt;로 전달되는 인수 튜플을 반환해야합니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__getstate__(self)&lt;/code&gt; : 객체의 &lt;code&gt;__dict__&lt;/code&gt; 속성이 저장되는 대신 객체가 피클될 때 저장할 수 있는 사용자 정의 상태를 반환할 수 있습니다. 그 상태는 객체가 언피클 되었을 때 &lt;code&gt;__setstate__&lt;/code&gt;에 의해 사용됩니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__setstate__(self, state)&lt;/code&gt; : 객체가 언피클 되었을 때 &lt;code&gt;__setstate__&lt;/code&gt;가 정의 되었다면, 객체의 상태는 객체의 &lt;code&gt;__dict__&lt;/code&gt;에 직접 적용되지 않고 전달됩니다. 이것은 &lt;code&gt;__getstate__&lt;/code&gt;와 함께 사용됩니다 : 둘 다 정의되면 객체의 피클된 상태를 여러분이 원하는대로 나타낼 수 있습니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__reduce__(self)&lt;/code&gt; : 확장 타입(즉, 파이썬의 C API를 사용하여 구현된 타입)을 정의 할 때 파이썬에서 피클링하려는 경우 피클링 방법을 지정해야합니다. &lt;code&gt;__reduce__()&lt;/code&gt;는 정의된 객체가 피클될 때 호출됩니다. 파이썬이 찾고 피클하는 전역 이름을 나타내는 문자열 또는 튜플을 반환할 수 있습니다. 튜플은 2 ~ 5 개의 요소를 포함합니다. 객체를 다시 생성하기 위해 호출되는 호출 가능 객체, 호출 가능 객체에 대한 인수의 튜플, &lt;code&gt;__setstate__&lt;/code&gt;에 전달될 상태 (선택 사항), 피클링될 리스트 항목을 생성하는 반복자(선택 사항), 피클링할 딕셔너리 항목을 생성하는 반복자 (선택 사항)가 있습니다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;__reduce_ex__(self)&lt;/code&gt; : &lt;code&gt;__reduce_ex__&lt;/code&gt;은 호환성을 위해 존재합니다. 정의된 경우, &lt;code&gt;__reduce_ex__&lt;/code&gt;는 피클링시에 &lt;code&gt;__reduce__&lt;/code&gt;를 통해 호출됩니다. &lt;code&gt;__reduce__&lt;/code&gt;는 &lt;code&gt;__reduce_ex__&lt;/code&gt;을 지원하지 않는 이전 버전의 피클링 API에 대해서도 정의할 수 있습니다.&lt;/p&gt;

&lt;h3 id=&#34;예제-1&#34;&gt;예제&lt;/h3&gt;

&lt;p&gt;예제는 슬레이트(Slate)로, 그 값이 무엇인지, 그 값이 쓰여졌을 때를 기억합니다. 그러나 이 특정 슬레이트는 피클될 때마다 공백으로 표시됩니다. 현재 값은 저장되지 않습니다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;time&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Slate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
    &lt;span class=&#34;s1&#34;&gt;&amp;#39;&amp;#39;&amp;#39;문자열과 변경 로그를 저장하고 피클될 때 값을 잊어 버리는 클래스&amp;#39;&amp;#39;&amp;#39;&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;fm&#34;&gt;__init__&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;
        &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;last_change&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;asctime&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
        &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;history&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{}&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;change&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;new_value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;# 값을 변경합니다. 히스토리에 마지막 값을 커밋합니다.&lt;/span&gt;
        &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;history&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;last_change&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;
        &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;new_value&lt;/span&gt;
        &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;last_change&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;asctime&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;print_changes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;print&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;Changelog for Slate object:&amp;#39;&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;k&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;v&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;history&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;items&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;():&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;print&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;%s&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\t&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt; &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;%s&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;%&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;k&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;v&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;__getstate__&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;# 의도적으로 self.value 또는 self.last_change를 반환하지 마세요.&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;# 픽업할 때 빈 슬레이트를 갖길 원하니깐요.&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;history&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;__setstate__&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;# self.history = salte 하고  last_change 와 value가 정의되지&lt;/span&gt;
        &lt;span class=&#34;err&#34;&gt;않게&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;합니다&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;
        &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;history&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;state&lt;/span&gt;
        &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;last_change&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;None&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;None&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&#34;결론&#34;&gt;결론&lt;/h2&gt;

&lt;p&gt;이 가이드의 목적은 파이썬 또는 객체지향 프로그래밍 경험에 관계없이, 읽는 사람에게 무언가를 가져다주는 것입니다. 파이썬을 처음 시작하는 분이라면 기능이 풍부하고 우아하며 사용하기 쉬운 클래스를 작성하는 기본 지식에 대한 지식을 얻었을 것입니다. 파이썬 프로그래머라면 중급의 새로운 개념과 전략, 그리고 여러분과 클라이언트가 작성한 코드의 양을 줄이는 좋은 방법을 발견했을 것입니다. 파이셔니스타(Pythonista)의 전문가라면 잊어버린 것들을 새롭게 하고 어쩌면 몇 가지 새로운 트릭을 발견했을 것입니다. 여러분의 경험 수준에 관계없이, 파이썬의 특별한 메소드를 통한 이 여행이 정말로 마법적이었기를 바랍니다.&lt;/p&gt;
</content>
      
    </item>
    
    <item>
      <title>Using custom model_to_dict() in Django</title>
      <link>https://ziwon.github.io/post/using_custom_model_to_dict_in_django/</link>
      <pubDate>Fri, 09 Dec 2016 11:00:25 +0900</pubDate>
      <author>Aron Yoon</author>
      <guid>https://ziwon.github.io/post/using_custom_model_to_dict_in_django/</guid>
      <description></description>
      
      <content>&lt;p&gt;In Django, when converting a database model to a dictionary, I usually used to convert only the member variables corresponding to the column of the table to handle the response to the request in the form of Json and so on. But, whenever you encounter a member variable of type &lt;code&gt;ManyToManyField&lt;/code&gt;, it would be too cumbersome to write three or four lines of code each time to loop around to get their values from the member variables of the &lt;code&gt;ManyToManyField&lt;/code&gt; in a model object.&lt;/p&gt;

&lt;p&gt;For example, suppose you have a modeling class of &lt;code&gt;Publication&lt;/code&gt;, &lt;code&gt;Article&lt;/code&gt; as follows.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;django.db&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;models&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Publication&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;models&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;title&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;models&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;CharField&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;max_length&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;30&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;fm&#34;&gt;__str__&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;title&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Meta&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;ordering&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;title&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,)&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Article&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;models&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;headline&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;models&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;CharField&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;max_length&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;publications&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;models&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ManyToManyField&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Publication&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;fm&#34;&gt;__str__&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;headline&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Meta&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;ordering&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;headline&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;For the &lt;code&gt;Publication&lt;/code&gt; instance, you can convert it to a dictionary by calling the &lt;code&gt;model_to_dict()&lt;/code&gt; function only once. However, when converting an instance of &lt;code&gt;Article&lt;/code&gt; with a member variable of &lt;code&gt;ManyToManyField&lt;/code&gt; to a dictionary, you have to invoke &lt;code&gt;model_to_dict()&lt;/code&gt; or loop around more than once to get their values because &lt;code&gt;ManyToManyField&lt;/code&gt; is a list type.&lt;/p&gt;

&lt;p&gt;Whenever I encountered &lt;code&gt;ManyToManyField&lt;/code&gt;, I used to create a separate method, or loop it, and convert it each by each. Suddenly, every time I write a for statement or a separate function, I thought it would be better to solve it all once.&lt;/p&gt;

&lt;p&gt;For example, let&amp;rsquo;s say you have a property in the &lt;code&gt;Article&lt;/code&gt; class, a member function, and several &lt;code&gt;ManyToManyField&lt;/code&gt;s like this:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Article&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;models&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Model&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;headline&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;models&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;CharField&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;max_length&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;publications&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;models&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ManyToManyField&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Publication&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;tags&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;models&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ManyToManyField&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Tag&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;convert_cover_img&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;o&#34;&gt;...&lt;/span&gt;

    &lt;span class=&#34;nd&#34;&gt;@property&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;count&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;o&#34;&gt;...&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;fm&#34;&gt;__str__&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;headline&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Meta&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;ordering&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;headline&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;What I want is to specify each values to be transformed, it could be such as member variables, member functions, and properties of the modeling class, as shown below, and the whole instance is converted into a single dictationary chunk in a single call. For example, if you need only one of the member variables of &lt;code&gt;ManyToManyField&lt;/code&gt;, you can convert it to &lt;code&gt;__[field_name]&lt;/code&gt; by specifying the desired field name as follows.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;n&#34;&gt;FIELDS&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;id&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;headline&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;publications__title&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;tags__name&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;convert_cover_img&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;count&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;result&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;OrderedDict&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;data&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;model_to_dict&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;instance&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;obj&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fields&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;FIELDS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;obj&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;page&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;object_list&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;has_next&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;page&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;has_next&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;...&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;JsonResponse&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;format_response&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;RES_OK&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Unfortunately, if you need more than one column for &lt;code&gt;ManyToManyField&lt;/code&gt; to build the response like json form, you have no choice but to define a seperate property or function in a model class. In a specific case, for example, if you are extending all attributes - like id, name and etc - of the tags member variable ManyToManyField while converting the Article instance.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;nd&#34;&gt;@property&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;tags_to_dict&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;...&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;However, since the model class describes the process of transforming their member variables, the above manner has the advantage that it is well modularized and reusable. As a result, the entire code is really simple and neat, because it can hide the process of converting an instance to a dictionary.&lt;/p&gt;

&lt;p&gt;Now we no longer have to loop around to handle &lt;code&gt;ManyToManyFields&lt;/code&gt; or write a separate function. It also eliminates the need to worry about member properties or member functions, which is not modeling fields .&lt;/p&gt;

&lt;p&gt;Here is the code for &lt;code&gt;model_to_dict()&lt;/code&gt; that was created. Once the conversion code of the a model is unified into just one line as shown below, repetitive and annoying coding for conversion is no longer needed. Since the parent class is created and the most job in the inherited child class is just to specify only the fields to be converted. As a result, the development speed can be much faster, which can improve the quality of the query set manager or focus on more creative work.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;model_to_dict&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;instance&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fields&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;None&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;exclude&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;None&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;date_to_strf&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;None&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
    &lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;django.db.models.fields.related&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ManyToManyField&lt;/span&gt;
    &lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;django.db.models.fields&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;DateTimeField&lt;/span&gt;
    &lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;django.db.models.fields.files&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ImageField&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;FileField&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;opts&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;instance&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_meta&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;data&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{}&lt;/span&gt;

    &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;    Why is `__fields` in here?
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;        it holds the list of fields except for the one ends with a suffix &amp;#39;__[field_name]&amp;#39;.
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;        When converting a model object to a dictionary using this method,
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;        You can use a suffix to point to the field of ManyToManyField in the model instance.
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;        The suffix ends with &amp;#39;__[field_name]&amp;#39; like &amp;#39;publications__name&amp;#39;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;    &amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;__fields&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;list&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;lambda&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;split&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;__&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fields&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;or&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]))&lt;/span&gt;

    &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;f&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;chain&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;opts&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;concrete_fields&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;opts&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;virtual_fields&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;opts&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;many_to_many&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;is_edtiable&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;getattr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;editable&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;False&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fields&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;and&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;not&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;__fields&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;continue&lt;/span&gt;

        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;exclude&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;and&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;exclude&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;continue&lt;/span&gt;

        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;isinstance&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ManyToManyField&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;instance&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pk&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;is&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;None&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
                &lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
                &lt;span class=&#34;n&#34;&gt;qs&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value_from_object&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;instance&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
                &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;qs&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_result_cache&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;is&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;not&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;None&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
                    &lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;item&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pk&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;item&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;qs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
                &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
                    &lt;span class=&#34;k&#34;&gt;try&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
                        &lt;span class=&#34;n&#34;&gt;m2m_field&lt;/span&gt;  &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;list&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;filter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;lambda&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;and&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;find&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;__&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fields&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
                        &lt;span class=&#34;n&#34;&gt;key&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;m2m_field&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:]&lt;/span&gt;
                        &lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;list&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;qs&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;values_list&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;flat&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
                    &lt;span class=&#34;k&#34;&gt;except&lt;/span&gt; &lt;span class=&#34;ne&#34;&gt;IndexError&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
                        &lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;list&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;qs&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;values_list&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;pk&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;flat&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;True&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;

        &lt;span class=&#34;k&#34;&gt;elif&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;isinstance&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;DateTimeField&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;date&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value_from_object&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;instance&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;date_to_strf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;date&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;date_to_strf&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;date_to_timestamp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;date&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

        &lt;span class=&#34;k&#34;&gt;elif&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;isinstance&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ImageField&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;image&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value_from_object&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;instance&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;image&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;url&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;image&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;None&lt;/span&gt;

        &lt;span class=&#34;k&#34;&gt;elif&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;isinstance&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;FileField&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
            &lt;span class=&#34;nb&#34;&gt;file&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value_from_object&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;instance&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;file&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;url&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;file&lt;/span&gt;  &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;bp&#34;&gt;None&lt;/span&gt;

        &lt;span class=&#34;k&#34;&gt;elif&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;is_edtiable&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value_from_object&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;instance&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

    &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&amp;#34;
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;    Just call an instance&amp;#39;s function or property from a string with the function name in `__fields` arguments.
&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;    &amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;funcs&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;set&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;__fields&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;set&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;list&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;keys&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()))&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;funcs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;obj&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;getattr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;instance&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;inspect&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ismethod&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;obj&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;obj&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;obj&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;data&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;You might have performance problems, but if you have a lot of cost to convert an instance, you might be able to run 10 simultaneously using a coroutine, etc. Of course, if the order is important, when you collect the results, there may be a hassle, such as having to rearrange them in order.&lt;/p&gt;
</content>
      
    </item>
    
    <item>
      <title>[번역] Effective Go: Concurrency</title>
      <link>https://ziwon.github.io/post/effective-go-concurrency/</link>
      <pubDate>Fri, 25 Sep 2015 11:01:21 +0900</pubDate>
      <author>Aron Yoon</author>
      <guid>https://ziwon.github.io/post/effective-go-concurrency/</guid>
      <description></description>
      
      <content>

&lt;blockquote&gt;
&lt;p&gt;2016.10.04 - &lt;a href=&#34;https://golang.org/doc/effective_go.html#concurrency&#34; target=&#34;_blank&#34;&gt;Effective Go&lt;/a&gt;의 &lt;a href=&#34;https://gosudaweb.gitbooks.io/effective-go-in-korean/content/&#34; target=&#34;_blank&#34;&gt;한글화&lt;/a&gt; 작업이완료되었습니다. 아래 동시성 번역 역시 번역팀의 도움으로 갱신되었습니다.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://golang.org/doc/effective_go.html#concurrency&#34; target=&#34;_blank&#34;&gt;Effective Go&lt;/a&gt; 의 &lt;a href=&#34;https://web.archive.org/web/20160115102611/https://code.google.com/p/golang-korea/wiki/EffectiveGo?can=1#동시성(Concurrency)&#34; target=&#34;_blank&#34;&gt;한글화 문서&lt;/a&gt;를 보던 중, Concurrency에 대한 부분이 빠져 있어서 해당 부분만 따로 번역했습니다. 원문의 출처는 &lt;a href=&#34;https://golang.org/doc/effective_go.html#concurrency&#34; target=&#34;_blank&#34;&gt;여기&lt;/a&gt;입니다.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&#34;통신에-의한-공유-share-by-communicating&#34;&gt;통신에 의한 공유 (Share by communicating)&lt;/h2&gt;

&lt;p&gt;동시성 프로그래밍은 광범위한 주제이므로 여기에서는 Go에 한정된 중요한 것들에 대해서만 지면을 할애한다.&lt;/p&gt;

&lt;p&gt;다양한 환경에서 동시성 프로그래은 공유 변수에 대한 정확한 접근을 구현하기 위해 엄수해야 하는 세세한 내용들로 어려워졌다. Go는 공유 변수가 채널을 돌려가며 전달된다는 점에서 다른 접근을 권장한다. 그리고 사실 공유 변수는 개별 쓰레드 실행에 의해서 결코 공유되지 않는다. 언제든지 하나의 고루틴이 값에 접근한다. 데이터 경쟁은 구현 설계상 발생할 수 없다. 이러한 사고방식을 권장하기 위해 이를 한 슬로건으로 줄였다:&lt;/p&gt;

&lt;p&gt;공유 메모리로 통신하지 말라. 대신, 통신으로 메모리를 공유하라.&lt;/p&gt;

&lt;p&gt;이런 접근은 너무 지나친 것일 수 있다. 예를 들어, 정수형 변수 주위에 뮤텍스를 두는 방식의 레퍼런스 카운트가 최고일지도 모른다. 그러나 상위 레벨에서 접근하는 방법으로써, 접근을 제어하는 채널을 사용하면 분명하고 정확한 프로그램을 보다 쉽게 작성할 수 있다.&lt;/p&gt;

&lt;p&gt;이 모델에 대해 생각해보는 한가지 방법은 단일 CPU에서 실행되는 전형적인 단일 쓰레드 프로그램을 떠올려 보는 것이다. 여기에는 동기화를 위한 기본 자료형이 필요 없다. 지금 또다른 그 인스턴스를 실행시켜 보라. 그러나 역시 동기화가 필요하지 않다. 이제 그 두 개를 통신하게 하는데, 그 통신 자체가 동기화 장치(synchronizer)인 경우, 여전히 다른 동기화가 필요 없다. 예를 들어, 유닉스 파이프 라인은 이 모델에 완벽하게 들어 맞는다. 동시성에 대한 Go의 접근 방식이 호어(Hoare)의 통신 순차적 프로세스 (CSP, Communicating Sequential Processes)에서 비롯되었지만, 타입 안전이 보장되는 식의 일반화된 유닉스 파이프라고 볼 수 있다.&lt;/p&gt;

&lt;h2 id=&#34;고루틴-goroutines&#34;&gt;고루틴 (Goroutines)&lt;/h2&gt;

&lt;p&gt;쓰레드, 코루틴, 프로세스 등 기존의 용어는 부정확한 함의를 전달하기 때문에 고루틴이라고 부른다. 고루틴은 단순한 모델이다. 즉, 같은 주소 공간에서 다른 고루틴과 동시에 실행되는 함수이다. 고루틴은 가볍다. 스택 영역을 할당하는 것에 비해 비용이 적게 든다. 그리고 그 스택은 작은 크기로 시작된다. 그래서 저렴하다. 그리고 필요한만큼 힙 스토리지를 할당(또는 해제)하여 커진다.&lt;/p&gt;

&lt;p&gt;고루틴은 OS의 다중 쓰레드에 멀티플렉싱되는데, I/O 작업을 위해 대기중일 때와 같이 하나의 고루틴이 블락이 되면 다른 고루틴이 계속 실행된다. 이런 설계는 쓰레드의 복잡한 생성과 관리에 대해 굳이 알 필요가 없게 해준다.&lt;/p&gt;

&lt;p&gt;새 고루틴을 호출하여 실행하려면 &lt;code&gt;go&lt;/code&gt; 키워드를 함수 또는 메쏘드 호출 앞에 둔다. 호출이 완료되면, 고루틴은 자동으로 종료된다. (백그라운드에서 명령을 실행하는 유닉스쉘 및 표기법과 유사한 효과이다.)&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;k&#34;&gt;go&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;list&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Sort&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;  &lt;span class=&#34;o&#34;&gt;//&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;list&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Sort를&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;정렬이&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;완료될&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;때까지&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;기다리지&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;말고&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;동시에&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;실행&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;함수 리터럴은 고루틴 호출에 유용할 수 있다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Announce&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;message&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;delay&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Duration&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;go&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;nx&#34;&gt;time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Sleep&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;delay&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Println&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;message&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}()&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;//괄호 주목 - 반드시 함수를 호출해야 함
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Go에서 함수 리터럴은 클로저이다. 즉, 함수가 참조하는 변수를 사용하는 동안에는 그 생존을 보장하는 방식으로 구현되어 있다는 것이다.&lt;/p&gt;

&lt;p&gt;위의 예제는 함수가 종료를 알릴 방법이 없기 때문에 아주 실용적이진 않다. 이를 위해 채널이 필요하다.&lt;/p&gt;

&lt;h2 id=&#34;채널-channels&#34;&gt;채널 (Channels)&lt;/h2&gt;

&lt;p&gt;맵과 마찬가지로, 채널은 &lt;code&gt;make&lt;/code&gt;로 할당되고, 그 결과 값은 실제 데이터 구조에 대한 참조로서 동작한다. 선택적인 정수형 매개변수가 주어지면, 채널에 대한 버퍼 크기가 설정된다. 이 값은 언버퍼드(Unbuffered) 또는 동기 채널에 대해서 기본값이 0이다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;nx&#34;&gt;ci&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;make&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;chan&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;            &lt;span class=&#34;c1&#34;&gt;// 정수형의 언버퍼드 채널
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;cj&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;make&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;chan&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;         &lt;span class=&#34;c1&#34;&gt;// 정수형의 언버퍼드 채널
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;cs&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;make&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;chan&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;os&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;File&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  &lt;span class=&#34;o&#34;&gt;//&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;File&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;포인터형의&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;버퍼드&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;채널&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;언버퍼드 채널은 동기화로 값을 교환하며 두 계산(고루틴들)이 어떤 상태에 있는지 알 수 있다는 것을 보장하는 통신을 결합한다.&lt;/p&gt;

&lt;p&gt;채널을 사용하는 멋있는 Go스러운 코드가 많다. 다음 한 예제로 시작해보자. 이전 섹션에서 백그라운드에서 정렬을 했다. 채널은 정렬이 완료될 때까지 고루틴 실행을 대기시킬 수 있다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;make&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;chan&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// 채널을 할당
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// 고루틴에서 정렬 시작하고 완료되면 채널에 신호를 보냄
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;go&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;list&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Sort&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;//  신호를 보내지만 값은 문제가 안됨
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}()&lt;/span&gt;
&lt;span class=&#34;nx&#34;&gt;doSomethingForAWhile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt;   &lt;span class=&#34;o&#34;&gt;//&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;정렬이&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;끝날&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;때까지&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;기다리고&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;전달된&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;값은&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;버림&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;수신부는 수신할 데이터가 있을 때까지 항상 블락된다. 언버퍼드 채널이면, 송신부는 수신부가 값을 받을 때까지 블락된다. 버퍼드 채널이면, 값이 버퍼에 복사될 때까지만 송신부가 블락된다. 그러므로 버퍼가 꽉 차면, 이는 특정 수신부가 값을 획득할 때까지 대기 중이라는 것을 의미한다.&lt;/p&gt;

&lt;p&gt;버퍼드 채널은 세마포처럼 사용될 수 있다. 예를 들어 처리량을 제한하는 것이다. 다음 예제에서, 들어오는 요청은 값을 채널에 전송하는 &lt;code&gt;handle&lt;/code&gt;에 넘겨진다. 요청을 처리한 후, 다음 (요청) 소비자에 대해 세마포를 준비하는 채널에서 값을 수신한다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;sem&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;make&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;chan&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;MaxOutstanding&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;handle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;sem&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// 액티브큐가 비워질 때까지 대기
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nx&#34;&gt;process&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// 오래 걸릴 수 있는 작업
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;o&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;sem&lt;/span&gt;       &lt;span class=&#34;c1&#34;&gt;// 완료, 실행될 다음 요청을 활성화
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Serve&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;queue&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;chan&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;nx&#34;&gt;req&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;queue&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;go&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;handle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;req&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// 끝날 때까지 대기하지 않음
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;일단 MaxOutstanding 핸들러가 &lt;code&gt;process&lt;/code&gt;를 실행하게 되면, 기존 핸들러 중 하나가 완료되고 버퍼로부터 값을 받을 때까지 더 이상의 꽉 찬 채널 버퍼에 전송하는 것은 블락될 것이다.&lt;/p&gt;

&lt;p&gt;그렇지만 이 설계는 문제가 있다. 즉, 전체 요청에서 겨우 &lt;code&gt;MaxOutstanding&lt;/code&gt; 수만큼 &lt;code&gt;process&lt;/code&gt;를 실행할 수 있음에도 서버는 들어오는 모든 요청에 대해 새로운 고루틴을 생성한다는 것이다. 그 결과, 요청이 너무 빨리 들어올 경우, 무제한으로 리소스를 낭비할 수 있다. 이 결함은 &lt;code&gt;Serve&lt;/code&gt;를 고루틴을 생성하는 게이트로 수정해서 처리할 수 있다. 확실한 솔루션은 다음과 같지만, 나중에 수정하게 될 버그가 있다는 것에 주의하라.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Serve&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;queue&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;chan&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;req&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;range&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;queue&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;nx&#34;&gt;sem&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;go&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;nx&#34;&gt;process&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;req&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// 버그, 아래 설명을 참고
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;            &lt;span class=&#34;o&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;sem&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}()&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;버그는 Go &lt;code&gt;for&lt;/code&gt; 루프에 있다. 루프 변수는 각 반복마다 재사용되어 동일한 &lt;code&gt;req&lt;/code&gt; 변수가 모든 고루틴에 걸쳐 공유된다. 이는 원하는 바가 아니다. 각 고루틴마다 구별된 &lt;code&gt;req&lt;/code&gt; 변수를 가지도록 해야한다. 다음은 이를 위한 한 가지 방법으로, 고루틴의 클로져에 대한 인자로 &lt;code&gt;req&lt;/code&gt;의 값을 전달하는 것이다:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Serve&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;queue&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;chan&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;req&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;range&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;queue&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;nx&#34;&gt;sem&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;go&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;req&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;nx&#34;&gt;process&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;req&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
            &lt;span class=&#34;o&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;sem&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;req&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이전 버전과 클로져가 어떻게 선언되고 실행되는지 차이점을 보기 위해 다음 버전을 비교해보라. 또다른 솔루션은 다음 예제처럼 그냥 같은 이름의 새로운 변수를 생성하는 것이다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Serve&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;queue&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;chan&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;req&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;range&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;queue&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;nx&#34;&gt;req&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;req&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// 고루틴을 위한 새로운 req 인스턴스를 생성
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;nx&#34;&gt;sem&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;go&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;nx&#34;&gt;process&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;req&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
            &lt;span class=&#34;o&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;sem&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}()&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이상한 코드를 작성하는 것처럼 보일 수 있다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;nx&#34;&gt;req&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;req&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;하지만 Go에서 이렇게 하는 것은 합법적이고 Go 언어다운 코드이다. 이름이 같은 새로운 버전의 변수가 의도적으로 루프 변수를 지역적으로 가리지만, 각 고루틴에 대해서는 유니크한 값이다.&lt;/p&gt;

&lt;p&gt;서버를 작성하는 일반적인 문제로 돌아가면, 리소스를 잘 관리하는 다른 방법은 요청 채널을 읽는 모든 &lt;code&gt;handle&lt;/code&gt; 고루틴을 고정된 수에서 시작하는 것이다. 고루틴의 수는 &lt;code&gt;process&lt;/code&gt;가 동시에 호출되는 수를 제한한다. &lt;code&gt;Serve&lt;/code&gt; 함수는 종료 신호를 수신하게 되는 채널도 (인자로) 받고 있으므로 고루틴이 시작되면, 이 채널로부터의 수신은 블락된다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;handle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;queue&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;chan&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;range&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;queue&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;nx&#34;&gt;process&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Serve&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;clientRequests&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;chan&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;quit&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;chan&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// 핸들러 시작
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;MaxOutstanding&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;go&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;handle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;clientRequests&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;quit&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// 종료 신호를 받을 때까지 대기
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&#34;채널의-채널-channels-of-channels&#34;&gt;채널의 채널 (Channels of channels)&lt;/h2&gt;

&lt;p&gt;Go의 가장 중요한 속성 중 하나는 채널이 다른 것과 마찬가지로 할당되고 전달될 수 있는 일급변수(first-class value)라는 것이다. 이 속성의 일반적인 사용은 안전한 병렬 역다중화(parallel demultiplexing)를 구현하는 것이다.&lt;/p&gt;

&lt;p&gt;이전 섹션의 예제에서, &lt;code&gt;handle&lt;/code&gt; 은 요청에 대해서는 이상적인 핸들러였으나 핸들러가 다루는 타입은 정의하지 않았다. 해당 타입이 회신을 하는 채널을 포함하는 경우, 각 클라이언트는 자신에게 응답 경로를 제공할 수 있다. 다음은 &lt;code&gt;Request&lt;/code&gt; 타입의 개략적인 정의이다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Request&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;args&lt;/span&gt;        &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;f&lt;/span&gt;           &lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;resultChan&lt;/span&gt;  &lt;span class=&#34;kd&#34;&gt;chan&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;클라이언트는 함수와 그 인자뿐만 아니라 요청 객체 안에서 응답을 수신하는 채널을 제공하고 있다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;sum&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;v&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;range&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;v&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;nx&#34;&gt;request&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;sum&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;make&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;chan&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)}&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;// 요청 전송
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;clientRequests&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;request&lt;/span&gt;
&lt;span class=&#34;c1&#34;&gt;// 응답 대기
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;answer: %d\n&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;resultChan&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;서버 측에서는 핸들러 함수만 수정한다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;handle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;queue&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;chan&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;req&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;range&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;queue&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;nx&#34;&gt;req&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;resultChan&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;req&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;req&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;args&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;실제로 사용하기 위해서는 아직 할 일이 많은 것이 명백하지만, 이 코드는 속도 제한, 병렬, 넌블락 RPC 시스템을 위한 프레임워크이다. 그리고 뮤텍스는 눈에 보이지 않는다.&lt;/p&gt;

&lt;h2 id=&#34;병렬화-parallelization&#34;&gt;병렬화 (Parallelization)&lt;/h2&gt;

&lt;p&gt;이러한 아이디어의 또 다른 응용 프로그램은 멀티코어 CPU에 대해 계산을 병렬처리하는 것이다. 계산을 독립적으로 실행할 수 있는 부분들로 분리할 수 있다면, 각 부분들이 완료될 때 신호를 보내는 채널들로 병렬처리할 수 있다.&lt;/p&gt;

&lt;p&gt;벡터 아이템에 대한 실행 비용이 비싼 연산이 있다고 가정해보자. 그리고 다음 이상적인 예제에서와 같이 각 아이템을 연산한 값은 독립적이다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;kd&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Vector&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;float64&lt;/span&gt;

&lt;span class=&#34;c1&#34;&gt;//  v[i], v[i+1]에서 v[n-1]까지 연산을 적용
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;v&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Vector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;DoSome&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;u&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Vector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;chan&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;n&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;nx&#34;&gt;v&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;u&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Op&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;v&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// 이 부분이 완료되면 신호함
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;루프에서 독립적으로 각 부분들을 CPU당 하나씩 실행시킨다. 이들은 어떤 순서로도 완료될 수 있지만 순서는 문제되지 않는다. 그러므로 모든 고루틴를 실행시킨 후 채널을 비워서 그냥 완료 신호를 카운트한다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;kd&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;numCPU&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// CPU  코어수
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;v&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Vector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;DoAll&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;u&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Vector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;make&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;chan&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;numCPU&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// 버퍼는 선택적이나 상식적
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;numCPU&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;go&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;v&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;DoSome&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;v&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;numCPU&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;v&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;numCPU&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;u&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// 채널을 비움
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;numCPU&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;o&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;c&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// 한 태스크가 끝날 때까지 대기
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;c1&#34;&gt;// 모두 완료
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;numCPU&lt;/code&gt;을 상수값으로 생성하기보다는 적절한 값을 런타임시에 요구할 수 있다. &lt;code&gt;runtime.NumCPU&lt;/code&gt; 함수는 장비의 CPU 하드웨어 코어수를 반환한다. 그래서 아래와 같이 작성할 수 있다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;numCPU&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;runtime&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;NumCPU&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;또한 Go 프로그램은 동시에 실행할 수 있는 사용자 지정 코어수를 보고하는 (또는 설정하는) &lt;code&gt;runtime.GOMAXPROCS&lt;/code&gt; 함수가 있다. &lt;code&gt;runtime.NumCPU&lt;/code&gt;의 값이 기본값이지만, 비슷하게 명명된 환경 변수 설정에 의해 혹은 양수의 인자로 함수를 호출하여 재정의할 수 있다. 0으로 호출하면 바로 값을 조회한다. 따라서 사용자의 리소스 요청을 따르고 싶은 경우, 다음과 같이 작성해야 한다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;numCPU&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;runtime&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;GOMAXPROCS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;컴포넌트를 독립적으로 처리하여 프로그램을 구조화하는 동시성과 다중 CPU에서 효율성을 위해 계산을 병렬로 처리하는 병렬성의 개념을 혼동하지 않길 바란다. Go의 동시성 특징이 병렬 계산으로 문제를 쉽게 구조화할 수 있지만, Go는 병렬이 아닌 동시성 언어이고, 모든 병렬화 문제가 Go에 들어맞지는 않는다. 이 구분에 대한 논의는 &lt;a href=&#34;https://blog.golang.org/concurrency-is-not-parallelism&#34; target=&#34;_blank&#34;&gt;이 블로그 포스트&lt;/a&gt;에 인용된 토크를 참조하라.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;역자 주&lt;/strong&gt;: 동시성 프로그래밍과 병렬 프로그래밍의 차이는 아래 그림을 참조 (&lt;a href=&#34;http://joearms.github.io/2013/04/05/concurrent-and-parallel-programming.html&#34; target=&#34;_blank&#34;&gt;출처&lt;/a&gt;)&lt;/p&gt;

&lt;figure&gt;
    &lt;img src=&#34;http://joearms.github.io/images/con_and_par.jpg&#34;/&gt; 
&lt;/figure&gt;


&lt;h2 id=&#34;누설-버퍼-a-leaky-buffer&#34;&gt;누설 버퍼 (A leaky buffer)&lt;/h2&gt;

&lt;p&gt;비동시성(non-concurrent) 개념도 동시성 프로그래밍 도구로 쉽게 표현할 수 있다. 다음은 RPC 패키지에서 추출한 예제이다. 클라이언트 고루틴은 아마도 네트워크인 특정 소스의 데이터를 반복해서 수신한다. 버퍼의 할당과 해제를 피하기 위해서 &lt;code&gt;free list&lt;/code&gt;를 유지하며 이를 대신할 버퍼 채널을 사용한다. 채널이 비어 있으면 새로운 버퍼가 할당된다. 일단 메시지 버퍼가 준비되면 &lt;code&gt;serverChan&lt;/code&gt;의 서버로 송신한다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;freeList&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;make&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;chan&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Buffer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;serverChan&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;make&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;chan&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Buffer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;client&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Buffer&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;// 사용할 수 있는 버퍼를 획득하거나 그렇지 않다면 할당
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;k&#34;&gt;select&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;freeList&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
                &lt;span class=&#34;c1&#34;&gt;// 하나를 획득하고 아무 작업도 하지 않음
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;            &lt;span class=&#34;k&#34;&gt;default&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
                &lt;span class=&#34;c1&#34;&gt;// 획득할 버퍼가 없으니 새 버퍼를 할당함
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;            &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;new&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Buffer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
        &lt;span class=&#34;nx&#34;&gt;load&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;              &lt;span class=&#34;c1&#34;&gt;// 네트워크에서 다음 메세지를 읽음
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;nx&#34;&gt;serverChan&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;      &lt;span class=&#34;c1&#34;&gt;// 서버에 전송
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;서버 루프는 각 클라이언트로부터 메시지를 수신해서 처리하고, free list에 버퍼를 반환한다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;server&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;serverChan&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// 동작을 위해 대기
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;nx&#34;&gt;process&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;// 가능할 경우 버퍼를 재사용
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;k&#34;&gt;select&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;freeList&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
                &lt;span class=&#34;c1&#34;&gt;// free list의 버퍼. 아무 것도 하지 않음
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;            &lt;span class=&#34;k&#34;&gt;default&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
                &lt;span class=&#34;c1&#34;&gt;// free list가 꽉 참, 그냥 계속
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;클라이언트는 &lt;code&gt;freeList&lt;/code&gt;에서 버퍼를 획득하려고 시도하는데, 버퍼를 사용할 수 없는 경우에는 새로운 버퍼를 할당한다. 리스트가 꽉 차 있지 않는 이상, 서버는 버퍼를 &lt;code&gt;freeList&lt;/code&gt;에 송신하여 프리 리스트에 버퍼 b를 다시 둔다. 리스트가 꽉 차 있는 경우, 버퍼는 바닥에 떨어져 가비지 콜렉터에 의해 회수된다. (&lt;code&gt;select&lt;/code&gt; 구문에서 &lt;code&gt;default&lt;/code&gt; 절은 다른 case가 준비되지 않은 경우에 실행된다. 이는 &lt;code&gt;select&lt;/code&gt;는 결코 블락되지 않는다는 것을 뜻한다.)  단지 몇 줄로 버퍼 채널과 버퍼 크기를 부기하는 가비지 컬렉터에 기대어 구현된 누설 버킷 프리 리스트(leaky bucket free list)를 만들었다.&lt;/p&gt;

&lt;p&gt;이상, 나머지는 &lt;a href=&#34;https://gosudaweb.gitbooks.io/effective-go-in-korean/content/&#34; target=&#34;_blank&#34;&gt;여기 한글화 문서&lt;/a&gt;를 참조하길 바란다.&lt;/p&gt;
</content>
      
    </item>
    
    <item>
      <title>Falcon REST API</title>
      <link>https://ziwon.github.io/post/falcon-rest-template/</link>
      <pubDate>Fri, 04 Sep 2015 00:27:35 +0900</pubDate>
      <author>Aron Yoon</author>
      <guid>https://ziwon.github.io/post/falcon-rest-template/</guid>
      <description></description>
      
      <content>&lt;p&gt;Cloud API와 백엔드 개발에 경량화된 파이썬 프레임워크인 &lt;a href=&#34;http://falconframework.org&#34; target=&#34;_blank&#34;&gt;Falcon&lt;/a&gt;를 이용해 간단한 REST API 템플릿을 만들어 보았다.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://github.com/patriz/falcon-rest-api&#34; target=&#34;_blank&#34;&gt;https://github.com/patriz/falcon-rest-api&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;개발하는 느낌은 Flask와 비슷한데 (음.. Flask와 뭐가 다르지?) 미들웨어, 후킹 데코레이션 등을 이용해 HTTP 요청과 응답에 대해 체이닝 처리를 좀 더 직관적으로 할 수 있다. 성능이 Flask보다 좀 더 빠른 것으로 알려져 있다. Rackspace에서 밀고있는(?) Cloud API 전용 프레임워크인데, 최신 릴리즈 버전은 아직 0.3이다. 심플하고 미니멀한 걸 좋아한다면 해볼만하다.&lt;/p&gt;

&lt;p&gt;문서에도 나와있지만, Cython을 이용하면 약 20% 정도의 성능효과를 볼 수 있다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;pip install --upgrade cython falcon&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;다음은 Go와 성능비교이다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;falcon rest api with gunicorn (-w 9 -k gevent)&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;wrk -t10 -c100 -d30s http://localhost:5000
Running 30s &lt;span class=&#34;nb&#34;&gt;test&lt;/span&gt; @ http://localhost:5000
  &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt; threads and &lt;span class=&#34;m&#34;&gt;100&lt;/span&gt; connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   &lt;span class=&#34;m&#34;&gt;221&lt;/span&gt;.79ms  &lt;span class=&#34;m&#34;&gt;414&lt;/span&gt;.03ms   &lt;span class=&#34;m&#34;&gt;2&lt;/span&gt;.00s    &lt;span class=&#34;m&#34;&gt;85&lt;/span&gt;.43%
    Req/Sec   &lt;span class=&#34;m&#34;&gt;755&lt;/span&gt;.94    &lt;span class=&#34;m&#34;&gt;486&lt;/span&gt;.41     &lt;span class=&#34;m&#34;&gt;2&lt;/span&gt;.77k    &lt;span class=&#34;m&#34;&gt;64&lt;/span&gt;.26%
  &lt;span class=&#34;m&#34;&gt;139452&lt;/span&gt; requests in &lt;span class=&#34;m&#34;&gt;30&lt;/span&gt;.08s, &lt;span class=&#34;m&#34;&gt;32&lt;/span&gt;.98MB &lt;span class=&#34;nb&#34;&gt;read&lt;/span&gt;
  Socket errors: connect &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;, &lt;span class=&#34;nb&#34;&gt;read&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;, write &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;, timeout &lt;span class=&#34;m&#34;&gt;389&lt;/span&gt;
Requests/sec:   &lt;span class=&#34;m&#34;&gt;4636&lt;/span&gt;.13
Transfer/sec:      &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.10MB&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;sample http server with gogin only&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;wrk -t10 -c100 -d30s http://localhost:8080
Running 30s &lt;span class=&#34;nb&#34;&gt;test&lt;/span&gt; @ http://localhost:8080
  &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt; threads and &lt;span class=&#34;m&#34;&gt;100&lt;/span&gt; connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency     &lt;span class=&#34;m&#34;&gt;6&lt;/span&gt;.65ms    &lt;span class=&#34;m&#34;&gt;6&lt;/span&gt;.50ms  &lt;span class=&#34;m&#34;&gt;76&lt;/span&gt;.68ms   &lt;span class=&#34;m&#34;&gt;76&lt;/span&gt;.00%
    Req/Sec     &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.83k   &lt;span class=&#34;m&#34;&gt;402&lt;/span&gt;.97     &lt;span class=&#34;m&#34;&gt;5&lt;/span&gt;.40k    &lt;span class=&#34;m&#34;&gt;74&lt;/span&gt;.30%
  &lt;span class=&#34;m&#34;&gt;547412&lt;/span&gt; requests in &lt;span class=&#34;m&#34;&gt;30&lt;/span&gt;.08s, &lt;span class=&#34;m&#34;&gt;92&lt;/span&gt;.93MB &lt;span class=&#34;nb&#34;&gt;read&lt;/span&gt;
Requests/sec:  &lt;span class=&#34;m&#34;&gt;18199&lt;/span&gt;.96
Transfer/sec:      &lt;span class=&#34;m&#34;&gt;3&lt;/span&gt;.09MB&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;참고로 테스트 하드웨어 장비는 다음과 같다. (구린 내 아이맥ㅠ)&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;Model Name:	iMac
Model Identifier:	iMac11,3
Processor Name:	Intel Core i5
Processor Speed:	&lt;span class=&#34;m&#34;&gt;2&lt;/span&gt;.8 GHz
Number of Processors:	&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;
Total Number of Cores:	&lt;span class=&#34;m&#34;&gt;4&lt;/span&gt;
L2 Cache &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;per Core&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;:	&lt;span class=&#34;m&#34;&gt;256&lt;/span&gt; KB
L3 Cache:	&lt;span class=&#34;m&#34;&gt;8&lt;/span&gt; MB
Memory:	&lt;span class=&#34;m&#34;&gt;12&lt;/span&gt; GB
Processor Interconnect Speed:	&lt;span class=&#34;m&#34;&gt;4&lt;/span&gt;.8 GT/s
Boot ROM Version:	IM112.0057.B01
SMC Version &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;system&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;:	&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;.59f2&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content>
      
    </item>
    
    <item>
      <title>Generics of a Higher Kind</title>
      <link>https://ziwon.github.io/post/generics-of-a-higher-kind/</link>
      <pubDate>Sat, 30 Aug 2014 17:23:11 +0900</pubDate>
      <author>Aron Yoon</author>
      <guid>https://ziwon.github.io/post/generics-of-a-higher-kind/</guid>
      <description></description>
      
      <content>

&lt;h2 id=&#34;1-introduction&#34;&gt;1. Introduction&lt;/h2&gt;

&lt;h3 id=&#34;일차-매개변수적-다형성과-고차-타입-생성자-다형성&#34;&gt;일차 매개변수적 다형성과 고차 타입 생성자 다형성&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;일차 매개변수적 다형성은 정적 타입 프로그래밍 언어의 표준 요소임&lt;/li&gt;
&lt;li&gt;일차 매개변수적 다형성은 제네릭(generic)이라고 부름&lt;/li&gt;
&lt;li&gt;제네릭의 한 가지 응용 분야는 콜렉션(collection)

&lt;ul&gt;
&lt;li&gt;예) &lt;code&gt;List[A]&lt;/code&gt; 타입은  주어진 요소 A 타입의 리스트를 표현,  A는 자유롭게 선택됨&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;일차 매개변수적 다형성은 &lt;code&gt;List&lt;/code&gt;와 같은 타입 생성자를 도출하며 타입을 추상화 함&lt;/li&gt;
&lt;li&gt;그러나 결과로 나온 타입 생성자는 그들 자신을 추상화할 수 없음

&lt;ul&gt;
&lt;li&gt;예) &lt;code&gt;List&lt;/code&gt;와 같은 타입 생성자를 다른 타입 생성자의 타입 인자로 전달할 수 없음&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;이런 제한은 자연스러운 추상를 정형화하는데 방해가 되며 불필요한 중복 코드로 이어짐&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;고차-타입-생성자-다형성와-카인드&#34;&gt;고차 타입 생성자 다형성와 카인드&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;고차 타입 생성자 다형성을 통해 더 많은 제네럴티를 확보할 수 있음&lt;/li&gt;
&lt;li&gt;이 논문에서는 Scala 프로그래밍 언어의 타입 생성자 다형성의 설계와 구현에 대해 살펴봄&lt;/li&gt;
&lt;li&gt;Scala 2.5 버전부터 고차 타입 제네릭을 이용할 수 있음&lt;/li&gt;
&lt;li&gt;고차 타입 제네릭에서는 타입과 타입 생성자를 특정 지우기 위해 개발한 카인드 시스템을 사용함&lt;/li&gt;
&lt;li&gt;카인드는 &amp;lsquo;어떤 타입 혹은 타입 생성자가 추상화에서 허용될 수 있는 인스턴스&amp;rsquo; 인지를 표현함&lt;/li&gt;
&lt;li&gt;즉, 카인드의 타입에 대한 역할은 타입이 변수에 대해 하는 역할임&lt;/li&gt;
&lt;li&gt;카인드는 타입이나 타입 생성자의 3가지를 캡쳐함:  쉐이프, 하위/상위 바운드, 변성&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;추상-타입-멤버를-지닌-타입-vs-타입-생성자&#34;&gt;추상 타입 멤버를 지닌 타입 vs 타입 생성자&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;가상 타입이나 가상 클래스를 지닌 언어는 추상 타입 멤버를 통해 타입 생성자 다형성을 코드화할 수 있음, Scala가 이런 부류의 언어에 속함&lt;/li&gt;
&lt;li&gt;예) Scala에서는 타입 매개변수화된 클래스 대신 추상 타입 멤버를 지닌 클래스로 &lt;code&gt;List&lt;/code&gt;를 정의할 수 있음&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-scala&#34; data-lang=&#34;scala&#34;&gt;&lt;span class=&#34;k&#34;&gt;abstract&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;List&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;Elem&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;List&lt;/code&gt;의 구체적인 구현은 &lt;code&gt;List { type Elem - String }&lt;/code&gt; 처럼 타입 재정의를 통해 모델링할 수 있음&lt;/li&gt;
&lt;li&gt;결정적인 것은 이렇게 코드화된 &lt;code&gt;List&lt;/code&gt;가 타입 생성자가 아닌 타입이라는 점. 따라서, &lt;code&gt;List&lt;/code&gt;를 일차 다형성의 타입 인자나 추상 타입 인스턴스로 전달할 수 있음&lt;/li&gt;
&lt;li&gt;타입 생성자 다형성과 비교하면, 이런 코드화는 3가지 단점이 있음

&lt;ul&gt;
&lt;li&gt;첫째, 다소 장황하게 느껴짐&lt;/li&gt;
&lt;li&gt;둘째, 요소 타입을 나타내는 명명된 멤버의 정의가 필요한데, 이는 클래스 상속 계층에서 이름 충돌의 위험을 유발할 수 있음&lt;/li&gt;
&lt;li&gt;셋째, 이런 코드화는 이후 구체적인 변수로 인스턴스화될 수 없는 어떤 무의미한 타입의 추상화를 정의하도록 허용함&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;반대로 타입 생성자 다형성은 카인드 안정성를 지님, 잘 카인드된 타입의 적용하면 무의미한 타입을 만들지 않음&lt;/li&gt;
&lt;li&gt;이는 객체지향 프로그래밍의 타입 생성자 다형성 포함을 찬성하는 논증의 3가지 이유임&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;2-reducing-code-duplication-with-type-constructor-polymorphism&#34;&gt;2. Reducing Code Duplication with Type Constructor Polymorphism&lt;/h2&gt;

&lt;h3 id=&#34;코드-중복&#34;&gt;코드 중복&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;다음은 Scala의 &lt;code&gt;Iterable[T]&lt;/code&gt; 트레이트의 구현체로 혼합 구성(mixin composition)을 지원하는 추상 클래스임&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-scala&#34; data-lang=&#34;scala&#34;&gt;&lt;span class=&#34;k&#34;&gt;trait&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Iterable&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;filter&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;T&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Boolean&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;Iterable&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;remove&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;T&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Boolean&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;Iterable&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;filter&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;))&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;trait&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;List&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;extends&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Iterable&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;filter&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;T&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Boolean&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;List&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;override&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;remove&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;T&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Boolean&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;List&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;filter&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;))&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Iterable&lt;/code&gt;은 추상 메소드 &lt;code&gt;filter&lt;/code&gt;와 편의 메소드 &lt;code&gt;remove&lt;/code&gt;를 포함&lt;/li&gt;
&lt;li&gt;하위 클래스는 &lt;code&gt;filter&lt;/code&gt;를 구현해야 현재 콜렉션의 술부 &lt;code&gt;p&lt;/code&gt;를 만족하는 요소를 지닌 콜렉션를 생성할 수 있음&lt;/li&gt;
&lt;li&gt;&lt;code&gt;remove&lt;/code&gt;는 &lt;code&gt;filter&lt;/code&gt;에 의해 구현되는데, 단순히 술부를 반전한 것임&lt;/li&gt;
&lt;li&gt;리스트를 필터링할 경우, 리스트를 반환케 될 것을 기대할 수 있음&lt;/li&gt;
&lt;li&gt;따라서, &lt;code&gt;List&lt;/code&gt;는 자신의 결과 타입을 공변하게 재정의하기 위해 &lt;code&gt;filter&lt;/code&gt;를 오버라이딩해야 함 (세부 구현은 생략)&lt;/li&gt;
&lt;li&gt;일관성을 위해 &lt;code&gt;remove&lt;/code&gt;는 같은 결과 타입을 지녀야 하는데, 마찬가지로 오버라이딩 하는 거외에는 방법이 없음.&lt;/li&gt;
&lt;li&gt;메소드 모두가 &lt;code&gt;List&lt;/code&gt;에서 반복되므로 코드 중복은 명확함&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;타입-생성자를-통한-해법&#34;&gt;타입 생성자를 통한 해법&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;해법은 &lt;code&gt;filter&lt;/code&gt;와 &lt;code&gt;remove&lt;/code&gt;의 결과 컨테이너를 나타내는 타입 생성자로 추상화하는 것임&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-scala&#34; data-lang=&#34;scala&#34;&gt;&lt;span class=&#34;k&#34;&gt;trait&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;iterable&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;T&lt;/span&gt;, &lt;span class=&#34;kt&#34;&gt;Container&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;X&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;filter&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;T&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Boolean&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;Container&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;remove&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;T&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Boolean&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;Container&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;filter&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;))&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;trait&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;List&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;extends&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Iterable&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;T&lt;/span&gt;, &lt;span class=&#34;kt&#34;&gt;List&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;개선된 &lt;code&gt;Iterable&lt;/code&gt;은 두 개의 타입 매개변수를 취함: &lt;code&gt;[T, Container[X]]&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;첫 번째 &lt;code&gt;T&lt;/code&gt;는 자신의 요소 타입을 나타내고, 두 번째 &lt;code&gt;Container&lt;/code&gt;는 &lt;code&gt;filter&lt;/code&gt;와 &lt;code&gt;remove&lt;/code&gt; 메소드의 결과 타입을 결정하는 타입 생성자임&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Container&lt;/code&gt;는 타입 매개변수 하나를 취함&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;2-1-type-constructors-and-kinds&#34;&gt;2.1 Type constructors and kinds&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;타입 생성자와 적당한 타입을 구별하기 위해 카인드(kind, 함수형 프로그래밍에서 차용한 용어)를 사용함&lt;/li&gt;

&lt;li&gt;&lt;p&gt;카인드는 변수에 대한 타입처럼 타입에 대한 것임, 이는 3가지 레벨로 언어를 구성함&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;객체는 타입으로 분류되고, 타입은 카인드로 분류됨&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;타입과 달리, 카인드는 순수하게 구조적임: 타입에 기대되는 타입의 매개변수의 종류를 반영함&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;적합한 타입들은 모두 타입 매개변수의 수가 같으므로 동일한 카인드 &lt;code&gt;*&lt;/code&gt;로 분류됨&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;타입 생성자를 분류하기 위해, 카인드 생성자 &lt;code&gt;From → To&lt;/code&gt;를 사용함&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;code&gt;From&lt;/code&gt;은 기대되는 타입 인자의 카인드이며 &lt;code&gt;To&lt;/code&gt;는 인자에 타입 생성자를 적용할 때의 결과 타입의 카인드임&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;예) &lt;code&gt;class List[T]&lt;/code&gt;는 적합한 타입을 도출하는 적합한 타입에 대해 적용하며 &lt;code&gt;* → *&lt;/code&gt;로 분류되는 &lt;code&gt;List&lt;/code&gt; 타입 생성자로 이루어 짐&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;카인드 레벨의 초기 모델은 다음과 같은 문법으로 기술됨&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-scala&#34; data-lang=&#34;scala&#34;&gt;&lt;span class=&#34;n&#34;&gt;K&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;|&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;K&lt;/span&gt;  &lt;span class=&#34;kt&#34;&gt;→&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;K&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;타입 생성자 다형성없이 언어 타입의 정형성(well-formedness)을 정의하는 규칙은 타입에 할당하는 카인드 규칙과 일치함&lt;/li&gt;
&lt;li&gt;이 규칙을 타입이 변수와 표현식에 타입 체킹을 하는 것처럼 카인드 체킹으로 일반화하여 확장시킴&lt;/li&gt;
&lt;li&gt;클래스나 언바운드 타입 매개변수 혹은 추상 타입 멤버는 하나의 K&amp;rsquo;  카인드의 타입 매개변수가 있을 경우 , K&amp;rsquo; → * 인 카인드를 받음&lt;/li&gt;
&lt;li&gt;바운드 타입 매개변수나 추상 멤버는 K&amp;rsquo; → K인 카인드를 할당받음, 이 때 K는 바운드 타입과 일치함&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;타입-커링&#34;&gt;타입 커링&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;다중 타입 매개변수를 다루기 위해 이 스킴을 일반화하는데 커링을 사용함&lt;/li&gt;
&lt;li&gt;T[T&amp;rsquo;] 타입을 적용하면 T가 K&amp;rsquo; → K인 카인드를 가지며 T&amp;rsquo;가 K&amp;rsquo; 카인드로 분류될 때, K인 카인드를 지님&lt;/li&gt;
&lt;li&gt;타입 생성자 다형성으로 인한 Scala 확장의 문법적인 영향은 마이너함&lt;/li&gt;
&lt;li&gt;클래스와 타입 알리어스만 형식적인 타입 매개변수를 선언할 수 있었으나 타입 매개변수와 추상 멤버 타입을 포함하기 위해 확장됨&lt;/li&gt;
&lt;li&gt;다음은 추상 타입 생성자 멤버를 사용한 선택적인 형태임&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-scala&#34; data-lang=&#34;scala&#34;&gt;&lt;span class=&#34;k&#34;&gt;trait&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Iterable&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;Container&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;X&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;
	
	&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;filter&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;T&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Boolean&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;Container&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&#34;2-2-improving-iterable&#34;&gt;2.2 Improving Iterable&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;타입 생성자 다형성은 설계 제약사항을 표현하는 데 필수적인 역할을 함&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Iterable의 map, filter, flatMap의 시그너쳐과 구현에 대해 논의함&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;map은 요소를 그 함수에 의해 지정된 요소로 변환함&lt;/li&gt;
&lt;li&gt;filter는 술부인 함수를 해석해서 이를 만족하는 요소만 유지함&lt;/li&gt;
&lt;li&gt;flatMap은 주어진 함수를 적용, 원본 콜렉션의 모든 요소에 대해 요소의 콜렉션을 만들고, 이런 콜렉션 내의 요소들을 수집해서 한 콜렉션으로 만듦 (&lt;a href=&#34;https://raw.github.com/wiki/Netflix/RxJava/images/rx-operators/flatMap.png&#34; target=&#34;_blank&#34;&gt;참고&lt;/a&gt;)
&lt;br /&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;다음은 콜렉션의 반복을 캡슐화한 잘 알려진 Iterator 추상과 쌍으로 고려되는 Builder 추상임&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-scala&#34; data-lang=&#34;scala&#34;&gt;&lt;span class=&#34;k&#34;&gt;trait&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Builder&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;Container&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;X&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;, &lt;span class=&#34;kt&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+=(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;el&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;Unit&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;finalise&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;Container&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;trait&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Iterator&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;next&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;T&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;hasNext&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;Boolean&lt;/span&gt;
	
	&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;foreach&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;op&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;T&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Unit&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;Unit&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;while&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hasNext&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;op&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;next&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;())&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;Builder는 빌드하는 콜렉션을 나타내는 타입 생성자를 추상화함&lt;/li&gt;
&lt;li&gt;&lt;code&gt;+=&lt;/code&gt;  메소드는 콜렉션에 나타나야 하는 순서로 요소를 공급하는데 사용됨&lt;/li&gt;
&lt;li&gt;콜렉션 자체는 &lt;code&gt;finalize&lt;/code&gt;에 반환됨&lt;/li&gt;

&lt;li&gt;&lt;p&gt;예) &lt;code&gt;Builder[List, Int]&lt;/code&gt;는 &lt;code&gt;ListBuffer[Int]&lt;/code&gt;로 생각할 수 있고, 이들 모두 &lt;code&gt;List[Int]&lt;/code&gt;를 만드는데 사용될 수 있음&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;다음은 mapTo/fiilterTo/flatMapTo가 어떻게 좀 더 유연하게 구현될 수 있는지 나타냄&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-scala&#34; data-lang=&#34;scala&#34;&gt;&lt;span class=&#34;k&#34;&gt;trait&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Buildable&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;Context&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;X&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;build&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;Builder&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;Container&lt;/span&gt;, &lt;span class=&#34;kt&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;trait&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Iterable&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
	&lt;span class=&#34;k&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;Container&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;X&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;&amp;lt;:&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Iterable&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;X&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;
	
	&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;elements&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;Iterator&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;
	
	&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;mapTo&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;U&lt;/span&gt;, &lt;span class=&#34;kt&#34;&gt;C&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;X&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]](&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;T&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;U&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;Buildable&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;C&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;])&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;C&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;U&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;val&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;buff&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;build&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;val&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;elems&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;elements&lt;/span&gt;
		
		&lt;span class=&#34;k&#34;&gt;while&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;elems&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hasNext&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
			&lt;span class=&#34;k&#34;&gt;val&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;el&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;elems&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;next&lt;/span&gt;
			&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;el&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;))&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;buff&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;el&lt;/span&gt;
		&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
		
		&lt;span class=&#34;n&#34;&gt;buff&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;finalise&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
	
	&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;filterTo&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;C&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;X&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]](&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;T&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Boolean&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;Buildable&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;C&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;])&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;C&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;val&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;buff&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;build&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;val&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;elems&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;elements&lt;/span&gt;
		
		&lt;span class=&#34;k&#34;&gt;while&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;elems&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hasNext&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
			&lt;span class=&#34;k&#34;&gt;val&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;el&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;elems&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;next&lt;/span&gt;
			&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;el&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;))&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;buff&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;el&lt;/span&gt;
		&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
		
		&lt;span class=&#34;n&#34;&gt;buff&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;finalize&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
	
	&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;flatMapTo&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;U&lt;/span&gt;, &lt;span class=&#34;kt&#34;&gt;C&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;X&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;T&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Iterable&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;U&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;])(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;Buildable&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;C&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;])&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;C&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;U&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;val&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;buff&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;build&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;U&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;
		&lt;span class=&#34;k&#34;&gt;val&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;elems&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;elements&lt;/span&gt;
		
		&lt;span class=&#34;k&#34;&gt;while&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;elems&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hasNext&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
			&lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;elems&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;next&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;elements&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;foreach&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;el&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;buff&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;el&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
		&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
		
		&lt;span class=&#34;n&#34;&gt;buff&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;finalize&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;()&lt;/span&gt;
	&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
	
	&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;map&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;U&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;](&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;T&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;U&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;Buildable&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;Container&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;])&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;Container&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;U&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;=&lt;/span&gt; 
		&lt;span class=&#34;n&#34;&gt;mapTo&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;U&lt;/span&gt;, &lt;span class=&#34;kt&#34;&gt;Container&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;](&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
		
	&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;filter&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;T&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Boolean&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;Buildable&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;Container&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;])&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;Container&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;T&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;=&lt;/span&gt; 
		&lt;span class=&#34;n&#34;&gt;filterTo&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;Container&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;](&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
		
	&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;flatMap&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;U&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;](&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;T&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Container&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;U&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;])(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;Buildable&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;Container&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;])&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;Container&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;U&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;=&lt;/span&gt; 
		&lt;span class=&#34;n&#34;&gt;flatMapTo&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;U&lt;/span&gt;, &lt;span class=&#34;kt&#34;&gt;Container&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;](&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;만들어진 콜렉션과 원본 콜렉션을 디커플링하는 것으로 제네릭화 함 - 이들은 같을 필요가 없음&lt;/li&gt;
&lt;li&gt;콜렉션을 반복하는 것과 콜렉션을 만드는 것은 서로 직교함 (의역: 연관성이 없음)&lt;/li&gt;
&lt;li&gt;즉, 콜렉션의 요소를 반복하기 위해 콜렉션을 빌드할 수 있어야 할 필요는 없음&lt;/li&gt;
&lt;li&gt;mapTo와 같은 좀 더 복잡한 연산의 경우, &lt;code&gt;Buildable[C]&lt;/code&gt;의 인스턴스가 필요함&lt;/li&gt;
&lt;li&gt;따라서, 콜렉션 C를 빌드하는 Iterable의 메소드는 &lt;code&gt;Buildable[C]&lt;/code&gt; 타입의 추가 매개변수를 취함&lt;/li&gt;
&lt;li&gt;섹션 3에서 Scala의 직교적인(orthogonal) 특징이 이 매개변수의 실제 인자를 공급하는데 있어 콜러(caller)를 어떻게 해방시키는지 살펴볼 것임
&lt;br /&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;용어&#34;&gt;용어&lt;/h3&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;국문&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;영문&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;일차 매개변수적 다형성&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;First-order parametric Polymorphism&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;타입 생성자&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Type Constructor&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;타입 생성자 다형성&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Type Constructor Polymorphism&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;타입 매개변수화 클래스&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Type Parametised Class&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;제네럴티&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Generality&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;카인드&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Kind&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;추상 타입 멤버&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Abstract Type Member&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;카인드 안정성&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Kind soundness&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
</content>
      
    </item>
    
    <item>
      <title>Principles of Reactive Programming</title>
      <link>https://ziwon.github.io/post/principles-of-reactive-programming/</link>
      <pubDate>Wed, 22 Jan 2014 11:15:43 +0900</pubDate>
      <author>Aron Yoon</author>
      <guid>https://ziwon.github.io/post/principles-of-reactive-programming/</guid>
      <description></description>
      
      <content>&lt;p&gt;Finally got my certificate for the Coursera &amp;ldquo;Principles of Reactive Programming&amp;rdquo; course. :)
It was rather easy in the beginning, but became more challenging as it
went on. Now where to go?&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;../../coursera_reactive_2014.jpg&#34;/&gt;&lt;/p&gt;
</content>
      
    </item>
    
    <item>
      <title>Lambda Calculus</title>
      <link>https://ziwon.github.io/post/lambda-calculus/</link>
      <pubDate>Tue, 22 Oct 2013 13:03:05 +0900</pubDate>
      <author>Aron Yoon</author>
      <guid>https://ziwon.github.io/post/lambda-calculus/</guid>
      <description></description>
      
      <content>

&lt;p&gt;람다 대수는 결정문제(decision problem)를 풀기 위해, 계산가능성(computability)의 개념을 정의한 수학적 모델로 1936년 &lt;a href=&#34;http://en.wikipedia.org/wiki/Alonzo_Church&#34; target=&#34;_blank&#34;&gt;알로존 처치&lt;/a&gt;(Alonzo Church)가 고안하였다.&lt;/p&gt;

&lt;p&gt;좀 더 구체적으로는 소프트웨어에서 &amp;lsquo;알고리즘이란 무엇인가?&amp;lsquo;를 정의한 클래스(class)나 객체(object)가 아닌 값(function) 중심 언어, 즉 함수형 언어의 계산 모델이다. (같은 해에 처치의 제자였던, &lt;a href=&#34;http://en.wikipedia.org/wiki/Alan_Turing&#34; target=&#34;_blank&#34;&gt;앨런 튜닝&lt;/a&gt;은 튜링 머신의 개념으로 계산 모델을  정의했다. Lisp를 만든 &lt;a href=&#34;http://en.wikipedia.org/wiki/John_McCarthy_(computer_scientist))도 처치의 제자였다고 한다.&#34; target=&#34;_blank&#34;&gt;존 매카시&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://upload.wikimedia.org/wikipedia/en/thumb/a/a6/Alonzo_Church.jpg/220px-Alonzo_Church.jpg&#34; alt=&#34;&#39;알론조 처치&#39;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;람다 대수는 그 자체가 이미 하나의 언어로 많은 함수형 프로그래밍 언어가 람다대수에 기초하고 있다.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;functional language = lambda calcus + sugars (ex. Lisp, ML, Haskell, Scala.. ) [&lt;a href=&#34;http://ropas.snu.ac.kr/~dreameye/PL/slide/PL7.pdf&#34; title=&#34;dreameye님의 람다계산법&#34; target=&#34;_blank&#34;&gt;1&lt;/a&gt;]&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;즉, 우리가 함수를 정의하고 전달하고 반환하는 모든 것들이 람다 대수의 원리를 따르는 계산인 것이다.&lt;/p&gt;

&lt;p&gt;이상 아래의 내용은 &amp;ldquo;A Tutorial Introduction to the Lambda Calculus[&lt;a href=&#34;http://www.inf.fu-berlin.de/lehre/WS03/alpi/lambda.pdf&#34; title=&#34;A Tutorial Introduction to the Lambda Calculus&#34; target=&#34;_blank&#34;&gt;2&lt;/a&gt;]&amp;ldquo;의 내용 중 일부를 중심으로. 필요한 경우 살을 붙여가며, 간략히 요약한 것이다.&lt;/p&gt;

&lt;h3 id=&#34;람다표현식-expression&#34;&gt;람다표현식 (expression)&lt;/h3&gt;

&lt;p&gt;람다 대수에서는 모든 계산 가능한 함수를 람다로 표현할 수 있는데, 람다 표현식(λ expression)은 다음과 같이 재귀적으로 정의된다.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;lt;expression&amp;gt;  := &amp;lt;name&amp;gt; | &amp;lt;function&amp;gt; | &amp;lt;application&amp;gt;
&amp;lt;function&amp;gt;    := λ&amp;lt;name&amp;gt;.&amp;lt;expression&amp;gt;
&amp;lt;application&amp;gt; := &amp;lt;expression&amp;gt; &amp;lt;expression&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;위에서 보다시피, 표현식(expression)은 사상점을 식별하는 변수나 혹은 함수 본문을 정의하고 있는 사상(abstraction)이거나 사상을 특화하는 적용(application)으로 구성된다.&lt;/p&gt;

&lt;p&gt;람다 대수에서 키워드는 \(λ\) 와 \(.\)이다. 표현식을 분명하게 표기하기 위해 괄호를 사용한다. 예를 들어, 표현식 \(E\)는 \((E)\)와 동일하다. 혼란을 피하기 위해 함수의 적용(application)은 왼쪽으로 결합한다. 따라서, 표현식 $$E_1E_2E_3&amp;hellip;E_n$$ 은 아래와 같이 표현식을 적용하며 평가된다. $$(&amp;hellip;((E_1E_2)E_3)&amp;hellip;E_n)$$&lt;/p&gt;

&lt;p&gt;예를 들면, 함수 \(f(x) = x\)은 람다식으로 다음과 같다.&lt;/p&gt;

&lt;p&gt;$$λx.x$$&lt;/p&gt;

&lt;p&gt;위 표현식은 항등함수(identity function)를 정의한다. &lt;code&gt;λ&lt;/code&gt; 표기 다음의 이름은 이 함수 인자의 식별자라 하고, &lt;code&gt;.&lt;/code&gt; 표기 다음의 표현식을 함수 정의의 본문(body)이라고 한다.&lt;/p&gt;

&lt;p&gt;함수는 표현식에 적용될 수 있다. 적용(application)의 예는 다음과 같다.&lt;/p&gt;

&lt;p&gt;$$(λx.x)y$$&lt;/p&gt;

&lt;p&gt;이는 &lt;code&gt;y&lt;/code&gt;에 적용된 항등함수이다. 함수 적용은 함수를 정의하는 본문 안에서 인자의 값 &lt;code&gt;x&lt;/code&gt;를 치환함으로써 (여기서는 &lt;code&gt;y&lt;/code&gt;로) 평가된다. 예를 들면, 다음과 같다.&lt;/p&gt;

&lt;p&gt;$$(λx.x)y = [y/x]x = y$$&lt;/p&gt;

&lt;p&gt;위 변환에서 &lt;code&gt;[y/x]&lt;/code&gt; 표기는 표현식에서 모든 경우의 &lt;code&gt;x&lt;/code&gt;가 &lt;code&gt;y&lt;/code&gt;에 의해 오른쪽으로 치환되는 것을 나타낸다. 그리고, 람다식에서 람다 식별자인 이름은 단순한 플레이스홀더에 지나지 않는다. 따라서, 다음은 동등하다.&lt;/p&gt;

&lt;p&gt;$$(λz.z) ≡ (λy.y) ≡ (λt.t) ≡ (λu.u)$$&lt;/p&gt;

&lt;h3 id=&#34;자유-변수와-종속-변수-free-variable-and-bound-variable&#34;&gt;자유 변수와 종속 변수 (free variable and bound variable)&lt;/h3&gt;

&lt;p&gt;람다 대수에서 사상(abstraction)의 정의에 해당하는 모든 이름은 지역(local)이다. 함수 $λx.x$에서 &lt;code&gt;x&lt;/code&gt;는 &lt;code&gt;x&lt;/code&gt;로 시작하는 정의의 본문 안에 나타나므로 &amp;ldquo;종속된다&amp;rdquo;라고 말한다. &lt;code&gt;λ&lt;/code&gt;로 시작하지 않는 이름을 자유 변수(free variable), 또는 비지역(non-local)이라고 일컫는다.&lt;/p&gt;

&lt;p&gt;예를 들면, 아래의 표현식에서 $$(λx.xy)$$ 에서 변수 &lt;code&gt;x&lt;/code&gt;는 종속되나 &lt;code&gt;y&lt;/code&gt;는 자유롭다. 아래의 표현식에서, $$(λx.x)(λy.yx)$$ &lt;code&gt;x&lt;/code&gt;는 왼쪽에서 첫째 표현식의 본문에서는 첫번째 &lt;code&gt;λ&lt;/code&gt;에 종속된다. 두 번째 표현식의 본문에서 &lt;code&gt;y&lt;/code&gt;는 두 번째 &lt;code&gt;y&lt;/code&gt;에 종속되나 &lt;code&gt;x&lt;/code&gt;는 자유롭다. 두 번째 표현식의 &lt;code&gt;x&lt;/code&gt;가 첫 번째 표현식의 &lt;code&gt;x&lt;/code&gt;에 대해서 완전히 독립적이라는 것은 매우 중요하다.&lt;/p&gt;

&lt;p&gt;표현식에서 변수 &lt;code&gt;&amp;lt;name&amp;gt;&lt;/code&gt;이 다음의 3가지 경우에 해당할 때, 자유 변수라고 한다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;&amp;lt;name&amp;gt;&lt;/code&gt;은 &lt;code&gt;&amp;lt;name&amp;gt;&lt;/code&gt;의 자유 변수이다.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;&amp;lt;name&amp;gt;&lt;/code&gt;은 &lt;code&gt;λ&amp;lt;name1&amp;gt;&lt;/code&gt;의 자유 변수이다. (단, 식별자 &lt;code&gt;&amp;lt;name&amp;gt;&lt;/code&gt;이 &lt;code&gt;&amp;lt;name1&amp;gt;&lt;/code&gt;과 다른 &lt;code&gt;&amp;lt;exp&amp;gt;&lt;/code&gt;이고, &lt;code&gt;&amp;lt;name&amp;gt;&lt;/code&gt;이 &lt;code&gt;&amp;lt;exp&amp;gt;&lt;/code&gt;의 자유 변수일 때)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;&amp;lt;name&amp;gt;&lt;/code&gt;은 &lt;code&gt;E1E2&lt;/code&gt;의 자유 변수이다. (단, &lt;code&gt;E1&lt;/code&gt;의 자유 변수이거나 혹은 &lt;code&gt;E2&lt;/code&gt;의 자유 변수일때)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;그리고 다음의 두 가지 경우에 한해서 &lt;code&gt;&amp;lt;name&amp;gt;&lt;/code&gt; 변수를 종속 변수라고 한다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;&amp;lt;name&amp;gt;&lt;/code&gt;은 &lt;code&gt;λ&amp;lt;name1&amp;gt;&lt;/code&gt;의 종속 변수이다. (단, 식별자 &lt;code&gt;&amp;lt;name&amp;gt;&lt;/code&gt;이 &lt;code&gt;&amp;lt;name1&amp;gt;&lt;/code&gt;과 같고 &lt;code&gt;&amp;lt;exp&amp;gt;&lt;/code&gt;이고, &lt;code&gt;&amp;lt;name&amp;gt;&lt;/code&gt;이 &lt;code&gt;&amp;lt;exp&amp;gt;&lt;/code&gt;의 종속 변수일 때)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;&amp;lt;name&amp;gt;&lt;/code&gt;은 &lt;code&gt;E1E2&lt;/code&gt;의 종속 변수이다. (단, &lt;code&gt;E1&lt;/code&gt;의 종속 변수이거나 혹은 &lt;code&gt;E2&lt;/code&gt;의 종속 변수일때)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;이를 수식화하면, 람다 표현식 &lt;code&gt;E&lt;/code&gt;의 자유 변수 집합 &lt;code&gt;M&lt;/code&gt;은 &lt;code&gt;FV(M)&lt;/code&gt;으로 다음과 같다.&lt;/p&gt;

&lt;p&gt;$$FV(x) = {x}$$
$$FV (λx.E) = FV (E)\space/\space{x}$$
$$FV(E1 E2) = FV(E1)∪FV(E2)$$&lt;/p&gt;

&lt;p&gt;한 표현식에서 동일한 식별자가 자유 변수와 종속 변수가 될 수 있음을 주의해야 한다. 아래의 표현식에서,&lt;/p&gt;

&lt;p&gt;$$ (λx.xy)(λy.y) $$&lt;/p&gt;

&lt;p&gt;첫 번째 &lt;code&gt;y&lt;/code&gt;는 왼쪽 방향의 괄호로 묶인 하위 표현식에서는 자유 변수이다. 그러나 오른쪽 방향의 하위 표현식에서는 종속 변수이다.&lt;/p&gt;

&lt;p&gt;자유 변수가 없는 표현식을 닫혀 있다(closed)라고 한다. 닫힌 람다 표현식(Closed lambda expression)을 컴비네이터(combinator)라고도 한다.&lt;/p&gt;

&lt;h3 id=&#34;치환-substitutions&#34;&gt;치환 (Substitutions)&lt;/h3&gt;

&lt;p&gt;함수를 적용할 때마다, 전체 함수 정의를 쓰고 다음에 이를 평가한다. 그러나 단순하게 표기하기 위해 대문자, 숫자 그리고 어떤 함수 정의와 동치로 기호를 사용한다. 예를 들면, 항등함수는 {% m %} (λx.x) {% em %}의 동치로 {% m %} I {% em %} 기호로 표기한다.&lt;/p&gt;

&lt;p&gt;자신에 적용된 항등 함수의 적용은 다음과 같다.&lt;/p&gt;

&lt;p&gt;$$ II ≡ (λx.x)(λx.x) $$&lt;/p&gt;

&lt;p&gt;이 표현식에서 괄호로 묶인 첫 번째 표현식의 본문에 있는 첫 번째 &lt;code&gt;x&lt;/code&gt;는 두 번째 표현식 본문의 &lt;code&gt;x&lt;/code&gt;와 별개의 것이다. 사실, 우리는 위 표현식을 아래와 같이 쓸 수 있다.&lt;/p&gt;

&lt;p&gt;$$ II ≡ (λx.x)(λz.z) $$&lt;/p&gt;

&lt;p&gt;그러므로, 자신에 적용된 항등 함수&lt;/p&gt;

&lt;p&gt;$$ II ≡ (λx.x)(λz.z) $$&lt;/p&gt;

&lt;p&gt;는 다음의 결과를 따르게 된다.&lt;/p&gt;

&lt;p&gt;$$ [λz.z/x]x = λz.z ≡ I $$&lt;/p&gt;

&lt;p&gt;즉, 또 항등함수이다.&lt;/p&gt;

&lt;p&gt;치환을 수행할 때는 식별자의 자유 변수 사건이 종속 변수 사건과 뒤섞이지 않도록 주의해야 한다. 다음 표현식에서&lt;/p&gt;

&lt;p&gt;$$ (λx.(λy.xy))y $$&lt;/p&gt;

&lt;p&gt;(괄호 밖의) 오른쪽 &lt;code&gt;y&lt;/code&gt;는 자유 변수인 반면, 왼쪽에 있는 함수의 &lt;code&gt;y&lt;/code&gt;는 종속 변수이다. 부정확한 치환으로 두 식별자를 합치면 잘못된 결과를 얻는다.&lt;/p&gt;

&lt;p&gt;$$ (λy.yy) $$&lt;/p&gt;

&lt;p&gt;단순히 종속 변수 &lt;code&gt;y&lt;/code&gt;를 &lt;code&gt;t&lt;/code&gt;로 변경하면, 정확한 치환에 의해 완전히 다른 결과를 얻는다.&lt;/p&gt;

&lt;p&gt;$$ (λx.(λt.xt))y = (λt.yt) $$&lt;/p&gt;

&lt;p&gt;&lt;code&gt;E&lt;/code&gt;를 함수 &lt;code&gt;λx.&amp;lt;exp&amp;gt;&lt;/code&gt;에 적용할 경우, &lt;code&gt;&amp;lt;exp&amp;gt;&lt;/code&gt;의 모든 자유 변수 &lt;code&gt;x&lt;/code&gt;는 &lt;code&gt;E&lt;/code&gt;로 치환한다. 표현식에서 종속변수가 &lt;code&gt;E&lt;/code&gt;의 자유변수로 치환될 경우, 치환하기 전에 종속 변수를 새이름으로 변경한다. 예를 들면, 아래의 표현식에서&lt;/p&gt;

&lt;p&gt;$$ (λx.(λy.(x(λx.xy))))y $$&lt;/p&gt;

&lt;p&gt;인자 &lt;code&gt;x&lt;/code&gt;는 &lt;code&gt;y&lt;/code&gt;로 결합시키는데, 함수 본문에서는 첫 번째 &lt;code&gt;x&lt;/code&gt;만이 자유 변수이고 치환될 수 있다. 그래도 치환을 하기 전에 변수 &lt;code&gt;y&lt;/code&gt;의 종속 변수가 자유 변수의 경우와 섞이지 않도록 이름을 변경하자.&lt;/p&gt;

&lt;p&gt;$$ [y/x]λt.(x(λx.xt))) = (λt.(y(λx.xt))) $$&lt;/p&gt;

&lt;h3 id=&#34;call-by-value-call-by-name-call-by-need&#34;&gt;call by value, call by name, call by need&lt;/h3&gt;

&lt;p&gt;표현식을 평가할 때, 안쪽에서 바깥쪽으로 평가하는 전략을 &lt;strong&gt;Application order&lt;/strong&gt; 라고 하며, &lt;strong&gt;call by value&lt;/strong&gt; 이라고 알려져 있다. 예를 들면, 다음과 같다.&lt;/p&gt;

&lt;p&gt;$$ (λx.x^2(λx.(x+2)\space2))) → (λx.x^2(2+2)) → (λx.x^2(4)) → 4^2 → 16 $$&lt;/p&gt;

&lt;p&gt;반면에, 바깥쪽에서 안쪽으로 평가하는 전략을 &lt;strong&gt;Normal order&lt;/strong&gt; 라고 하며 이는 &lt;strong&gt;call by name&lt;/strong&gt; 이라고 알려져 있다. 예를 들면, 다음과 같다.&lt;/p&gt;

&lt;p&gt;$$ (λx.x^2(λx.(x+2)\space2)) → (λx.(x+2)\space2)^2 → (2+2)^2 → 4^2 → 16 $$&lt;/p&gt;

&lt;p&gt;위에서 보다시피, Normal order는 인자의 평가를 필요할 때까지 지연시키기 때문에 Normal order를 &lt;strong&gt;지연 평가(lazy evaluation)&lt;/strong&gt; 라고 부른다. (※. SICP 참고[&lt;a href=&#34;http://mitpress.mit.edu/sicp/full-text/sicp/book/node85.html&#34; target=&#34;_blank&#34;&gt;3&lt;/a&gt;])&lt;/p&gt;

&lt;p&gt;위키 정의를 따르면, ** call by need ** 은 아래와 같이 call by name의 최적화된 형태이다. 매번 call by name이 발생할 경우, 함수 본문은 동일하기 때문에 매번 평가할 필요가 없다. 따라서, call by need 에서는 중복적인 연산을 피하기 위해 cache 형태로 값을 저장하여 최초에 한번만 평가한다.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Call-by-need is a memoized version of call-by-name where, if the function argument is evaluated, that value is stored for subsequent uses [&lt;a href=&#34;http://en.wikipedia.org/wiki/Evaluation_strategy#Call_by_need&#34; target=&#34;_blank&#34;&gt;4&lt;/a&gt;]&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h4 id=&#34;lazy-evaluation&#34;&gt;Lazy evaluation&lt;/h4&gt;

&lt;p&gt;어떨 때는 *lazy*를 call by name과 call by need를 모두 지칭하지만, 어떨 때는 call by need만을 지칭하기도 한다. 특히, Haskell에서 Lazy evaluation은 기술적으로 non-strict와 sharing, 즉 call by need를 뜻한다.[&lt;a href=&#34;http://www.haskell.org/haskellwiki/Lazy_evaluation&#34; target=&#34;_blank&#34;&gt;5&lt;/a&gt;]&lt;/p&gt;

&lt;p&gt;이러한 충돌은 논문에서도 살펴볼 수 있다. 어떤 이는 call by name을 &lt;code&gt;lazy&lt;/code&gt;라고, 어떤 이는 call by need를 &lt;code&gt;lazy&lt;/code&gt;라고 지칭한다.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;예를 들면, Abramsky의 논문 &amp;lsquo;The Lazy Lambda Calculus (1990)&amp;lsquo;에서는 &amp;lsquo;call by name&amp;rsquo;을 &amp;lsquo;lazy&amp;rsquo;라고 칭하고 있다. 반면에, Odersky 교수가 참여한 논문 &amp;lsquo;A Call-By-Need Lambda Calculus (1995)&amp;lsquo;에서는 Abramsky의 논문에서의 &amp;lsquo;lazy&amp;rsquo;라는 표현과 충돌을 피하기 위해 &amp;lsquo;call by need&amp;rsquo;라고 표현하고 있다. [&lt;a href=&#34;http://lampwww.epfl.ch/~odersky/papers/popl95.ps.gz&#34; title=&#34;A Call-By-Need Lambda Calculus&#34; target=&#34;_blank&#34;&gt;6&lt;/a&gt;]&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Odersky 논문에서 보듯, 람다 대수를 이용한 프로그래밍 언어에 있어 &amp;lsquo;call by need&amp;rsquo;는 컴파일러 성능과 직결된 중요한 기능이기 때문에 lazy evaluation을 sharing, caching, memoziation 등의 최적화 기법과 연관짓게 된다. 그러나, 일반적으로 표현식이 그 값이 필요할 때까지 평가되지 않는 것을 &amp;lsquo;lazy evaluation&amp;rsquo; 이라고 말하므로 call by name과 call by need 모두 이에 해당한다.&lt;/p&gt;

&lt;p&gt;중요한 것은 call by value, call by name, call by need의 차이를 아는 것이다.&lt;/p&gt;

&lt;h3 id=&#34;산술-arithmetic&#34;&gt;산술 (Arithmetic)&lt;/h3&gt;

&lt;p&gt;우리는 프로그래밍 언어에서 산술적인 계산을 할 수 있어야 한다고 기대한다. 람다 대수에서 숫자는 &lt;code&gt;zero&lt;/code&gt;에서 시작해서 &lt;code&gt;suc(zero)&lt;/code&gt;라 쓰고 1을, &lt;code&gt;suc(suc(zeo))&lt;/code&gt;라 쓰고 2를, 그리고 기타등등 이런 식으로 표현한다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;zero&lt;/code&gt;는 다음과 같이 정의될 수 있다.&lt;/p&gt;

&lt;p&gt;$$ λs.(λz.z) $$&lt;/p&gt;

&lt;p&gt;이는 &lt;code&gt;s&lt;/code&gt;와 &lt;code&gt;z&lt;/code&gt; 두 개의 인자를 지닌 함수이다. 하나 이상의 인자를 지닌 표현식을 다음과 같이 축약한다.&lt;/p&gt;

&lt;p&gt;$$ λsz.z $$&lt;/p&gt;

&lt;p&gt;즉, &lt;code&gt;s&lt;/code&gt;는 평가시 치환되는 첫 번째 인자이고, &lt;code&gt;z&lt;/code&gt;는 두 번째 인자이다. 이 표기를 사용해 자연수는 다음과 같이 정의된다.&lt;/p&gt;

&lt;p&gt;$$ 1 ≡ λsz.s(z) $$
$$ 2 ≡ λsz.s(s(z)) $$
$$ 3 ≡ λsz.s(s(s(z))) $$&lt;/p&gt;

&lt;p&gt;따라서, 처치의 자연수는 &lt;code&gt;n&lt;/code&gt;에 대응되는 함수를 &lt;code&gt;n&lt;/code&gt;회 반복해서 실행한다.&lt;/p&gt;

&lt;p&gt;$$ n ≡ λsz.s^n(z) $$&lt;/p&gt;

&lt;p&gt;흥미로운 것은 계승자 함수이다. &lt;code&gt;y&lt;/code&gt;의 추가적인 적용으로 자연수 &lt;code&gt;y&lt;/code&gt;를 입력받아 &lt;code&gt;y + 1&lt;/code&gt;을 반환하는 계승자 함수(successor)를 다음과 같이 정의할 수 있다.&lt;/p&gt;

&lt;p&gt;$$ S ≡ λwyx.y(wyx) $$&lt;/p&gt;

&lt;p&gt;계승자 함수에 &lt;code&gt;zero&lt;/code&gt;를 적용하면, 다음을 도출한다.&lt;/p&gt;

&lt;p&gt;$$ S0 ≡ (λwyx.y(wyx))(λsz.z) $$&lt;/p&gt;

&lt;p&gt;첫 번째 표현식 본문에 &lt;code&gt;w&lt;/code&gt;를 &lt;code&gt;(λsz.z)&lt;/code&gt;로 치환하면 자연수 1에 대응된다.&lt;/p&gt;

&lt;p&gt;$$ λyx.y((λsz.z)yx) = λyx.y((λz.z)x) = λyx.y(x) ≡ 1 $$&lt;/p&gt;

&lt;p&gt;계승자 함수에 &lt;code&gt;1&lt;/code&gt;를 적용하면, 자연수 2에 대응된다.&lt;/p&gt;

&lt;p&gt;$$ S1 ≡ (λwyx.y(wyx))(λsz.s(z)) = λyx.y((λsz.s(z))yx) = λyx.y(y(x)) ≡ 2 $$&lt;/p&gt;

&lt;p&gt;(이하 중략)&lt;/p&gt;

&lt;p&gt;이상, 람다 대수로 자연수와 그 연산을 표현하는 것을 처치 부호화(Church encoding)라고 한다.[&lt;a href=&#34;http://en.wikipedia.org/wiki/Church_encoding&#34; title=&#34;Church encoding&#34; target=&#34;_blank&#34;&gt;7&lt;/a&gt;]&lt;/p&gt;

&lt;h3 id=&#34;결론&#34;&gt;결론&lt;/h3&gt;

&lt;p&gt;이상, 람다계산법에 대해 간략히 살펴보았다. 짧게나마 살펴보니, 람다계산법을 공부할수록 쉽게 함수형 프로그래밍의 원리를 이해할 수 있을 것 같다.&lt;/p&gt;
</content>
      
    </item>
    
  </channel>
</rss>