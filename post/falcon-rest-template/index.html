<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"  lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1"/>

<title>Falcon REST API | 人生は儚く短い。</title>



<link href="https://ziwon.github.io/index.xml" rel="alternate" type="application/rss+xml" title="人生は儚く短い。" />

<link rel="stylesheet" href="/css/style.css"/><link rel='stylesheet' href='https://ziwon.github.io/css/custom.css'><link rel='stylesheet' href='https://ziwon.github.io/css/syntax.css'><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">

<link rel=“stylesheet” type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/styles/hybrid.min.css"/>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/languages/go.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/languages/rust.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/languages/scala.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">
</head>
<body>

<section class="section">
  <div class="container">
    <nav class="nav">
      <div class="nav-left">
        <a class="nav-item" href="https://ziwon.github.io/">
          <h1 class="title is-4">人生は儚く短い。</h1>
        </a>
      </div>
      <div class="nav-right">
        <nav class="nav-item level is-mobile"><a class="level-item" aria-label="twitter" href='https://twitter.com/theluno'
            target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"/>
    
  </svg></i>
            </span>
          </a><a class="level-item" aria-label="github" href='https://github.com/ziwon'
            target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"/>
    
  </svg></i>
            </span>
          </a><a class="level-item" aria-label="email" href='mailto:yngpil.yoon@gmail.com'
            target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
    <polyline points="22,6 12,13 2,6"/>
    
  </svg></i>
            </span>
          </a><a class="level-item" aria-label="instagram" href='https://instagram.com/ziwon.y'
            target='_blank' rel='noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <rect x="2" y="2" width="20" height="20" rx="5" ry="5"/>
    <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/>
    <line x1="17.5" y1="6.5" x2="17.5" y2="6.5"/>
    
  </svg></i>
            </span>
          </a></nav>
      </div>
    </nav>

    <nav class="nav">
      

      
    </nav>

  </div>
</section>
<section class="section">
  <div class="container">
    <div class="subtitle tags is-6 is-pulled-right">
      
      
<a class="subtitle is-6" href="/tags/rest">#rest</a>



  
  | <a class="subtitle is-6" href="/tags/python">#python</a>
  
  | <a class="subtitle is-6" href="/tags/falcon">#falcon</a>
  
  | <a class="subtitle is-6" href="/tags/api">#api</a>
  

      
    </div>
    <h2 class="subtitle is-6">September 4, 2015</h2>
    <h1 class="title">Falcon REST API</h1>
    
    <div class="content">
      <p>Cloud API와 백엔드 개발에 경량화된 파이썬 프레임워크인 <a href="http://falconframework.org" target="_blank">Falcon</a>를 이용해 간단한 REST API 템플릿을 만들어 보았다.</p>

<p><a href="https://github.com/patriz/falcon-rest-api" target="_blank">https://github.com/patriz/falcon-rest-api</a></p>

<p>개발하는 느낌은 Flask와 비슷한데 (음.. Flask와 뭐가 다르지?) 미들웨어, 후킹 데코레이션 등을 이용해 HTTP 요청과 응답에 대해 체이닝 처리를 좀 더 직관적으로 할 수 있다. 성능이 Flask보다 좀 더 빠른 것으로 알려져 있다. Rackspace에서 밀고있는(?) Cloud API 전용 프레임워크인데, 최신 릴리즈 버전은 아직 0.3이다. 심플하고 미니멀한 걸 좋아한다면 해볼만하다.</p>

<p>문서에도 나와있지만, Cython을 이용하면 약 20% 정도의 성능효과를 볼 수 있다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">pip install --upgrade cython falcon</code></pre></div>
<p>다음은 Go와 성능비교이다.</p>

<p><strong>falcon rest api with gunicorn (-w 9 -k gevent)</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">wrk -t10 -c100 -d30s http://localhost:5000
Running 30s test @ http://localhost:5000
  <span style="color:#ae81ff">10</span> threads and <span style="color:#ae81ff">100</span> connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency   <span style="color:#ae81ff">221</span>.79ms  <span style="color:#ae81ff">414</span>.03ms   <span style="color:#ae81ff">2</span>.00s    <span style="color:#ae81ff">85</span>.43%
    Req/Sec   <span style="color:#ae81ff">755</span>.94    <span style="color:#ae81ff">486</span>.41     <span style="color:#ae81ff">2</span>.77k    <span style="color:#ae81ff">64</span>.26%
  <span style="color:#ae81ff">139452</span> requests in <span style="color:#ae81ff">30</span>.08s, <span style="color:#ae81ff">32</span>.98MB read
  Socket errors: connect <span style="color:#ae81ff">0</span>, read <span style="color:#ae81ff">0</span>, write <span style="color:#ae81ff">0</span>, timeout <span style="color:#ae81ff">389</span>
Requests/sec:   <span style="color:#ae81ff">4636</span>.13
Transfer/sec:      <span style="color:#ae81ff">1</span>.10MB</code></pre></div>
<p><strong>sample http server with gogin only</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">wrk -t10 -c100 -d30s http://localhost:8080
Running 30s test @ http://localhost:8080
  <span style="color:#ae81ff">10</span> threads and <span style="color:#ae81ff">100</span> connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency     <span style="color:#ae81ff">6</span>.65ms    <span style="color:#ae81ff">6</span>.50ms  <span style="color:#ae81ff">76</span>.68ms   <span style="color:#ae81ff">76</span>.00%
    Req/Sec     <span style="color:#ae81ff">1</span>.83k   <span style="color:#ae81ff">402</span>.97     <span style="color:#ae81ff">5</span>.40k    <span style="color:#ae81ff">74</span>.30%
  <span style="color:#ae81ff">547412</span> requests in <span style="color:#ae81ff">30</span>.08s, <span style="color:#ae81ff">92</span>.93MB read
Requests/sec:  <span style="color:#ae81ff">18199</span>.96
Transfer/sec:      <span style="color:#ae81ff">3</span>.09MB</code></pre></div>
<p>참고로 테스트 하드웨어 장비는 다음과 같다. (구린 내 아이맥ㅠ)</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">Model Name:	iMac
Model Identifier:	iMac11,3
Processor Name:	Intel Core i5
Processor Speed:	<span style="color:#ae81ff">2</span>.8 GHz
Number of Processors:	<span style="color:#ae81ff">1</span>
Total Number of Cores:	<span style="color:#ae81ff">4</span>
L2 Cache <span style="color:#f92672">(</span>per Core<span style="color:#f92672">)</span>:	<span style="color:#ae81ff">256</span> KB
L3 Cache:	<span style="color:#ae81ff">8</span> MB
Memory:	<span style="color:#ae81ff">12</span> GB
Processor Interconnect Speed:	<span style="color:#ae81ff">4</span>.8 GT/s
Boot ROM Version:	IM112.0057.B01
SMC Version <span style="color:#f92672">(</span>system<span style="color:#f92672">)</span>:	<span style="color:#ae81ff">1</span>.59f2</code></pre></div>
      
      <div class="related">
</div>
      
    </div>
    

    
    <nav class="post-nav">
        
        <a class="prev" href="/post/effective-go-concurrency/">
            &lt; <span class="prev-text nav-default">[번역] Effective Go: Concurrency</span>
                <span class="prev-text nav-mobile"></span>
        </a>
        
        <a class="next" href="/post/generics-of-a-higher-kind/">
            <span class="next-text nav-default">Generics of a Higher Kind</span>
            <span class="next-text nav-mobile"></span>
            >
        </a>
    </nav>

  </div>
 
</section>

<section class="section">
  <div class="container">
    <aside><div id="disqus_thread"></div></aside>
  
    <div id="show_comments"><a id="load_comments" class="button is-link">Load comments</a></div>
  
    <script type="text/javascript">
      var disqus_shortname = 'ziwon';
      function disqus() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      }
  
      
      var hash = window.location.hash.substr(1);
      if ((hash.length > 8) && (hash.substring(0, 8) === "comment-")) {
        disqus();
        document.getElementById("show_comments").style.display = "none";
      } else {
        document.getElementById('load_comments').onclick = function() {
          disqus();
          document.getElementById("show_comments").style.display = "none";
        };
      }
  

    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
  </div>
</section>


<section class="section">
  <div class="container has-text-centered">
    <p><a href="https://github.com/ziwon">Philbert Yoon</a></p>
    
      <p>Powered by <a href="https://gohugo.io/">Hugo</a> &amp; <a href="https://github.com/ribice/kiss">Kiss</a>.</p>
    
  </div>
</section>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-129419926-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>




</body>
</html>

